"use strict";(self.webpackChunkupward=self.webpackChunkupward||[]).push([[8185],{37209:function(e,n,t){t.d(n,{sT:function(){return c},lq:function(){return l},oi:function(){return a}});var o=t(1413),i=t(72791),r=t(80184);function a(e){var n=e.input,t=e.label,a=e.inputRef,l=e.labelRef,c=e.icon,u=e.position,d=void 0===u?"start":u,s=(0,i.useId)();return(0,r.jsxs)("div",{className:"text-input",style:{display:"flex",alignItems:"center"},children:[(0,r.jsx)("label",(0,o.Z)((0,o.Z)({},t),{},{htmlFor:s,ref:l,children:t.title})),(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",height:"18px",width:"100%"},className:"input-container",children:["start"===d&&c&&(0,r.jsx)("span",{style:{marginRight:"4px"},children:c}),(0,r.jsx)("input",(0,o.Z)((0,o.Z)({ref:a,id:s},n),{},{style:(0,o.Z)({height:"18px"},n.style)})),"end"===d&&c&&(0,r.jsx)("span",{style:{marginLeft:"4px"},children:c})]})]})}function l(e){var n=e.select,t=e.label,a=e.selectRef,l=e.datasource,c=void 0===l?[]:l,u=e.values,d=void 0===u?"":u,s=e.display,f=void 0===s?"":s,h=(0,i.useId)();return(0,r.jsxs)("div",{style:{display:"flex",height:"18px",alignItems:"center"},children:[(0,r.jsx)("label",(0,o.Z)((0,o.Z)({},t),{},{htmlFor:h,children:t.title})),(0,r.jsx)("select",(0,o.Z)((0,o.Z)({},n),{},{ref:a,className:"select",style:(0,o.Z)({height:"18px"},n.style),children:c.map((function(e,n){return(0,r.jsx)("option",{value:e[d],children:e[f]},n)}))}))]})}function c(e){var n=e.buttonRetRef,t=e.button,i=e.tooltipText,a=void 0===i?"":i,l=e.children,c=e.disabled,u=void 0!==c&&c;return(0,r.jsxs)("div",{className:"tooltip",children:[(0,r.jsx)("button",(0,o.Z)((0,o.Z)({disabled:u},t),{},{ref:n,style:(0,o.Z)((0,o.Z)({},t.style),{},{background:u?"#f1f1f1":"transparent"}),className:"tooltip-button",children:l})),!u&&(0,r.jsx)("span",{className:"tooltip-text",children:a})]})}},93346:function(e,n,t){t.d(n,{Z:function(){return l}});var o=t(93433),i=t(29439),r=t(72791),a=t(80184),l=(0,r.forwardRef)((function(e,n){var t=e.rows,l=e.column,c=e.width,u=e.height,d=e.dataReadOnly,s=e.onSelectionChange,f=void 0===s?function(){}:s,h=e.isMultipleSelect,p=void 0!==h&&h,m=e.freeze,x=void 0!==m&&m,v=e.onKeyDown,k=e.inputsearchselector,g=void 0===k?".search-input-up-on-key-down":k,y=e.isRowSelectable,C=void 0===y||y,D=e.unSelectable,w=void 0===D?function(){return!1}:D,N=e.writeFooter,b=void 0===N?function(){return null}:N,S=e.isLoading,_=void 0!==S&&S,E=(0,r.useRef)(f),I=(0,r.useRef)(v),Z=(0,r.useState)(l.filter((function(e){return!e.hide}))),j=(0,i.Z)(Z,2),R=j[0],A=j[1],P=(0,r.useState)(null),L=(0,i.Z)(P,2),M=L[0],F=L[1],B=(0,r.useState)([0]),T=(0,i.Z)(B,2),U=T[0],z=T[1],K=(0,r.useState)(0),O=(0,i.Z)(K,2),q=O[0],W=O[1],V=(0,r.useState)([]),G=(0,i.Z)(V,2),Y=G[0],J=G[1],Q=(0,r.useRef)(null),H=function(e,n){n.preventDefault(),n.stopPropagation();var t=n.clientX,i=R[e].width,r=function(n){var r=i+(n.clientX-t),a=(0,o.Z)(R);a[e].width=r>50?r:50,A(a)};document.addEventListener("mousemove",r),document.addEventListener("mouseup",(function e(){document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",e)}))},X=function(e){F(e)},$=function(){F(null)};return(0,r.useImperativeHandle)(n,(function(){return{resetTableSelected:function(){if(z([0]),W(0),J([]),t.length>0){var e=document.querySelector(".row-".concat(0));null===e||void 0===e||e.scrollIntoView({block:"end",behavior:"smooth"})}},getSelectedRows:function(){return t.filter((function(e,n){return Y.includes(n)}))}}})),(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"center"},onKeyDown:function(e){if("Enter"===e.key||"NumpadEnter"===e.key){if(e.preventDefault(),!C)return;var n=[],i=U[U.length-1];n=p?[].concat((0,o.Z)(Y),(0,o.Z)(U)):[i];var r=t[n[n.length-1]];if(w(r))return;if(Y.includes(i)&&!x)return n=Y.filter((function(e){return e!==i})),J(n),void E.current([]);J(n),E.current([r])}else if("ArrowDown"===e.key)e.preventDefault(),z((function(e){var n;if(null===e[e.length-1])return[0];if(e[e.length-1]>=t.length-1)return[t.length-1];var o=e[e.length-1]+1,i=document.querySelector(".row-".concat(o));return null===i||void 0===i||null===(n=i.querySelector("input"))||void 0===n||n.focus(),null===i||void 0===i||i.scrollIntoView({block:"end",behavior:"smooth"}),[o]}));else if("ArrowUp"===e.key){if(e.preventDefault(),0===U[U.length-1]){var a=document.querySelector(g);if(a&&"INPUT"===a.tagName)null===a||void 0===a||a.focus();else if(a&&"DIV"===a.tagName){var l=document.querySelector("".concat(g," input"));null===l||void 0===l||l.focus()}}z((function(e){var n;if(0===e[e.length-1])return[0];var t=e[e.length-1]-1,o=document.querySelector(".row-".concat(t));return null===o||void 0===o||o.scrollIntoView({block:"end",behavior:"smooth"}),null===o||void 0===o||null===(n=o.querySelector("input"))||void 0===n||n.focus(),[t]}))}else if("Delete"===e.key||"Backspace"===e.key){if(!C)return;var c=t.filter((function(e,n){return U.includes(n)}));null!==I&&void 0!==I&&I.current&&(null===I||void 0===I||I.current(c,e.key))}},children:[(0,a.jsxs)("div",{className:"table-frame-color",children:[(0,a.jsx)("div",{style:{display:"flex",flexDirection:"column",width:"".concat(c-10,"px        "),height:"".concat(u-135,"px")},className:"table-frame",children:(0,a.jsx)("div",{className:"table-panel",children:(0,a.jsxs)("div",{ref:Q,className:"grid-container ",tabIndex:-1,children:[(0,a.jsx)("div",{className:"grid-row grid-header",style:{position:"sticky",zIndex:"10",top:"-1px",background:"white"},children:R.map((function(e,n){return(0,a.jsxs)("div",{className:"grid-cell header-cell ".concat(M===n?"highlight-column":"","\n                      \n                      "),style:{width:e.width,height:"20px",textAlign:"number"===e.type?"center":"left"},children:[(0,a.jsx)("input",{style:{fontWeight:"bold"},defaultValue:e.headerName,readOnly:!0,onChange:function(e){}}),(0,a.jsx)("div",{className:"resize-handle",onMouseDown:function(e){return H(n,e)},onMouseEnter:function(e){e.preventDefault(),X(n)},onMouseLeave:function(e){e.preventDefault(),$()}})]},n)}))}),t.map((function(e,n){return(0,a.jsx)("div",{className:"grid-row row-".concat(n),onClick:function(e){return function(e,n){if(p)if(n.shiftKey&&null!==q){for(var i=Math.min(q,e),r=Math.max(q,e),a=[],l=i;l<=r;l++)U.includes(l)||a.push(l);var c=[].concat((0,o.Z)(Y),a);z([].concat((0,o.Z)(U),a));var u=function(e){var n=e.map((function(e,n){return w(e)?null:{idx:n,data:e}})).filter((function(e){return null!==e})),t=n.map((function(e){return e.data}));return{newSelectedRowsFiltered:n.map((function(e){return e.idx})),data:t}}(t.filter((function(e,n){return c.includes(n)}))),d=u.newSelectedRowsFiltered,s=u.data;J(d),E.current(s)}else if(n.ctrlKey||n.metaKey)if(U.includes(e)&&!x){z(U.filter((function(n){return n!==e}))),J((function(n){return n=n.filter((function(n){return n!==e})),n}));var f=Y.filter((function(n){return n!==e})),h=t.filter((function(e,n){return f.includes(n)}));J(f),E.current(h)}else{z([].concat((0,o.Z)(U),[e])),J((function(n){return n.push(e),n}));var m=[].concat((0,o.Z)(Y),[e]),v=t.filter((function(e,n){return m.includes(n)}));J(m),E.current(v)}else z([e]);else z([e]);W(e)}(n,e)},onDoubleClick:function(e){return function(e,n){var i=t[e];if(!w(i)&&C){var r=[];if(!Y.includes(e)||x){r=p?[].concat((0,o.Z)(Y),[e]):[e],J(r);var a=t.filter((function(e,n){return r.includes(n)}));E.current(a)}else{r=Y.filter((function(n){return n!==e})),J(r);var l=t.filter((function(e,n){return r.includes(n)}));E.current(l)}}}(n)},children:R.map((function(t,o){return(0,a.jsxs)("div",{style:{width:t.width},className:"grid-cell ".concat(M===o?"highlight-column":""),children:[(0,a.jsx)("input",{value:e[t.field],onChange:function(e){},readOnly:d,className:"".concat(U.includes(n)?"selected-row":""," ").concat(Y.includes(n)?"selected-items":"","\n                          ").concat("number"===t.type?"number":"text","\n                          ")}),(0,a.jsx)("div",{className:"resize-handle",onMouseDown:function(e){e.preventDefault(),H(o,e)},onMouseEnter:function(e){e.preventDefault(),X(o)},onMouseLeave:function(e){e.preventDefault(),$()}})]},o)}))},n)}))]})})}),b(t)?(0,a.jsx)(a.Fragment,{children:b(t)}):(0,a.jsxs)("div",{className:"table-panel-footer",children:["Records : ",t.length]})]}),_&&(0,a.jsx)("div",{className:"table-loading",children:(0,a.jsx)("div",{className:"loader",children:(0,a.jsx)("img",{alt:"loader-gif",src:"//image/loading.gif"})})})]})}))},8185:function(e,n,t){t.r(n),t.d(n,{default:function(){return ne},incrementCheckNo:function(){return oe},pdcBanksColumn:function(){return X},pdcColumn:function(){return Q},pdcSearchColumn:function(){return H},reducer:function(){return J},setNewStateValue:function(){return te}});var o=t(93433),i=t(74165),r=t(15861),a=t(29439),l=t(4942),c=t(1413),u=t(72791),d=t(64554),s=t(27391),f=t(36151),h=t(65117),p=t(23786),m=t(68096),x=t(94925),v=t(77196),k=t(63466),g=t(13400),y=t(88447),C=t(20890),D=t(42419),w=t(91933),N=t(21830),b=t.n(N),S=t(53329),_=t(3380),E=t(13784),I=t(91421),Z=t(29823),j=t(99422),R=t(56580),A=t(54164),P=t(39709),L=t(86753),M=t(73518),F=t(64230),B=t(71640),T=t(92562),U=t(58340),z=t(5519),K=t(93346),O=t(37209),q=t(763),W=t(80184),V=function(e){var n,t=e.myAxios,o=e.user,l=e.column,c=e.link,d=e.onSelectionChange,s=e.responseDataKey,f=e.onModalClose,h=void 0===f?function(){}:f,p=(0,u.useId)(),m=(0,u.useRef)(null),x=(0,u.useRef)(null),v=(0,u.useRef)(null),k=(0,u.useState)(!1),g=(0,a.Z)(k,2),y=g[0],C=g[1],D=(0,u.useState)([]),N=(0,a.Z)(D,2),b=N[0],S=N[1],_=(0,w.useMutation)({mutationKey:p,mutationFn:function(e){return(n=n||(0,r.Z)((0,i.Z)().mark((function e(n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get("".concat(null===c||void 0===c?void 0:c.url,"?").concat(null===c||void 0===c?void 0:c.queryUrlName,"=").concat(n.search),{headers:{Authorization:"Bearer ".concat(null===o||void 0===o?void 0:o.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){S(e.data[s])}}),E=_.isLoading,I=_.mutate,Z=(0,q.throttle)((function(e){return function(e){""===e&&I({search:e})}(e)}),500),j=function(){C(!1),h()};return(0,u.useEffect)((function(){var e;y&&v.current&&(null===(e=v.current)||void 0===e||e.focus())}),[y,v]),{Modal:y?(0,W.jsx)("div",{className:"modal-parent",ref:v,tabIndex:-1,onKeyDown:function(e){"Escape"===e.key&&j()},children:(0,W.jsxs)("div",{className:"modal-content",children:[(0,W.jsx)(O.oi,{label:{style:{display:"none"}},input:{className:"search-input-up-on-key-down",type:"text",style:{width:"100%",marginBottom:"20px"},onChange:function(e){e.preventDefault(),Z(e.currentTarget.value)},onKeyDown:function(e){if("Enter"!==e.key&&"NumpadEnter"!==e.key||(e.preventDefault(),I({search:e.target.value})),"ArrowDown"===e.key){e.preventDefault();var n=document.querySelector(".grid-container");console.log(n),n.focus()}}},inputRef:m}),(0,W.jsx)(K.Z,{ref:x,rows:b,column:l.filter((function(e){return!e.hide})),width:460,height:560,dataReadOnly:!0,onSelectionChange:d,isLoading:E}),(0,W.jsx)("button",{className:"close-modal",onClick:j,children:(0,W.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16px",height:"16px",viewBox:"-0.5 0 25 25",fill:"none",children:[(0,W.jsx)("path",{d:"M3 21.32L21 3.32001",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,W.jsx)("path",{d:"M3 3.32001L21 21.32",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})})]})}):null,openModal:function(e){I({search:e}),C(!0),setTimeout((function(){var n;m.current&&(m.current.value=e),null===(n=m.current)||void 0===n||n.focus()}),150)},closeModal:j,isLoading:E}},G={Sub_Ref_No:"",Ref_No:"",PNo:"",IDNo:"",Date:new Date,Name:"",Remarks:"",PDC_Status:"",Deposit_Slip:"",DateDeposit:"",OR_No:"",search:"",pdcMode:"",checkMode:"",sub_account:"",Acronym:""},Y={CheckIdx:"0",BankName:"",BankCode:"",Branch:"",Check_Date:new Date,Check_No:"",Check_Amnt:"",Check_Remarks:"",Check_Count:""},J=function(e,n){return"UPDATE_FIELD"===n.type?(0,c.Z)((0,c.Z)({},e),{},(0,l.Z)({},n.field,n.value)):e},Q=[{field:"Check_No",headerName:"Check No.",width:150},{field:"Check_Date",headerName:"Check Date",width:150},{field:"Check_Amnt",headerName:"Amount",width:150,type:"number"},{field:"BankName",headerName:"Bank",width:300},{field:"Branch",headerName:"Branch",width:200},{field:"Check_Remarks",headerName:"Checked Remarks",width:350},{field:"Deposit_Slip",headerName:"Deposit Slip",width:150},{field:"DateDeposit",headerName:"Date Deposit",width:150},{field:"OR_No",headerName:"OR Num",width:150},{field:"BankCode",headerName:"Bank Code",width:150,hide:!0}],H=[{field:"Date",headerName:"Date Received",width:160},{field:"Ref_No",headerName:"Ref No.",width:160},{field:"Name",headerName:"Name",flex:1}],X=[{field:"Bank_Code",headerName:"Code",width:130},{field:"Bank",headerName:"Bank Name",flex:1}],$="pdc",ee="pdc-search";function ne(){var e,n,t,N,O,q=(0,u.useRef)(null),H=u.useState(null),X=(0,a.Z)(H,2),ne=X[0],ie=X[1],re=Boolean(ne),ae=(0,u.useState)(!1),le=(0,a.Z)(ae,2),ce=le[0],ue=le[1],de=(0,u.useState)([]),se=(0,a.Z)(de,2),fe=se[0],he=se[1],pe=(0,u.useState)([]),me=(0,a.Z)(pe,2),xe=me[0],ve=me[1],ke=(0,u.useState)(!1),ge=(0,a.Z)(ke,2),ye=ge[0],Ce=ge[1],De=(0,u.useState)(!1),we=(0,a.Z)(De,2),Ne=we[0],be=we[1],Se=(0,u.useReducer)(J,G),_e=(0,a.Z)(Se,2),Ee=_e[0],Ie=_e[1],Ze=(0,u.useReducer)(J,Y),je=(0,a.Z)(Ze,2),Re=je[0],Ae=je[1],Pe=(0,u.useContext)(_.V),Le=Pe.myAxios,Me=Pe.user,Fe=(0,u.useRef)(null),Be=(0,u.useRef)(null),Te=(0,u.useRef)(null),Ue=(0,u.useRef)(null),ze=(0,u.useRef)(null),Ke=(0,u.useRef)(null),Oe=(0,u.useRef)(null),qe=(0,u.useRef)(null),We=(0,u.useRef)(null),Ve=(0,u.useRef)(null),Ge=(0,u.useRef)(null),Ye=(0,u.useRef)(null),Je=(0,u.useRef)(null),Qe=(0,w.useQueryClient)(),He=(0,u.useRef)(null),Xe=(0,w.useQuery)({queryKey:"new-ref-number",queryFn:function(){return(e=e||(0,r.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Le.get("/task/accounting/pdc-new-ref-number",{headers:{Authorization:"Bearer ".concat(null===Me||void 0===Me?void 0:Me.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},refetchOnWindowFocus:!1,onSuccess:function(e){var n=e;Ie({type:"UPDATE_FIELD",field:"Ref_No",value:n.data.RefNo[0].pdcID}),Ie({type:"UPDATE_FIELD",field:"Sub_Ref_No",value:n.data.RefNo[0].pdcID})}}),$e=Xe.isLoading,en=Xe.refetch,nn=(0,w.useMutation)({mutationKey:$,mutationFn:function(e){return(n=n||(0,r.Z)((0,i.Z)().mark((function e(n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("update"!==Ee.pdcMode){e.next=5;break}return delete n.mode,e.next=4,Le.post("/task/accounting/update-pdc",n,{headers:{Authorization:"Bearer ".concat(null===Me||void 0===Me?void 0:Me.accessToken)}});case 4:case 8:return e.abrupt("return",e.sent);case 5:return delete n.mode,e.next=8,Le.post("/task/accounting/add-pdc",n,{headers:{Authorization:"Bearer ".concat(null===Me||void 0===Me?void 0:Me.accessToken)}});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){if(e.data.success)return en(),Qe.invalidateQueries(ee),te(Ie,G),ve([]),Ie({type:"UPDATE_FIELD",field:"pdcMode",value:""}),b().fire({position:"center",icon:"success",title:e.data.message,showConfirmButton:!1,timer:1500});b().fire({position:"center",icon:"error",title:e.data.message,showConfirmButton:!1,timer:1500})}}),tn=nn.mutate,on=nn.isLoading,rn=(0,w.useMutation)({mutationKey:$,mutationFn:function(e){return(t=t||(0,r.Z)((0,i.Z)().mark((function e(n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Le.post("/task/accounting/get-search-pdc-check",n,{headers:{Authorization:"Bearer ".concat(null===Me||void 0===Me?void 0:Me.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){return(N=N||(0,r.Z)((0,i.Z)().mark((function e(n){var t,o,a,l,u,d,s,f;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f=function(e,n){return(t=t||(0,r.Z)((0,i.Z)().mark((function e(n,t){var o,r,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=[],r=(0,i.Z)().mark((function e(){var r,l,c,u,d,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n[a],l="".concat(t,"/").concat(r.uniqueFilename),e.next=4,fetch(l);case 4:return c=e.sent,e.next=7,c.blob();case 7:u=e.sent,d=new File([u],r.fileName,{type:r.fileType}),s=new FileReader,o.push(new Promise((function(e,n){s.onload=function(n){e(d)},s.onerror=function(e){n(new Error("Error reading file: "+d.name))},s.readAsDataURL(d)})));case 11:case"end":return e.stop()}}),e)})),a=0;case 3:if(!(a<n.length)){e.next=8;break}return e.delegateYield(r(),"t0",5);case 5:a++,e.next=3;break;case 8:return e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)},null!==n&&void 0!==n&&n.data.success){e.next=3;break}return e.abrupt("return",alert("Error : ".concat(null===n||void 0===n?void 0:n.data.message)));case 3:if(a=(o=n).data.getSearchPDCCheck[0].Ref_No,!o.data.upload[0]){e.next=14;break}return u=JSON.parse(null===(l=o.data.upload[0])||void 0===l?void 0:l.upload),e.next=9,f(u,"".concat("/","pdc/").concat(a));case 9:return d=e.sent,e.next=12,Promise.all(d);case 12:s=e.sent,he(s);case 14:ve(o.data.getSearchPDCCheck.map((function(e,n){return(0,c.Z)((0,c.Z)({},e),{},{CheckIdx:"".concat(n)})}))),Ie({type:"UPDATE_FIELD",field:"Ref_No",value:o.data.getSearchPDCCheck[0].Ref_No}),Ie({type:"UPDATE_FIELD",field:"Name",value:o.data.getSearchPDCCheck[0].Name}),Ie({type:"UPDATE_FIELD",field:"Date",value:o.data.getSearchPDCCheck[0].Date}),Ie({type:"UPDATE_FIELD",field:"PNo",value:o.data.getSearchPDCCheck[0].PNo}),Ie({type:"UPDATE_FIELD",field:"IDNo",value:o.data.getSearchPDCCheck[0].IDNo}),Ie({type:"UPDATE_FIELD",field:"Acronym",value:o.data.getSearchPDCCheck[0].Acronym}),Ie({type:"UPDATE_FIELD",field:"sub_account",value:o.data.getSearchPDCCheck[0].sub_account}),Ie({type:"UPDATE_FIELD",field:"Remarks",value:o.data.getSearchPDCCheck[0].Remarks}),Ie({type:"UPDATE_FIELD",field:"pdcMode",value:"update"});case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}),an=rn.mutate,ln=rn.isLoading,cn=V({myAxios:Le,user:Me,link:{url:"/task/accounting/search-pdc-policy-id",queryUrlName:"searchPdcPolicyIds"},column:[{field:"Type",headerName:"Type",width:130},{field:"IDNo",headerName:"ID No.",width:200},{field:"chassis",headerName:"Chassis No.",width:200,hide:!0},{field:"Name",headerName:"Name",width:350},{field:"ID",headerName:"ID",width:300,hide:!0},{field:"client_id",headerName:"client_id",width:200,hide:!0}],onSelectionChange:function(e){var n,t;e.length>0&&(Ie({type:"UPDATE_FIELD",field:"PNo",value:e[0].IDNo}),Ie({type:"UPDATE_FIELD",field:"IDNo",value:e[0].client_id}),Ie({type:"UPDATE_FIELD",field:"Name",value:null!==(n=e[0].Name)&&void 0!==n?n:""}),Ie({type:"UPDATE_FIELD",field:"Remarks",value:null!==(t=e[0].remarks)&&void 0!==t?t:""}),Ie({type:"UPDATE_FIELD",field:"sub_account",value:e[0].sub_account}),Ie({type:"UPDATE_FIELD",field:"Acronym",value:e[0].Acronym}),dn(),xe.length<=0&&setTimeout((function(){var e;null===(e=Je.current)||void 0===e||e.click()}),100))},responseDataKey:"clientsId"}),un=cn.Modal,dn=cn.closeModal,sn=cn.openModal,fn=cn.isLoading,hn=V({myAxios:Le,user:Me,link:{url:"/task/accounting/search-pdc-banks",queryUrlName:"searchPdcBanks"},column:[{field:"Bank_Code",headerName:"Code",width:100},{field:"Bank",headerName:"Bank Name",width:350}],onSelectionChange:function(e){e.length>0&&(Ae({type:"UPDATE_FIELD",field:"BankName",value:e[0].Bank}),Ae({type:"UPDATE_FIELD",field:"BankCode",value:e[0].Bank_Code}),mn(),Ce(!0),setTimeout((function(){var e;null===(e=qe.current)||void 0===e||e.focus()}),100))},onModalClose:function(){setTimeout((function(){Ce(!0)}),100)},responseDataKey:"pdcBanks"}),pn=hn.Modal,mn=hn.closeModal,xn=hn.openModal,vn=hn.isLoading,kn=V({myAxios:Le,user:Me,column:[{field:"Date",headerName:"Date Received",width:90},{field:"Ref_No",headerName:"Ref No.",width:80},{field:"Name",headerName:"Name",width:320}],link:{url:"/task/accounting/search-pdc",queryUrlName:"searchPDCInput"},onSelectionChange:function(e){var n;e.length>0&&(an({ref_no:e[0].Ref_No}),yn(),Be.current&&(null===(n=Be.current)||void 0===n||n.focus()))},responseDataKey:"searchPDC"}),gn=kn.Modal,yn=kn.closeModal,Cn=kn.openModal,Dn=kn.isLoading,wn=function(e){var n=e.target,t=n.name,o=n.value;Ie({type:"UPDATE_FIELD",field:t,value:o})},Nn=function(e){var n=e.target,t=n.name,o=n.value;Ae({type:"UPDATE_FIELD",field:t,value:o})};var bn=function(e){e.preventDefault(),ue(!1)},Sn=function(e){e.preventDefault(),ue(!0)},_n=function(e){e.preventDefault();var n,t=e.dataTransfer.files,i=Array.from(t),r=[].concat((0,o.Z)(fe),i);if(ue(!1),(0,T.checkFile)(r))return null===(n=Te.current)||void 0===n||n.click(),alert("file is not valid Extention!");he(r)},En=""===Ee.pdcMode,In=window.innerWidth-50,Zn=window.innerHeight-145;return(0,W.jsxs)("div",{style:{width:"100%",height:"100%",flex:1,background:"red",padding:"10px",backgroundColor:"#F8F8FF"},children:[gn,un,pn,(0,W.jsx)(d.Z,{sx:function(e){return(0,l.Z)({display:"flex",alignItems:"center",columnGap:"20px"},e.breakpoints.down("sm"),{flexDirection:"column",alignItems:"flex-start",flex:1,marginBottom:"15px"})},children:(0,W.jsxs)("div",{style:{display:"flex",alignItems:"center",columnGap:"5px",marginBottom:"15px"},children:[Dn?(0,W.jsx)(P.Z,{loading:Dn}):(0,W.jsx)(s.Z,{label:"Search",size:"small",name:"search",value:Ee.search,onChange:wn,onKeyDown:function(e){("Enter"!==e.code&&"NumpadEnter"!==e.code||(e.preventDefault(),Cn(e.target.value)),"ArrowDown"===e.key)&&(e.preventDefault(),document.querySelector(".grid-container").focus())},InputProps:{style:{height:"27px",fontSize:"14px"},inputRef:Be,className:"manok"},sx:{width:"400px",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}}),""===Ee.pdcMode&&(0,W.jsx)(f.Z,{sx:{height:"30px",fontSize:"11px"},variant:"contained",startIcon:(0,W.jsx)(D.Z,{sx:{width:15,height:15}}),id:"entry-header-save-button",color:"primary",onClick:function(){Ie({type:"UPDATE_FIELD",field:"pdcMode",value:"add"})},children:"New"}),(0,W.jsx)(P.Z,{sx:{height:"30px",fontSize:"11px"},ref:Ue,id:"save-entry-header",color:"success",variant:"contained",type:"submit",onClick:function(e){return(O=O||(0,r.Z)((0,i.Z)().mark((function e(n){var t,o,r,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=function(e){var n=fe;if(n.length>0)for(var t=function(){var t=n[o],i=new FileReader;e.push(new Promise((function(e,n){i.onload=function(n){var o;e({datakey:"pdc_file",fileName:t.name,fileContent:null===(o=n.target)||void 0===o?void 0:o.result,fileType:t.type,file:t})},i.onerror=function(e){n(new Error("Error reading file: "+t.name))},i.readAsDataURL(t)})))},o=0;o<n.length;o++)t()},""!==Ee.PNo){e.next=3;break}return e.abrupt("return",b().fire({position:"center",icon:"warning",title:"Please provide loan information!",timer:1500}).then((function(){setTimeout((function(){var e;null===(e=ze.current)||void 0===e||e.click()}),350)})));case 3:if(!(xe.length<=0)){e.next=5;break}return e.abrupt("return",b().fire({position:"center",icon:"warning",title:"Please provide entry!",timer:1500}).then((function(){Ce(!0)})));case 5:if(!(Ee.PNo.length>=45)){e.next=7;break}return e.abrupt("return",b().fire({position:"center",icon:"warning",title:"Pno is too long!",timer:1500}));case 7:if(!(Ee.Remarks.length>=220)){e.next=9;break}return e.abrupt("return",b().fire({position:"center",icon:"warning",title:"Remarks is too long!",timer:1500}));case 9:return o(t=[]),e.next=13,Promise.all(t);case 13:r=e.sent,a={Ref_No:Ee.Ref_No,PNo:Ee.PNo,IDNo:Ee.IDNo,Date:Ee.Date,Name:Ee.Name,Remarks:Ee.Remarks,BankCode:Ee.BankCode,checks:JSON.stringify(xe)},"update"===Ee.pdcMode?(0,F.s)({isUpdate:!0,cb:function(e){tn((0,c.Z)((0,c.Z)({},a),{},{userCodeConfirmation:e,fileToSave:r}))}}):(0,F.L)({isConfirm:function(){tn((0,c.Z)((0,c.Z)({},a),{},{fileToSave:r}))}});case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)},disabled:""===Ee.pdcMode,loading:on,startIcon:(0,W.jsx)(S.Z,{sx:{width:15,height:15}}),children:"Save"}),("add"===Ee.pdcMode||"update"===Ee.pdcMode)&&(0,W.jsx)(f.Z,{sx:{height:"30px",fontSize:"11px"},variant:"contained",startIcon:(0,W.jsx)(Z.Z,{sx:{width:15,height:15}}),onClick:function(){b().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, cancel it!"}).then((function(e){e.isConfirmed&&(G.Sub_Ref_No=Ee.Sub_Ref_No,G.Ref_No=Ee.Sub_Ref_No,te(Ie,G),ve([]),Ie({type:"UPDATE_FIELD",field:"pdcMode",value:""}))}))},color:"error",children:"Cancel"}),(0,W.jsx)(f.Z,{sx:{height:"30px",fontSize:"11px"},disabled:""===Ee.pdcMode,variant:"contained",startIcon:(0,W.jsx)(D.Z,{sx:{width:15,height:15}}),onClick:function(){var e,n=xe[xe.length-1];(Y.Check_No=oe(null===n||void 0===n?void 0:n.Check_No),te(Ae,Y),Ie({type:"UPDATE_FIELD",field:"checkMode",value:""}),(0,A.flushSync)((function(){Ce(!0)})),"update"!==Ee.checkMode)&&(null===(e=Ke.current)||void 0===e||e.focus())},ref:Je,children:"Add Check"}),(0,W.jsxs)("div",{children:[(0,W.jsx)(f.Z,{disabled:"update"!==Ee.pdcMode,id:"basic-button","aria-controls":re?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":re?"true":void 0,onClick:function(e){ie(e.currentTarget)},sx:{height:"30px",fontSize:"11px",color:"white",backgroundColor:z.Z[600],"&:hover":{backgroundColor:z.Z[700]}},children:"Print"}),(0,W.jsxs)(h.Z,{id:"basic-menu",anchorEl:ne,open:re,onClose:function(){ie(null)},MenuListProps:{"aria-labelledby":"basic-button"},children:[(0,W.jsx)(p.Z,{onClick:function(){(0,A.flushSync)((function(){localStorage.removeItem("printString"),localStorage.setItem("dataString",JSON.stringify(xe)),localStorage.setItem("paper-width","8.5in"),localStorage.setItem("paper-height","11in"),localStorage.setItem("module","pdc"),localStorage.setItem("state",JSON.stringify(Ee)),localStorage.setItem("column",JSON.stringify([{datakey:"Check_No",header:"CHECK NO",width:"80px"},{datakey:"Check_Date",header:"DATE",width:"130px"},{datakey:"BankName",header:"BANK",width:"240px"},{datakey:"Check_Amnt",header:"AMOUNT",width:"70px"},{datakey:"SEQ",header:"SEQ",width:"30px"}])),localStorage.setItem("title","UMIS"===(null===Me||void 0===Me?void 0:Me.department)?"UPWARD MANAGEMENT INSURANCE SERVICES\n Post Date Checks Receipt":"UPWARD CONSULTANCY SERVICES AND MANAGEMENT INC.\n Post Date Checks Receipt")})),window.open("/dashboard/print","_blank")},children:"PDC Receipt"}),(0,W.jsx)(p.Z,{onClick:function(){(0,A.flushSync)((function(){var e=U.renderToString((0,W.jsxs)("div",{children:[(0,W.jsx)("p",{style:{color:"#d1d5db",fontSize:"11px",textAlign:"center",padding:0,marginTop:"8px",marginBottom:0},children:"UCSMI"}),(0,W.jsx)("p",{style:{color:"#d1d5db",fontSize:"11px",textAlign:"center",padding:0,margin:0},children:Ee.Name}),(0,W.jsx)("p",{style:{color:"#d1d5db",fontSize:"11px",textAlign:"center",padding:0,margin:0},children:Ee.IDNo}),(0,W.jsx)("p",{style:{color:"#d1d5db",fontSize:"11px",textAlign:"center",padding:0,margin:"20px"},children:Ee.Ref_No})]}));localStorage.setItem("printString",e),localStorage.removeItem("dataString"),localStorage.setItem("paper-width","8.5in"),localStorage.setItem("paper-height","11in")})),window.open("/dashboard/print","_blank")},children:"PDC Labeling"})]})]})]})}),(0,W.jsx)("form",{onKeyDown:function(e){"Enter"!==e.code&&"NumpadEnter"!==e.code||e.preventDefault()},style:{marginBottom:"20px"},children:(0,W.jsx)(d.Z,{sx:function(e){return(0,l.Z)({display:"flex",columnGap:"15px",flexDirection:"row"},e.breakpoints.down("md"),{flexDirection:"column",rowGap:"10px"})},children:(0,W.jsxs)(d.Z,{sx:{display:"flex",gap:"10px",width:"100%"},children:[(0,W.jsxs)("fieldset",{style:{flex:1,display:"flex",flexDirection:"column",gap:"10px",padding:"15px",border:"1px solid #cbd5e1",borderRadius:"5px"},children:[(0,W.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[$e?(0,W.jsx)(P.Z,{loading:$e}):(0,W.jsxs)(m.Z,{fullWidth:!0,variant:"outlined",size:"small",disabled:En,sx:{".MuiFormLabel-root":{fontSize:"14px",background:"white",zIndex:99,padding:"0 3px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},children:[(0,W.jsx)(x.Z,{htmlFor:"pdc-id-field",children:"Reference No."}),(0,W.jsx)(v.Z,{readOnly:"UCSMI"!==(null===Me||void 0===Me?void 0:Me.department),sx:{height:"27px",fontSize:"14px",fieldset:{borderColor:"black"}},disabled:En,label:"Reference No.",name:"Ref_No",value:Ee.Ref_No,onChange:wn,onKeyDown:function(e){var n;if("Enter"===e.code||"NumpadEnter"===e.code)return null===(n=Ue.current)||void 0===n?void 0:n.click()},id:"pdc-id-field",endAdornment:(0,W.jsx)(k.Z,{position:"end",children:(0,W.jsx)(g.Z,{disabled:En,"aria-label":"search-client",color:"secondary",edge:"end",children:(0,W.jsx)(L.Z,{})})})})]}),(0,W.jsx)(E.Z,{fullWidth:!0,disabled:En,label:"Date Received",onChange:function(e){Ie({type:"UPDATE_FIELD",field:"Date",value:e})},value:new Date(Ee.Date),onKeyDown:function(e){var n;"Enter"!==e.code&&"NumpadEnter"!==e.code||(null===(n=Ue.current)||void 0===n||n.click())},textField:{InputLabelProps:{style:{fontSize:"14px"}},InputProps:{style:{height:"27px",fontSize:"14px"}}}})]}),(0,W.jsx)(s.Z,{InputLabelProps:{sx:{color:"black"}},variant:"outlined",size:"small",label:"Remarks",name:"Remarks",value:Ee.Remarks,onChange:wn,disabled:En,onKeyDown:function(e){var n;"Enter"!==e.code&&"NumpadEnter"!==e.code||(null===(n=Ue.current)||void 0===n||n.click())},InputProps:{style:{height:"27px",fontSize:"14px"}},sx:{fieldset:{borderColor:"black"},".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}})]}),(0,W.jsxs)("fieldset",{style:{flex:1,display:"flex",gap:"10px",padding:"15px",border:"1px solid #cbd5e1",borderRadius:"5px",flexDirection:"column"},children:[(0,W.jsxs)("div",{style:{width:"100%",flex:1,display:"flex",gap:"10px"},children:[fn?(0,W.jsx)(P.Z,{loading:fn}):(0,W.jsxs)(m.Z,{fullWidth:!0,variant:"outlined",size:"small",disabled:En,sx:{flex:1,".MuiFormLabel-root":{fontSize:"14px",background:"white",zIndex:99,padding:"0 3px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},children:[(0,W.jsx)(x.Z,{htmlFor:"label-input-id",children:"PN/Client ID"}),(0,W.jsx)(v.Z,{sx:{fieldset:{borderColor:"black"},height:"27px",fontSize:"14px"},onKeyDown:function(e){var n;"Enter"!==e.code&&"NumpadEnter"!==e.code||(null===(n=ze.current)||void 0===n||n.click())},name:"PNo",value:Ee.PNo,onChange:wn,id:"label-input-id",endAdornment:(0,W.jsx)(k.Z,{position:"end",children:(0,W.jsx)(g.Z,{ref:ze,disabled:En,"aria-label":"search-client",color:"secondary",edge:"end",onClick:function(){return sn(Ee.PNo)},children:(0,W.jsx)(I.Z,{})})}),label:"PN/Client ID"})]}),(0,W.jsx)(s.Z,{InputLabelProps:{sx:{color:"black"}},variant:"outlined",size:"small",label:"Branch",name:"Acronym",value:Ee.Acronym,onChange:wn,disabled:En,onKeyDown:function(e){var n;"Enter"!==e.code&&"NumpadEnter"!==e.code||(null===(n=Ue.current)||void 0===n||n.click())},InputProps:{style:{height:"27px",fontSize:"14px"},readOnly:!0},sx:{fieldset:{borderColor:"black"},flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}})]}),(0,W.jsxs)("div",{style:{width:"100%",display:"flex",columnGap:"10px"},children:[(0,W.jsx)(s.Z,{InputLabelProps:{sx:{color:"black"}},variant:"outlined",size:"small",label:"Clients Name",name:"Name",value:Ee.Name,onChange:wn,disabled:En,onKeyDown:function(e){var n;"Enter"!==e.code&&"NumpadEnter"!==e.code||(null===(n=Ue.current)||void 0===n||n.click())},InputProps:{style:{height:"27px",fontSize:"14px"},readOnly:!0},sx:{fieldset:{borderColor:"black"},flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}}),(0,W.jsx)(f.Z,{sx:{height:"27px",fontSize:"11px"},disabled:""===Ee.pdcMode,variant:"contained",startIcon:(0,W.jsx)(M.Z,{sx:{width:15,height:15}}),onClick:function(){be(!0)},children:"Upload Check"})]})]})]})})}),(0,W.jsx)(K.Z,{ref:q,rows:xe,column:Q,width:In,height:Zn,dataReadOnly:!0,onSelectionChange:function(e){if(e.length>0){var n,t=e[0];Ie({type:"UPDATE_FIELD",field:"checkMode",value:"update"}),te(Ae,t),(0,A.flushSync)((function(){Ce(!0)})),null===(n=Ye.current)||void 0===n||n.focusVisible()}else Ie({type:"UPDATE_FIELD",field:"checkMode",value:""})},onKeyDown:function(e,n){if("Delete"===n||"Backspace"===n){var t=e[0];if(t.Deposit_Slip&&""!==t.Deposit_Slip||t.DateDeposit&&""!==t.DateDeposit||t.OR_No&&""!==t.OR_No)return b().fire({position:"center",icon:"warning",title:"Unable to delete. Check No ".concat(t.Check_No," is already ").concat(t.OR_No," issued of OR!"),showConfirmButton:!1,timer:1500});var o=setTimeout((function(){b().fire({title:"Are you sure?",text:"You won't to delete this Check No. ".concat(t.Check_No),icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(e){var n;if(e.isConfirmed)return ve((function(e){return e.filter((function(e){return e.CheckIdx!==t.CheckIdx}))}));null===(n=He.current)||void 0===n||n.removeSelection()})),clearTimeout(o)}),250)}},inputsearchselector:".manok",isLoading:ln}),(0,W.jsx)(y.Z,{open:ye,onClose:function(){var e;null===(e=He.current)||void 0===e||e.removeSelection(),Ce(!1)},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,W.jsxs)(d.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"auto",bgcolor:"background.paper",p:4},children:[(0,W.jsx)(C.Z,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Check Detail"}),(0,W.jsx)("br",{}),(0,W.jsxs)("div",{style:{display:"flex",columnGap:"10px"},children:[(0,W.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[(0,W.jsx)(s.Z,{variant:"outlined",size:"small",label:"Check No.",name:"Check_No",value:Re.Check_No,onChange:Nn,onKeyDown:function(e){if("Enter"===e.code||"NumpadEnter"===e.code)var n=setTimeout((function(){var e;null===(e=Ge.current)||void 0===e||e.click(),clearTimeout(n)}),100)},InputProps:{style:{height:"27px",fontSize:"14px"},inputRef:Ke},sx:{flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}}),vn?(0,W.jsx)(P.Z,{loading:vn}):(0,W.jsxs)(m.Z,{sx:{width:"100%",".MuiFormLabel-root":{fontSize:"14px",background:"white",zIndex:99,padding:"0 3px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},fullWidth:!0,variant:"outlined",size:"small",children:[(0,W.jsx)(x.Z,{htmlFor:"label-input-id",children:"Bank"}),(0,W.jsx)(v.Z,{sx:{height:"27px",fontSize:"14px"},inputRef:Oe,fullWidth:!0,label:"Bank",name:"BankName",value:Re.BankName,onChange:Nn,id:"label-input-id",onKeyDown:function(e){if("Enter"===e.code||"NumpadEnter"===e.code)return Ce(!1),xn(Re.BankName)},endAdornment:(0,W.jsx)(k.Z,{position:"end",children:(0,W.jsx)(g.Z,{"aria-label":"search-client",color:"secondary",edge:"end",onClick:function(){Ce(!1),xn(Re.BankName)},children:(0,W.jsx)(j.Z,{})})})})]}),(0,W.jsx)(s.Z,{variant:"outlined",size:"small",label:"Branch",name:"Branch",value:Re.Branch,onChange:Nn,onKeyDown:function(e){if("Enter"===e.code||"NumpadEnter"===e.code)var n=setTimeout((function(){var e;null===(e=Ge.current)||void 0===e||e.click(),clearTimeout(n)}),100)},InputProps:{style:{height:"27px",fontSize:"14px"},inputRef:qe},sx:{flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}}),(0,W.jsx)(s.Z,{variant:"outlined",size:"small",label:"Remarks",name:"Check_Remarks",value:Re.Check_Remarks,onChange:Nn,rows:4,multiline:!0,onKeyDown:function(e){if("Enter"===e.code||"NumpadEnter"===e.code)var n=setTimeout((function(){var e;null===(e=Ge.current)||void 0===e||e.click(),clearTimeout(n)}),100)},InputProps:{style:{height:"auto",fontSize:"14px"}},sx:{flex:1,height:"auto",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}})]}),(0,W.jsxs)("div",{style:{display:"flex",gap:"10px",flexDirection:"column"},children:[(0,W.jsx)(E.Z,{label:"Check Dated",onChange:function(e){Ae({type:"UPDATE_FIELD",field:"Check_Date",value:e})},value:new Date(Re.Check_Date),inputRef:Ve,onKeyDown:function(e){if("Enter"===e.code||"NumpadEnter"===e.code)var n=setTimeout((function(){var e;null===(e=Ge.current)||void 0===e||e.click(),clearTimeout(n)}),100)},textField:{InputLabelProps:{style:{fontSize:"14px"}},InputProps:{style:{height:"27px",fontSize:"14px"}}}}),(0,W.jsx)(s.Z,{variant:"outlined",size:"small",label:"Amount",name:"Check_Amnt",value:Re.Check_Amnt,onChange:Nn,placeholder:"0.00",onBlur:function(){Ae({type:"UPDATE_FIELD",field:"Check_Amnt",value:parseFloat(Re.Check_Amnt.replace(/,/g,"")).toFixed(2)})},onKeyDown:function(e){if("Enter"===e.code||"NumpadEnter"===e.code)var n=setTimeout((function(){var e;null===(e=Ge.current)||void 0===e||e.click(),clearTimeout(n)}),100)},InputProps:{style:{height:"27px",fontSize:"14px"},inputComponent:R.a,inputRef:We},sx:{height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}}),"update"!==Ee.checkMode&&(0,W.jsx)(s.Z,{type:"number",variant:"outlined",size:"small",label:"Check Count",name:"Check_Count",value:Re.Check_Count,onChange:Nn,placeholder:"0",onKeyDown:function(e){if(["Enter","NumpadEnter"].includes(e.code))var n=setTimeout((function(){var e;null===(e=Ge.current)||void 0===e||e.click(),clearTimeout(n)}),100)},InputProps:{style:{height:"27px",fontSize:"14px"},inputProps:{min:1,type:"text",pattern:"[0-9]*"}},sx:{flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}})]})]}),(0,W.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",width:"100%",marginTop:"10px"},children:(0,W.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,W.jsx)(f.Z,{ref:Ge,action:Ye,color:"primary",variant:"contained",autoFocus:""!==Ee.checkMode,onClick:function(){if("update"===Ee.checkMode)return(0,A.flushSync)((function(){Ce(!1)})),b().fire({title:"Are you sure?",text:"Update Check ".concat(Re.Check_No),icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, update it!"}).then((function(n){var t;if(!n.isConfirmed)return null===(t=He.current)||void 0===t||t.removeSelection(),Ce(!1),void Ie({type:"UPDATE_FIELD",field:"checkMode",value:""});e()}));function e(){if("update"!==Ee.checkMode&&xe.map((function(e){return e.Check_No})).includes(Re.Check_No))return Ce(!1),b().fire({text:"Check is already exist!",icon:"warning",showCancelButton:!1,timer:1500}).then((function(){var e;(0,A.flushSync)((function(){Ce(!0)})),null===(e=Ke.current)||void 0===e||e.focus()}));if(""===Re.Check_No)return Ce(!1),b().fire({text:"Please provide check!",icon:"warning",showCancelButton:!1,timer:1500}).then((function(){var e;(0,A.flushSync)((function(){Ce(!0)})),null===(e=Ke.current)||void 0===e||e.focus()}));if(parseInt(Re.Check_Amnt)<=0||isNaN(parseInt(Re.Check_Amnt)))return Ce(!1),b().fire({text:"Please provide check amount!",icon:"warning",showCancelButton:!1,timer:1500}).then((function(){var e;(0,A.flushSync)((function(){Ce(!0)})),null===(e=We.current)||void 0===e||e.focus()}));if(""===Re.BankName)return Ce(!1),b().fire({text:"Please provide bank!",icon:"warning",showCancelButton:!1,timer:1500}).then((function(){var e;(0,A.flushSync)((function(){Ce(!0)})),null===(e=Oe.current)||void 0===e||e.focus()}));if(""===Re.Branch)return Ce(!1),b().fire({text:"Please provide branch!",icon:"warning",showCancelButton:!1,timer:1500}).then((function(){var e;(0,A.flushSync)((function(){Ce(!0)})),null===(e=qe.current)||void 0===e||e.focus()}));if(Re.Check_No.length>=40)return b().fire({text:"Check No is too long!",icon:"warning",showCancelButton:!1,timer:1500}).then((function(){(0,A.flushSync)((function(){Ce(!0)}))}));if(Re.Check_Amnt.length>=200)return b().fire({text:"Check Amount is too long!",icon:"warning",showCancelButton:!1,timer:1500}).then((function(){(0,A.flushSync)((function(){Ce(!0)}))}));if(Re.Branch.length>=45)return b().fire({text:"Branch is too long!",icon:"warning",showCancelButton:!1,timer:1500}).then((function(){(0,A.flushSync)((function(){Ce(!0)}))}));if(Re.Check_Remarks.length>=220)return b().fire({text:"Remarks is too long!",icon:"warning",showCancelButton:!1,timer:1500}).then((function(){(0,A.flushSync)((function(){Ce(!0)}))}));Re.Check_Amnt=parseFloat(Re.Check_Amnt.toString().replace(/,/g,"")).toLocaleString("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}),Re.Check_Date=new Date(Re.Check_Date).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"});var e=[];if(!isNaN(parseInt(Re.Check_Count))&&parseInt(Re.Check_Count)>0&&"update"!==Ee.checkMode){for(var n=0;n<parseInt(Re.Check_Count);n++){var t=(xe.length>0?parseInt(xe[xe.length-1].CheckIdx)+(n+1):n).toString(),i=new Date(Re.Check_Date);i.setMonth(i.getMonth()+n);var r={CheckIdx:t,Check_No:a(Re.Check_No,n),Check_Date:i.toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}),Check_Amnt:Re.Check_Amnt,BankName:Re.BankName,BankCode:Re.BankCode,Branch:Re.Branch,Check_Remarks:Re.Check_Remarks,Deposit_Slip:Re.Deposit_Slip,DateDeposit:Re.DateDeposit,OR_No:Re.OR_No};if("update"!==Ee.checkMode&&xe.map((function(e){return e.Check_No})).includes(r.Check_No))return Ce(!1),b().fire({text:"Check is already exist!",icon:"warning",showCancelButton:!1,timer:1500}).then((function(){var e;(0,A.flushSync)((function(){Ce(!0)})),null===(e=Ke.current)||void 0===e||e.focus()}));e.push(r)}return ve((function(n){return n=[].concat((0,o.Z)(n),e)})),(0,A.flushSync)((function(){Ce(!1)})),void b().fire({text:"Create New Check Successfully",icon:"success",showCancelButton:!1,timer:1500})}function a(e,n){var t=parseInt(e);return(t+=n).toString().padStart(e.length,"0")}ve((function(e){var n="";n=e.length<=0?"0":"update"===Ee.checkMode?Re.CheckIdx:(parseInt(e[e.length-1].CheckIdx)+1).toString(),Ae({type:"UPDATE_FIELD",field:"CheckIdx",value:n});var t={Check_No:Re.Check_No,Check_Date:Re.Check_Date,Check_Amnt:Re.Check_Amnt,BankName:Re.BankName,BankCode:Re.BankCode,Branch:Re.Branch,Check_Remarks:Re.Check_Remarks,Deposit_Slip:Re.Deposit_Slip,DateDeposit:Re.DateDeposit,OR_No:Re.OR_No};return e="update"===Ee.checkMode?e.map((function(e){return e.CheckIdx===n&&(e=(0,c.Z)((0,c.Z)({},e),t)),e})):[].concat((0,o.Z)(e),[(0,c.Z)({CheckIdx:n},t)])})),Ce(!1),b().fire({text:"update"===Ee.checkMode?"Check Update Successfully":"Create New Check Successfully",icon:"success",showCancelButton:!1,timer:1500}).then((function(){if("update"!==Ee.checkMode){var e=new Date(Re.Check_Date);e.setMonth(e.getMonth()+1),Ae({type:"UPDATE_FIELD",field:"Check_Date",value:e})}Ae({type:"UPDATE_FIELD",field:"Check_Amnt",value:parseFloat(Re.Check_Amnt.replace(/,/g,""))}),Ae({type:"UPDATE_FIELD",field:"Check_No",value:"update"===Ee.checkMode?Re.Check_No:oe(Re.Check_No)}),Ae({type:"UPDATE_FIELD",field:"checkMode",value:""}),(0,A.flushSync)((function(){Ce(!0)})),Ye.current.focusVisible()}))}e()},children:"update"===Ee.checkMode?"Update":"Save"}),"update"===Ee.checkMode&&(0,W.jsx)(f.Z,{color:"error",variant:"contained",onClick:function(){(0,A.flushSync)((function(){Ce(!1)})),b().fire({title:"Are you sure?",text:"Delete Check ".concat(Re.Check_No," "),icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(e){var n,t;if(!e.isConfirmed)return null===(t=He.current)||void 0===t||t.removeSelection(),Ce(!1),void Ie({type:"UPDATE_FIELD",field:"checkMode",value:""});ve((function(e){return e=e.filter((function(e){return e.CheckIdx!==Re.CheckIdx}))})),null===(n=Fe.current)||void 0===n||n.removeSelection(),Ie({type:"UPDATE_FIELD",field:"checkMode",value:""})}))},children:"Delete"}),(0,W.jsx)(f.Z,{color:"success",variant:"contained",onClick:function(){var e;null===(e=He.current)||void 0===e||e.removeSelection(),Ce(!1),te(Ae,Y),Ie({type:"UPDATE_FIELD",field:"checkMode",value:""})},children:"Cancel"}),(0,W.jsx)(g.Z,{style:{position:"absolute",top:"10px",right:"10px"},"aria-label":"search-client",onClick:function(){var e;null===(e=He.current)||void 0===e||e.removeSelection(),Ce(!1),Ie({type:"UPDATE_FIELD",field:"checkMode",value:""})},children:(0,W.jsx)(Z.Z,{})})]})})]})}),(0,W.jsx)("div",{style:{display:Ne?"flex":"none",position:"absolute",top:0,bottom:0,left:0,right:0,background:"rgba(158, 155, 157, 0.31)",zIndex:"999",justifyContent:"center",alignItems:"center"},children:(0,W.jsx)("div",{style:{width:"90%",height:"90%"},children:(0,W.jsx)("div",{style:{width:"90%",height:"90%",overflow:"auto",background:"white",padding:"20px",margin:"auto",zIndex:"9929",boxShadow:" -1px 1px 13px 6px rgba(0,0,0,0.54)",position:"relative"},children:(0,W.jsxs)("div",{style:{height:"100%",width:"100%",position:"relative",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[(0,W.jsx)(g.Z,{sx:{position:"absolute",right:"5px",top:"5px"},onClick:function(){be(!1)},children:(0,W.jsx)(Z.Z,{})}),(0,W.jsxs)("div",{style:{width:"100%",height:"500px",border:ce?"5px dashed green":"5px dashed grey",overflow:"auto",padding:"10px"},onDragEnter:Sn,onDragOver:function(e){return e.preventDefault()},onDragLeave:bn,onDrop:_n,children:[(0,W.jsx)("div",{id:"upload-container",style:{width:"100%",height:"100%",display:"flex",gap:"10px",flexWrap:"wrap"},onDragEnter:Sn,onDragOver:function(e){return e.preventDefault()},onDragLeave:bn,onDrop:_n,children:fe.map((function(e,n){return(0,W.jsx)(T.DisplayFile,{itm:e,selectedFiles:fe,setSelectedFiles:he,fileInput:Te},n)}))}),fe.length<=0&&(0,W.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)",textAlign:"center"},children:(0,W.jsx)(B.Z,{sx:{fontSize:"20em",color:"#64748b"}})}),(0,W.jsx)("input",{ref:Te,type:"file",multiple:!0,style:{display:"none",background:"white"},id:"input-file",onChange:function(e){var n=e.target.files,t=Array.from(n),i=[].concat((0,o.Z)(fe),t);if((0,T.checkFile)(i))return alert("file is not valid Extention!");he(i)}})]}),(0,W.jsx)("div",{style:{width:"100%"},children:(0,W.jsx)(f.Z,{fullWidth:!0,onClick:function(){var e=document.getElementById("input-file");null===e||void 0===e||e.click()},children:"CLick it to upload"})})]})})})})]})}function te(e,n){Object.entries(n).forEach((function(n){var t=(0,a.Z)(n,2),o=t[0],i=t[1];e({type:"UPDATE_FIELD",field:o,value:i})}))}function oe(e){if(void 0===e||null===e||""===e)return"001";for(var n=(parseInt(e)+1).toString();n.length<e.length;)n="0"+n;return n}}}]);
//# sourceMappingURL=8185.7f527167.chunk.js.map