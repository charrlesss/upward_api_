"use strict";(self.webpackChunkupward=self.webpackChunkupward||[]).push([[3147],{53147:function(e,t,n){n.r(t),n.d(t,{default:function(){return D},formatNumber:function(){return _},getSum:function(){return F}});var r=n(93433),i=n(74165),o=n(15861),c=n(29439),a=n(36151),l=n(37209),u=n(79018),s=n(21830),d=n.n(s),f=n(42419),p=n(53329),h=n(29823),x=n(5403),y=n(72791),v=n(76633),b=n(16386),g=n(11690),k=n(91933),m=n(3380),w=n(65413),R=n(64230),C=n(80184);function D(){var e,t,n,r,s,D=(0,y.useContext)(m.V),S=D.user,j=D.myAxios,Z=(0,y.useState)(""),N=(0,c.Z)(Z,2),B=N[0],M=N[1],I=(0,y.useRef)(null),z=(0,y.useRef)(null),T=(0,y.useRef)(null),E=(0,y.useRef)(null),L=(0,y.useRef)(null),O=(0,k.useMutation)({mutationKey:"save",mutationFn:function(t){return(e=e||(0,o.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.post("/task/accounting/return-checks/save",t,{headers:{Authorization:"Bearer ".concat(null===S||void 0===S?void 0:S.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){if(e.data.success)return ne(),d().fire({position:"center",icon:"success",title:e.data.message,showConfirmButton:!1,timer:1500});d().fire({position:"center",icon:"error",title:e.data.message,showConfirmButton:!1,timer:1500})}}),W=O.isLoading,q=O.mutate,G=(0,k.useMutation)({mutationKey:"save",mutationFn:function(e){return(t=t||(0,o.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.post("/task/accounting/return-checks/update",t,{headers:{Authorization:"Bearer ".concat(null===S||void 0===S?void 0:S.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){if(e.data.success)return ne(),d().fire({position:"center",icon:"success",title:e.data.message,showConfirmButton:!1,timer:1500});d().fire({position:"center",icon:"error",title:e.data.message,showConfirmButton:!1,timer:1500})}}),V=G.isLoading,K=G.mutate,H=(0,k.useQuery)({queryKey:"generate-id",queryFn:function(){return(n=n||(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.get("/task/accounting/return-checks/generate-id",{headers:{Authorization:"Bearer ".concat(null===S||void 0===S?void 0:S.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},refetchOnWindowFocus:!1,onSuccess:function(e){(0,u.D)(100).then((function(){T.current&&(T.current.value=e.data.newRefCode)}))}}),U=H.isLoading,P=H.refetch,Y=(0,k.useMutation)({mutationKey:"selected-search",mutationFn:function(e){return(r=r||(0,o.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.post("/task/accounting/return-checks/return-checks-search-selected",t,{headers:{Authorization:"Bearer ".concat(null===S||void 0===S?void 0:S.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t=JSON.parse(e.data.data1),n=JSON.parse(e.data.data2);if(t.length>0){T.current&&(T.current.value=t[0].RC_No),E.current&&(E.current.value=(0,b.Z)(new Date(t[0].RC_Date),"yyyy-MM-dd")),L.current&&(L.current.value=t[0].Explanation);for(var r=[],i=0;i<t.length;i++)r.push([t[0].ORNum,(0,b.Z)(new Date(t[0].Date_Collect),"MM/dd/yyy"),t[0].SlipCode,(0,b.Z)(new Date(t[0].Date_Deposit),"MM/dd/yyy"),t[0].Check_No,(0,b.Z)(new Date(t[0].Check_Date),"MM/dd/yyy"),_(parseFloat(t[0].Amount.toString().replace(/,/g,""))),t[0].Bank,t[0].BankAccnt,t[0].Reason,(0,b.Z)(new Date(t[0].Date_Return),"MM/dd/yyy")]);if(I.current.refSelectedCheckToBeReturned.current.table.current.setData(r),I.current.tssAmountRef.current&&(I.current.tssAmountRef.current.value="Total Amount:   ".concat(_(F(t,"Amount")))),n.length>0){for(var o=[],c=0;c<n.length;c++)o.push([n[c].GL_Acct,n[c].cGL_Acct,_(parseFloat(n[c].Debit.toString().replace(/,/g,""))),_(parseFloat(n[c].Credit.toString().replace(/,/g,""))),n[c].ID_No,n[c].cID_No,n[c].Sub_Acct,n[c].cSub_Acct,n[c].Check_No,n[c].Check_Bank,(0,b.Z)(new Date(n[c].Check_Date),"MM/dd/yyy"),(0,b.Z)(new Date(n[c].Check_Return),"MM/dd/yyy"),n[c].Check_Reason,n[c].Check_No,(0,b.Z)(new Date(n[c].Check_Deposit),"MM/dd/yyy"),(0,b.Z)(new Date(n[c].Check_Collect),"MM/dd/yyy")]);I.current.refAccountingEntry.current.table.current.setData(o),I.current.refAccountingEntry.current.debitRef.current&&(I.current.refAccountingEntry.current.debitRef.current.value=_(F(n,"Debit"))),I.current.refAccountingEntry.current.creditRef.current&&(I.current.refAccountingEntry.current.creditRef.current.value=_(F(n,"Credit")))}M("update")}}}),J=Y.isLoading,Q=Y.mutate,X=(0,g._j)({link:"/task/accounting/return-checks/return-checks-search",column:[{key:"RefDate",label:"Ref. Date",width:120},{key:"RefNo",label:"Ref. No.",width:100},{key:"Explanation",label:"Explanation",width:200}],getSelectedItem:function(e,t,n,r){return(s=s||(0,o.Z)((0,i.Z)().mark((function e(t,n,r,o){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&((0,u.D)(100).then((function(){Q({RefNo:t[1]})})),te());case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}),$=X.UpwardTableModalSearch,ee=X.openModal,te=X.closeModal;function ne(){M(""),P(),E.current&&(E.current.value=(0,b.Z)(new Date,"yyyy-MM-dd")),L.current&&(L.current.value="Returned Checks"),I.current.refSelectCheck.current.table.current.resetCheckBox(),I.current.refSelectCheck.current.table.current.setSelectedRow(null),I.current.refSelectCheck.current.table.current.setData([]),I.current.refSelectCheck.current.refetchList(),I.current.refSelectedCheckToBeReturned.current.table.current.resetCheckBox(),I.current.refSelectedCheckToBeReturned.current.table.current.setSelectedRow(null),I.current.refSelectedCheckToBeReturned.current.table.current.setData([]),I.current.refAccountingEntry.current.table.current.resetCheckBox(),I.current.refAccountingEntry.current.table.current.setSelectedRow(null),I.current.refAccountingEntry.current.table.current.setData([]),I.current.refAccountingEntry.current.debitRef.current&&(I.current.refAccountingEntry.current.debitRef.current.value="0.00"),I.current.refAccountingEntry.current.creditRef.current&&(I.current.refAccountingEntry.current.creditRef.current.value="0.00"),I.current.tssAmountRef.current.value="Total Amount:   0.00"}return(0,C.jsxs)(C.Fragment,{children:[(W||U||J||V)&&(0,C.jsx)(w.g,{}),(0,C.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"100%",height:"100%",flex:1,padding:"5px",background:"#F1F1F1"},children:[(0,C.jsxs)("div",{style:{display:"flex",alignItems:"center",columnGap:"5px",marginBottom:"10px"},children:[(0,C.jsx)(l.oi,{label:{title:"Search: ",style:{fontSize:"12px",fontWeight:"bold",width:"50px"}},input:{className:"search-input-up-on-key-down",type:"search",onKeyDown:function(e){"Enter"!==e.key&&"NumpadEnter"!==e.key||(e.preventDefault(),ee(e.currentTarget.value))},style:{width:"500px"}},icon:(0,C.jsx)(x.Z,{sx:{fontSize:"18px"}}),onIconClick:function(e){e.preventDefault(),z.current&&ee(z.current.value)},inputRef:z}),""===B&&(0,C.jsx)(a.Z,{sx:{height:"22px",fontSize:"11px"},variant:"contained",startIcon:(0,C.jsx)(f.Z,{sx:{width:15,height:15}}),id:"entry-header-save-button",onClick:function(){M("add")},children:"New"}),""!==B&&(0,C.jsx)(a.Z,{sx:{height:"22px",fontSize:"11px"},id:"save-entry-header",color:"primary",variant:"contained",type:"submit",startIcon:(0,C.jsx)(p.Z,{sx:{width:15,height:15}}),onClick:function(){var e,t;if(""===(null===(e=L.current)||void 0===e?void 0:e.value))return alert("Pease provide an explanation"),void(null===(t=L.current)||void 0===t||t.focus());var n=I.current.refSelectedCheckToBeReturned.current.table.current.getData(),r=I.current.refAccountingEntry.current.table.current.getData();n.length<=0?alert("Please provide return entry"):"add"===B?(0,R.L)({isConfirm:function(){var e,t,i;q({dgvSelChecks:n,dgvAccountingEntry:r,refNo:null===(e=T.current)||void 0===e?void 0:e.value,date:null===(t=E.current)||void 0===t?void 0:t.value,explanation:null===(i=L.current)||void 0===i?void 0:i.value,mode:B})}}):(0,R.s)({isUpdate:!0,cb:function(e){var t,i,o;K({dgvSelChecks:n,dgvAccountingEntry:r,refNo:null===(t=T.current)||void 0===t?void 0:t.value,date:null===(i=E.current)||void 0===i?void 0:i.value,explanation:null===(o=L.current)||void 0===o?void 0:o.value,mode:B,userCodeConfirmation:e})}})},children:"Save"}),(0,C.jsx)(a.Z,{sx:{height:"22px",fontSize:"11px"},disabled:""===B,variant:"contained",startIcon:(0,C.jsx)(h.Z,{sx:{width:15,height:15}}),color:"error",onClick:function(){d().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, cancel it!"}).then((function(e){e.isConfirmed&&(0,u.D)(100).then((function(){ne()}))}))},children:"Cancel"})]}),(0,C.jsxs)("div",{style:{display:"flex",width:"100%",padding:"10px 40px",flexDirection:"column",rowGap:"10px",border:"1px solid #64748b",marginBottom:"10px"},children:[(0,C.jsxs)("div",{style:{display:"flex",columnGap:"200px"},children:[(0,C.jsx)(l.oi,{label:{title:"Ref No.: ",style:{fontSize:"12px",fontWeight:"bold",width:"100px"}},input:{disabled:""===B,readOnly:!0,className:"ref_no",type:"text",style:{width:"200px"},defaultValue:""},inputRef:T,icon:(0,C.jsx)(v.Z,{sx:{fontSize:"18px"}}),onIconClick:function(e){e.preventDefault()}}),(0,C.jsx)(l.oi,{label:{title:"Date : ",style:{fontSize:"12px",fontWeight:"bold",width:"70px"}},input:{disabled:""===B,defaultValue:(0,b.Z)(new Date,"yyyy-MM-dd"),className:"date",type:"date",style:{width:"200px"}},inputRef:E})]}),(0,C.jsx)(l.oi,{label:{title:"Explanation : ",style:{fontSize:"12px",fontWeight:"bold",width:"100px"}},input:{disabled:""===B,className:"exp",type:"text",style:{width:"670px"},defaultValue:"Returned Checks"},inputRef:L})]}),(0,C.jsx)(A,{ref:I,mode:B})]}),(0,C.jsx)($,{})]})}var A=(0,y.forwardRef)((function(e,t){var n=e.mode,r=(0,y.useState)(0),i=(0,c.Z)(r,2),o=i[0],a=i[1],l=(0,y.useState)({}),u=(0,c.Z)(l,2),s=u[0],d=u[1],f=(0,y.useRef)([]),p=(0,y.useRef)(null),h=(0,y.useRef)(null),x=(0,y.useRef)(null),v=(0,y.useRef)(null),b=(0,y.useRef)(null),g=[{id:0,label:"Select Check",content:(0,C.jsx)(N,{ref:p,refSelectedCheckToBeReturned:h,refAccountingEntry:x,tssAmountRef:v,chkFndRef:b,mode:n})},{id:1,label:"Selected Check To Be Returned",content:(0,C.jsx)(B,{ref:h})},{id:2,label:"Accounting Entry",content:(0,C.jsx)(M,{ref:x})}];return(0,y.useEffect)((function(){var e;d(null===(e=f.current[0])||void 0===e?void 0:e.getBoundingClientRect())}),[]),(0,y.useImperativeHandle)(t,(function(){return{test:function(){p.current.test(),h.current.test(),x.current.test()},refSelectCheck:p,refSelectedCheckToBeReturned:h,refAccountingEntry:x,tssAmountRef:v}})),(0,C.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column"},children:[(0,C.jsx)("div",{style:{display:"flex"},children:g.map((function(e,t){return(0,C.jsx)("button",{ref:function(e){return f.current[t]=e},onClick:function(t){a(e.id),d(t.currentTarget.getBoundingClientRect())},style:{width:"auto",fontSize:"11px",padding:"10px",cursor:"pointer",backgroundColor:o===e.id?"white":"transparent",color:o===e.id?"#0074cc":"#000",border:"none",borderRight:o===e.id?0===e.id?"none":"1px solid #0074cc":0===e.id?"none":"1px solid #64748b",borderLeft:o===e.id?2===e.id?"none":"1px solid #0074cc":2===e.id?"none":"1px solid #64748b",borderTop:o===e.id?"1px solid #0074cc":"1px solid #64748b",textTransform:"uppercase",fontWeight:"bold"},children:e.label},e.id)}))}),(0,C.jsxs)("div",{style:{padding:"7px",flex:1,display:"flex",position:"relative",flexDirection:"column"},children:[(0,C.jsx)("div",{style:{position:"absolute",top:"-2px",left:0,width:"".concat((null===s||void 0===s?void 0:s.left)-5||0,"px"),height:"1px",background:"#64748b"}}),(0,C.jsx)("div",{style:{position:"absolute",top:"-2px",right:0,left:"".concat((null===s||void 0===s?void 0:s.right)-5||0,"px"),height:"1px",background:"#64748b"}}),g.map((function(e){return(0,C.jsx)("div",{style:{display:o===e.id?"flex":"none",flex:1,flexDirection:"column"},children:e.content},e.id)})),(0,C.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",paddingTop:"5px"},children:[(0,C.jsx)("input",{ref:b,readOnly:!0,defaultValue:"0.00",style:{textAlign:"left",fontWeight:"bold",width:"200px",border:"none"}}),(0,C.jsx)("input",{ref:v,readOnly:!0,defaultValue:"0.00",style:{textAlign:"right",fontWeight:"bold",width:"200px",border:"none"}})]})]})]})})),S=[{key:"Deposit_Slip",label:"Deposit_Slip",width:100},{key:"Depo_Date",label:"Depo_Date",width:130},{key:"Check_No",label:"Check_No",width:200},{key:"Check_Date",label:"Check_Date",width:200},{key:"Amount",label:"Amount",width:200},{key:"Bank",label:"Bank",width:200},{key:"Official_Receipt",label:"Official_Receipt",width:100},{key:"Date_OR",label:"Date_OR",width:100},{key:"BankAccount",label:"BankAccount",width:0,hide:!0},{key:"_formatted_date",label:"_formatted_date",width:0,hide:!0}],j=[{key:"ORNo",label:"OR No.",width:80},{key:"ORDate",label:"OR Date",width:130},{key:"DepoSlip",label:"Depo Slip",width:130},{key:"DepoDate",label:"Depo Date",width:130},{key:"CheckNo",label:"Check No.",width:130},{key:"CheckDate",label:"Check Date",width:130},{key:"Amount",label:"Amount",width:130},{key:"Bank",label:"Bank/Branch",width:100},{key:"BankAccount",label:"Bank Account",width:200},{key:"Reason",label:"Reason",width:200},{key:"ReturnDate",label:"Return Date",width:200}],Z=[{key:"Code",label:"Code",width:80},{key:"AccountName",label:"Account Name",width:130},{key:"Debit",label:"Debit",width:130},{key:"Credit",label:"Credit",width:130},{key:"IDNo",label:"ID No.",width:130},{key:"Identity",label:"Identity",width:130},{key:"SubAcct",label:"Sub Acct",width:130},{key:"SubAcctName",label:"Sub Acct Name",width:130},{key:"CheckNo",label:"Check No",width:100},{key:"Bank",label:"Bank/Branch",width:200},{key:"CheckDate",label:"Check Date",width:100},{key:"CheckReturn",label:"Check Return",width:100},{key:"CheckReason",label:"Check Reason",width:200},{key:"PK",label:"PK",width:100},{key:"DateDeposit",label:"Date Deposit",width:100},{key:"DateCollection",label:"Date Collection",width:100}],N=(0,y.forwardRef)((function(e,t){var n,c=e.refAccountingEntry,a=e.refSelectedCheckToBeReturned,s=e.tssAmountRef,d=e.chkFndRef,f=e.mode,p=(0,y.useContext)(m.V),h=p.user,v=p.myAxios,R=(0,y.useRef)(null),D=(0,y.useRef)(null),A=(0,y.useRef)(null),j=(0,k.useMutation)({mutationKey:"load-details",mutationFn:function(e){return(n=n||(0,o.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.post("/task/accounting/get-check-list",t,{headers:{Authorization:"Bearer ".concat(null===h||void 0===h?void 0:h.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){D.current.setDataFormated(e.data.checkList),d.current&&(d.current.value="Check Found: Top ".concat(e.data.checkList.length))}}),Z=j.isLoading,N=j.mutate,B=(0,y.useRef)(N);return(0,y.useEffect)((function(){var e;B.current({search:null===(e=R.current)||void 0===e?void 0:e.value})}),[]),(0,y.useImperativeHandle)(t,(function(){return{test:function(){alert("qweqweqweqwe1")},refetchList:function(){B.current({search:""})},table:D}})),(0,C.jsxs)("div",{style:{display:"flex",flex:1,flexDirection:"column",rowGap:"10px"},children:[Z&&(0,C.jsx)(w.g,{}),(0,C.jsx)(l.oi,{label:{title:"Search: ",style:{fontSize:"12px",fontWeight:"bold",width:"50px"}},input:{className:"search-input-up-on-key-down",type:"search",onKeyDown:function(e){"Enter"!==e.key&&"NumpadEnter"!==e.key||(e.preventDefault(),B.current({search:e.currentTarget.value}))},onChange:function(e){""===e.target.value&&B.current({search:""})},style:{width:"100%"}},icon:(0,C.jsx)(x.Z,{sx:{fontSize:"18px"}}),onIconClick:function(e){var t;e.preventDefault(),R.current&&B.current({search:null===(t=R.current)||void 0===t?void 0:t.value})},inputRef:R}),(0,C.jsx)("div",{style:{display:"flex",flex:1},children:(0,C.jsx)(g.BW,{disbaleTable:""===f,ref:D,columns:S,rows:[],containerStyle:{height:"auto",flex:1},getSelectedItem:function(e){e?(0,u.D)(100).then((function(){if(a.current.getSelectedCheck().includes(e[2]))return alert("Check ".concat(e[2]," already exist!")),D.current.setSelectedRow(null),void D.current.resetCheckBox();A.current.showModal(),A.current.setRefs({checkNo:e[2],amount:e[4]}),A.current.mutateEntries({ORNo:e[6],Account_No:e[8]}),A.current.selectItem(e)})):(0,u.D)(100).then((function(){}))},onKeyDown:function(e,t,n){if(("Delete"===n.code||"Backspace"===n.code)&&window.confirm("Are you sure you want to delete?"))return}})}),(0,C.jsx)(I,{ref:A,handleConfirm:function(e,t,n,i,o,l){var u,d,f;if(n.lblTextRef!==n.refAmount)return alert("Debit must equal to Credit!");var p=i,h=2===(null===(u=l.refReturnReason.current)||void 0===u?void 0:u.selectedIndex)?"AC":null===(d=l.refReturnReason.current)||void 0===d?void 0:d.value,x=null===(f=l.refDateReturned.current)||void 0===f?void 0:f.value,y=[];y[0]=n.refAccountID,y[1]=n.refAccountName,y[2]=n.refAmount,y[3]=n.refAcronym,y[4]=n.refSubAccount,y[5]=n.refAccountId;var v=[].concat((0,r.Z)(a.current.table.current.getData()),[[t[6],t[7],t[0],t[1],t[2],t[3],t[4],t[5],t[8],h,(0,b.Z)(new Date(x),"MM/dd/yyyy")]]);a.current.table.current.setData(v),s.current&&(s.current.value="Total Amount:   ".concat(_(v.reduce((function(e,t){return e+=parseFloat(t[6].replace(/,/g,""))}),0))));for(var g=[],k=0;k<p.length;k++)g=[].concat((0,r.Z)(c.current.table.current.getData()),[[p[k][0],p[k][1],p[k][2],"0.00",p[k][3],p[k][4],p[k][5],p[k][6],t[2],t[5],t[3],(0,b.Z)(new Date(x),"MM/dd/yyyy"),h,t[2],t[1],t[7]]]);g=[].concat((0,r.Z)(g),[[y[0],y[1],"0.00",y[2],y[5],"",y[3],y[4],t[2],t[5],t[3],(0,b.Z)(new Date(x),"MM/dd/yyyy"),h,t[2],t[1],t[7]]]),c.current.table.current.setData(g);var m=g.map((function(e){return{debit:e[2],credit:e[3]}}));c.current.debitRef.current&&(c.current.debitRef.current.value=_(F(m,"debit"))),c.current.creditRef.current&&(c.current.creditRef.current.value=_(F(m,"credit")))},handleCancel:function(e){D.current.setSelectedRow(null),D.current.resetCheckBox()}})]})})),B=(0,y.forwardRef)((function(e,t){var n=(0,y.useRef)(null);return(0,y.useImperativeHandle)(t,(function(){return{test:function(){alert("qweqweqweqwe2")},table:n,getSelectedCheck:function(){var e=n.current.getData();return e.length>0?e.map((function(e){return e[4]})):[]}}})),(0,C.jsx)("div",{style:{display:"flex",flex:1},children:(0,C.jsx)(g.BW,{ref:n,columns:j,rows:[],containerStyle:{height:"auto",flex:1},getSelectedItem:function(e){(0,u.D)(100).then((function(){}))},onKeyDown:function(e,t,n){if(("Delete"===n.code||"Backspace"===n.code)&&window.confirm("Are you sure you want to delete?"))return}})})})),M=(0,y.forwardRef)((function(e,t){var n=(0,y.useRef)(null),r=(0,y.useRef)(null),i=(0,y.useRef)(null);return(0,y.useImperativeHandle)(t,(function(){return{test:function(){alert("qweqweqweqwe3")},table:n,debitRef:r,creditRef:i}})),(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{style:{display:"flex",flex:1},children:(0,C.jsx)(g.BW,{ref:n,columns:Z,rows:[],containerStyle:{height:"auto",flex:1},getSelectedItem:function(e){(0,u.D)(100).then((function(){}))},onKeyDown:function(e,t,n){if(("Delete"===n.code||"Backspace"===n.code)&&window.confirm("Are you sure you want to delete?"))return}})}),(0,C.jsxs)("div",{style:{display:"flex",width:"100%",justifyContent:"flex-end",padding:"5px 0",columnGap:"5px"},children:[(0,C.jsx)("span",{style:{fontSize:"13px",fontWeight:"bold",marginRight:"10px"},children:"Total:"}),(0,C.jsx)("input",{ref:r,readOnly:!0,defaultValue:"0.00",style:{textAlign:"right",fontWeight:"bold",width:"140px",border:"none"}}),(0,C.jsx)("input",{ref:i,readOnly:!0,defaultValue:"0.00",style:{textAlign:"right",fontWeight:"bold",width:"140px",border:"none"}})]})]})})),I=(0,y.forwardRef)((function(e,t){var n,r=e.handleConfirm,a=e.handleCancel,s=(e.hasSelectedRow,(0,y.useContext)(m.V)),d=s.user,f=s.myAxios,p=(0,y.useRef)(null),x=(0,y.useState)(!1),v=(0,c.Z)(x,2),R=v[0],D=v[1],A=(0,y.useState)(!1),S=(0,c.Z)(A,2),j=S[0],Z=S[1],N=(0,y.useState)([]),B=(0,c.Z)(N,2),M=B[0],I=B[1],T=(0,y.useState)(!1),E=(0,c.Z)(T,2),L=E[0],O=E[1],W=(0,y.useState)(""),q=(0,c.Z)(W,2),G=q[0],V=q[1],K=(0,y.useRef)(null),H=(0,y.useRef)(null),U=(0,y.useRef)(null),P=(0,y.useRef)(null),Y=(0,y.useRef)(null),J=(0,y.useRef)(null),Q=(0,y.useRef)(""),X=(0,y.useRef)(""),$=(0,y.useRef)(null),ee=(0,k.useMutation)({mutationKey:"load-details",mutationFn:function(e){return(n=n||(0,o.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.post("/task/accounting//return-check/load-entries",t,{headers:{Authorization:"Bearer ".concat(null===d||void 0===d?void 0:d.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t=e.data.dt1,n=e.data.dt2;if(t.length>0&&(Y.current&&(Y.current.value=t[0].IDNo),U.current&&(U.current.value=t[0].Short),J.current&&(J.current.value="Head Office"),X.current="HO",Q.current=t[0].Account_ID),n.length>0){var r=n.map((function(e){return{CRCode:e.CRCode,CRTitle:e.CRTitle,Credit:e.Credit,CRLoanID:e.CRLoanID,CRLoanName:e.CRLoanName,SAcctCode:e.SubAcct,SAcctName:e.ShortName}}));p.current.setDataFormated(r)}$.current&&($.current.value=_(F(n,"Debit")))}}),te=ee.isLoading,ne=ee.mutate,re=function(){Z(!0),setTimeout((function(){D(!1),Z(!1),a()}),100)};(0,y.useImperativeHandle)(t,(function(){return{showModal:function(){D(!0)},clsoeModal:function(){D(!1)},getRefs:function(){return{}},selectItem:function(e){I(e)},setRefs:function(e){V(e.checkNo),(0,u.D)(100).then((function(){P.current&&(P.current.value=e.amount),K.current&&(K.current.value="DAIF")}))},mutateEntries:function(e){ne(e)},closeDelay:re}}));var ie=[{key:"CRCode",label:"Code",width:90},{key:"CRTitle",label:"Account Name",width:200},{key:"Credit",label:"Amount",width:110},{key:"CRLoanID",label:"ID No",width:200},{key:"CRLoanName",label:"Identity",width:200},{key:"SAcctCode",label:"Sub Account",width:100},{key:"SAcctName",label:"Sub Account Name",width:200}];return R?(0,C.jsxs)(C.Fragment,{children:[te&&(0,C.jsx)(w.g,{}),(0,C.jsx)("div",{style:{position:"fixed",top:0,bottom:0,left:0,right:0,background:"transparent",zIndex:"88"},onClick:function(){O(!0),setTimeout((function(){O(!1)}),250)}}),(0,C.jsxs)("div",{style:{height:L?"402px":"400px",width:L?"60.3%":"60%",border:"1px solid #64748b",position:"absolute",left:"50%",top:"35%",transform:"translate(-50%, -75%)",display:"flex",flexDirection:"column",zIndex:j?-100:100,opacity:j?0:1,transition:"all 150ms",boxShadow:"3px 6px 32px -7px rgba(0,0,0,0.75)"},children:[(0,C.jsxs)("div",{style:{height:"22px",background:"white",display:"flex",justifyContent:"space-between",padding:"5px",position:"relative",alignItems:"center"},children:[(0,C.jsxs)("span",{style:{fontSize:"13px",fontWeight:"bold"},children:["Return Detail and Accounting Entry (Check No.: ",G,")"]}),(0,C.jsx)("button",{className:"btn-check-exit-modal",style:{padding:"0 5px",borderRadius:"0px",background:"white",color:"black",height:"22px",position:"absolute",top:0,right:0},onClick:function(){re()},children:(0,C.jsx)(h.Z,{sx:{fontSize:"22px"}})})]}),(0,C.jsxs)("div",{style:{flex:1,background:"#F1F1F1",padding:"5px",display:"flex",flexDirection:"column"},children:[(0,C.jsxs)("div",{style:{display:"flex",columnGap:"5px",height:"auto"},children:[(0,C.jsxs)("div",{style:{height:"auto",display:"flex",flexDirection:"column",padding:"10px",rowGap:"20px"},children:[(0,C.jsxs)("div",{style:{height:"auto",padding:"10px",display:"flex",width:"100%",border:"1px solid #64748b",position:"relative"},children:[(0,C.jsx)("span",{style:{position:"absolute",top:"-15px",left:"20px",background:"#F1F1F1",padding:"0 5px",fontSize:"14px",fontWeight:"bold"},children:"Return Detail"}),(0,C.jsxs)("div",{style:{display:"flex",columnGap:"50px"},children:[(0,C.jsx)(l.lq,{containerStyle:{width:"100%"},label:{title:"Return Reason : ",style:{fontSize:"12px",fontWeight:"bold",width:"100px"}},selectRef:K,select:{style:{flex:1,height:"22px"},defaultValue:""},datasource:[{key:"DAIF",value:"DAIF"},{key:"DAUD",value:"DAUD"},{key:"Account Closed",value:"Account Closed"},{key:"SPO",value:"SPO"},{key:"Account under Garnishment",value:"Account under Garnishment"},{key:"Unauthorized Signature",value:"Unauthorized Signature"}],values:"value",display:"key"}),(0,C.jsx)(l.oi,{label:{title:"Return Date : ",style:{fontSize:"12px",fontWeight:"bold",width:"100px"}},input:{defaultValue:(0,b.Z)(new Date,"yyyy-MM-dd"),className:"date",type:"date",style:{width:"200px"}},inputRef:H})]})]}),(0,C.jsxs)("div",{style:{height:"auto",padding:"10px",display:"flex",width:"100%",border:"1px solid #64748b",position:"relative"},children:[(0,C.jsx)("span",{style:{position:"absolute",top:"-15px",left:"20px",background:"#F1F1F1",padding:"0 5px",fontSize:"14px",fontWeight:"bold"},children:"Credit Entry"}),(0,C.jsxs)("div",{style:{display:"flex",flexDirection:"column",rowGap:"10px",height:"auto"},children:[(0,C.jsxs)("div",{style:{display:"flex",columnGap:"50px"},children:[(0,C.jsx)(l.oi,{label:{title:"Account Name : ",style:{fontSize:"12px",fontWeight:"bold",width:"100px"}},input:{readOnly:!0,className:"ref_no",type:"text",style:{width:"200px"}},inputRef:U}),(0,C.jsx)(l.oi,{label:{title:"Account ID : ",style:{fontSize:"12px",fontWeight:"bold",width:"100px"}},input:{readOnly:!0,className:"account-id",type:"text",style:{width:"200px"}},inputRef:Y})]}),(0,C.jsxs)("div",{style:{display:"flex",columnGap:"50px"},children:[(0,C.jsx)(l.oi,{label:{title:"Amount : ",style:{fontSize:"12px",fontWeight:"bold",width:"100px"}},input:{readOnly:!0,className:"ref_no",type:"text",style:{width:"200px"}},inputRef:P}),(0,C.jsx)(l.oi,{label:{title:"Sub Account : ",style:{fontSize:"12px",fontWeight:"bold",width:"100px"}},input:{readOnly:!0,className:"sub-account",type:"text",style:{width:"200px"}},inputRef:J})]})]})]})]}),(0,C.jsxs)("div",{style:{width:"100px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",rowGap:"20px",height:"auto"},children:[(0,C.jsxs)(z,{style:{width:"80px",height:"50px",border:"1px solid #153002",fontSize:"12px",padding:0,margin:0,boxSizing:"border-box",background:"#8fbc8b",color:"black",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",fontFamily:"arial",cursor:"pointer",position:"relative"},onClick:function(e){var t,n,i,o,c,a,l,u=p.current.getData(),s={refReturnReason:null===(t=K.current)||void 0===t?void 0:t.value,refDateReturned:null===(n=H.current)||void 0===n?void 0:n.value,refAccountName:null===(i=U.current)||void 0===i?void 0:i.value,refAmount:null===(o=P.current)||void 0===o?void 0:o.value,refAccountId:null===(c=Y.current)||void 0===c?void 0:c.value,refSubAccount:null===(a=J.current)||void 0===a?void 0:a.value,refAccountID:Q.current,refAcronym:X.current,lblTextRef:null===(l=$.current)||void 0===l?void 0:l.value};r(e,M,s,u,ie,{refReturnReason:K,refDateReturned:H,refAccountName:U,refAmount:P,refAccountId:Y,refSubAccount:J,refAccountID:Q,refAcronym:X,lblTextRef:$}),re()},children:[(0,C.jsx)("span",{style:{position:"absolute",top:"2px"},children:(0,C.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22px",height:"22px",viewBox:"0 0 24 24",fill:"none",children:[(0,C.jsx)("path",{d:"M8.5 12.5L10.5 14.5L15.5 9.5",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,C.jsx)("path",{d:"M7 3.33782C8.47087 2.48697 10.1786 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 10.1786 2.48697 8.47087 3.33782 7",stroke:"#a5e15b",strokeWidth:"1.5",strokeLinecap:"round"})]})}),(0,C.jsx)("span",{style:{position:"absolute",top:"25px"},children:"Accept"})]}),(0,C.jsxs)(z,{style:{width:"80px",height:"50px",border:"1px solid #153002",fontSize:"12px",padding:0,margin:0,boxSizing:"border-box",background:"#8fbc8b",color:"black",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",fontFamily:"arial",cursor:"pointer",position:"relative"},onClick:function(e){a(e),re()},children:[(0,C.jsx)("span",{style:{position:"absolute",top:"2px"},children:(0,C.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"red",width:"21px",height:"21px",viewBox:"0 0 36 36",version:"1.1",preserveAspectRatio:"xMidYMid meet",children:[(0,C.jsx)("title",{children:"ban-line"}),(0,C.jsx)("path",{className:"clr-i-outline clr-i-outline-path-1",d:"M18,2A16,16,0,1,0,34,18,16,16,0,0,0,18,2ZM4,18A13.93,13.93,0,0,1,7.43,8.85L27.15,28.57A14,14,0,0,1,4,18Zm24.57,9.15L8.85,7.43A14,14,0,0,1,28.57,27.15Z"}),(0,C.jsx)("rect",{x:"0",y:"0",width:"36",height:"36",fillOpacity:"0"})]})}),(0,C.jsx)("span",{style:{position:"absolute",top:"25px"},children:"Cancel"})]})]})]}),(0,C.jsx)("div",{style:{flex:1},children:(0,C.jsx)(g.BW,{ref:p,columns:ie,rows:[],containerStyle:{height:"200px",flex:1},getSelectedItem:function(e){(0,u.D)(100).then((function(){}))},onKeyDown:function(e,t,n){if(("Delete"===n.code||"Backspace"===n.code)&&window.confirm("Are you sure you want to delete?"))return}})}),(0,C.jsx)("input",{style:{width:"100%",textAlign:"right",fontWeight:"bold",paddingRight:"10px"},ref:$,defaultValue:"0.00",readOnly:!0})]}),(0,C.jsx)("style",{children:"\n              .btn-check-exit-modal:hover{\n                background:red !important;\n                color:white !important;\n              }\n            "})]})]}):null})),z=function(e){var t=e.onClick,n=e.style,r=e.children,i="btn-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),o=(0,y.useState)(!1),a=(0,c.Z)(o,2),l=a[0],u=a[1];return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("button",{className:"".concat(i," ").concat(l?"blinking":""),onClick:function(e){u(!0),setTimeout((function(){return u(!1)}),200),t(e)},style:n,children:r}),(0,C.jsx)("style",{children:"\n        .".concat(i," {\n          padding: 10px 20px;\n          font-size: 16px;\n          color: white;\n          border: ").concat(l?"2px solid #153002 !important":"none ",";\n          border-radius: 5px;\n          cursor: pointer;\n          transition: background-color 0.3s ease;\n\n        }\n\n        .").concat(i,":hover {\n          background-color:rgb(145, 177, 142) !important;\n        }\n\n        /* Blink animation */\n        @keyframes blink {\n          0% {\n            opacity: 1;\n          }\n          50% {\n            opacity: 0.5;\n          }\n          100% {\n            opacity: 1;\n          }\n        }\n\n        .blinking {\n          animation: blink 0.5s linear infinite;\n        }\n                ")})]})};function _(e){return(e||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function F(e,t){return e.length<=0?0:e.reduce((function(e,n){return e+=parseFloat(n[t].toString().replace(/,/g,""))}),0)}},42419:function(e,t,n){var r=n(64836);t.Z=void 0;var i=r(n(45649)),o=n(80184),c=(0,i.default)((0,o.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");t.Z=c},76633:function(e,t,n){var r=n(64836);t.Z=void 0;var i=r(n(45649)),o=n(80184),c=(0,i.default)((0,o.jsx)("path",{d:"M12 6v3l4-4-4-4v3c-4.42 0-8 3.58-8 8 0 1.57.46 3.03 1.24 4.26L6.7 14.8c-.45-.83-.7-1.79-.7-2.8 0-3.31 2.69-6 6-6zm6.76 1.74L17.3 9.2c.44.84.7 1.79.7 2.8 0 3.31-2.69 6-6 6v-3l-4 4 4 4v-3c4.42 0 8-3.58 8-8 0-1.57-.46-3.03-1.24-4.26z"}),"Autorenew");t.Z=c},53329:function(e,t,n){var r=n(64836);t.Z=void 0;var i=r(n(45649)),o=n(80184),c=(0,i.default)((0,o.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"}),"Save");t.Z=c}}]);
//# sourceMappingURL=3147.8f6d8fb1.chunk.js.map