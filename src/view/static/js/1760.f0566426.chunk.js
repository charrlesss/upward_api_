"use strict";(self.webpackChunkupward=self.webpackChunkupward||[]).push([[1760],{51760:function(e,t,o){o.r(t),o.d(t,{CustomButton:function(){return se},VehicleContext:function(){return pe},default:function(){return ve},vpolicyColumn:function(){return ge}});var n=o(74165),a=o(15861),i=o(29439),l=o(4942),r=o(1413),s=o(30168),d=o(72791),u=o(36151),c=o(64554),p=o(27391),x=o(13239),m=o(13400),h=o(4378),f=o(42419),g=o(3380),y=o(91933),v=o(29823),b=o(53329),S=o(21830),I=o.n(S),P=o(27247),D=o(68096),C=o(94925),F=o(58406),A=o(23786),T=o(81582),L=o(39709),E=o(54164),j=o(25756),M=o(77196),N=o(63466),z=o(91421),Z=o(13784),_=o(99422),w=o(93263),k=o(67756),O=o(75105),R=o(80184),U={ShortName:"",IDNo:"",firstname:"",middlename:"",company:"",address:"",options:"",sub_account:"",createdAt:"",updatedAt:"",contact_details_id:"",description:"",remarks:"",VAT_Type:"",tin_no:"",Sub_Acct:"",Description:"",Acronym:"",update:"",email:"",mobile:"",telephone:""},B=function(e,t){return"UPDATE_FIELD"===t.type?(0,r.Z)((0,r.Z)({},e),{},(0,l.Z)({},t.field,t.value)):e};function V(){var e,t,o=(0,d.useContext)(pe),l=o.state,r=o.handleInputChange,s=o.handleDateChange,c=o.myAxios,h=o.user,f=o.isAddOrEditMode,g=o.isLoadingTempId,b=o.mutateRates,S=(0,d.useReducer)(B,U),I=(0,i.Z)(S,2),P=I[0],T=I[1],E=(0,d.useState)(!1),j=(0,i.Z)(E,2),V=j[0],G=j[1],W=(0,d.useRef)(null),K=(0,d.useRef)(null),q=(0,d.useRef)(null),Y=(0,d.useRef)(null),H=(0,d.useRef)(null),Q=(0,d.useRef)(null),J=(0,d.useRef)(r),X=(0,y.useQuery)({queryKey:"get-policy-account",queryFn:function(){return(e=e||(0,a.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.get("/task/production/get-policy-account",{headers:{Authorization:"Bearer ".concat(null===h||void 0===h?void 0:h.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}),$=X.data,ee=X.isLoading,te=(0,y.useMutation)({mutationKey:"get-client-details",mutationFn:function(e){return(t=t||(0,a.Z)((0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.post("/task/production/get-client-details",t,{headers:{Authorization:"Bearer ".concat(null===h||void 0===h?void 0:h.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t=e.data;!function(e,t){Object.entries(t).forEach((function(t){var o=(0,i.Z)(t,2),n=o[0],a=o[1];e({type:"UPDATE_FIELD",field:n,value:a})}))}(T,null===t||void 0===t?void 0:t.clients[0]),G(!0)}}),oe=te.isLoading,ne=te.mutate,ae=(0,w.Z)({link:{url:"/task/production/get-clients",queryUrlName:"clientSearch"},columns:[{field:"entry_client_id",headerName:"ID",width:130},{field:"fullname",headerName:"Full Name",flex:1},{field:"entry_type",headerName:"ID Type",width:150}],queryKey:"get-clients",uniqueId:"entry_client_id",responseDataKey:"clients",onSelected:function(e){s(e[0].entry_client_id,"client_id"),s(e[0].fullname,"client_name"),s(e[0].address,"client_address"),s(e[0].sale_officer,"sale_officer"),se()},onCellKeyDown:function(e,t){"Enter"!==t.code&&"NumpadEnter"!==t.code||(s(e.row.entry_client_id,"client_id"),s(e.row.fullname,"client_name"),s(e.row.address,"client_address"),s(e.row.sale_officer,"sale_officer"),se())},searchRef:Y}),ie=ae.ModalComponent,le=ae.openModal,re=ae.isLoading,se=ae.closeModal,de=(0,w.Z)({link:{url:"/task/production/get-agents",queryUrlName:"agentSearch"},columns:[{field:"entry_agent_id",headerName:"ID",width:130},{field:"fullname",headerName:"First Name",flex:1},{field:"entry_type",headerName:"ID Type",width:150}],queryKey:"get-agents",uniqueId:"entry_agent_id",responseDataKey:"agents",onSelected:function(e){s(e[0].entry_agent_id,"agent_id"),s(e[0].fullname,"agent_name"),me()},onCellKeyDown:function(e,t){"Enter"!==t.code&&"NumpadEnter"!==t.code||(s(e.row.entry_agent_id,"agent_id"),s(e.row.fullname,"agent_name"),me())},searchRef:H}),ue=de.ModalComponent,ce=de.openModal,xe=de.isLoading,me=de.closeModal,he=(0,w.Z)({link:{url:"/task/production/tpl-ids-vehicle-policy",queryUrlName:"tplIDSearch"},columns:[{field:"Source_No",headerName:"ID",width:130},{field:"Cost",headerName:"Cost",flex:1}],queryKey:"get-tpl-ids",uniqueId:"Source_No",responseDataKey:"tpl_ids",onSelected:function(e){s(e[0].Source_No,"PolicyNo"),s(e[0].Cost,"rateCost"),s(e[0].Source_No_Ref_ID,"Source_No_Ref_ID"),ve()},onCellKeyDown:function(e,t){"Enter"!==t.code&&"NumpadEnter"!==t.code||(s(e.row.Source_No,"PolicyNo"),s(e.row.Cost,"rateCost"),s(e.row.Source_No_Ref_ID,"Source_No_Ref_ID"),ve())},searchRef:Q}),fe=he.ModalComponent,ge=he.openModal,ye=he.isLoading,ve=he.closeModal;(0,d.useEffect)((function(){"TEMP"===l.form_action&&"UCSMI"===(null===h||void 0===h?void 0:h.department)&&(b({Account:"TEMPORARY",Type:l.form_type.toUpperCase()}),J.current({target:{name:"PolicyAccount",value:"TEMPORARY"}}),J.current({target:{name:"Denomination",value:"COM-ALL TYPE"}}))}),[l.form_action,l.form_type,b,h]);var be=function(e){var t=e.datakey,o=e.label,n=e.value;return(0,R.jsxs)("div",{style:{width:"100%",display:"flex"},children:[(0,R.jsx)("label",{style:{width:"200px"},htmlFor:t,children:o}),":",(0,R.jsx)("input",{style:{flex:1,border:"none",padding:"0 20px"},defaultValue:null!==n&&void 0!==n?n:"",id:t,readOnly:!0})]})};return(0,R.jsxs)("div",{children:[(0,R.jsxs)("div",{style:{display:"flex",gap:"10px",flexDirection:"column"},children:[(0,R.jsxs)("div",{style:{flex:1,display:"flex",gap:"10px"},children:[(0,R.jsxs)("fieldset",{style:{flex:1,display:"flex",flexDirection:"column",gap:"10px",padding:"15px",border:"1px solid #cbd5e1",borderRadius:"5px"},children:[(0,R.jsx)("legend",{style:{color:"#065f46"},children:"Insurer Information"}),(0,R.jsxs)("div",{style:{display:"flex",gap:"10px",flexDirection:"column"},children:[(0,R.jsxs)("div",{style:{display:"flex",columnGap:"10px"},children:[re?(0,R.jsx)(L.Z,{loading:re}):(0,R.jsxs)(D.Z,{variant:"outlined",size:"small",disabled:f,sx:{width:"200px",".MuiFormLabel-root":{fontSize:"14px",background:"white",zIndex:99,padding:"0 3px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},children:[(0,R.jsx)(C.Z,{htmlFor:"client-id-field",children:"Client ID"}),(0,R.jsx)(M.Z,{sx:{height:"27px",fontSize:"14px"},disabled:f,fullWidth:!0,label:"Client ID",name:"client_id",value:l.client_id,onChange:r,onKeyDown:function(e){if("Enter"===e.code||"NumpadEnter"===e.code)return e.preventDefault(),void le(l.client_id)},id:"client-id-field",endAdornment:(0,R.jsx)(N.Z,{position:"end",children:(0,R.jsx)(m.Z,{disabled:f,"aria-label":"search-client",color:"secondary",edge:"end",onClick:function(){le(l.client_id)},children:(0,R.jsx)(z.Z,{})})})})]}),oe?(0,R.jsx)("div",{children:(0,R.jsx)(x.Z,{size:"20px"})}):(0,R.jsx)(u.Z,{variant:"outlined",startIcon:(0,R.jsx)(k.Z,{}),sx:{height:"27px",fontSize:"11px"},onClick:function(){ne({userId:l.client_id})},children:"Client"})]}),(0,R.jsx)(p.Z,{disabled:f,fullWidth:!0,variant:"outlined",size:"small",label:"Client Name",name:"client_name",value:l.client_name,onChange:r,InputProps:{style:{height:"27px",fontSize:"14px"},readOnly:!0},sx:{flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}})]}),(0,R.jsx)(p.Z,{rows:5,disabled:f,fullWidth:!0,variant:"outlined",size:"small",label:"Client Address",multiline:!0,name:"client_address",value:l.client_address,onChange:r,InputProps:{style:{height:"100px",fontSize:"14px",padding:"10px"},readOnly:!0},sx:{flex:1,height:"100px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}})]}),(0,R.jsxs)("fieldset",{style:{gap:"10px",padding:"15px",border:"1px solid #cbd5e1",borderRadius:"5px",flexWrap:"wrap",flex:1},children:[(0,R.jsx)("legend",{style:{color:"#065f46"},children:"Agent Information"}),xe?(0,R.jsx)(L.Z,{loading:xe}):(0,R.jsxs)(D.Z,{variant:"outlined",size:"small",disabled:f,sx:{width:"170px",".MuiFormLabel-root":{fontSize:"14px",background:"white",zIndex:99,padding:"0 3px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},children:[(0,R.jsx)(C.Z,{htmlFor:"AGENT-id-field",children:"Agent ID"}),(0,R.jsx)(M.Z,{sx:{height:"27px",fontSize:"14px"},disabled:f,label:"Agent ID",name:"agent_id",value:l.agent_id,onChange:r,onKeyDown:function(e){if("Enter"===e.code||"NumpadEnter"===e.code)return e.preventDefault(),ce(l.agent_id)},id:"AGENT-id-field",endAdornment:(0,R.jsx)(N.Z,{position:"end",children:(0,R.jsx)(m.Z,{disabled:f,"aria-label":"search-client",color:"secondary",edge:"end",onClick:function(){ce(l.agent_id)},children:(0,R.jsx)(z.Z,{})})})})]}),(0,R.jsx)(p.Z,{fullWidth:!0,disabled:f,variant:"outlined",size:"small",label:"Agent Name",name:"agent_name",value:l.agent_name,onChange:r,InputProps:{style:{height:"27px",fontSize:"14px"},readOnly:!0},sx:{flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"},marginTop:"10px"}}),(0,R.jsx)(p.Z,{disabled:f,fullWidth:!0,variant:"outlined",size:"small",label:"Sale Officer",multiline:!0,name:"sale_officer",value:l.sale_officer,onChange:r,InputProps:{style:{height:"27px",fontSize:"14px"},readOnly:!0},sx:{width:"100%",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"},marginTop:"10px"}})]})]}),(0,R.jsxs)("div",{style:{display:"flex",gap:"10px",flex:1},children:[(0,R.jsxs)("fieldset",{style:{display:"grid",gridTemplateColumns:"repeat(2,1fr)",gap:"10px",gridArea:"content3",padding:"15px",border:"1px solid #cbd5e1",borderRadius:"5px",flex:1},children:[(0,R.jsx)("legend",{style:{color:"#065f46"},children:"Vehicle Policy"}),ee?(0,R.jsx)(L.Z,{loading:ee}):(0,R.jsxs)(D.Z,{size:"small",disabled:f,sx:{flex:1,".MuiFormLabel-root":{fontSize:"14px",background:"white",zIndex:99,padding:"0 3px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},children:[(0,R.jsx)(C.Z,{id:"PolicyAccount",children:"Account"}),(0,R.jsx)(F.Z,{disabled:"TEMP"===l.form_action&&"UCSMI"===(null===h||void 0===h?void 0:h.department),labelId:"PolicyAccount",value:l.PolicyAccount,label:"Account",name:"PolicyAccount",onChange:function(e){b({Account:e.target.value.trim(),Type:l.form_type.toUpperCase()}),r({target:{name:"Denomination",value:""}}),r(e)},sx:{height:"27px",fontSize:"14px"},children:$.data.policy_account["".concat(l.form_type.toUpperCase())].map((function(e,t){return(0,R.jsx)(A.Z,{value:e.Account,children:e.Account},t)}))})]}),"tpl"===l.form_type.toLowerCase()?(0,R.jsx)(d.Fragment,{children:ye?(0,R.jsx)(L.Z,{loading:ye}):(0,R.jsxs)(D.Z,{variant:"outlined",size:"small",sx:{flex:1,".MuiFormLabel-root":{fontSize:"14px",background:"white",zIndex:99,padding:"0 3px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},children:[(0,R.jsx)(C.Z,{id:"PolicyNo",children:"Policy No"}),(0,R.jsx)(M.Z,{sx:{height:"27px",fontSize:"14px"},id:"PolicyNo",label:"Policy No",name:"PolicyNo",value:l.PolicyNo,onChange:r,onKeyDown:function(e){if("Enter"===e.code||"NumpadEnter"===e.code)return e.preventDefault(),ge(l.PolicyNo)},endAdornment:(0,R.jsx)(N.Z,{position:"end",children:(0,R.jsx)(m.Z,{"aria-label":"search-client",color:"secondary",edge:"end",onClick:function(){ge(l.PolicyNo)},children:(0,R.jsx)(_.Z,{})})})})]})}):"REG"===l.form_action?(0,R.jsx)(p.Z,{fullWidth:!0,variant:"outlined",size:"small",label:"Policy No.",name:"PolicyNo",value:l.PolicyNo,onChange:r,InputProps:{style:{height:"27px",fontSize:"14px"}},sx:{width:"100%",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}}):(0,R.jsx)(d.Fragment,{children:g?(0,R.jsx)(L.Z,{loading:g}):(0,R.jsx)(p.Z,{fullWidth:!0,variant:"outlined",size:"small",label:"Policy No.",name:"PolicyNo",value:l.PolicyNo,onChange:r,InputProps:{readOnly:!0,style:{height:"27px",fontSize:"14px"}},sx:{width:"100%",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}})}),(0,R.jsx)(p.Z,{disabled:f,fullWidth:!0,variant:"outlined",size:"small",label:"Certificate of Cover No.",name:"CCN",value:l.CCN,onChange:r,InputProps:{style:{height:"27px",fontSize:"14px"}},sx:{width:"100%",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}}),(0,R.jsx)(p.Z,{disabled:f,fullWidth:!0,variant:"outlined",size:"small",label:"Official Receipt No.",name:"ORN",value:l.ORN,onChange:r,InputProps:{style:{height:"27px",fontSize:"14px"}},sx:{width:"100%",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}})]}),(0,R.jsxs)("fieldset",{style:{gridArea:"content4",padding:"15px",border:"1px solid #cbd5e1",borderRadius:"5px",position:"relative",flex:1},children:[(0,R.jsx)("legend",{style:{color:"#065f46"},children:"Period of Insurance"}),(0,R.jsxs)("div",{style:{position:"absolute",display:"flex",gap:"10px",width:"90%"},children:[(0,R.jsx)(Z.Z,{fullWidth:!1,disabled:f,label:"Date From",onChange:function(e){s(e,"DateFrom");var t=new Date(e),o=(0,O.Z)(t,1);s(o,"DateTo")},value:new Date(l.DateFrom),onKeyDown:function(e){if("Enter"===e.code||"NumpadEnter"===e.code)var t=setTimeout((function(){var e,o;null===(e=W.current)||void 0===e||null===(o=e.querySelector("button"))||void 0===o||o.click(),clearTimeout(t)}),150)},datePickerRef:W,textField:{InputLabelProps:{style:{fontSize:"14px"}},InputProps:{style:{height:"27px",fontSize:"14px"}}}}),(0,R.jsx)(Z.Z,{fullWidth:!1,disabled:f,label:"Date To",onChange:function(e){s(e,"DateTo")},value:new Date(l.DateTo),onKeyDown:function(e){if("Enter"===e.code||"NumpadEnter"===e.code)var t=setTimeout((function(){var e,o;null===(e=K.current)||void 0===e||null===(o=e.querySelector("button"))||void 0===o||o.click(),clearTimeout(t)}),150)},datePickerRef:K,textField:{InputLabelProps:{style:{fontSize:"14px"}},InputProps:{style:{height:"27px",fontSize:"14px"}}}}),(0,R.jsx)(Z.Z,{fullWidth:!1,label:"Date Issued",name:"DateIssued",onChange:function(e){s(e,"DateIssued")},value:new Date(l.DateIssued),disabled:f,onKeyDown:function(e){if("Enter"===e.code||"NumpadEnter"===e.code)var t=setTimeout((function(){var e,o;null===(e=q.current)||void 0===e||null===(o=e.querySelector("button"))||void 0===o||o.click(),clearTimeout(t)}),150)},datePickerRef:q,textField:{InputLabelProps:{style:{fontSize:"14px"}},InputProps:{style:{height:"27px",fontSize:"14px"}}}})]})]})]}),(0,R.jsx)("div",{style:{width:"50%"},children:(0,R.jsxs)("fieldset",{style:{display:"flex",gap:"20px",padding:"15px",border:"1px solid #cbd5e1",borderRadius:"5px"},children:[(0,R.jsx)("legend",{style:{color:"#065f46"},children:"Insured Unit"}),(0,R.jsxs)("div",{style:{flex:1,display:"flex",gap:"10px",flexDirection:"column"},children:[(0,R.jsx)(p.Z,{disabled:f,fullWidth:!0,variant:"outlined",size:"small",label:"Model",name:"Model",value:l.Model,onChange:r,InputProps:{style:{height:"27px",fontSize:"14px"}},sx:{flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}}),(0,R.jsx)(p.Z,{disabled:f,fullWidth:!0,variant:"outlined",size:"small",label:"Make",name:"Make",value:l.Make,onChange:r,InputProps:{style:{height:"27px",fontSize:"14px"}},sx:{flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}}),(0,R.jsx)(p.Z,{disabled:f,fullWidth:!0,variant:"outlined",size:"small",label:"Type of Body",name:"TB",value:l.TB,onChange:r,InputProps:{style:{height:"27px",fontSize:"14px"}},sx:{flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}}),(0,R.jsx)(p.Z,{disabled:f,fullWidth:!0,variant:"outlined",size:"small",label:"Color",name:"Color",value:l.Color,onChange:r,InputProps:{style:{height:"27px",fontSize:"14px"}},sx:{flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}}),(0,R.jsx)(p.Z,{disabled:f,fullWidth:!0,variant:"outlined",size:"small",label:"BLT File No",name:"BLTFileNo",value:l.BLTFileNo,onChange:r,InputProps:{style:{height:"27px",fontSize:"14px"}},sx:{flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}})]}),(0,R.jsxs)("div",{style:{flex:1,display:"flex",gap:"10px",flexDirection:"column"},children:[(0,R.jsx)(p.Z,{disabled:f,fullWidth:!0,variant:"outlined",size:"small",label:"Plate No",name:"PlateNo",value:l.PlateNo,onChange:r,InputProps:{style:{height:"27px",fontSize:"14px"}},sx:{flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}}),(0,R.jsx)(p.Z,{disabled:f,fullWidth:!0,variant:"outlined",size:"small",label:"Chassis No",name:"ChassisNo",value:l.ChassisNo,onChange:r,InputProps:{style:{height:"27px",fontSize:"14px"}},sx:{flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}}),(0,R.jsx)(p.Z,{disabled:f,fullWidth:!0,variant:"outlined",size:"small",label:"Motor No.",name:"MotorNo",value:l.MotorNo,onChange:r,InputProps:{style:{height:"27px",fontSize:"14px"}},sx:{flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}}),(0,R.jsx)(p.Z,{disabled:f,fullWidth:!0,variant:"outlined",size:"small",label:"Authorized Capacity",name:"AuthorizedCapacity",value:l.AuthorizedCapacity,onChange:r,InputProps:{style:{height:"27px",fontSize:"14px"}},sx:{flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}}),(0,R.jsx)(p.Z,{disabled:f,fullWidth:!0,variant:"outlined",size:"small",label:"Unladen Weight",name:"UnladenWeigth",value:l.UnladenWeigth,onChange:r,InputProps:{style:{height:"27px",fontSize:"14px"}},sx:{flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}})]})]})})]}),(0,R.jsx)("div",{style:{position:"fixed",top:0,bottom:0,left:0,right:0,background:"rgba(158, 155, 157, 0.31)",zIndex:"999",display:V?"flex":"none",justifyContent:"center",alignItems:"center",boxShadow:"-1px 15px 74px 38px rgba(0,0,0,0.37)"},children:(0,R.jsxs)("div",{style:{background:"white",width:"70%",height:"700px",position:"relative",padding:"50px 20px"},children:[(0,R.jsx)(m.Z,{sx:{position:"absolute",top:"10px",right:"10px"},onClick:function(){return G(!1)},children:(0,R.jsx)(v.Z,{})}),(0,R.jsxs)("div",{style:{width:"100%",height:"100%"},children:[(0,R.jsx)("hr",{style:{margin:"5px 0"}}),(0,R.jsx)("p",{style:{margin:"0",padding:"0",fontWeight:"bold"},children:"Client Details"}),(0,R.jsx)("hr",{style:{margin:"5px 0"}}),(0,R.jsx)(be,{datakey:"IDNo",label:"ID NO.",value:P.IDNo}),(0,R.jsx)(be,{datakey:"ShortName",label:"Short Name",value:P.ShortName}),(0,R.jsx)(be,{datakey:"subShortName",label:"Sub Account",value:P.subShortName}),(0,R.jsx)(be,{datakey:"mobile",label:"Mobile",value:P.mobile}),(0,R.jsx)(be,{datakey:"email",label:"Email",value:P.email}),(0,R.jsx)(be,{datakey:"address",label:"Address",value:P.address}),(0,R.jsx)(be,{datakey:"options",label:"Option",value:P.options})]})]})}),ie,ue,fe]})}var G=o(93433),W=o(79012),K=o(85523),q=o(94454),Y=o(20890),H=o(94721),Q=o(56580);function J(){var e,t=(0,d.useContext)(pe),o=t.state,l=t.handleInputChange,r=t.handleDateChange,s=t.tplCompuation,x=t.comComputation,m=t.isAddOrEditMode,h=t.dispatch,f=t.myAxios,g=t.user,v=(0,d.useState)(JSON.parse(o.MortgageeForm)?"LOSS and/or DAMAGE, if any under this policy shall be payable to ".concat(o.Mortgagee," as their interest may appear subject to all terms and conditions, clauses and warranties of this policy. SUBJECT TO THE ATTACHED STANDARD ACCESSORIES ENDORSEMENT CLAUSE; FULL PREMIUM PAYMENT IN CASE OF LOSS CLAUSE; MEMORANDUM ON DOCUMENTARY STAMPS TAX; ANTI CARNAPING; PREVENTION TIPS AND AUTO PA RIDER; DRUNKEN AND DRIVE CLAUSE THIS POLICY OR ANY RENEWAL THEREOF SHALL NOT BE CANCELLED WITHOUT PRIOR WRITTEN NOTIFICATION AND CONFORMIY TO ").concat(o.Mortgagee):"SUBJECT TO THE ATTACHED STANDARD ACCESSORIES ENDORSEMENT CLAUSE; FULL PREMIUM PAYMENT IN CASE OF LOSS CLAUSE; MEMORANDUM ON DOCUMENTARY STAMPS TAX; ANTI CARNAPING PREVENTION TIPS AND AUTO PA RIDER; DRUNKEN AND DRIVER CLAUSE"),b=(0,i.Z)(v,2),S=b[0],I=b[1],P=(0,y.useQuery)({queryKey:"get-mortgagee",queryFn:function(){return(e=e||(0,a.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.get("/task/production/get-mortgagee",{headers:{Authorization:"Bearer ".concat(null===g||void 0===g?void 0:g.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}),C=P.data,T=P.isLoading;function E(e){if("NumpadEnter"===e.code||"Enter"===e.code){if("com"===o.form_type.toLowerCase())return x();s()}}return(0,R.jsx)("div",{children:(0,R.jsxs)("fieldset",{style:{display:"flex",columnGap:"10px",padding:"15px",border:"1px solid #cbd5e1",borderRadius:"5px"},children:[(0,R.jsx)("legend",{children:"Mortgagee"}),(0,R.jsxs)(c.Z,{sx:{display:"flex",flexDirection:"column",rowGap:"10px",flex:1},children:[(0,R.jsxs)("div",{children:[(0,R.jsx)(W.Z,{children:(0,R.jsx)(K.Z,{sx:{".MuiTypography-root":{fontSize:"13px !important"}},disabled:m,control:(0,R.jsx)(q.Z,{size:"small",name:"MortgageeForm",value:JSON.parse(o.MortgageeForm),checked:JSON.parse(o.MortgageeForm),onChange:function(e){e.target.checked?I("LOSS and/or DAMAGE, if any under this policy shall be payable to ".concat(o.Mortgagee," as their interest may appear subject to all terms and conditions, clauses and warranties of this policy. SUBJECT TO THE ATTACHED STANDARD ACCESSORIES ENDORSEMENT CLAUSE; FULL PREMIUM PAYMENT IN CASE OF LOSS CLAUSE; MEMORANDUM ON DOCUMENTARY STAMPS TAX; ANTI CARNAPING; PREVENTION TIPS AND AUTO PA RIDER; DRUNKEN AND DRIVE CLAUSE THIS POLICY OR ANY RENEWAL THEREOF SHALL NOT BE CANCELLED WITHOUT PRIOR WRITTEN NOTIFICATION AND CONFORMIY TO ").concat(o.Mortgagee)):I("SUBJECT TO THE ATTACHED STANDARD ACCESSORIES ENDORSEMENT CLAUSE; FULL PREMIUM PAYMENT IN CASE OF LOSS CLAUSE; MEMORANDUM ON DOCUMENTARY STAMPS TAX; ANTI CARNAPING PREVENTION TIPS AND AUTO PA RIDER; DRUNKEN AND DRIVER CLAUSE"),r("".concat(e.target.checked),"MortgageeForm")}}),label:"MortgageeForm"})}),(0,R.jsx)("h5",{style:{margin:"0",padding:"0"},children:"Form and Endorcement"})]}),T?(0,R.jsx)(L.Z,{loading:T}):(0,R.jsx)(D.Z,{size:"small",fullWidth:!0,required:!0,disabled:m,children:(0,R.jsx)(F.Z,{labelId:"Mortgagee",value:o.Mortgagee,name:"Mortgagee",onChange:l,children:[{type:""}].concat((0,G.Z)(C.data.mortgagee["".concat(o.form_type.toUpperCase())])).map((function(e,t){return(0,R.jsx)(A.Z,{value:e.Mortgagee,children:e.Mortgagee},t)}))})}),(0,R.jsx)("div",{style:{border:"1px solid #cbd5e1",height:"100%",padding:"5px",overflowY:"auto",maxHeight:"230px"},children:(0,R.jsx)(Y.Z,{variant:"caption",children:S})}),(0,R.jsx)(p.Z,{disabled:m,label:"Remarks",name:"remarks",value:o.remarks,onChange:l,multiline:!0,rows:3,InputProps:{style:{height:"auto",fontSize:"14px"}},sx:{flex:1,height:"auto",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}})]}),(0,R.jsxs)("fieldset",{style:{display:"flex",flexDirection:"column",rowGap:"10px",padding:"15px",border:"1px solid #cbd5e1",borderRadius:"5px"},children:[(0,R.jsx)("legend",{children:"Premiums"}),(0,R.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",padding:"5px"},children:(0,R.jsx)(u.Z,{disabled:m,size:"small",variant:"contained",color:"primary",onClick:function(){if("com"===o.form_type.toLowerCase())return x();s()},children:"Compute"})}),"tpl"===o.form_type.toLowerCase()&&(0,R.jsx)(p.Z,{disabled:m,required:!0,fullWidth:!0,variant:"outlined",size:"small",label:"Section I/II",name:"SectionI_II",value:o.SectionI_II,onChange:function(e){l(e)},onKeyDown:E,placeholder:"0.00",InputProps:{inputComponent:Q.a,style:{height:"27px",fontSize:"14px"}},sx:{flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},onBlur:function(){h({type:"UPDATE_FIELD",field:"SectionI_II",value:parseFloat(o.SectionI_II).toFixed(2)})}}),"com"===o.form_type.toLowerCase()&&(0,R.jsxs)(d.Fragment,{children:[(0,R.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(2,1fr)",gap:"10px"},children:[(0,R.jsx)(p.Z,{disabled:m,required:!0,fullWidth:!0,variant:"outlined",size:"small",label:"Section III(%)",name:"SectionIII",value:o.SectionIII,onChange:l,onKeyDown:E,placeholder:"0.00",InputProps:{inputComponent:Q.a,style:{height:"27px",fontSize:"14px"}},sx:{flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},onBlur:function(){h({type:"UPDATE_FIELD",field:"SectionIII",value:parseFloat(o.SectionIII).toFixed(2)})}}),(0,R.jsx)(p.Z,{disabled:m,required:!0,fullWidth:!0,variant:"outlined",size:"small",label:"Own Damage",name:"OwnDamage",value:o.OwnDamage,onChange:l,onKeyDown:E,placeholder:"0.00",InputProps:{inputComponent:Q.a,style:{height:"27px",fontSize:"14px"}},sx:{flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},onBlur:function(){h({type:"UPDATE_FIELD",field:"OwnDamage",value:parseFloat(o.OwnDamage).toFixed(2)})}}),(0,R.jsx)(p.Z,{disabled:m,required:!0,fullWidth:!0,variant:"outlined",size:"small",label:"Theft",name:"Theft",value:o.Theft,onChange:l,onKeyDown:E,placeholder:"0.00",InputProps:{inputComponent:Q.a,style:{height:"27px",fontSize:"14px"}},sx:{flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},onBlur:function(){h({type:"UPDATE_FIELD",field:"Theft",value:parseFloat(o.Theft).toFixed(2)})}}),(0,R.jsx)(p.Z,{disabled:m,required:!0,fullWidth:!0,variant:"outlined",size:"small",label:"Section IV-A",name:"SectionIVA",value:o.SectionIVA,onChange:l,onKeyDown:E,placeholder:"0.00",InputProps:{inputComponent:Q.a,style:{height:"27px",fontSize:"14px"}},sx:{flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},onBlur:function(){h({type:"UPDATE_FIELD",field:"SectionIVA",value:parseFloat(o.SectionIVA).toFixed(2)})}}),(0,R.jsx)(p.Z,{disabled:m,required:!0,fullWidth:!0,variant:"outlined",size:"small",label:"Section IV-B",name:"SectionIVB",value:o.SectionIVB,onChange:l,onKeyDown:E,placeholder:"0.00",InputProps:{inputComponent:Q.a,style:{height:"27px",fontSize:"14px"}},sx:{flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},onBlur:function(){h({type:"UPDATE_FIELD",field:"SectionIVB",value:parseFloat(o.SectionIVB).toFixed(2)})}}),(0,R.jsx)(p.Z,{disabled:m,label:"Other",required:!0,variant:"outlined",size:"small",name:"PremiumOther",value:o.PremiumOther,onChange:l,onKeyDown:E,placeholder:"0.00",InputProps:{inputComponent:Q.a,style:{height:"27px",fontSize:"14px"}},sx:{flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},onBlur:function(){h({type:"UPDATE_FIELD",field:"PremiumOther",value:parseFloat(o.PremiumOther).toFixed(2)})}})]}),(0,R.jsxs)("div",{style:{display:"flex",gap:"5px",position:"relative"},children:[(0,R.jsx)(p.Z,{disabled:m,required:!0,variant:"outlined",size:"small",label:"AOG Percent",name:"AOGPercent",value:o.AOGPercent,onChange:l,onKeyDown:E,placeholder:"0.00",InputProps:{inputComponent:Q.a,style:{height:"27px",fontSize:"14px"}},sx:{width:"80px",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},onBlur:function(){h({type:"UPDATE_FIELD",field:"AOGPercent",value:parseFloat(o.AOGPercent).toFixed(2)})}}),(0,R.jsx)(p.Z,{disabled:m,required:!0,variant:"outlined",size:"small",label:"AOG",name:"AOG",value:o.AOG,onChange:l,onKeyDown:E,placeholder:"0.00",InputProps:{inputComponent:Q.a,style:{height:"27px",fontSize:"14px"}},sx:{flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},onBlur:function(){h({type:"UPDATE_FIELD",field:"AOG",value:parseFloat(o.AOG).toFixed(2)})}})]})]}),(0,R.jsx)(H.Z,{color:"secondary"}),(0,R.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(2,1fr)",gap:"10px"},children:[(0,R.jsx)(p.Z,{disabled:m,required:!0,variant:"outlined",size:"small",label:"Total Premium",name:"TotalPremium",value:o.TotalPremium,InputProps:{inputComponent:Q.a,style:{height:"27px",fontSize:"14px"}},sx:{flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},onChange:function(e){l(e)},onKeyDown:E,placeholder:"0.00",onBlur:function(){h({type:"UPDATE_FIELD",field:"TotalPremium",value:parseFloat(o.TotalPremium).toFixed(2)})}}),(0,R.jsx)(p.Z,{disabled:m,required:!0,variant:"outlined",size:"small",label:"Vat",name:"Vat",value:o.Vat,onChange:function(e){l(e)},onKeyDown:E,placeholder:"0.00",InputProps:{inputComponent:Q.a,style:{height:"27px",fontSize:"14px"}},sx:{flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},onBlur:function(){h({type:"UPDATE_FIELD",field:"Vat",value:parseFloat(o.Vat).toFixed(2)})}}),(0,R.jsx)(p.Z,{disabled:m,required:!0,variant:"outlined",size:"small",label:"Doc Stamp",name:"DocStamp",value:o.DocStamp,onChange:function(e){l(e)},onKeyDown:E,placeholder:"0.00",InputProps:{inputComponent:Q.a,style:{height:"27px",fontSize:"14px"}},sx:{flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},onBlur:function(){h({type:"UPDATE_FIELD",field:"DocStamp",value:parseFloat(o.DocStamp).toFixed(2)})}}),"com"===o.form_type.toLowerCase()?(0,R.jsxs)("div",{style:{display:"flex",gap:"5px",position:"relative",width:"100%"},children:[(0,R.jsx)(p.Z,{disabled:m,required:!0,variant:"outlined",size:"small",name:"LocalGovTaxPercent",value:o.LocalGovTaxPercent,onChange:function(e){l(e)},onKeyDown:E,placeholder:"0.00",InputProps:{inputComponent:Q.a,style:{height:"27px",fontSize:"14px"}},sx:{width:"80px",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},onBlur:function(){h({type:"UPDATE_FIELD",field:"LocalGovTaxPercent",value:parseFloat(o.LocalGovTaxPercent).toFixed(2)})}}),(0,R.jsx)(p.Z,{disabled:m,required:!0,variant:"outlined",size:"small",label:"Local Gov Tax",name:"LocalGovTax",value:o.LocalGovTax,onChange:function(e){l(e)},onKeyDown:E,placeholder:"0.00",InputProps:{inputComponent:Q.a,style:{height:"27px",fontSize:"14px"}},sx:{width:"100%",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},onBlur:function(){h({type:"UPDATE_FIELD",field:"LocalGovTax",value:parseFloat(o.LocalGovTax).toFixed(2)})}})]}):(0,R.jsx)(p.Z,{disabled:m,required:!0,variant:"outlined",size:"small",label:"Local Gov Tax",name:"LocalGovTax",value:o.LocalGovTax,onChange:function(e){l(e)},onKeyDown:E,placeholder:"0.00",InputProps:{inputComponent:Q.a,style:{height:"27px",fontSize:"14px"}},sx:{width:"80px",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},onBlur:function(){h({type:"UPDATE_FIELD",field:"LocalGovTax",value:parseFloat(o.LocalGovTax).toFixed(2)})}})]}),(0,R.jsx)(p.Z,{disabled:m,required:!0,variant:"outlined",size:"small",label:"StradCom",name:"StradCom",value:o.StradCom,onChange:function(e){l(e)},onKeyDown:E,placeholder:"0.00",InputProps:{inputComponent:Q.a,style:{height:"27px",fontSize:"14px"}},sx:{width:"50%",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},onBlur:function(){h({type:"UPDATE_FIELD",field:"StradCom",value:parseFloat(o.StradCom).toFixed(2)})}}),(0,R.jsx)(H.Z,{color:"secondary"}),(0,R.jsx)(p.Z,{disabled:m,required:!0,variant:"outlined",size:"small",label:"Total Due",name:"TotalDue",value:o.TotalDue,onChange:l,onKeyDown:E,placeholder:"0.00",InputProps:{inputComponent:Q.a,style:{height:"27px",fontSize:"14px"}},sx:{width:"50%",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},onBlur:function(){h({type:"UPDATE_FIELD",field:"TotalDue",value:parseFloat(o.TotalDue).toFixed(2)})}})]})]})})}var X=o(73766),$=[{Account:"0.00"},{Account:"50,000.00"},{Account:"75,000.00"},{Account:"100,000.00"},{Account:"150,000.00"},{Account:"200,000.00"},{Account:"250,000.00"},{Account:"300,000.00"}],ee=[{Account:"",PremuimPaid:"0.00"},{Account:"LIGHT PRIVATE VEHICLE(1YR)",PremuimPaid:"447.01"},{Account:"MEDIUM PRIVATE VEHICLE(1YR)",PremuimPaid:"486.92"},{Account:"HEAVY PRIVATE VEHICLE(1YR)",PremuimPaid:"957.88"},{Account:"MC/TC - MOTORCYCLE/TRICYCLE(1YR)",PremuimPaid:"199.55"},{Account:"LIGHT PRIVATE VEHICLE(3YR)",PremuimPaid:"1285.14"},{Account:"MEDIUM PRIVATE VEHICLE(3YR)",PremuimPaid:"1396.89"},{Account:"HEAVY PRIVATE VEHICLE(3YR)",PremuimPaid:"2746.34"},{Account:"MC/TC - MOTORCYCLE/TRICYCLE(3YR)",PremuimPaid:"574.72"}];function te(){var e=(0,d.useContext)(pe),t=e.state,o=e.handleInputChange,n=e.handleDateChange,a=e.showField,i=e.isAddOrEditMode,l=e.dispatch,s=e.tplCompuation,u=e.comComputation,x=e.parseStringToNumber,m=e.domination,h=e.isLoadingrates,f=e.user;function g(e){if("NumpadEnter"===e.code||"Enter"===e.code){if("com"===t.form_type.toLowerCase())return u();s()}}function y(e,t,n){var a=parseFloat(x(e).replace(/,/g,"")),i=0;a<=0&&(o({target:{name:"Deductible",value:"0"}}),v(x(i.toFixed(2)),n)),"private"===t?i=.005*a:("heavy"===t||"motorcycle"===t)&&(i=.01*a),i<2e3&&(i=2e3),o({target:{name:"Deductible",value:x(i.toFixed(2))}}),v(x(i.toFixed(2)),n)}function v(e,t){var n=parseFloat(x(e).replace(/,/g,"")),a=parseFloat(x(t).replace(/,/g,""));o({target:{name:"ARL",value:x((Math.abs(n)+Math.abs(a)).toFixed(2))}})}return(0,R.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:["tpl"===t.form_type.toLowerCase()&&(0,R.jsxs)(d.Fragment,{children:[(0,R.jsx)(Y.Z,{variant:"h6",sx:{marginY:"10px"},children:"THIRD PARTY LIABILITY"}),(0,R.jsxs)("fieldset",{style:{display:"flex",gap:"10px",padding:"15px",border:"1px solid #cbd5e1",borderRadius:"5px"},children:[(0,R.jsx)("legend",{children:"Section I/II"}),(0,R.jsxs)(D.Z,{size:"small",disabled:!a.thirdparty||i,sx:{flex:1,".MuiFormLabel-root":{fontSize:"14px",background:"white",zIndex:99,padding:"0 3px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},children:[(0,R.jsx)(C.Z,{id:"Type",children:"Type"}),(0,R.jsx)(F.Z,{labelId:"Type",value:t.TplType,label:"Type",name:"TplType",onChange:function(e){var t=ee.filter((function(t){return t.Account===e.target.value}))[0];o(e),n(t.PremuimPaid,"PremiumPaid")},sx:{height:"27px",fontSize:"14px"},children:[].concat(ee).map((function(e,t){return(0,R.jsx)(A.Z,{value:e.Account,children:e.Account},t)}))})]}),(0,R.jsx)(p.Z,{disabled:i,variant:"outlined",size:"small",label:"Premium Paid",name:"PremiumPaid",value:t.PremiumPaid,onChange:function(e){o(e)},placeholder:"0.00",onBlur:function(){l({type:"UPDATE_FIELD",field:"PremiumPaid",value:parseFloat(t.PremiumPaid).toFixed(2)})},onKeyDown:g,InputProps:{inputComponent:Q.a,style:{height:"27px",fontSize:"14px"}},sx:{flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}})]})]}),"com"===t.form_type.toLowerCase()&&(0,R.jsxs)(d.Fragment,{children:[(0,R.jsx)(Y.Z,{variant:"h6",sx:{marginY:"10px"},children:"COMPREHENSEVE"}),(0,R.jsxs)("fieldset",{style:{display:"flex",flexDirection:"row",gap:"10px",gridArea:"content4",padding:"15px",border:"1px solid #cbd5e1",borderRadius:"5px"},children:[(0,R.jsx)("legend",{children:"Section III/IV"}),(0,R.jsxs)(c.Z,{sx:function(e){return{flex:1,display:"flex",columnGap:"15px",flexDirection:"column",gap:"8px"}},children:[(0,R.jsx)(p.Z,{disabled:i,fullWidth:!0,variant:"outlined",size:"small",label:"Estimated Value of Schedule Vehicle",name:"EVSV",value:t.EVSV,onChange:function(e){y(e.target.value,t.vehicle,t.Towing),o(e)},placeholder:"0.00",InputProps:{style:{height:"27px",fontSize:"14px"},inputComponent:Q.a},sx:{flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},onKeyDown:g,onBlur:function(){l({type:"UPDATE_FIELD",field:"EVSV",value:parseFloat(t.EVSV).toFixed(2)})}}),(0,R.jsx)(p.Z,{disabled:i,variant:"outlined",size:"small",label:"Aircon",fullWidth:!0,name:"Aircon",value:t.Aircon,onChange:o,placeholder:"0.00",InputProps:{style:{height:"27px",fontSize:"14px"},inputComponent:Q.a},sx:{flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},onBlur:function(){l({type:"UPDATE_FIELD",field:"Aircon",value:parseFloat(t.Aircon).toFixed(2)})}}),(0,R.jsx)(p.Z,{disabled:i,variant:"outlined",size:"small",label:"Stereo",fullWidth:!0,name:"Stereo",value:t.Stereo,onChange:o,placeholder:"0.00",InputProps:{style:{height:"27px",fontSize:"14px"},inputComponent:Q.a},sx:{flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},onBlur:function(){l({type:"UPDATE_FIELD",field:"Stereo",value:parseFloat(t.Stereo).toFixed(2)})}}),(0,R.jsx)(p.Z,{disabled:i,variant:"outlined",size:"small",label:"Magwheels",fullWidth:!0,name:"Magwheels",value:t.Magwheels,onChange:o,placeholder:"0.00",InputProps:{style:{height:"27px",fontSize:"14px"},inputComponent:Q.a},sx:{flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},onBlur:function(){l({type:"UPDATE_FIELD",field:"Magwheels",value:parseFloat(t.Magwheels).toFixed(2)})}}),(0,R.jsxs)("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[(0,R.jsx)(p.Z,{disabled:i,variant:"outlined",size:"small",label:"Others(Specify)",fullWidth:!0,name:"OthersDesc",value:t.OthersDesc,onChange:o,InputProps:{style:{height:"27px",fontSize:"14px"}},sx:{flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}}),(0,R.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"30px",height:"3px",backgroundColor:"black",boxSizing:"border-box"}}),(0,R.jsx)(p.Z,{disabled:i,variant:"outlined",size:"small",name:"OthersRate",value:t.OthersRate,onChange:o,placeholder:"0.00",InputProps:{inputComponent:Q.a,style:{height:"27px",fontSize:"14px"}},sx:{flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},onBlur:function(){l({type:"UPDATE_FIELD",field:"OthersRate",value:parseFloat(t.OthersRate).toFixed(2)})}})]})]}),(0,R.jsx)(c.Z,{sx:{display:"flex",columnGap:"10px",flex:1},children:(0,R.jsxs)(c.Z,{sx:{display:"flex",columnGap:"10px",flex:1},children:[(0,R.jsxs)("fieldset",{style:{flex:1,padding:"15px",border:"1px solid #cbd5e1",borderRadius:"5px"},children:[(0,R.jsxs)("div",{style:{display:"flex",columnGap:"4px"},children:[(0,R.jsxs)(D.Z,{size:"small",disabled:i,sx:{width:"100px",".MuiFormLabel-root":{fontSize:"14px",background:"white",zIndex:99,padding:"0 3px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},children:[(0,R.jsx)(C.Z,{id:"vehicle",children:"Vehicle"}),(0,R.jsxs)(F.Z,{labelId:"vehicle",value:t.vehicle,label:"Vehicle",name:"vehicle",onChange:function(e){y(t.EVSV,e.target.value,t.Towing),o(e)},sx:{height:"27px",fontSize:"14px"},children:[(0,R.jsx)(A.Z,{value:"private",children:"Private"}),(0,R.jsx)(A.Z,{value:"heavy",children:"Heavy"}),(0,R.jsx)(A.Z,{value:"motorcycle",children:"Motorcycle"})]})]}),(0,R.jsx)(p.Z,{disabled:i,variant:"outlined",size:"small",label:"Deductible",fullWidth:!0,name:"Deductible",value:t.Deductible,onChange:o,placeholder:"0.00",InputProps:{inputComponent:Q.a,style:{height:"27px",fontSize:"14px"}},sx:{marginBottom:"10px",flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},onBlur:function(){l({type:"UPDATE_FIELD",field:"Deductible",value:parseFloat(t.Deductible).toFixed(2)})}})]}),(0,R.jsx)(p.Z,{disabled:i,variant:"outlined",size:"small",label:"Towing",fullWidth:!0,name:"Towing",value:t.Towing,onChange:function(e){v(t.Deductible,e.target.value),o(e)},placeholder:"0.00",InputProps:{inputComponent:Q.a,style:{height:"27px",fontSize:"14px"}},sx:{marginBottom:"10px",flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},onBlur:function(){l({type:"UPDATE_FIELD",field:"Towing",value:parseFloat(t.Towing).toFixed(2)})}}),(0,R.jsx)(p.Z,{disabled:i,variant:"outlined",size:"small",label:"Authorized Repair Limit",fullWidth:!0,name:"ARL",value:t.ARL,onChange:o,placeholder:"0.00",InputProps:{inputComponent:Q.a,style:{height:"27px",fontSize:"14px"}},sx:{marginBottom:"10px",flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},onBlur:function(){l({type:"UPDATE_FIELD",field:"ARL",value:parseFloat(t.ARL).toFixed(2)})}})]}),(0,R.jsxs)("fieldset",{style:{flex:1,padding:"15px",border:"1px solid #cbd5e1",borderRadius:"5px"},children:[(0,R.jsx)(X.Z,{disabled:i,value:t.BodyInjury,onChange:function(e,t){o({target:{name:"BodyInjury",value:t}})},size:"small",freeSolo:!0,disableClearable:!0,options:$.map((function(e){return e.Account})),getOptionLabel:function(e){return e},sx:function(e){return{height:"27px",marginBottom:"10px","& .MuiAutocomplete-inputRoot":{flexWrap:"nowrap !important"}}},renderInput:function(e){return(0,R.jsx)(p.Z,(0,r.Z)((0,r.Z)({},e),{},{label:"Bodily Injury",name:"BodyInjury",sx:{height:"27px"},InputProps:(0,r.Z)((0,r.Z)({},e.InputProps),{},{type:"search",style:{height:"27px",fontSize:"14px"}}),onChange:function(e){var t=parseFloat(e.target.value.replace(/,/g,""));if(isNaN(t))return o(e);var n=t.toLocaleString("en-US");e.target.value=n,o(e)},onBlur:function(){if(isNaN(parseFloat(t.BodyInjury.replace(/,/g,""))))return l({type:"UPDATE_FIELD",field:"BodyInjury",value:"0.00"});l({type:"UPDATE_FIELD",field:"BodyInjury",value:parseFloat(t.BodyInjury.replace(/,/g,"")).toLocaleString("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2})})}}))}}),(0,R.jsx)(X.Z,{disabled:i,value:t.PropertyDamage,onChange:function(e,t){o({target:{name:"PropertyDamage",value:t}})},size:"small",freeSolo:!0,disableClearable:!0,options:$.map((function(e){return e.Account})),getOptionLabel:function(e){return e},sx:function(e){return{height:"27px",marginBottom:"10px","& .MuiAutocomplete-inputRoot":{flexWrap:"nowrap !important"}}},renderInput:function(e){return(0,R.jsx)(p.Z,(0,r.Z)((0,r.Z)({},e),{},{label:"Property Damage",name:"PropertyDamage",sx:{height:"27px"},InputProps:(0,r.Z)((0,r.Z)({},e.InputProps),{},{type:"search",style:{height:"27px",fontSize:"14px"}}),onChange:function(e){var t=parseFloat(e.target.value.replace(/,/g,""));if(isNaN(t))return o(e);var n=t.toLocaleString("en-US");e.target.value=n,o(e)},onBlur:function(){if(isNaN(parseFloat(t.PropertyDamage.replace(/,/g,""))))return l({type:"UPDATE_FIELD",field:"PropertyDamage",value:"0.00"});l({type:"UPDATE_FIELD",field:"PropertyDamage",value:parseFloat(t.PropertyDamage.replace(/,/g,"")).toLocaleString("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2})})}}))}}),(0,R.jsx)(X.Z,{disabled:i,value:t.PersinalAccident,onChange:function(e,t){o({target:{name:"PersinalAccident",value:t}})},size:"small",freeSolo:!0,disableClearable:!0,options:$.map((function(e){return e.Account})),getOptionLabel:function(e){return e},sx:function(e){return{height:"27px",marginBottom:"10px","& .MuiAutocomplete-inputRoot":{flexWrap:"nowrap !important"}}},renderInput:function(e){return(0,R.jsx)(p.Z,(0,r.Z)((0,r.Z)({},e),{},{label:"Personal Accident",name:"PersinalAccident",sx:{height:"27px"},InputProps:(0,r.Z)((0,r.Z)({},e.InputProps),{},{type:"search",style:{height:"27px",fontSize:"14px"}}),onChange:function(e){var t=parseFloat(e.target.value.replace(/,/g,""));if(isNaN(t))return o(e);var n=t.toLocaleString("en-US");e.target.value=n,o(e)},onBlur:function(){if(isNaN(parseFloat(t.PersinalAccident.replace(/,/g,""))))return l({type:"UPDATE_FIELD",field:"PersinalAccident",value:"0.00"});l({type:"UPDATE_FIELD",field:"PersinalAccident",value:parseFloat(t.PersinalAccident.replace(/,/g,"")).toLocaleString("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2})})}}))}})]})]})})]})]}),(0,R.jsx)("br",{}),h?(0,R.jsx)(L.Z,{loading:h}):(0,R.jsxs)(D.Z,{disabled:i||""===t.PolicyAccount,fullWidth:!0,size:"small",sx:{width:"300px",".MuiFormLabel-root":{fontSize:"14px",background:"white",zIndex:99,padding:"0 3px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},children:[(0,R.jsx)(C.Z,{id:"Denomination",children:"Domination"}),(0,R.jsx)(F.Z,{disabled:"TEMP"===t.form_action&&"UCSMI"===(null===f||void 0===f?void 0:f.department),labelId:"Denomination",value:t.Denomination,label:"Denomination",name:"Denomination",onChange:o,sx:{height:"27px",fontSize:"14px"},children:m.map((function(e,t){return(0,R.jsx)(A.Z,{value:e.type,children:e.type},t)}))})]})]})}var oe,ne=o(98333),ae=o(50225),ie=o(64230),le=o(16386),re=o(80813),se=ae.Z.button(oe||(oe=(0,s.Z)(["\n  cursor: pointer;\n  border: none;\n  outline: none;\n  background: transparent;\n  font-size: 17px;\n  color:","\n  padding: 0;\n  &:hover  {\n    color: #64748b;\n    background:white;\n  },\n"])),(function(e){return e.currentStepIndex===e.index?"#0284c7;":"#020617;"})),de={form_action:"REG",form_type:"COM",sub_account:"HO",client_id:"",client_name:"",client_address:"",agent_id:"",agent_name:"",agent_com:"0.00",sale_officer:"",PolicyAccount:"",PolicyNo:"",CCN:"",ORN:"",rateCost:"",DateFrom:new Date,DateTo:(0,O.Z)(new Date,1),DateIssued:new Date,Model:"",Make:"",TB:"",Color:"",BLTFileNo:"",PlateNo:"",ChassisNo:"",MotorNo:"",AuthorizedCapacity:"",UnladenWeigth:"",TplType:"",PremiumPaid:"",EVSV:"",Aircon:"",Stereo:"",Magwheels:"",OthersRate:"",OthersDesc:"",CompreType:"",Deductible:"",Towing:"",ARL:"",BodyInjury:"0.00",PropertyDamage:"0.00",PersinalAccident:"0.00",Denomination:"",Mortgagee:"",MortgageeForm:"false",remarks:"",SectionI_II:"",SectionIII:"",OwnDamage:"",Theft:"",SectionIVA:"",SectionIVB:"",PremiumOther:"",AOG:"",AOGPercent:"0.5",TotalPremium:"",Vat:"",DocStamp:"",LocalGovTaxPercent:"0.75",LocalGovTax:"",StradCom:"",TotalDue:"",Type:"charles1",Source_No_Ref_ID:"",vehicle:"private",mode:""},ue={PolicyNo:"",PolicyType:"",DateIssued:"",Account:" ",Mortgagee:"",agent_fullname:"",sale_officer:"",TotalDue:"",IDNo:"",ShortName:"",address:"",options:"",subShortName:"",email:"",mobile:"",telephone:""},ce=function(e,t){return"UPDATE_FIELD"===t.type?(0,r.Z)((0,r.Z)({},e),{},(0,l.Z)({},t.field,t.value)):e},pe=(0,d.createContext)({}),xe="vehicle-policy-search",me="vehicle-policy-search",he="vehicle-policy-get",fe="vehicle-policy-search-ppolicy-id",ge=[{field:"_DateIssued",headerName:"Date",width:200},{field:"PolicyNo",headerName:"Policy No",width:170},{field:"Account",headerName:"Account",width:170},{field:"client_fullname",headerName:"Full Name",flex:1}],ye="vehicle-policy";function ve(){var e,t,o,s,S,M,N,z=(0,d.useState)(!1),Z=(0,i.Z)(z,2),_=Z[0],w=Z[1],k=(0,d.useState)([]),O=(0,i.Z)(k,2),U=O[0],B=O[1],G=(0,j.Z)([(0,R.jsx)(V,{}),(0,R.jsx)(te,{}),(0,R.jsx)(J,{})]),W=G.step,K=G.goTo,q=G.currentStepIndex,Y=(0,d.useReducer)(ce,ue),H=(0,i.Z)(Y,2),Q=H[0],X=H[1],$=(0,d.useReducer)(ce,de),ee=(0,i.Z)($,2),oe=ee[0],ae=ee[1],ve=(0,d.useContext)(g.V),be=ve.myAxios,Se=ve.user,Ie=(0,d.useState)([]),Pe=(0,i.Z)(Ie,2),De=Pe[0],Ce=Pe[1],Fe=(0,d.useState)([]),Ae=(0,i.Z)(Fe,2),Te=Ae[0],Le=Ae[1],Ee=(0,d.useState)(""),je=(0,i.Z)(Ee,2),Me=je[0],Ne=je[1],ze=(0,d.useState)(!1),Ze=(0,i.Z)(ze,2),_e=Ze[0],we=Ze[1],ke=(0,d.useState)(!1),Oe=(0,i.Z)(ke,2),Re=Oe[0],Ue=Oe[1],Be=(0,d.useState)({thirdparty:"tpl"===oe.form_type.toLowerCase(),compre:"com"===oe.form_type.toLowerCase()}),Ve=(0,i.Z)(Be,2),Ge=Ve[0],We=Ve[1],Ke=(0,d.useRef)(null),qe=(0,d.useRef)(null),Ye=(0,d.useRef)(null),He=(0,d.useRef)(null),Qe=(0,y.useQueryClient)(),Je=""===oe.mode;function Xe(e){var t=e[0],o=t.address,n=t.IDNo,a=t.Account,i=t.SubAcct,l=t.PolicyNo,r=t.DateIssued,s=t.TotalPremium,d=t.Vat,u=t.DocStamp,c=t.LGovTax,p=t.Misc,x=t.TotalDue,m=t.AgentID,h=t.AgentCom,f=t.CoverNo,g=t.ORNo,y=t.DateFrom,v=t.DateTo,b=t.Model,S=t.Make,I=t.BodyType,P=t.Color,D=t.BLTFileNo,C=t.PlateNo,F=t.ChassisNo,A=t.MotorNo,T=t.AuthorizedCap,L=t.UnladenWeight,E=t.PremiumPaid,j=t.EstimatedValue,M=t.Aircon,N=t.Stereo,z=t.Magwheels,Z=t.Others,_=t.OthersAmount,w=t.Deductible,k=t.Towing,O=t.RepairLimit,R=t.BodilyInjury,U=t.PropertyDamage,B=t.PersonalAccident,V=t.SecI,G=t.SecIIPercent,W=t.ODamage,K=t.Theft,q=t.Sec4A,Y=t.Sec4B,H=t.Sec4C,Q=t.AOG,J=t.MortgageeForm,X=t.Mortgagee,$=t.Denomination,ee=t.client_fullname,te=t.agent_fullname,oe=t.TPLTypeSection_I_II,ne=t.AOGPercent,ae=t.LocalGovTaxPercent,ie=t.Remarks,le=t.sale_officer;function re(e){var t=e.toString();return isNaN(parseFloat(t))?"0.00":parseFloat(t.replace(/,/g,"")).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function se(e){return parseFloat(e).toFixed(2)}Pt(i,"sub_account"),Pt(n,"client_id"),Pt(ee,"client_name"),Pt(o,"client_address"),Pt(m,"agent_id"),Pt(te,"agent_name"),Pt(h,"agent_com"),Pt(a,"PolicyAccount"),Pt(l,"PolicyNo"),Pt(f,"CCN"),Pt(g,"ORN"),Pt(y,"DateFrom"),Pt(v,"DateTo"),Pt(r,"DateIssued"),Pt(b,"Model"),Pt(S,"Make"),Pt(I,"TB"),Pt(P,"Color"),Pt(D,"BLTFileNo"),Pt(C,"PlateNo"),Pt(F,"ChassisNo"),Pt(A,"MotorNo"),Pt(T,"AuthorizedCapacity"),Pt(L,"UnladenWeigth"),Pt(se(E),"PremiumPaid"),Pt(se(j),"EVSV"),Pt(se(M),"Aircon"),Pt(se(N),"Stereo"),Pt(se(z),"Magwheels"),Pt(se(M),"Aircon"),Pt(se(_),"OthersRate"),Pt(Z,"OthersDesc"),Pt(se(w),"Deductible"),Pt(se(k),"Towing"),Pt(se(O),"ARL"),Pt(re(R),"BodyInjury"),Pt(re(U),"PropertyDamage"),Pt(re(B),"PersinalAccident"),Pt(se(V),"SectionI_II"),Pt(se(G),"SectionIII"),Pt(se(W),"OwnDamage"),Pt(se(K),"Theft"),Pt(se(q),"SectionIVA"),Pt(se(Y),"SectionIVB"),Pt(se(H),"PremiumOther"),Pt(se(Q),"AOG"),Pt(X,"Mortgagee"),Pt(!!parseInt(J),"MortgageeForm"),Pt($,"Denomination"),Pt(se(x),"TotalDue"),Pt(se(d),"Vat"),Pt(se(u),"DocStamp"),Pt(se(s),"TotalPremium"),Pt(se(c),"LocalGovTax"),Pt(se(p),"StradCom"),Pt(se(ae),"LocalGovTaxPercent"),Pt(se(ne),"LocaAOGPercent"),Pt(oe,"TplType"),Pt(ie,"remarks"),Pt(le,"sale_officer"),Pt("delete","mode"),we(!1),we(!1)}var $e=(0,y.useQuery)({queryKey:"temp-id",queryFn:function(){return(e=e||(0,a.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be.get("/task/production/get-vehicle-policy-temp-id",{headers:{Authorization:"Bearer ".concat(null===Se||void 0===Se?void 0:Se.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}),et=$e.isLoading,tt=$e.data,ot=(0,y.useQuery)({queryKey:xe,queryFn:function(){return(t=t||(0,a.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be.get("/task/production/tpl-search-vehicle-policy?form_type=".concat(oe.form_type,"&form_action=").concat(oe.form_action,"&search="),{headers:{Authorization:"Bearer ".concat(null===Se||void 0===Se?void 0:Se.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t,o=null===(t=e.data)||void 0===t?void 0:t.searchVPolicy;Ce(o)}}),nt=ot.isLoading,at=ot.refetch,it=(0,y.useQuery)({queryKey:"get-sub_account",queryFn:function(){return(o=o||(0,a.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be.get("/task/production/get-sub_account",{headers:{Authorization:"Bearer ".concat(null===Se||void 0===Se?void 0:Se.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}),lt=it.data,rt=it.isLoading,st=(0,y.useMutation)({mutationKey:me,mutationFn:function(e){return(s=s||(0,a.Z)((0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("delete"!==oe.mode||"COM"!==oe.form_type){e.next=4;break}return e.next=3,be.post("/task/production/com-update-vehicle-policy",t,{headers:{Authorization:"Bearer ".concat(null===Se||void 0===Se?void 0:Se.accessToken)}});case 3:case 7:case 10:return e.abrupt("return",e.sent);case 4:if("delete"!==oe.mode||"COM"===oe.form_type){e.next=8;break}return e.next=7,be.post("/task/production/tpl-update-vehicle-policy",t,{headers:{Authorization:"Bearer ".concat(null===Se||void 0===Se?void 0:Se.accessToken)}});case 8:return e.next=10,be.post("/task/production/tpl-add-vehicle-policy",t,{headers:{Authorization:"Bearer ".concat(null===Se||void 0===Se?void 0:Se.accessToken)}});case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){if(console.log(e.data),e.data.success)return Promise.all([Qe.invalidateQueries(xe),Qe.invalidateQueries(me),Qe.invalidateQueries(he),Qe.invalidateQueries(fe)]),I().fire({position:"center",icon:"success",title:e.data.message,showConfirmButton:!1,timer:1500}).then((function(){if("TEMP"===oe.form_action){var e=oe.PolicyNo.split("TP-")[1],t=parseInt(e)+1,o=e.slice(0,e.length-1);de.PolicyNo="TP-".concat(o).concat(t),de.form_action="TEMP"}de.form_type=oe.form_type,Ct(de)}));I().fire({position:"center",icon:"error",title:e.data.message,showConfirmButton:!1,timer:1500})}}),dt=st.mutate,ut=st.isLoading,ct=(0,y.useMutation)({mutationKey:me,mutationFn:function(e){return(S=S||(0,a.Z)((0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be.post("/task/production/tpl-delete-vehicle-policy",t,{headers:{Authorization:"Bearer ".concat(null===Se||void 0===Se?void 0:Se.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){if(e.data.success)return Promise.all([Qe.invalidateQueries(xe),Qe.invalidateQueries(me),Qe.invalidateQueries(he),Qe.invalidateQueries(fe)]),Ct(de,!0),I().fire({position:"center",icon:"success",title:e.data.message,showConfirmButton:!1,timer:1500});I().fire({position:"center",icon:"error",title:e.data.message,showConfirmButton:!1,timer:1500})}}),pt=ct.mutate,xt=ct.isLoading,mt=(0,y.useMutation)({mutationKey:"post-rates",mutationFn:function(e){return(M=M||(0,a.Z)((0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be.post("/task/production/get-rates",t,{headers:{Authorization:"Bearer ".concat(null===Se||void 0===Se?void 0:Se.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){B(e.data.rates)}}),ht=mt.isLoading,ft=mt.mutate,gt=(0,y.useMutation)({mutationKey:"get-policy-summary",mutationFn:function(e){return(N=N||(0,a.Z)((0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be.post("/task/production/get-policy-summary",t,{headers:{Authorization:"Bearer ".concat(null===Se||void 0===Se?void 0:Se.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t=e.data;w(!0),function(e,t){Object.entries(t).forEach((function(t){var o=(0,i.Z)(t,2),n=o[0],a=o[1];e({type:"UPDATE_FIELD",field:n,value:a})}))}(X,t.policyDetails[0])}}),yt=gt.isLoading,vt=gt.mutate,bt=(0,d.useCallback)((function(){oe.EVSV=Dt(oe.EVSV),oe.Aircon=Dt(oe.Aircon),oe.Stereo=Dt(oe.Stereo),oe.Magwheels=Dt(oe.Magwheels),oe.OthersRate=Dt(oe.OthersRate),oe.Deductible=Dt(oe.Deductible),oe.Towing=Dt(oe.Towing),oe.ARL=Dt(oe.ARL),oe.TotalPremium=Dt(oe.TotalPremium),oe.Vat=Dt(oe.Vat),oe.DocStamp=Dt(oe.DocStamp),oe.LocalGovTaxPercent=Dt(oe.LocalGovTaxPercent),oe.LocalGovTaxPercent=Dt(oe.LocalGovTaxPercent),oe.LocalGovTax=Dt(oe.LocalGovTax),oe.TotalDue=Dt(oe.TotalDue),oe.AOG=Dt(oe.AOG),oe.AOGPercent=Dt(oe.AOGPercent),oe.PremiumOther=Dt(oe.PremiumOther),oe.SectionIVB=Dt(oe.SectionIVB),oe.SectionIVA=Dt(oe.SectionIVA),oe.Theft=Dt(oe.Theft),oe.OwnDamage=Dt(oe.OwnDamage),oe.SectionIII=Dt(oe.SectionIII),oe.SectionI_II=Dt(oe.SectionI_II),oe.PremiumPaid=Dt(oe.PremiumPaid),oe.StradCom=Dt(oe.StradCom)}),[oe]),St=(0,d.useCallback)((function(){return""===oe.client_name||null===oe.client_name||void 0===oe.client_name?I().fire({icon:"warning",title:"Register on ID Entry?",text:"Unable to save! Invalid Client ID!",showCancelButton:!0,showConfirmButton:!0}).then((function(e){if(e.isConfirmed)return window.open("/dashboard/reference/id-entry","_blank")})):""===oe.PolicyAccount||null===oe.PolicyAccount?I().fire("Unable to save! Please select Account.","you missed the Account Field?","error"):""===oe.PolicyNo||null===oe.PolicyNo?I().fire("Unable to save! Invalid Policy No.","you missed the Policy No Field?","error"):void("delete"===oe.mode?(0,ie.s)({isUpdate:!0,cb:function(e){bt(),dt((0,r.Z)((0,r.Z)({},oe),{},{userCodeConfirmation:e}))}}):(0,ie.L)({isConfirm:function(){bt(),dt(oe)}}))}),[bt,dt,oe]);(0,d.useEffect)((function(){var e=function(e){var t,o,n;("AudioVolumeMute"!==e.code&&"F1"!==e.code&&173!==e.keyCode||(e.preventDefault(),K(0)),"AudioVolumeDown"!==e.code&&"F2"!==e.code&&174!==e.keyCode||(e.preventDefault(),K(1)),"AudioVolumeUp"!==e.code&&"F3"!==e.code&&175!==e.keyCode||(e.preventDefault(),K(2)),""!==oe.mode||"KeyN"!==e.code&&"Enter"!==e.code&&"NumpadEnter"!==e.code)||(e.preventDefault(),null===(t=Ke.current)||void 0===t||t.click());""!==oe.mode&&"Escape"===e.code&&(e.preventDefault(),null===(o=qe.current)||void 0===o||o.click());"delete"===oe.mode&&"Delete"===e.code&&(e.preventDefault(),null===(n=Ye.current)||void 0===n||n.click())};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[K,St,oe.mode]);var It=function(e){var t=e.target,o=t.name,n=t.value;ae({type:"UPDATE_FIELD",field:o,value:n})},Pt=function(e,t){ae({type:"UPDATE_FIELD",field:t,value:e})};function Dt(e){var t=parseFloat(e);return isNaN(t)?"0.00":e}function Ct(e){Object.entries(e).forEach((function(e){var t=(0,i.Z)(e,2),o=t[0],n=t[1];Pt(n,o)}))}function Ft(e){var t=Dt(e);if(t.includes(".")){var o=t.split("."),n=o[0],a=o[1].slice(0,2)||"00";return"".concat(n,".").concat(a)}return"".concat(t,".00")}var At=function(e){var t=e.datakey,o=e.label,n=e.value;return(0,R.jsxs)("div",{style:{width:"100%",display:"flex"},children:[(0,R.jsx)("label",{style:{width:"200px"},htmlFor:t,children:o}),":",(0,R.jsx)("input",{style:{flex:1,border:"none",padding:"0 20px"},defaultValue:null!==n&&void 0!==n?n:"",id:t,readOnly:!0})]})};return(0,d.useEffect)((function(){"UCSMI"===(null===Se||void 0===Se?void 0:Se.department)&&It({target:{value:"TEMP",name:"form_action"}}),Pt(null===tt||void 0===tt?void 0:tt.data.tempId[0].tempPolicy_No,"PolicyNo"),It({target:{value:"COM",name:"form_type"}})}),[null===Se||void 0===Se?void 0:Se.department,null===tt||void 0===tt?void 0:tt.data.tempId]),(0,d.useEffect)((function(){var e=function(e){(e.ctrlKey||e.metaKey)&&"s"===e.key&&(e.preventDefault(),St())};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[St]),(0,R.jsxs)(pe.Provider,{value:{parseStringToNumber:Dt,state:oe,handleInputChange:It,handleDateChange:Pt,Mortgagee:Re,setMortgagee:Ue,showField:Ge,setShowField:We,myAxios:be,user:Se,tplCompuation:function(){if(bt(),isNaN(parseFloat(oe.PremiumPaid)))return I().fire({position:"center",icon:"error",title:"Premiumn Paid is Required",showConfirmButton:!1,timer:1500});var e=.12*parseFloat(oe.PremiumPaid),t=.125*parseFloat(oe.PremiumPaid),o=.0075*parseFloat(oe.PremiumPaid),n=e+t+o+parseFloat(oe.StradCom)+parseFloat(oe.PremiumPaid);Pt("".concat(parseFloat(oe.PremiumPaid).toFixed(2)),"SectionI_II"),Pt("".concat(parseFloat(oe.PremiumPaid).toFixed(2)),"TotalPremium"),Pt("".concat(e.toFixed(2)),"Vat"),Pt("".concat(t.toFixed(2)),"DocStamp"),Pt("".concat(o.toFixed(2)),"LocalGovTax"),Pt("".concat(Math.round(n).toFixed(2)),"TotalDue")},comComputation:function(){bt();var e=parseFloat(oe.LocalGovTaxPercent.replace(/,/g,""))/100,t=parseFloat(oe.SectionIII.replace(/,/g,""))/100,o=parseFloat(oe.AOGPercent.replace(/,/g,""))/100,n=parseFloat(oe.EVSV.replace(/,/g,""))*t,a=parseFloat(oe.EVSV.replace(/,/g,""))*o;Pt("".concat(n.toFixed(2)),"OwnDamage"),Pt("".concat(Ft(a.toString())),"AOG");var i=parseFloat(n.toFixed(2))+parseFloat(a.toString())+parseFloat(oe.SectionIVB.replace(/,/g,""))+parseFloat(oe.PremiumOther.replace(/,/g,""))+parseFloat(oe.SectionIVA.replace(/,/g,""));Pt("".concat((.12*i).toFixed(2)),"Vat"),Pt("".concat((.125*i).toFixed(2)),"DocStamp"),Pt("".concat((e*i).toFixed(2)),"LocalGovTax"),Pt("0.00","TotalPremium"),Pt("0.00","TotalDue");var l=i+parseFloat((.12*i).toFixed(2))+parseFloat((.125*i).toFixed(2))+parseFloat((e*i).toFixed(2))+parseFloat(parseFloat(oe.StradCom.replace(/,/g,"")).toFixed(2));Pt("".concat(Ft(i.toString())),"TotalPremium"),Pt("".concat(l.toFixed(2)),"TotalDue")},tplId:Te,setTplId:Le,isAddOrEditMode:Je,dispatch:ae,isLoadingTempId:et,keySave:function(e){""===oe.mode||"Enter"!==e.code&&"NumpadEnter"!==e.code||(e.preventDefault(),St())},domination:U,mutateRates:ft,isLoadingrates:ht,reducer:ce},children:[(0,R.jsxs)("div",{style:{display:"flex",columnGap:"5px"},children:[(0,R.jsxs)("div",{style:{display:"flex",columnGap:"8px",alignItems:"center"},children:[(0,R.jsx)(se,{onClick:function(){K(0)},currentStepIndex:q,index:0,children:"Policy Information"}),(0,R.jsx)(ne.Z,{fontSize:"small"})]}),(0,R.jsxs)("div",{style:{display:"flex",columnGap:"8px",alignItems:"center"},children:[(0,R.jsx)(se,{onClick:function(){K(1)},currentStepIndex:q,index:1,children:"Policy Type and Details"}),(0,R.jsx)(ne.Z,{fontSize:"small"})]}),(0,R.jsx)("div",{style:{display:"flex",columnGap:"8px",alignItems:"center"},children:(0,R.jsx)(se,{onClick:function(){K(2)},currentStepIndex:q,index:2,children:"Policy Premium"})}),(0,R.jsx)("div",{style:{marginLeft:"30px",display:"flex",alignItems:"center",columnGap:"20px"},children:(0,R.jsxs)("div",{style:{display:"flex",alignItems:"center",columnGap:"5px"},children:[""===oe.mode&&(0,R.jsx)(u.Z,{sx:{height:"30px",fontSize:"11px"},ref:Ke,variant:"contained",startIcon:(0,R.jsx)(f.Z,{}),onClick:function(){Pt("add","mode")},children:"New"}),(0,R.jsx)(L.Z,{loading:ut,sx:{height:"30px",fontSize:"11px"},color:"primary",variant:"contained",type:"submit",onClick:St,disabled:""===oe.mode,startIcon:(0,R.jsx)(b.Z,{}),children:"Save"}),""!==oe.mode&&(0,R.jsx)(u.Z,{sx:{height:"30px",fontSize:"11px"},ref:qe,variant:"contained",startIcon:(0,R.jsx)(v.Z,{}),color:"error",onClick:function(){I().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, cancel it!"}).then((function(e){e.isConfirmed&&(de.form_action=oe.form_action,de.form_type=oe.form_type,Ct(de,!0))}))},children:"Cancel"}),(0,R.jsx)(L.Z,{loading:xt,id:"save-entry-header",variant:"contained",sx:{height:"30px",fontSize:"11px",backgroundColor:h.Z[500],"&:hover":{backgroundColor:h.Z[600]}},ref:Ye,disabled:"delete"!==oe.mode,startIcon:(0,R.jsx)(P.Z,{}),onClick:function(){(0,ie.s)({isUpdate:!1,cb:function(e){pt({PolicyAccount:oe.PolicyAccount,form_type:oe.form_type,PolicyNo:oe.PolicyNo,userCodeConfirmation:e})}})},children:"Delete"})]})})]}),(0,R.jsx)(c.Z,{sx:function(e){return(0,l.Z)({display:"flex",alignItems:"center",columnGap:"20px",marginBottom:"10px"},e.breakpoints.down("sm"),{flexDirection:"column",alignItems:"flex-start",flex:1})},children:(0,R.jsx)("div",{style:{marginTop:"10px",marginBottom:"12px",width:"100%"}})}),(0,R.jsxs)("div",{style:{marginBottom:"5px",display:"flex",gap:"10px"},children:[nt?(0,R.jsx)(L.Z,{loading:nt}):(0,R.jsx)(p.Z,{label:"Search",size:"small",name:"search",value:Me,onChange:function(e){Ne(e.target.value)},onKeyDown:function(e){"Enter"!==e.code&&"NumpadEnter"!==e.code||(e.preventDefault(),(0,E.flushSync)((function(){we(!0)})),null!==He&&void 0!==He&&He.current&&(He.current.value=Me,be.get("/task/production/tpl-search-vehicle-policy?form_type=".concat(oe.form_type,"&form_action=").concat(oe.form_action,"&search=").concat(Me),{headers:{Authorization:"Bearer ".concat(null===Se||void 0===Se?void 0:Se.accessToken)}}).then((function(e){if(null===e||void 0===e||!e.data.success)return alert("Error : ".concat(null===e||void 0===e?void 0:e.data.message));Ce(e.data.searchVPolicy),null!==He&&void 0!==He&&He.current&&He.current.focus()}))))},InputProps:{style:{height:"27px",fontSize:"14px"}},sx:{width:"300px",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}}),rt?(0,R.jsx)(L.Z,{loading:rt}):(0,R.jsxs)(D.Z,{size:"small",sx:function(e){return{width:"150px",".MuiFormLabel-root":{fontSize:"14px",background:"white",zIndex:99,padding:"0 3px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}},children:[(0,R.jsx)(C.Z,{id:"subAccount",children:"Sub Account"}),(0,R.jsx)(F.Z,{sx:{height:"27px",fontSize:"14px"},size:"small",labelId:"subAccount",label:"subAccount",name:"sub_account",value:oe.sub_account,onChange:function(e){Pt("","Denomination"),Pt("","PolicyAccount"),Pt("","Mortgagee"),It(e)},children:(null===lt||void 0===lt?void 0:lt.data.sub_account).map((function(e,t){return(0,R.jsx)(A.Z,{value:e.Acronym.trim(),children:e.Acronym},t)}))})]}),(0,R.jsx)(D.Z,{size:"small",sx:function(e){return{width:"100px",".MuiFormLabel-root":{fontSize:"14px",background:"white",zIndex:99,padding:"0 3px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}},children:(0,R.jsx)(F.Z,{sx:{height:"27px",fontSize:"14px"},labelId:"formType",name:"form_type",value:oe.form_type,onChange:function(e){I().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, change it!"}).then((function(t){t.isConfirmed&&(de.form_action=oe.form_action,Ct(de),We({thirdparty:"tpl"===e.target.value.toLowerCase(),compre:"com"===e.target.value.toLowerCase()}),at(),It(e))}))},children:[{Account:"TPL",show:"REG"===oe.form_action},{Account:"COM",show:!0}].map((function(e,t){return e.show?(0,R.jsx)(A.Z,{value:e.Account,children:e.Account},t):null}))})}),(0,R.jsx)(D.Z,{size:"small",sx:function(e){return{width:"100px",".MuiFormLabel-root":{fontSize:"14px",background:"white",zIndex:99,padding:"0 3px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}},children:(0,R.jsxs)(F.Z,{sx:{height:"27px",fontSize:"14px"},name:"form_action",value:oe.form_action,onChange:function(e){I().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, change it!"}).then((function(t){t.isConfirmed&&(de.form_type="COM",Ct(de),at(),It(e),"TEMP"===e.target.value&&(Pt(null===tt||void 0===tt?void 0:tt.data.tempId[0].tempPolicy_No,"PolicyNo"),It({target:{value:"COM",name:"form_type"}})),"REG"===e.target.value&&Pt("","PolicyNo"))}))},children:[(0,R.jsx)(A.Z,{value:"REG",children:"REG"}),"TPL"!==oe.form_type&&(0,R.jsx)(A.Z,{value:"TEMP",children:"TEMP"})]})}),yt?(0,R.jsx)("div",{children:(0,R.jsx)(x.Z,{size:"20px"})}):(0,R.jsx)(u.Z,{disabled:"delete"!==oe.mode,variant:"outlined",startIcon:(0,R.jsx)(re.Z,{}),sx:{height:"27px",fontSize:"11px"},onClick:function(){vt({PolicyNo:oe.PolicyNo})},children:"Summary"})]}),W,(0,R.jsx)(T.ZP,{searchRef:He,showModal:_e,onCloseModal:function(){we(!1)},onClickCloseIcon:function(){we(!1)},searchOnChange:function(){},onSearchKeyEnter:function(e){be.get("/task/production/tpl-search-vehicle-policy?form_type=".concat(oe.form_type,"&form_action=").concat(oe.form_action,"&search=").concat(e),{headers:{Authorization:"Bearer ".concat(null===Se||void 0===Se?void 0:Se.accessToken)}}).then((function(e){if(null===e||void 0===e||!e.data.success)return alert("Error : ".concat(null===e||void 0===e?void 0:e.data.message));Ce(e.data.searchVPolicy)}))},height:300,isLoading:nt,queryKey:ye,columns:ge,onCellKeyDown:function(e,t){"Enter"!==t.code&&"NumpadEnter"!==t.code||(t.preventDefault(),Xe([e.row]))},onSelectionChange:function(e,t){if(!(e.length<=0)){var o=new Set(e),n=t.filter((function(e){return o.has(e.PolicyNo.toString())}));n.length<=0||(ft({Account:n[0].Account.trim(),Type:oe.form_type.toUpperCase()}),Xe(n))}},id:"PolicyNo",rows:De,setRows:Ce}),(0,R.jsx)("div",{style:{position:"fixed",top:0,bottom:0,left:0,right:0,background:"rgba(158, 155, 157, 0.31)",zIndex:"999",display:_?"flex":"none",justifyContent:"center",alignItems:"center",boxShadow:"-1px 15px 74px 38px rgba(0,0,0,0.37)"},children:(0,R.jsxs)("div",{style:{background:"white",width:"70%",height:"700px",position:"relative",padding:"50px 20px"},children:[(0,R.jsx)(m.Z,{sx:{position:"absolute",top:"10px",right:"10px"},onClick:function(){return w(!1)},children:(0,R.jsx)(v.Z,{})}),(0,R.jsxs)("div",{style:{width:"100%",height:"100%"},children:[(0,R.jsx)("hr",{style:{margin:"5px 0"}}),(0,R.jsx)("p",{style:{margin:"0",padding:"0",fontWeight:"bold"},children:"Policy Details"}),(0,R.jsx)("hr",{style:{margin:"5px 0"}}),(0,R.jsx)(At,{datakey:"DateIssued",label:"Date Issued",value:(0,le.Z)(new Date,"yyyy/MM/dd")}),(0,R.jsx)(At,{datakey:"PolicyNo",label:"Policy No.",value:Q.PolicyNo}),(0,R.jsx)(At,{datakey:"PolicyType",label:"Policy Type",value:Q.PolicyType}),(0,R.jsx)(At,{datakey:"Account",label:"Account",value:Q.Account}),(0,R.jsx)(At,{datakey:"Mortgagee",label:"Mortgagee",value:Q.Mortgagee}),(0,R.jsx)(At,{datakey:"TotalDue",label:"Total Due",value:parseFloat(Q.TotalDue.toString().replace(/,/g,"")).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}),(0,R.jsx)(At,{datakey:"sale_officer",label:"Sale Officer",value:Q.sale_officer}),(0,R.jsx)("hr",{style:{margin:"5px 0"}}),(0,R.jsx)("p",{style:{margin:"0",padding:"0",fontWeight:"bold"},children:"Client Details"}),(0,R.jsx)("hr",{style:{margin:"5px 0"}}),(0,R.jsx)(At,{datakey:"IDNo_dr",label:"ID NO.",value:Q.IDNo}),(0,R.jsx)(At,{datakey:"ShortName_dr",label:"Short Name",value:Q.ShortName}),(0,R.jsx)(At,{datakey:"subShortName_dr",label:"Sub Account",value:Q.subShortName}),(0,R.jsx)(At,{datakey:"mobile_dr",label:"Mobile",value:Q.mobile}),(0,R.jsx)(At,{datakey:"email_dr",label:"Email",value:Q.email}),(0,R.jsx)(At,{datakey:"address_dr",label:"Address",value:Q.address}),(0,R.jsx)(At,{datakey:"options_dr",label:"Option",value:Q.options}),(0,R.jsx)("hr",{style:{margin:"5px 0"}}),(0,R.jsx)("p",{style:{margin:"0",padding:"0",fontWeight:"bold"},children:"Agent Details"}),(0,R.jsx)("hr",{style:{margin:"5px 0"}}),(0,R.jsx)(At,{datakey:"agent_fullname",label:"Agent Name",value:Q.agent_fullname})]})]})})]})}},25756:function(e,t,o){o.d(t,{Z:function(){return i}});var n=o(29439),a=o(72791);function i(e){var t=(0,a.useState)(0),o=(0,n.Z)(t,2),i=o[0],l=o[1];return{step:e[i],goTo:function(e){l(e)},back:function(){l((function(e){return e<=0?e:e+1}))},next:function(){l((function(t){return t>=e.length-1?t:t+1}))},isFirstStep:0!==i,isLastStep:i===e.length-1,currentStepIndex:i}}}}]);
//# sourceMappingURL=1760.f0566426.chunk.js.map