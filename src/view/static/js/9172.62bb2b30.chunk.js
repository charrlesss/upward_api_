"use strict";(self.webpackChunkupward=self.webpackChunkupward||[]).push([[9172,2074],{60451:function(e,t,n){n.r(t),n.d(t,{default:function(){return T}});var r=n(4942),i=n(1413),a=n(74165),d=n(15861),o=n(29439),s=n(72791),c=n(64554),u=n(27391),l=n(36151),h=n(77196),f=n(63466),m=n(13400),p=n(3380),x=n(91933),w=n(21830),y=n.n(w),b=n(48749),N=n(68096),v=n(94925),g=n(58406),Z=n(23786),_=n(39709),A=n(8185),k=n(79018),S=n(86753),C=n(42419),D=n(27247),j=n(29823),I=n(53329),F=n(4378),z=n(64230),L=n(93346),B=n(80184),M={description:"",remarks:"",entry_others_id:"",search:"",mode:"",sub_account:"c02534ee-6d7e-40dd-a22b-bc9024fa12ca"};function T(){(0,s.useRef)(null);var e,t,n,w,T,E,O=(0,s.useState)([]),q=(0,o.Z)(O,2),K=q[0],U=q[1],P=(0,s.useReducer)(b.I6,M),R=(0,o.Z)(P,2),V=R[0],G=R[1],Q=(0,s.useContext)(p.V),W=Q.myAxios,Y=Q.user,H=(0,x.useQueryClient)(),J=(0,s.useRef)(null),X="entry_others_id",$=(0,x.useQuery)({queryKey:"sub-accounts",queryFn:function(){return(e=e||(0,d.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.get("/reference/sub-account",{headers:{Authorization:"Bearer ".concat(null===Y||void 0===Y?void 0:Y.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t,n;G({type:"UPDATE_FIELD",field:"sub_account",value:null===(t=e.data)||void 0===t||null===(n=t.defaultValue[0])||void 0===n?void 0:n.Sub_Acct})}}),ee=$.data,te=$.isLoading,ne=$.refetch,re=(0,x.useQuery)({queryKey:"others-generate-id",queryFn:function(){return(t=t||(0,d.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.post("/reference/id-entry-generate-id",{sign:"O",type:"entry others"},{headers:{Authorization:"Bearer ".concat(null===Y||void 0===Y?void 0:Y.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},refetchOnWindowFocus:!1,onSuccess:function(e){ye({target:{value:e.data.generateID,name:"entry_others_id"}})}}),ie=re.isLoading,ae=re.refetch,de=(0,x.useQuery)({queryKey:X,queryFn:function(){return(n=n||(0,d.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.get("/reference/search-entry?entrySearch=".concat(V.search,"&entry=Others"),{headers:{Authorization:"Bearer ".concat(null===Y||void 0===Y?void 0:Y.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){U(null===e||void 0===e?void 0:e.data.entry)}}),oe=de.isLoading,se=de.refetch,ce=(0,x.useMutation)({mutationKey:X,mutationFn:function(e){return(w=w||(0,d.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.post("/reference/id-entry-others",t,{headers:{Authorization:"Bearer ".concat(null===Y||void 0===Y?void 0:Y.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:be}),ue=ce.mutate,le=ce.isLoading,he=(0,x.useMutation)({mutationKey:X,mutationFn:function(e){return(T=T||(0,d.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.post("/reference/entry-update?entry=Others",t,{headers:{Authorization:"Bearer ".concat(null===Y||void 0===Y?void 0:Y.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:be}),fe=he.mutate,me=he.isLoading,pe=(0,x.useMutation)({mutationKey:X,mutationFn:function(e){return(E=E||(0,d.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.post("/reference/entry-delete?entry=Others",t,{headers:{Authorization:"Bearer ".concat(null===Y||void 0===Y?void 0:Y.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:be}),xe=pe.mutate,we=pe.isLoading,ye=function(e){var t=e.target,n=t.name,r=t.value;if(["description","remarks"].includes(n))return G({type:"UPDATE_FIELD",field:n,value:r.toUpperCase()});G({type:"UPDATE_FIELD",field:n,value:r})};function be(e){if(e.data.success)return H.invalidateQueries(X),ve(),y().fire({position:"center",icon:"success",title:e.data.message,showConfirmButton:!1,timer:1500});y().fire({position:"center",icon:"error",title:e.data.message,showConfirmButton:!1,timer:1500})}function Ne(e){return""===V.description?y().fire({position:"center",icon:"warning",title:"Description is required",showConfirmButton:!1,timer:1500}):""===V.sub_account?y().fire({position:"center",icon:"warning",title:"Sub Account is required",showConfirmButton:!1,timer:1500}):(e.preventDefault(),void("edit"===V.mode?(0,z.s)({isUpdate:!0,cb:function(e){fe((0,i.Z)((0,i.Z)({},V),{},{userCodeConfirmation:e}))}}):(0,z.L)({isConfirm:function(){ue(V)}})))}function ve(){var e;(0,A.setNewStateValue)(G,M),null===(e=J.current)||void 0===e||e.resetTableSelected(),(0,k.D)(250).then((function(){se(),ae(),ne()}))}var ge=window.innerWidth-20,Ze=window.innerHeight-100;return(0,B.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"100%",height:"100%",flex:1},children:[(0,B.jsxs)(c.Z,{sx:function(e){return(0,r.Z)({display:"flex",alignItems:"center",columnGap:"20px"},e.breakpoints.down("sm"),{flexDirection:"column",alignItems:"flex-start",flex:1,marginBottom:"15px"})},children:[(0,B.jsx)("div",{style:{marginTop:"10px",marginBottom:"12px",width:"100%"},children:(0,B.jsx)(u.Z,{label:"Search",fullWidth:!0,size:"small",type:"text",value:V.search,name:"search",onChange:ye,onKeyDown:function(e){if("Enter"===e.code||"NumpadEnter"===e.code)return e.preventDefault(),se();"ArrowDown"===e.code&&(e.preventDefault(),document.querySelector(".grid-container").focus())},InputProps:{style:{height:"27px",fontSize:"14px"},className:"manok"},sx:{width:"500px",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}})}),(0,B.jsx)("div",{style:{display:"flex",alignItems:"center",columnGap:"20px"},children:(0,B.jsxs)("div",{style:{display:"flex",alignItems:"center",columnGap:"5px"},children:[""===V.mode&&(0,B.jsx)(l.Z,{variant:"contained",startIcon:(0,B.jsx)(C.Z,{}),id:"entry-header-save-button",sx:{height:"30px",fontSize:"11px"},onClick:function(){ae(),ye({target:{value:"add",name:"mode"}})},children:"New"}),(0,B.jsx)(_.Z,{id:"save-entry-header",color:"primary",variant:"contained",type:"submit",sx:{height:"30px",fontSize:"11px"},onClick:Ne,startIcon:(0,B.jsx)(I.Z,{}),disabled:""===V.mode,loading:le||me,children:"Save"}),""!==V.mode&&(0,B.jsx)(l.Z,{sx:{height:"30px",fontSize:"11px"},variant:"contained",startIcon:(0,B.jsx)(j.Z,{}),color:"error",onClick:function(){y().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, cancel it!"}).then((function(e){e.isConfirmed&&ve()}))},children:"Cancel"}),(0,B.jsx)(_.Z,{id:"save-entry-header",variant:"contained",sx:{height:"30px",fontSize:"11px",backgroundColor:F.Z[500],"&:hover":{backgroundColor:F.Z[600]}},loading:we,startIcon:(0,B.jsx)(D.Z,{}),disabled:"edit"!==V.mode,onClick:function(){(0,z.s)({isUpdate:!1,cb:function(e){xe({id:V.entry_others_id,userCodeConfirmation:e})}})},children:"Delete"})]})})]}),(0,B.jsx)("form",{onKeyDown:function(e){"Enter"!==e.code&&"NumpadEnter"!==e.code||!["description","remarks","entry_others_id"].includes(e.target.name)||(e.preventDefault(),Ne(e))},onSubmit:Ne,style:{width:"100%"},id:"Form-Others",children:(0,B.jsxs)(c.Z,{sx:function(e){var t;return t={display:"flex",columnGap:"15px",flexDirection:"row"},(0,r.Z)(t,e.breakpoints.down("md"),{flexDirection:"column",rowGap:"10px"}),(0,r.Z)(t,"marginBottom","10px"),t},children:[ie?(0,B.jsx)(_.Z,{loading:ie}):(0,B.jsxs)(N.Z,{variant:"outlined",size:"small",disabled:""===V.mode,sx:{width:"150px",".MuiFormLabel-root":{fontSize:"14px",background:"white",zIndex:99,padding:"0 3px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},children:[(0,B.jsx)(v.Z,{htmlFor:"others-auto-generate-id-field",children:"Others ID"}),(0,B.jsx)(h.Z,{sx:{height:"27px",fontSize:"14px"},disabled:""===V.mode,fullWidth:!0,label:"Others ID",name:"entry_others_id",value:V.entry_others_id,onChange:ye,readOnly:!0,id:"others-auto-generate-id-field",endAdornment:(0,B.jsx)(f.Z,{position:"end",children:(0,B.jsx)(m.Z,{disabled:""===V.mode,"aria-label":"search-others",color:"secondary",edge:"end",onClick:function(){ae()},children:(0,B.jsx)(S.Z,{})})})})]}),te?(0,B.jsx)(_.Z,{loading:te}):(0,B.jsxs)(N.Z,{required:!0,size:"small",sx:{width:"200px",".MuiFormLabel-root":{fontSize:"14px",background:"white",zIndex:99,padding:"0 3px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},children:[(0,B.jsx)(v.Z,{id:"Sub Account",children:"Sub Account"}),(0,B.jsx)(g.Z,{sx:{height:"27px",fontSize:"14px"},disabled:""===V.mode,value:V.sub_account,onChange:function(e){G({type:"UPDATE_FIELD",field:"sub_account",value:e.target.value})},labelId:"Sub Account",label:"Sub Account",name:"sub_account",children:null===ee||void 0===ee?void 0:ee.data.subAccount.map((function(e){return(0,B.jsx)(Z.Z,{value:e.Sub_Acct,children:e.NewShortName},e.Sub_Acct)}))})]}),(0,B.jsx)(u.Z,{label:"Description",size:"small",name:"description",value:V.description,onChange:ye,required:!0,disabled:""===V.mode,InputProps:{style:{height:"27px",fontSize:"14px"}},sx:{marginBottom:"10px",flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}}),(0,B.jsx)(u.Z,{label:"Remarks",size:"small",fullWidth:!0,name:"remarks",value:V.remarks,onChange:ye,required:!0,disabled:""===V.mode,InputProps:{style:{height:"27px",fontSize:"14px"}},sx:{marginBottom:"10px",flex:1,width:"500px",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}})]})}),(0,B.jsx)(L.Z,{ref:J,rows:K,column:b.m5,width:ge,height:Ze,dataReadOnly:!0,onSelectionChange:function(e){if(e.length>0){var t=e[0];ye({target:{value:"edit",name:"mode"}}),(0,A.setNewStateValue)(G,t)}else(0,A.setNewStateValue)(G,M),ye({target:{value:"",name:"mode"}})},onKeyDown:function(e,t){if("Delete"!==t&&"Backspace"!==t);else{var n=e[0];(0,k.D)(350).then((function(){(0,z.s)({isUpdate:!1,cb:function(e){xe({id:n.entry_others_id,userCodeConfirmation:e})}})}))}},inputsearchselector:".manok",isLoading:oe||we||me||le})]})}},48749:function(e,t,n){n.d(t,{GY:function(){return c},I6:function(){return l},fJ:function(){return s},kb:function(){return d},m5:function(){return u},oy:function(){return a},y:function(){return o}});var r=n(4942),i=n(1413),a=[{field:"entry_client_id",headerName:"ID",width:130},{field:"company",headerName:"Company",width:300},{field:"firstname",headerName:"First Name",width:300},{field:"lastname",headerName:"Last Name",width:300},{field:"middlename",headerName:"Middle Name",width:300},{field:"email",headerName:"Email",width:200},{field:"mobile",headerName:"Mobile",width:200},{field:"sale_officer",headerName:"Sale Officer",width:200},{field:"NewShortName",headerName:"Sub Account",width:130},{field:"option",headerName:"Option",width:130},{field:"createdAt",headerName:"Created At",width:130},{field:"address",headerName:"Address",width:500}],d=[{field:"entry_employee_id",headerName:"ID",width:130},{field:"firstname",headerName:"First Name",width:300},{field:"lastname",headerName:"Last Name",width:300},{field:"middlename",headerName:"Middle Name",width:300},{field:"NewShortName",headerName:"Sub Account",width:130},{field:"createdAt",headerName:"Created At",width:130},{field:"address",headerName:"Address",width:500}],o=[{field:"entry_agent_id",headerName:"ID",width:130},{field:"firstname",headerName:"First Name",width:300},{field:"lastname",headerName:"Last Name",width:300},{field:"middlename",headerName:"Middle Name",width:300},{field:"email",headerName:"Email",width:250},{field:"mobile",headerName:"Mobile",width:130},{field:"telephone",headerName:"Telephone",width:130},{field:"createdAt",headerName:"Created At",width:130},{field:"address",headerName:"Address",width:500},{field:"sub_account",headerName:"sub_account",width:500,hide:!0}],s=[{field:"entry_fixed_assets_id",headerName:"ID",width:130},{field:"fullname",headerName:"Full Name",width:300},{field:"description",headerName:"Description",width:300},{field:"remarks",headerName:"Remarks",width:400},{field:"createdAt",headerName:"Created At",width:200}],c=[{field:"entry_supplier_id",headerName:"ID",width:130},{field:"company",headerName:"Company",width:300},{field:"firstname",headerName:"First Name",width:300},{field:"lastname",headerName:"Last Name",width:300},{field:"middlename",headerName:"Middle Name",width:300},{field:"email",headerName:"Email",width:200},{field:"mobile",headerName:"Mobile",width:200},{field:"telephone",headerName:"Telephone",width:200},{field:"tin_no",headerName:"TIN NO.",width:200},{field:"option",headerName:"Option",width:200},{field:"VAT_Type",headerName:"Vat Type",width:200},{field:"createdAt",headerName:"Created At",width:200},{field:"address",headerName:"Address",width:500}],u=[{field:"entry_others_id",headerName:"ID",width:130},{field:"description",headerName:"Description",width:490},{field:"remarks",headerName:"Remarks",width:490},{field:"createdAt",headerName:"Created At",width:200}],l=function(e,t){return"UPDATE_FIELD"===t.type?(0,i.Z)((0,i.Z)({},e),{},(0,r.Z)({},t.field,t.value)):e}},4378:function(e,t){t.Z={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162"}}}]);
//# sourceMappingURL=9172.62bb2b30.chunk.js.map