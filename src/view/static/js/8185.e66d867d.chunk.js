"use strict";(self.webpackChunkupward=self.webpackChunkupward||[]).push([[8185],{70272:function(e,t,n){var r=n(54270),i=n(80184);t.Z=function(e){var t=e.title,n=void 0===t?"":t;return(0,i.jsxs)(r.q,{children:[(0,i.jsx)("title",{children:n}),(0,i.jsx)("link",{rel:"icon",type:"image/png",href:"".concat("http://localhost:4400/","/logo.png")})]})}},37209:function(e,t,n){n.d(t,{sT:function(){return s},lq:function(){return u},Fz:function(){return c},iA:function(){return a},oi:function(){return l}});var r=n(1413),i=n(72791),o=n(80184);function a(e){var t=e.input,n=e.label,a=e.inputRef,l=e.icon,c=e.iconPosition,u=void 0===c?"end":c,s=e.disableIcon,d=void 0!==s&&s,f=e.onIconClick,p=void 0===f?function(e){}:f,h=e.onChange,x=void 0===h?function(e){}:h,v=(0,i.useId)(),m=function(e){if(!e)return e;var t=e.split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")},g=function(e){return e.replace(/,/g,"")};return(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",position:"relative"},children:[(0,o.jsx)("label",(0,r.Z)((0,r.Z)({},n),{},{htmlFor:v,children:n.title})),l&&"start"===u&&(0,o.jsx)("div",{style:{position:"absolute",left:"8px",zIndex:1},children:l}),(0,o.jsx)("input",(0,r.Z)((0,r.Z)({ref:a,id:v},t),{},{type:"text",style:(0,r.Z)({height:"100%"},t.style),onChange:function(e){!function(e){var t=e.target.value;t=g(t),(""===(t=g(t))||/^-?\d+(,\d{3})*(\.\d*)?$/.test(t))&&(e.target.value=m(t))}(e),x(e)},onBlur:function(e){!function(e){var t=g(e.target.value);t=function(e){return e.includes(".")?1===e.split(".")[1].length?e+"0":e:""===e?"0.00":e+".00"}(t),e.target.value=m(t)}(e)}})),l&&"end"===u&&(0,o.jsx)("div",{onClick:p,style:{position:"absolute",right:"2px",top:"50%",transform:"translateY(-50%)",zIndex:1,cursor:d?"none":"pointer",display:"flex",alignItems:"center",justifyContent:"center",background:"white",pointerEvents:d?"none":"auto"},children:l})]})}function l(e){var t=e.input,n=e.label,a=e.inputRef,l=e.icon,c=e.iconPosition,u=void 0===c?"end":c,s=e.disableIcon,d=void 0!==s&&s,f=e.onIconClick,p=void 0===f?function(e){}:f,h=(0,i.useId)();return(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",position:"relative"},children:[(0,o.jsx)("label",(0,r.Z)((0,r.Z)({},n),{},{htmlFor:h,children:n.title})),l&&"start"===u&&(0,o.jsx)("div",{style:{position:"absolute",left:"8px",zIndex:1},children:l}),(0,o.jsx)("input",(0,r.Z)((0,r.Z)({ref:a,id:h},t),{},{style:(0,r.Z)({height:"100%"},t.style)})),l&&"end"===u&&(0,o.jsx)("div",{onClick:p,style:{position:"absolute",right:"2px",top:"50%",transform:"translateY(-50%)",zIndex:1,cursor:d?"none":"pointer",display:"flex",alignItems:"center",justifyContent:"center",background:"white",pointerEvents:d?"none":"auto"},children:l})]})}function c(e){var t=e.textarea,n=e.label,a=e._inputRef,l=e.icon,c=e.iconPosition,u=void 0===c?"end":c,s=e.disableIcon,d=void 0!==s&&s,f=e.onIconClick,p=void 0===f?function(e){}:f,h=(0,i.useId)();return(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",position:"relative"},children:[(0,o.jsx)("label",(0,r.Z)((0,r.Z)({},n),{},{htmlFor:h,children:n.title})),l&&"start"===u&&(0,o.jsx)("div",{style:{position:"absolute",left:"8px",zIndex:1},children:l}),(0,o.jsx)("textarea",(0,r.Z)((0,r.Z)({ref:a,id:h},t),{},{style:(0,r.Z)({height:"100%"},t.style)})),l&&"end"===u&&(0,o.jsx)("div",{onClick:p,style:{position:"absolute",right:"2px",top:"50%",transform:"translateY(-50%)",zIndex:1,cursor:d?"none":"pointer",display:"flex",alignItems:"center",justifyContent:"center",background:"white",pointerEvents:d?"none":"auto"},children:l})]})}function u(e){var t=e.select,n=e.label,a=e.selectRef,l=e.datasource,c=void 0===l?[]:l,u=e.values,s=void 0===u?"":u,d=e.display,f=void 0===d?"":d,p=(0,i.useId)();return(0,o.jsxs)("div",{style:{display:"flex",height:"18px",alignItems:"center"},children:[(0,o.jsx)("label",(0,r.Z)((0,r.Z)({},n),{},{htmlFor:p,children:n.title})),(0,o.jsx)("select",(0,r.Z)((0,r.Z)({},t),{},{ref:a,className:"select ".concat(t.className),style:(0,r.Z)({height:"18px"},t.style),children:c.map((function(e,t){return(0,o.jsx)("option",{value:e[s],children:e[f]},t)}))}))]})}function s(e){var t=e.buttonRetRef,n=e.button,i=e.tooltipText,a=void 0===i?"":i,l=e.children,c=e.disabled,u=void 0!==c&&c;return(0,o.jsxs)("div",{className:"tooltip",children:[(0,o.jsx)("button",(0,r.Z)((0,r.Z)({disabled:u},n),{},{ref:t,style:(0,r.Z)((0,r.Z)({},n.style),{},{background:u?"#f1f1f1":"transparent"}),className:"tooltip-button",children:l})),!u&&(0,o.jsx)("span",{className:"tooltip-text",children:a})]})}},93346:function(e,t,n){n.d(t,{r:function(){return c}});var r=n(93433),i=n(29439),o=n(72791),a=n(16088),l=n(80184),c=(0,o.forwardRef)((function(e,t){var n,c=e.rows,u=e.column,s=e.width,d=e.height,f=e.dataReadOnly,p=e.onSelectionChange,h=void 0===p?function(){}:p,x=e.isMultipleSelect,v=void 0!==x&&x,m=e.freeze,g=void 0!==m&&m,y=e.onKeyDown,k=e.inputsearchselector,b=void 0===k?".search-input-up-on-key-down":k,D=e.isRowSelectable,w=void 0===D||D,C=e.unSelectable,N=void 0===C?function(){return!1}:C,S=e.isLoading,j=e.onRightClick,Z=(0,o.useState)([]),R=(0,i.Z)(Z,2),I=R[0],E=R[1],_=(0,o.useState)(0),P=(0,i.Z)(_,2),A=P[0],T=P[1],F=(0,o.useRef)(h),M=(0,o.useRef)(y),L=(0,o.useState)(u.filter((function(e){return!e.hide}))),B=(0,i.Z)(L,2),z=B[0],U=B[1],K=(0,o.useState)(null),O=(0,i.Z)(K,2),q=O[0],W=O[1],V=(0,o.useState)([0]),Y=(0,i.Z)(V,2),G=Y[0],J=Y[1],Q=(0,o.useState)(0),H=(0,i.Z)(Q,2),X=H[0],$=H[1],ee=(0,o.useState)([]),te=(0,i.Z)(ee,2),ne=te[0],re=te[1],ie=(0,o.useRef)(null),oe=(0,o.useState)(null),ae=(0,i.Z)(oe,2),le=ae[0],ce=ae[1];(0,o.useEffect)((function(){var e=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=[],r=0;r<e.length;r+=t)n.push(e.slice(r,r+t));return n}(c,100);E(e)}),[c]);var ue=function(e,t){t.preventDefault(),t.stopPropagation();var n=t.clientX,i=z[e].width,o=function(t){var o=i+(t.clientX-n),a=(0,r.Z)(z);a[e].width=o>50?o:50,U(a)};document.addEventListener("mousemove",o),document.addEventListener("mouseup",(function e(){document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",e)}))},se=function(e){W(e)},de=function(){W(null)};(0,o.useImperativeHandle)(t,(function(){return{resetTableSelected:function(){if(J([0]),$(0),re([]),c.length>0){var e=document.querySelector(".row-".concat(0));null===e||void 0===e||e.scrollIntoView({block:"end",behavior:"smooth"})}},getSelectedIndex:function(){return ne[0]},getSelectedRows:function(){return c.filter((function(e,t){return ne.includes(t)}))},getFirstColumn:function(){return c.filter((function(e,t){return ne.includes(t)}))},getParentElement:function(){return ie.current},getSelectedRowsOnClick:function(){return G[0]},setSelectRows:function(e){return re([e])}}}));return(0,l.jsx)("div",{style:{display:"flex",justifyContent:"center"},onKeyDown:function(e){if("ArrowDown"===e.key)e.preventDefault(),J((function(e){var t;if(null===e[e.length-1])return[0];if(e[e.length-1]>=c.length-1)return[c.length-1];var n=e[e.length-1]+1,r=document.querySelector(".row-".concat(n));return null===r||void 0===r||null===(t=r.querySelector("input"))||void 0===t||t.focus(),null===r||void 0===r||r.scrollIntoView({block:"end",behavior:"smooth"}),[n]}));else if("ArrowUp"===e.key){if(e.preventDefault(),0===G[G.length-1]){var t=document.querySelector(b);if(t&&"INPUT"===t.tagName)null===t||void 0===t||t.focus();else if(t&&"DIV"===t.tagName){var n=document.querySelector("".concat(b," input"));null===n||void 0===n||n.focus()}}J((function(e){var t;if(0===e[e.length-1])return[0];var n=e[e.length-1]-1,r=document.querySelector(".row-".concat(n));return null===r||void 0===r||r.scrollIntoView({block:"end",behavior:"smooth"}),null===r||void 0===r||null===(t=r.querySelector("input"))||void 0===t||t.focus(),[n]}))}},children:(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"table-frame-color",children:[(0,l.jsx)("div",{style:{display:"flex",flexDirection:"column",width:"".concat(s-10,"px        "),height:"".concat(d-135,"px"),minHeight:"270px"},className:"table-frame",children:(0,l.jsx)("div",{className:"table-panel",children:(0,l.jsxs)("div",{ref:ie,className:"grid-container ",tabIndex:-1,children:[(0,l.jsx)("div",{className:"grid-row grid-header",style:{position:"sticky",zIndex:"10",top:"-1px",background:"white"},children:z.map((function(e,t){return(0,l.jsxs)("div",{className:"grid-cell header-cell ".concat(q===t?"highlight-column":""),style:{width:e.width,height:"20px"},children:[(0,l.jsx)("input",{style:{fontWeight:"bold"},defaultValue:e.headerName,readOnly:!0,onChange:function(e){}}),(0,l.jsx)("div",{className:"resize-handle",onMouseDown:function(e){return ue(t,e)},onMouseEnter:function(e){e.preventDefault(),se(t)},onMouseLeave:function(e){e.preventDefault(),de()}})]},t)}))}),null===(n=I[A])||void 0===n?void 0:n.map((function(e,t){return(0,l.jsx)("div",{className:"grid-row row-".concat(t),onClick:function(e){return function(e,t){if(v)if(t.shiftKey&&null!==X){for(var n=Math.min(X,e),i=Math.max(X,e),o=[],a=n;a<=i;a++)G.includes(a)||o.push(a);var l=[].concat((0,r.Z)(ne),o);J([].concat((0,r.Z)(G),o));var u=function(e){var t=e.map((function(e,t){return N(e)?null:{idx:t,data:e}})).filter((function(e){return null!==e})),n=t.map((function(e){return e.data}));return{newSelectedRowsFiltered:t.map((function(e){return e.idx})),data:n}}(c.filter((function(e,t){return l.includes(t)}))).newSelectedRowsFiltered;re(u)}else if(t.ctrlKey||t.metaKey)if(G.includes(e)&&!g){J(G.filter((function(t){return t!==e}))),re((function(t){return t=t.filter((function(t){return t!==e})),t}));var s=ne.filter((function(t){return t!==e}));re(s)}else{J([].concat((0,r.Z)(G),[e])),re((function(t){return t.push(e),t}));var d=[].concat((0,r.Z)(ne),[e]);re(d)}else J([e]);else J([e]);$(e)}(t,e)},onDoubleClick:function(e){le&&(clearTimeout(le),ce(null));var n=setTimeout((function(){!function(e,t){var n=c[e];if(!N(n)&&w){var i=[];if(i=v?[].concat((0,r.Z)(ne),(0,r.Z)(G)):[e],ne.includes(e)&&!g)return i=ne.filter((function(t){return t!==e})),re(i),void F.current([],e);re(i),F.current([n],e)}}(t)}),200);ce(n)},onKeyDown:function(e){le&&(clearTimeout(le),ce(null));var t=setTimeout((function(){!function(e){if(e.stopPropagation(),"Enter"===e.key||"NumpadEnter"===e.key){if(e.preventDefault(),!w)return;var t=[],n=G[G.length-1];t=v?[].concat((0,r.Z)(ne),(0,r.Z)(G)):[n];var i=c[t[t.length-1]];if(N(i))return;if(ne.includes(n)&&!g)return t=ne.filter((function(e){return e!==n})),re(t),void F.current([],n);re(t),F.current([i],n)}else if("Delete"===e.key||"Backspace"===e.key){if(!w)return;var o=G[G.length-1],a=c.filter((function(e,t){return G.includes(t)}));null!==M&&void 0!==M&&M.current&&(null===M||void 0===M||M.current(a,e.key,o))}}(e)}),200);ce(t)},onContextMenu:function(e){return function(e,t){e.preventDefault();var n=c[t];j&&j(n,e)}(e,t)},children:z.map((function(n,r){return(0,l.jsxs)("div",{style:{width:n.width},className:"grid-cell ".concat(q===r?"highlight-column":""," row-").concat(t," col-").concat(r),children:[(0,l.jsx)("input",{value:e[n.field],onChange:function(e){},readOnly:f,className:"".concat(G.includes(t)?"selected-row":""," ").concat(ne.includes(t)?"selected-items":"","\n                          ").concat("number"===n.type?"number":"text","\n                          ")}),(0,l.jsx)("div",{className:"resize-handle",onMouseDown:function(e){e.preventDefault(),ue(r,e)},onMouseEnter:function(e){e.preventDefault(),se(r)},onMouseLeave:function(e){e.preventDefault(),de()}})]},r)}))},t)}))]})})}),S&&(0,l.jsx)("div",{className:"table-loading",children:(0,l.jsx)("div",{className:"loader"})})]}),(0,l.jsxs)("div",{className:"table-panel-footer",children:[(0,l.jsxs)("div",{children:["Records : ",null===c||void 0===c?void 0:c.length]}),(0,l.jsx)("div",{children:(0,l.jsx)(a.Z,{count:I.length,onChange:function(e,t){T(t-1)}})})]})]})})}))},8185:function(e,t,n){n.r(t),n.d(t,{default:function(){return ie},incrementCheckNo:function(){return ae},pdcBanksColumn:function(){return te},pdcColumn:function(){return $},pdcSearchColumn:function(){return ee},reducer:function(){return X},setNewStateValue:function(){return oe}});var r=n(93433),i=n(74165),o=n(15861),a=n(29439),l=n(4942),c=n(1413),u=n(72791),s=n(64554),d=n(27391),f=n(36151),p=n(65117),h=n(23786),x=n(68096),v=n(94925),m=n(77196),g=n(63466),y=n(13400),k=n(88447),b=n(20890),D=n(42419),w=n(91933),C=n(21830),N=n.n(C),S=n(53329),j=n(3380),Z=n(13784),R=n(91421),I=n(29823),E=n(54164),_=n(39709),P=n(86753),A=n(73518),T=n(64230),F=n(71640),M=n(92562),L=n(58340),B=n(5519),z=n(93346),U=n(37209),K=n(763),O=n(79018),q=n(80184),W=function(e){var t,n=e.myAxios,r=e.user,l=e.column,c=e.link,s=e.onSelectionChange,d=e.responseDataKey,f=e.onModalClose,p=void 0===f?function(){}:f,h=(0,u.useId)(),x=(0,u.useRef)(null),v=(0,u.useRef)(null),m=(0,u.useRef)(null),g=(0,u.useState)(!1),b=(0,a.Z)(g,2),D=b[0],C=b[1],N=(0,u.useState)([]),S=(0,a.Z)(N,2),j=S[0],Z=S[1],R=(0,w.useMutation)({mutationKey:h,mutationFn:function(e){return(t=t||(0,o.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.get("".concat(null===c||void 0===c?void 0:c.url,"?").concat(null===c||void 0===c?void 0:c.queryUrlName,"=").concat(t.search),{headers:{Authorization:"Bearer ".concat(null===r||void 0===r?void 0:r.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){Z(e.data[d])}}),E=R.isLoading,_=R.mutate,P=(0,K.throttle)((function(e){return function(e){""===e&&_({search:e})}(e)}),500),A=function(){C(!1),p()};return(0,u.useEffect)((function(){D&&m.current&&(0,O.D)(1050).then((function(){var e;null===(e=m.current)||void 0===e||e.focus()}))}),[D,m]),{Modal:(0,q.jsx)(k.Z,{open:D,onClose:function(){C(!1)},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,q.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"auto",background:"#fff",paddingTop:"30px",paddingBottom:"20px",paddingLeft:"10px",paddingRight:"10px"},children:(0,q.jsxs)("div",{children:[(0,q.jsx)(U.oi,{label:{style:{display:"none"}},input:{className:"search-input-up-on-key-down",type:"text",style:{width:"100%",marginBottom:"20px"},onChange:function(e){e.preventDefault(),P(e.currentTarget.value)},onKeyDown:function(e){if("Enter"!==e.key&&"NumpadEnter"!==e.key||(e.preventDefault(),_({search:e.target.value})),"ArrowDown"===e.key){e.preventDefault();var t=v.current.getParentElement().querySelector(".grid-container .row-0.col-0 input");setTimeout((function(){t&&t.focus()}),100)}}},inputRef:x}),(0,q.jsx)(z.r,{ref:v,rows:j,column:l.filter((function(e){return!e.hide})),width:460,height:530,dataReadOnly:!0,onSelectionChange:s}),(0,q.jsx)(y.Z,{style:{position:"absolute",top:"5px",right:"10px"},"aria-label":"search-client",onClick:A,children:(0,q.jsx)(I.Z,{style:{fontSize:"15px"}})})]})})}),openModal:function(e){_({search:e}),C(!0),setTimeout((function(){var t;x.current&&(x.current.value=e),null===(t=x.current)||void 0===t||t.focus()}),150)},closeModal:A,isLoading:E}},V=n(78946),Y=n(30948),G=n(16386),J=n(70272),Q={Sub_Ref_No:"",Ref_No:"",PNo:"",IDNo:"",Date:new Date,Name:"",Remarks:"",PDC_Status:"",Deposit_Slip:"",DateDeposit:"",OR_No:"",search:"",pdcMode:"",checkMode:"",sub_account:"",Acronym:""},H={CheckIdx:"0",BankName:"",BankCode:"",Branch:"",Check_Date:new Date,Check_No:"",Check_Amnt:"",Check_Remarks:"",Check_Count:""},X=function(e,t){return"UPDATE_FIELD"===t.type?(0,c.Z)((0,c.Z)({},e),{},(0,l.Z)({},t.field,t.value)):e},$=[{field:"Check_No",headerName:"Check No.",width:150},{field:"Check_Date",headerName:"Check Date",width:150},{field:"Check_Amnt",headerName:"Amount",width:150,type:"number"},{field:"BankName",headerName:"Bank",width:200},{field:"Branch",headerName:"Branch",width:200},{field:"Check_Remarks",headerName:"Checked Remarks",width:350},{field:"Deposit_Slip",headerName:"Deposit Slip",width:150},{field:"DateDeposit",headerName:"Date Deposit",width:150},{field:"OR_No",headerName:"OR Num",width:150},{field:"BankCode",headerName:"Bank Code",width:150,hide:!0}],ee=[{field:"Date",headerName:"Date Received",width:160},{field:"Ref_No",headerName:"Ref No.",width:160},{field:"Name",headerName:"Name",flex:1}],te=[{field:"Bank_Code",headerName:"Code",width:130},{field:"Bank",headerName:"Bank Name",flex:1}],ne="pdc",re="pdc-search";function ie(){var e,t,n,C,K,O,ee,te=(0,u.useRef)(null),ie=u.useState(null),le=(0,a.Z)(ie,2),ce=le[0],ue=le[1],se=Boolean(ce),de=(0,u.useState)(!1),fe=(0,a.Z)(de,2),pe=fe[0],he=fe[1],xe=(0,u.useState)([]),ve=(0,a.Z)(xe,2),me=ve[0],ge=ve[1],ye=(0,u.useState)([]),ke=(0,a.Z)(ye,2),be=ke[0],De=ke[1],we=(0,u.useState)(!1),Ce=(0,a.Z)(we,2),Ne=Ce[0],Se=Ce[1],je=(0,u.useState)(!1),Ze=(0,a.Z)(je,2),Re=Ze[0],Ie=Ze[1],Ee=(0,u.useReducer)(X,Q),_e=(0,a.Z)(Ee,2),Pe=_e[0],Ae=_e[1],Te=(0,u.useReducer)(X,H),Fe=(0,a.Z)(Te,2),Me=Fe[0],Le=Fe[1],Be=(0,u.useContext)(j.V),ze=Be.myAxios,Ue=Be.user,Ke=(0,u.useRef)(null),Oe=(0,u.useRef)(null),qe=(0,u.useRef)(null),We=(0,u.useRef)(null),Ve=(0,u.useRef)(null),Ye=(0,u.useRef)(null),Ge=(0,u.useRef)(null),Je=(0,u.useRef)(null),Qe=(0,u.useRef)(null),He=(0,u.useRef)(null),Xe=(0,u.useRef)(null),$e=(0,u.useRef)(null),et=(0,u.useRef)(null),tt=(0,u.useRef)(""),nt=(0,u.useRef)(""),rt=(0,u.useRef)(""),it=(0,u.useRef)(""),ot=(0,u.useRef)(null),at=(0,w.useQueryClient)(),lt=(0,u.useRef)(null),ct=(0,u.useRef)(null),ut=(0,u.useRef)(null),st=(0,u.useRef)(null),dt=(0,u.useRef)(null),ft=(0,w.useQuery)({queryKey:"new-ref-number",queryFn:function(){return(e=e||(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ze.get("/task/accounting/pdc-new-ref-number",{headers:{Authorization:"Bearer ".concat(null===Ue||void 0===Ue?void 0:Ue.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},refetchOnWindowFocus:!1,onSuccess:function(e){var t=e;Ae({type:"UPDATE_FIELD",field:"Ref_No",value:t.data.RefNo[0].pdcID}),Ae({type:"UPDATE_FIELD",field:"Sub_Ref_No",value:t.data.RefNo[0].pdcID})}}),pt=ft.isLoading,ht=ft.refetch,xt=(0,w.useMutation)({mutationKey:ne,mutationFn:function(e){return(t=t||(0,o.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("update"!==Pe.pdcMode){e.next=5;break}return delete t.mode,e.next=4,ze.post("/task/accounting/update-pdc",t,{headers:{Authorization:"Bearer ".concat(null===Ue||void 0===Ue?void 0:Ue.accessToken)}});case 4:case 8:return e.abrupt("return",e.sent);case 5:return delete t.mode,e.next=8,ze.post("/task/accounting/add-pdc",t,{headers:{Authorization:"Bearer ".concat(null===Ue||void 0===Ue?void 0:Ue.accessToken)}});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){if(e.data.success)return ht(),at.invalidateQueries(re),oe(Ae,Q),De([]),Ae({type:"UPDATE_FIELD",field:"pdcMode",value:""}),N().fire({position:"center",icon:"success",title:e.data.message,showConfirmButton:!1,timer:1500});N().fire({position:"center",icon:"error",title:e.data.message,showConfirmButton:!1,timer:1500})}}),vt=xt.mutate,mt=xt.isLoading,gt=(0,w.useMutation)({mutationKey:ne,mutationFn:function(e){return(n=n||(0,o.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ze.post("/task/accounting/get-search-pdc-check",t,{headers:{Authorization:"Bearer ".concat(null===Ue||void 0===Ue?void 0:Ue.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){return(C=C||(0,o.Z)((0,i.Z)().mark((function e(t){var n,r,a,l,u,s,d,f;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f=function(e,t){return(n=n||(0,o.Z)((0,i.Z)().mark((function e(t,n){var r,o,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],o=(0,i.Z)().mark((function e(){var o,l,c,u,s,d;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t[a],l="".concat(n,"/").concat(o.uniqueFilename),e.next=4,fetch(l);case 4:return c=e.sent,e.next=7,c.blob();case 7:u=e.sent,s=new File([u],o.fileName,{type:o.fileType}),d=new FileReader,r.push(new Promise((function(e,t){d.onload=function(t){e(s)},d.onerror=function(e){t(new Error("Error reading file: "+s.name))},d.readAsDataURL(s)})));case 11:case"end":return e.stop()}}),e)})),a=0;case 3:if(!(a<t.length)){e.next=8;break}return e.delegateYield(o(),"t0",5);case 5:a++,e.next=3;break;case 8:return e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)},null!==t&&void 0!==t&&t.data.success){e.next=3;break}return e.abrupt("return",alert("Error : ".concat(null===t||void 0===t?void 0:t.data.message)));case 3:if(a=(r=t).data.getSearchPDCCheck[0].Ref_No,!r.data.upload[0]){e.next=14;break}return u=JSON.parse(null===(l=r.data.upload[0])||void 0===l?void 0:l.upload),e.next=9,f(u,"".concat("http://localhost:4400/","pdc/").concat(a));case 9:return s=e.sent,e.next=12,Promise.all(s);case 12:d=e.sent,ge(d);case 14:De(r.data.getSearchPDCCheck.map((function(e,t){return(0,c.Z)((0,c.Z)({},e),{},{CheckIdx:"".concat(t)})}))),Ae({type:"UPDATE_FIELD",field:"Ref_No",value:r.data.getSearchPDCCheck[0].Ref_No}),Ae({type:"UPDATE_FIELD",field:"Name",value:r.data.getSearchPDCCheck[0].Name}),Ae({type:"UPDATE_FIELD",field:"Date",value:r.data.getSearchPDCCheck[0].Date}),Ae({type:"UPDATE_FIELD",field:"PNo",value:r.data.getSearchPDCCheck[0].PNo}),Ae({type:"UPDATE_FIELD",field:"IDNo",value:r.data.getSearchPDCCheck[0].IDNo}),Ae({type:"UPDATE_FIELD",field:"Acronym",value:r.data.getSearchPDCCheck[0].Acronym}),Ae({type:"UPDATE_FIELD",field:"sub_account",value:r.data.getSearchPDCCheck[0].sub_account}),Ae({type:"UPDATE_FIELD",field:"Remarks",value:r.data.getSearchPDCCheck[0].Remarks}),Ae({type:"UPDATE_FIELD",field:"pdcMode",value:"update"});case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}),yt=gt.mutate,kt=gt.isLoading,bt=W({myAxios:ze,user:Ue,link:{url:"/task/accounting/search-pdc-policy-id",queryUrlName:"searchPdcPolicyIds"},column:[{field:"Type",headerName:"Type",width:130},{field:"IDNo",headerName:"ID No.",width:200},{field:"chassis",headerName:"Chassis No.",width:200,hide:!0},{field:"Name",headerName:"Name",width:350},{field:"ID",headerName:"ID",width:300,hide:!0},{field:"client_id",headerName:"client_id",width:200,hide:!0}],onSelectionChange:function(e){var t,n;e.length>0&&(Ae({type:"UPDATE_FIELD",field:"PNo",value:e[0].IDNo}),Ae({type:"UPDATE_FIELD",field:"IDNo",value:e[0].client_id}),Ae({type:"UPDATE_FIELD",field:"Name",value:null!==(t=e[0].Name)&&void 0!==t?t:""}),Ae({type:"UPDATE_FIELD",field:"Remarks",value:null!==(n=e[0].remarks)&&void 0!==n?n:""}),Ae({type:"UPDATE_FIELD",field:"sub_account",value:e[0].sub_account}),Ae({type:"UPDATE_FIELD",field:"Acronym",value:e[0].Acronym}),wt(),be.length<=0&&setTimeout((function(){var e;null===(e=ot.current)||void 0===e||e.click()}),100))},responseDataKey:"clientsId"}),Dt=bt.Modal,wt=bt.closeModal,Ct=bt.openModal,Nt=bt.isLoading,St=W({myAxios:ze,user:Ue,link:{url:"/task/accounting/search-pdc-banks",queryUrlName:"searchPdcBanks"},column:[{field:"Bank_Code",headerName:"Code",width:100},{field:"Bank",headerName:"Bank Name",width:350}],onSelectionChange:function(e){e.length>0&&(setTimeout((function(){tt.current=e[0].Bank_Code,Je.current&&(Je.current.value=e[0].Bank)}),100),Zt(),Se(!0),setTimeout((function(){var e;null===(e=Qe.current)||void 0===e||e.focus()}),100))},onModalClose:function(){setTimeout((function(){Se(!0)}),100)},responseDataKey:"pdcBanks"}),jt=St.Modal,Zt=St.closeModal,Rt=St.openModal,It=St.isLoading,Et=W({myAxios:ze,user:Ue,column:[{field:"Date",headerName:"Date Received",width:90},{field:"Ref_No",headerName:"Ref No.",width:80},{field:"Name",headerName:"Name",width:320}],link:{url:"/task/accounting/search-pdc",queryUrlName:"searchPDCInput"},onSelectionChange:function(e){var t;e.length>0&&(yt({ref_no:e[0].Ref_No}),Pt(),Ke.current&&(null===(t=Ke.current)||void 0===t||t.focus()))},responseDataKey:"searchPDC"}),_t=Et.Modal,Pt=Et.closeModal,At=Et.openModal,Tt=Et.isLoading,Ft=function(e){var t=e.target,n=t.name,r=t.value;Ae({type:"UPDATE_FIELD",field:n,value:r})},Mt=(0,u.useCallback)((function(e){return(K=K||(0,o.Z)((0,i.Z)().mark((function e(t){var n,r,o,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=function(e){var t=me;if(t.length>0)for(var n=function(){var n=t[r],i=new FileReader;e.push(new Promise((function(e,t){i.onload=function(t){var r;e({datakey:"pdc_file",fileName:n.name,fileContent:null===(r=t.target)||void 0===r?void 0:r.result,fileType:n.type,file:n})},i.onerror=function(e){t(new Error("Error reading file: "+n.name))},i.readAsDataURL(n)})))},r=0;r<t.length;r++)n()},""!==Pe.PNo){e.next=3;break}return e.abrupt("return",N().fire({position:"center",icon:"warning",title:"Please provide loan information!",timer:1500}).then((function(){setTimeout((function(){var e;null===(e=We.current)||void 0===e||e.click()}),350)})));case 3:if(!(be.length<=0)){e.next=5;break}return e.abrupt("return",N().fire({position:"center",icon:"warning",title:"Please provide entry!",timer:1500}).then((function(){Se(!0)})));case 5:if(!(Pe.PNo.length>=45)){e.next=7;break}return e.abrupt("return",N().fire({position:"center",icon:"warning",title:"Pno is too long!",timer:1500}));case 7:if(!(Pe.Remarks.length>=220)){e.next=9;break}return e.abrupt("return",N().fire({position:"center",icon:"warning",title:"Remarks is too long!",timer:1500}));case 9:return r(n=[]),e.next=13,Promise.all(n);case 13:o=e.sent,a={Ref_No:Pe.Ref_No,PNo:Pe.PNo,IDNo:Pe.IDNo,Date:Pe.Date,Name:Pe.Name,Remarks:Pe.Remarks,BankCode:Pe.BankCode,checks:JSON.stringify(be)},"update"===Pe.pdcMode?(0,T.s)({isUpdate:!0,cb:function(e){vt((0,c.Z)((0,c.Z)({},a),{},{userCodeConfirmation:e,fileToSave:o}))}}):(0,T.L)({isConfirm:function(){vt((0,c.Z)((0,c.Z)({},a),{},{fileToSave:o}))}});case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}),[Pe,vt,be,me]),Lt=function(e){e.preventDefault(),he(!1)},Bt=function(e){e.preventDefault(),he(!0)},zt=function(e){e.preventDefault();var t,n=e.dataTransfer.files,i=Array.from(n),o=[].concat((0,r.Z)(me),i);if(he(!1),(0,M.checkFile)(o))return null===(t=Oe.current)||void 0===t||t.click(),alert("file is not valid Extention!");ge(o)};function Ut(e){return(e||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function Kt(){setTimeout((function(){var e;null===(e=te.current)||void 0===e||e.resetTableSelected();var t=te.current.getParentElement().querySelector(".grid-container .row-0.col-0 input");setTimeout((function(){t&&t.focus()}),100)}),100)}(0,u.useEffect)((function(){var e=function(e){(e.ctrlKey||e.metaKey)&&"s"===e.key&&(e.preventDefault(),Mt(e))};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[Mt]);var Ot=""===Pe.pdcMode,qt=window.innerWidth-50,Wt=window.innerHeight-145;return(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(J.Z,{title:"PDC"}),(0,q.jsxs)("div",{style:{width:"100%",height:"100%",flex:1,background:"red",padding:"10px",backgroundColor:"#F8F8FF"},children:[jt,_t,Dt,(0,q.jsx)(s.Z,{sx:function(e){return(0,l.Z)({display:"flex",alignItems:"center",columnGap:"20px"},e.breakpoints.down("sm"),{flexDirection:"column",alignItems:"flex-start",flex:1,marginBottom:"15px"})},children:(0,q.jsxs)("div",{style:{display:"flex",alignItems:"center",columnGap:"5px",marginBottom:"15px"},children:[Tt?(0,q.jsx)(_.Z,{loading:Tt}):(0,q.jsx)(d.Z,{label:"Search",size:"small",name:"search",value:Pe.search,onChange:Ft,onKeyDown:function(e){("Enter"!==e.code&&"NumpadEnter"!==e.code||(e.preventDefault(),At(e.target.value)),"ArrowDown"===e.key)&&(e.preventDefault(),document.querySelector(".grid-container").focus())},InputProps:{style:{height:"27px",fontSize:"14px"},inputRef:Ke,className:"manok"},sx:{width:"400px",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}}),""===Pe.pdcMode&&(0,q.jsx)(f.Z,{sx:{height:"30px",fontSize:"11px"},variant:"contained",startIcon:(0,q.jsx)(D.Z,{sx:{width:15,height:15}}),id:"entry-header-save-button",color:"primary",onClick:function(){Ae({type:"UPDATE_FIELD",field:"pdcMode",value:"add"})},children:"New"}),(0,q.jsx)(_.Z,{sx:{height:"30px",fontSize:"11px"},ref:qe,id:"save-entry-header",color:"success",variant:"contained",type:"submit",onClick:Mt,disabled:""===Pe.pdcMode,loading:mt,startIcon:(0,q.jsx)(S.Z,{sx:{width:15,height:15}}),children:"Save"}),("add"===Pe.pdcMode||"update"===Pe.pdcMode)&&(0,q.jsx)(f.Z,{sx:{height:"30px",fontSize:"11px"},variant:"contained",startIcon:(0,q.jsx)(I.Z,{sx:{width:15,height:15}}),onClick:function(){N().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, cancel it!"}).then((function(e){e.isConfirmed&&(Q.Sub_Ref_No=Pe.Sub_Ref_No,Q.Ref_No=Pe.Sub_Ref_No,oe(Ae,Q),De([]),Ae({type:"UPDATE_FIELD",field:"pdcMode",value:""}))}))},color:"error",children:"Cancel"}),(0,q.jsx)(f.Z,{sx:{height:"30px",fontSize:"11px"},disabled:""===Pe.pdcMode,variant:"contained",startIcon:(0,q.jsx)(D.Z,{sx:{width:15,height:15}}),onClick:function(){var e,t=be[be.length-1];H.Check_No=ae(null===t||void 0===t?void 0:t.Check_No),oe(Le,H),Ae({type:"UPDATE_FIELD",field:"checkMode",value:""}),(0,E.flushSync)((function(){Se(!0)})),null===(e=Ge.current)||void 0===e||e.focus()},ref:ot,children:"Add Check"}),(0,q.jsxs)("div",{children:[(0,q.jsx)(f.Z,{disabled:"update"!==Pe.pdcMode,id:"basic-button","aria-controls":se?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":se?"true":void 0,onClick:function(e){ue(e.currentTarget)},sx:{height:"30px",fontSize:"11px",color:"white",backgroundColor:B.Z[600],"&:hover":{backgroundColor:B.Z[700]}},children:"Print"}),(0,q.jsxs)(p.Z,{id:"basic-menu",anchorEl:ce,open:se,onClose:function(){ue(null)},MenuListProps:{"aria-labelledby":"basic-button"},children:[(0,q.jsx)(h.Z,{onClick:function(){(0,E.flushSync)((function(){localStorage.removeItem("printString"),localStorage.setItem("dataString",JSON.stringify(be)),localStorage.setItem("paper-width","8.5in"),localStorage.setItem("paper-height","11in"),localStorage.setItem("module","pdc"),localStorage.setItem("state",JSON.stringify(Pe)),localStorage.setItem("column",JSON.stringify([{datakey:"Check_No",header:"CHECK NO",width:"80px"},{datakey:"Check_Date",header:"DATE",width:"130px"},{datakey:"BankName",header:"BANK",width:"240px"},{datakey:"Check_Amnt",header:"AMOUNT",width:"70px"},{datakey:"SEQ",header:"SEQ",width:"30px"}])),localStorage.setItem("title","UMIS"===(null===Ue||void 0===Ue?void 0:Ue.department)?"UPWARD MANAGEMENT INSURANCE SERVICES\n Post Date Checks Receipt":"UPWARD CONSULTANCY SERVICES AND MANAGEMENT INC.\n Post Date Checks Receipt")})),window.open("/dashboard/print","_blank")},children:"PDC Receipt"}),(0,q.jsx)(h.Z,{onClick:function(){(0,E.flushSync)((function(){var e=L.renderToString((0,q.jsxs)("div",{children:[(0,q.jsx)("p",{style:{color:"#d1d5db",fontSize:"11px",textAlign:"center",padding:0,marginTop:"8px",marginBottom:0},children:"UCSMI"}),(0,q.jsx)("p",{style:{color:"#d1d5db",fontSize:"11px",textAlign:"center",padding:0,margin:0},children:Pe.Name}),(0,q.jsx)("p",{style:{color:"#d1d5db",fontSize:"11px",textAlign:"center",padding:0,margin:0},children:Pe.IDNo}),(0,q.jsx)("p",{style:{color:"#d1d5db",fontSize:"11px",textAlign:"center",padding:0,margin:"20px"},children:Pe.Ref_No})]}));localStorage.setItem("printString",e),localStorage.removeItem("dataString"),localStorage.setItem("paper-width","8.5in"),localStorage.setItem("paper-height","11in")})),window.open("/dashboard/print","_blank")},children:"PDC Labeling"})]})]})]})}),(0,q.jsx)("form",{onKeyDown:function(e){"Enter"!==e.code&&"NumpadEnter"!==e.code||e.preventDefault()},style:{marginBottom:"20px"},children:(0,q.jsx)(s.Z,{sx:function(e){return(0,l.Z)({display:"flex",columnGap:"15px",flexDirection:"row"},e.breakpoints.down("md"),{flexDirection:"column",rowGap:"10px"})},children:(0,q.jsxs)(s.Z,{sx:{display:"flex",gap:"10px",width:"100%"},children:[(0,q.jsxs)("fieldset",{style:{flex:1,display:"flex",flexDirection:"column",gap:"10px",padding:"15px",border:"1px solid #cbd5e1",borderRadius:"5px"},children:[(0,q.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[pt?(0,q.jsx)(_.Z,{loading:pt}):(0,q.jsxs)(x.Z,{fullWidth:!0,variant:"outlined",size:"small",disabled:Ot,sx:{".MuiFormLabel-root":{fontSize:"14px",background:"white",zIndex:99,padding:"0 3px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},children:[(0,q.jsx)(v.Z,{htmlFor:"pdc-id-field",children:"Reference No."}),(0,q.jsx)(m.Z,{readOnly:"UCSMI"!==(null===Ue||void 0===Ue?void 0:Ue.department),sx:{height:"27px",fontSize:"14px",fieldset:{borderColor:"black"}},disabled:Ot,label:"Reference No.",name:"Ref_No",value:Pe.Ref_No,onChange:Ft,onKeyDown:function(e){var t;"Enter"!==e.code&&"NumpadEnter"!==e.code||(null===(t=lt.current)||void 0===t||t.focus())},id:"pdc-id-field",endAdornment:(0,q.jsx)(g.Z,{position:"end",children:(0,q.jsx)(y.Z,{disabled:Ot,"aria-label":"search-client",color:"secondary",edge:"end",children:(0,q.jsx)(P.Z,{})})})})]}),(0,q.jsx)(Z.Z,{fullWidth:!0,disabled:Ot,label:"Date Received",onChange:function(e){Ae({type:"UPDATE_FIELD",field:"Date",value:e})},inputRef:lt,value:new Date(Pe.Date),onKeyDown:function(e){var t;"Enter"!==e.code&&"NumpadEnter"!==e.code||(null===(t=ct.current)||void 0===t||t.focus())},textField:{InputLabelProps:{style:{fontSize:"14px"}},InputProps:{style:{height:"27px",fontSize:"14px"}}}})]}),(0,q.jsx)(d.Z,{InputLabelProps:{sx:{color:"black"}},variant:"outlined",size:"small",label:"Remarks",name:"Remarks",value:Pe.Remarks,onChange:Ft,disabled:Ot,onKeyDown:function(e){var t;"Enter"!==e.code&&"NumpadEnter"!==e.code||(null===(t=ut.current)||void 0===t||t.focus())},InputProps:{style:{height:"27px",fontSize:"14px"},inputRef:ct},sx:{fieldset:{borderColor:"black"},".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}})]}),(0,q.jsxs)("fieldset",{style:{flex:1,display:"flex",gap:"10px",padding:"15px",border:"1px solid #cbd5e1",borderRadius:"5px",flexDirection:"column"},children:[(0,q.jsxs)("div",{style:{width:"100%",flex:1,display:"flex",gap:"10px"},children:[Nt?(0,q.jsx)(_.Z,{loading:Nt}):(0,q.jsxs)(x.Z,{fullWidth:!0,variant:"outlined",size:"small",disabled:Ot,sx:{flex:1,".MuiFormLabel-root":{fontSize:"14px",background:"white",zIndex:99,padding:"0 3px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},children:[(0,q.jsx)(v.Z,{htmlFor:"label-input-id",children:"PN/Client ID"}),(0,q.jsx)(m.Z,{inputRef:ut,sx:{fieldset:{borderColor:"black"},height:"27px",fontSize:"14px"},onKeyDown:function(e){var t;"Enter"!==e.code&&"NumpadEnter"!==e.code||(null===(t=We.current)||void 0===t||t.click())},name:"PNo",value:Pe.PNo,onChange:Ft,id:"label-input-id",endAdornment:(0,q.jsx)(g.Z,{position:"end",children:(0,q.jsx)(y.Z,{ref:We,disabled:Ot,"aria-label":"search-client",color:"secondary",edge:"end",onClick:function(){return Ct(Pe.PNo)},children:(0,q.jsx)(R.Z,{})})}),label:"PN/Client ID"})]}),(0,q.jsx)(d.Z,{InputLabelProps:{sx:{color:"black"}},variant:"outlined",size:"small",label:"Branch",name:"Acronym",value:Pe.Acronym,onChange:Ft,disabled:Ot,onKeyDown:function(e){var t;"Enter"!==e.code&&"NumpadEnter"!==e.code||(null===(t=dt.current)||void 0===t||t.focus())},InputProps:{style:{height:"27px",fontSize:"14px"},readOnly:!0,inputRef:st},sx:{fieldset:{borderColor:"black"},flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}})]}),(0,q.jsxs)("div",{style:{width:"100%",display:"flex",columnGap:"10px"},children:[(0,q.jsx)(d.Z,{InputLabelProps:{sx:{color:"black"}},variant:"outlined",size:"small",label:"Clients Name",name:"Name",value:Pe.Name,onChange:Ft,disabled:Ot,onKeyDown:function(e){var t;"Enter"!==e.code&&"NumpadEnter"!==e.code||(null===(t=qe.current)||void 0===t||t.click())},InputProps:{style:{height:"27px",fontSize:"14px"},readOnly:!0,inputRef:dt},sx:{fieldset:{borderColor:"black"},flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}}),(0,q.jsx)(f.Z,{sx:{height:"27px",fontSize:"11px"},disabled:""===Pe.pdcMode,variant:"contained",startIcon:(0,q.jsx)(A.Z,{sx:{width:15,height:15}}),onClick:function(){Ie(!0)},children:"Upload Check"})]})]})]})})}),(0,q.jsx)(z.r,{isLoading:kt,ref:te,rows:be,column:$,width:qt,height:Wt,dataReadOnly:!0,onSelectionChange:function(e){if(e.length>0){var t,n=e[0];setTimeout((function(){Ge.current&&Je.current&&Qe.current&&He.current&&Xe.current&&$e.current&&et.current&&(Ge.current.value=n.Check_No,Je.current.value=n.BankName,Qe.current.value=n.Branch,He.current.value=n.Check_Remarks,Xe.current.value=n.Check_Date,$e.current.value=Ut(parseFloat(n.Check_Amnt.replace(/,/g,""))),et.current.value="0",tt.current=n.BankCode,nt.current=n.Deposit_Slip,rt.current=n.DateDeposit,it.current=n.Ref_No)}),100),(0,E.flushSync)((function(){Se(!0)})),null===(t=Ye.current)||void 0===t||t.focusVisible()}else Ae({type:"UPDATE_FIELD",field:"checkMode",value:""})},onKeyDown:function(e,t){if("Delete"===t||"Backspace"===t){var n=e[0];if(n.Deposit_Slip&&""!==n.Deposit_Slip||n.DateDeposit&&""!==n.DateDeposit||n.OR_No&&""!==n.OR_No)return N().fire({position:"center",icon:"warning",title:"Unable to delete. Check No ".concat(n.Check_No," is already ").concat(n.OR_No," issued of OR!"),showConfirmButton:!1,timer:1500});N().fire({title:"Are you sure?",text:"You won't to delete this Check No. ".concat(n.Check_No),icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(e){e.isConfirmed&&setTimeout((function(){var e,t=te.current.getSelectedRowsOnClick();De((function(e){return e.filter((function(e,n){return n!==t}))})),null===(e=te.current)||void 0===e||e.resetTableSelected()}),100)}))}},inputsearchselector:".manok"}),(0,q.jsx)(k.Z,{open:Ne,onClose:function(){var e;null===(e=te.current)||void 0===e||e.resetTableSelected(),Se(!1),Kt()},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,q.jsxs)(s.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"auto",bgcolor:"background.paper",p:4},children:[(0,q.jsx)(b.Z,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Check Detail"}),(0,q.jsx)("br",{}),(0,q.jsxs)("div",{style:{display:"flex",columnGap:"10px"},children:[(0,q.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[(0,q.jsx)(U.oi,{label:{title:"Check No : ",style:{fontSize:"12px",fontWeight:"bold",width:"70px"}},input:{type:"text",style:{width:"190px"},onKeyDown:function(e){var t;"NumpadEnter"!==e.code&&"Enter"!==e.code||(null===(t=Je.current)||void 0===t||t.focus())}},inputRef:Ge}),It?(0,q.jsx)(_.Z,{loading:It}):(0,q.jsx)(U.oi,{label:{title:"Bank : ",style:{fontSize:"12px",fontWeight:"bold",width:"70px"}},input:{type:"text",style:{width:"190px"},value:Pe.refNo,name:"refNo",onKeyDown:function(e){if("NumpadEnter"===e.code||"Enter"===e.code)return Rt(e.currentTarget.value)}},icon:(0,q.jsx)(V.Z,{sx:{fontSize:"18px"}}),onIconClick:function(e){var t;(e.preventDefault(),Je.current)&&Rt(null===(t=Je.current)||void 0===t?void 0:t.value)},inputRef:Je}),(0,q.jsx)(U.oi,{label:{title:"Branch : ",style:{fontSize:"12px",fontWeight:"bold",width:"70px"}},input:{type:"text",style:{width:"190px"},onKeyDown:function(e){var t;"NumpadEnter"!==e.code&&"Enter"!==e.code||(null===(t=He.current)||void 0===t||t.focus())}},inputRef:Qe}),(0,q.jsx)(U.Fz,{label:{title:"Remarks : ",style:{fontSize:"12px",fontWeight:"bold",width:"70px"}},textarea:{rows:4,disabled:Ot,style:{flex:1},onKeyDown:function(e){var t;"Enter"===e.key&&e.shiftKey||("NumpadEnter"!==e.code&&"Enter"!==e.code||null===(t=Xe.current)||void 0===t||t.focus())}},_inputRef:He})]}),(0,q.jsxs)("div",{style:{display:"flex",gap:"10px",flexDirection:"column"},children:[(0,q.jsx)(U.oi,{label:{title:"Check Dated : ",style:{fontSize:"12px",fontWeight:"bold",width:"90px"}},input:{disabled:Ot,type:"date",style:{width:"190px"},defaultValue:(new Date).toISOString().split("T")[0],onKeyDown:function(e){var t;"NumpadEnter"!==e.code&&"Enter"!==e.code||(null===(t=$e.current)||void 0===t||t.focus())}},inputRef:Xe}),(0,q.jsxs)("div",{style:{display:"flex"},children:[(0,q.jsx)("label",{style:{fontSize:"12px",fontWeight:"bold",width:"90px"},children:"Amount :"}),(0,q.jsx)(Y.h3,{style:{flex:1},value:null!==(O=null===(ee=$e.current)||void 0===ee?void 0:ee.value)&&void 0!==O?O:"",getInputRef:$e,allowNegative:!1,thousandSeparator:!0,valueIsNumericString:!0,onKeyDown:function(e){if("Enter"===e.code||"NumpadEnter"===e.code){var t,n,r=null===(t=$e.current)||void 0===t?void 0:t.value,i=parseFloat(r.replace(/,/g,""));$e.current&&(isNaN(i)?$e.current.value="0.00":r.includes(".")?$e.current.value=Ut(i):$e.current.value="".concat(Ut(i))),null===(n=et.current)||void 0===n||n.focus()}}})]}),"update"!==Pe.checkMode&&(0,q.jsx)(U.oi,{label:{title:"Check Count : ",style:{fontSize:"12px",fontWeight:"bold",width:"90px"}},input:{disabled:Ot,type:"number",style:{width:"190px"},onKeyDown:function(e){if("NumpadEnter"===e.code||"Enter"===e.code)var t=setTimeout((function(){var e;null===(e=Ve.current)||void 0===e||e.click(),clearTimeout(t)}),100)}},inputRef:et})]})]}),(0,q.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",width:"100%",marginTop:"10px"},children:(0,q.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,q.jsx)(f.Z,{ref:Ve,action:Ye,color:"primary",variant:"contained",autoFocus:""!==Pe.checkMode,onClick:function(){!function(){function e(e,t){var n=parseInt(e);return(n+=t).toString().padStart(e.length,"0")}function t(e,t){var n=new Date(e);return n.setMonth(n.getMonth()+t),(0,G.Z)(n,"yyyy-MM-dd")}if(Ge.current&&Je.current&&Qe.current&&He.current&&Xe.current&&$e.current&&et.current){if(be.filter((function(e){return Ge.current&&Ge.current.value===e.Check_No})).length>0)return alert("check no. is already exist!"),void Ge.current.focus();if(""===Ge.current.value)return alert("check no. is required!"),void Ge.current.focus();if(""===Je.current.value)return alert("bank is required!"),void Je.current.focus();if(""===Qe.current.value)return alert("branch is required!"),void Qe.current.focus();if(!function(e){var t=new Date(e);return t instanceof Date&&!isNaN(t.getTime())}(Xe.current.value))return alert("invalid date!"),void Xe.current.focus();if(parseFloat($e.current.value.replace(/,/g,""))<=0)return alert("amount must be greater than 0!"),void $e.current.focus();De((function(n){if(Ge.current&&Je.current&&Qe.current&&He.current&&Xe.current&&$e.current&&et.current){var i=te.current.getSelectedIndex();if(null!==i&&void 0!==i)return n.map((function(e,t){return Ge.current&&Je.current&&Qe.current&&He.current&&Xe.current&&$e.current&&et.current&&t===i&&(e={Check_No:Ge.current.value,Check_Date:Xe.current.value,Check_Amnt:$e.current.value,BankName:Je.current.value,BankCode:tt.current,Branch:Qe.current.value,Check_Remarks:He.current.value,Deposit_Slip:nt.current,DateDeposit:rt.current,OR_No:it.current}),e}));for(var o=[],a=0;a<parseInt(et.current.value);a++){var l={Check_No:e(Ge.current.value,a),Check_Date:t(Xe.current.value,a),Check_Amnt:$e.current.value,BankName:Je.current.value,BankCode:tt.current,Branch:Qe.current.value,Check_Remarks:He.current.value,Deposit_Slip:nt.current,DateDeposit:rt.current,OR_No:it.current};o.push(l)}return[].concat((0,r.Z)(n),o)}return n})),Se(!1),Kt()}}()},sx:{height:"30px",fontSize:"11px"},children:"update"===Pe.checkMode?"Update":"Save"}),"update"===Pe.checkMode&&(0,q.jsx)(f.Z,{color:"error",variant:"contained",onClick:function(){(0,E.flushSync)((function(){Se(!1)})),N().fire({title:"Are you sure?",text:"Delete Check ".concat(Me.Check_No," "),icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(e){e.isConfirmed&&De((function(e){return e=e.filter((function(e){return e.CheckIdx!==Me.CheckIdx}))})),Kt()}))},sx:{height:"30px",fontSize:"11px"},children:"Delete"}),(0,q.jsx)(f.Z,{color:"success",variant:"contained",sx:{height:"30px",fontSize:"11px"},onClick:function(){Kt(),Se(!1)},children:"Cancel"}),(0,q.jsx)(y.Z,{style:{position:"absolute",top:"10px",right:"10px"},"aria-label":"search-client",onClick:function(){Se(!1),Kt()},children:(0,q.jsx)(I.Z,{})})]})})]})}),(0,q.jsx)("div",{style:{display:Re?"flex":"none",position:"absolute",top:0,bottom:0,left:0,right:0,background:"rgba(158, 155, 157, 0.31)",zIndex:"999",justifyContent:"center",alignItems:"center"},children:(0,q.jsx)("div",{style:{width:"90%",height:"90%"},children:(0,q.jsx)("div",{style:{width:"90%",height:"90%",overflow:"auto",background:"white",padding:"20px",margin:"auto",zIndex:"9929",boxShadow:" -1px 1px 13px 6px rgba(0,0,0,0.54)",position:"relative"},children:(0,q.jsxs)("div",{style:{height:"100%",width:"100%",position:"relative",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[(0,q.jsx)(y.Z,{sx:{position:"absolute",right:"5px",top:"5px"},onClick:function(){Ie(!1)},children:(0,q.jsx)(I.Z,{})}),(0,q.jsxs)("div",{style:{width:"100%",height:"500px",border:pe?"5px dashed green":"5px dashed grey",overflow:"auto",padding:"10px"},onDragEnter:Bt,onDragOver:function(e){return e.preventDefault()},onDragLeave:Lt,onDrop:zt,children:[(0,q.jsx)("div",{id:"upload-container",style:{width:"100%",height:"100%",display:"flex",gap:"10px",flexWrap:"wrap"},onDragEnter:Bt,onDragOver:function(e){return e.preventDefault()},onDragLeave:Lt,onDrop:zt,children:me.map((function(e,t){return(0,q.jsx)(M.DisplayFile,{itm:e,selectedFiles:me,setSelectedFiles:ge,fileInput:Oe},t)}))}),me.length<=0&&(0,q.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)",textAlign:"center"},children:(0,q.jsx)(F.Z,{sx:{fontSize:"20em",color:"#64748b"}})}),(0,q.jsx)("input",{ref:Oe,type:"file",multiple:!0,style:{display:"none",background:"white"},id:"input-file",onChange:function(e){var t=e.target.files,n=Array.from(t),i=[].concat((0,r.Z)(me),n);if((0,M.checkFile)(i))return alert("file is not valid Extention!");ge(i)}})]}),(0,q.jsx)("div",{style:{width:"100%"},children:(0,q.jsx)(f.Z,{fullWidth:!0,onClick:function(){var e=document.getElementById("input-file");null===e||void 0===e||e.click()},children:"CLick it to upload"})})]})})})}),(mt||kt)&&(0,q.jsx)("div",{className:"loading-component",children:(0,q.jsx)("div",{className:"loader"})})]})]})}function oe(e,t){Object.entries(t).forEach((function(t){var n=(0,a.Z)(t,2),r=n[0],i=n[1];e({type:"UPDATE_FIELD",field:r,value:i})}))}function ae(e){if(void 0===e||null===e||""===e)return"001";for(var t=(parseInt(e)+1).toString();t.length<e.length;)t="0"+t;return t}}}]);
//# sourceMappingURL=8185.e66d867d.chunk.js.map