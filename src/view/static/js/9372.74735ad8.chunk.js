"use strict";(self.webpackChunkupward=self.webpackChunkupward||[]).push([[9372],{69372:function(e,n,t){t.r(n),t.d(n,{bankAccountColumn:function(){return P},bannkColumn:function(){return U},chartColumn:function(){return R},clientColumn:function(){return K},default:function(){return G},reducer:function(){return q},setNewStateValue:function(){return V}});var o=t(74165),i=t(15861),a=t(29439),r=t(4942),c=t(1413),l=t(72791),u=t(64554),d=t(27391),s=t(36151),f=t(85523),p=t(94454),m=t(68096),h=t(94925),x=t(77196),v=t(63466),g=t(13400),y=t(78946),b=t(42419),A=t(27247),N=t(93421),I=t(4378),k=t(3380),D=t(91933),Z=t(21830),w=t.n(Z),C=t(79018),_=t(29823),j=t(53329),B=t(91421),z=t(39709),S=t(93263),F=t(89767),L=t(64230),M=t(70272),E=t(80184),T={Account_No:"",Account_Name:"",Account_Type:"",Desc:"",Option:0,Account_ID:"",Inactive:!1,IDNo:"",Account_ID_Name:"",Identity:"",BankName:"",Auto:"",mode:"",search:""},q=function(e,n){return"UPDATE_FIELD"===n.type?(0,c.Z)((0,c.Z)({},e),{},(0,r.Z)({},n.field,n.value)):e},P=[{field:"Auto",headerName:"Auto",hide:!0},{field:"Account_No",headerName:"Account No#",width:300},{field:"Account_Name",headerName:"Account Name",flex:1},{field:"Account_Type",headerName:"Account Type",flex:1},{field:"Desc",headerName:"Bank Name",flex:1},{field:"Account_ID",headerName:"Account ID",flex:1},{field:"Inactive",headerName:"Inactive",flex:1},{field:"IDNo",headerName:"ID No",flex:1},{field:"Identity",headerName:"Identity",flex:1}],R=[{field:"Acct_Code",headerName:"Code",flex:1},{field:"Acct_Title",headerName:"Title",flex:1},{field:"Short",headerName:"Short Name",flex:1}],U=[{field:"Bank_Code",headerName:"Code",flex:1},{field:"Bank",headerName:"Bank Name",flex:1}],K=[{field:"entry_client_id",headerName:"ID",width:130},{field:"fullname",headerName:"First Name",flex:1},{field:"entry_type",headerName:"ID Type",width:150}];function G(){var e,n,t,Z,K,G=(0,l.useRef)(null),H=(0,l.useReducer)(q,T),W=(0,a.Z)(H,2),O=W[0],Q=W[1],Y=(0,l.useContext)(k.V),X=Y.myAxios,J=Y.user,$=(0,l.useState)([]),ee=(0,a.Z)($,2),ne=ee[0],te=ee[1],oe=(0,l.useRef)(null),ie=(0,D.useQueryClient)(),ae=(0,l.useRef)(null),re=(0,D.useQuery)({queryKey:"bank-account-trans",queryFn:function(){return(e=e||(0,i.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X.get("/reference/get-bank-account?bankAccountSearch=".concat(O.search),{headers:{Authorization:"Bearer ".concat(null===J||void 0===J?void 0:J.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){te(null===e||void 0===e?void 0:e.data.bankAccount)}}),ce=re.isLoading,le=re.refetch,ue=(0,D.useMutation)({mutationKey:"bank-account-actions",mutationFn:function(e){return(n=n||(0,i.Z)((0,o.Z)().mark((function e(n){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X.post("/reference/add-bank-account",n,{headers:{Authorization:"Bearer ".concat(null===J||void 0===J?void 0:J.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:Me}),de=ue.mutate,se=ue.isLoading,fe=(0,D.useMutation)({mutationKey:"bank-account-actions",mutationFn:function(e){return(t=t||(0,i.Z)((0,o.Z)().mark((function e(n){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X.post("/reference/update-bank-account",n,{headers:{Authorization:"Bearer ".concat(null===J||void 0===J?void 0:J.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:Me}),pe=fe.mutate,me=fe.isLoading,he=(0,D.useMutation)({mutationKey:"bank-account-actions",mutationFn:function(e){return(Z=Z||(0,i.Z)((0,o.Z)().mark((function e(n){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X.post("/reference/delete-bank-account",n,{headers:{Authorization:"Bearer ".concat(null===J||void 0===J?void 0:J.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:Me}),xe=he.mutate,ve=he.isLoading,ge=(0,S.Z)({link:{url:"/reference/get-banks",queryUrlName:"bankSearch"},columns:U,queryKey:"get-banks",uniqueId:"Bank_Code",responseDataKey:"bank",onSelected:function(e){Q({type:"UPDATE_FIELD",field:"BankName",value:e[0].Bank}),Q({type:"UPDATE_FIELD",field:"Desc",value:e[0].Bank_Code}),Ne()},searchRef:oe}),ye=ge.ModalComponent,be=ge.openModal,Ae=ge.isLoading,Ne=ge.closeModal,Ie=(0,S.Z)({link:{url:"/reference/get-chart-accounts",queryUrlName:"chartAccountSearch"},columns:R,queryKey:"get-chart-accounts",uniqueId:"Acct_Code",responseDataKey:"chartAccount",onSelected:function(e,n){Q({type:"UPDATE_FIELD",field:"Account_ID_Name",value:e[0].Acct_Title}),Q({type:"UPDATE_FIELD",field:"Account_ID",value:e[0].Acct_Code}),we()},searchRef:oe}),ke=Ie.ModalComponent,De=Ie.openModal,Ze=Ie.isLoading,we=Ie.closeModal,Ce=(0,S.Z)({link:{url:"/reference/search-client",queryUrlName:"searchClientInput"},columns:[{field:"IDNo",headerName:"ID No.",width:150},{field:"Name",headerName:"Name",flex:1},{field:"ID",headerName:"ID",hide:!0}],queryKey:"search-client",uniqueId:"ID",responseDataKey:"client",onSelected:function(e,n){Q({type:"UPDATE_FIELD",field:"IDNo",value:e[0].IDNo}),Q({type:"UPDATE_FIELD",field:"Identity",value:e[0].Name}),ze()},searchRef:oe}),_e=Ce.ModalComponent,je=Ce.openModal,Be=Ce.isLoading,ze=Ce.closeModal,Se=function(e){var n=e.target,t=n.name,o=n.value;Q({type:"UPDATE_FIELD",field:t,value:o})};function Fe(e){return e.preventDefault(),""===O.Account_No?w().fire({position:"center",icon:"warning",title:"Account No is Required Field",showConfirmButton:!1,timer:1500}):""===O.Account_Name?w().fire({position:"center",icon:"warning",title:"Account Name is Required Field",showConfirmButton:!1,timer:1500}):""===O.Account_Type?w().fire({position:"center",icon:"warning",title:"Account Type is Required Field",showConfirmButton:!1,timer:1500}):""===O.Account_ID?w().fire({position:"center",icon:"warning",title:"Account ID is Required Field",showConfirmButton:!1,timer:1500}):""===O.BankName?w().fire({position:"center",icon:"warning",title:"Bank is Required Field",showConfirmButton:!1,timer:1500}):""===O.Identity?w().fire({position:"center",icon:"warning",title:"Identity is Required Field",showConfirmButton:!1,timer:1500}):O.Account_No.length>=200?w().fire({position:"center",icon:"warning",title:"Account No is too long",showConfirmButton:!1,timer:1500}):O.Account_Name>=200?w().fire({position:"center",icon:"warning",title:"Account Name is too long",showConfirmButton:!1,timer:1500}):O.Account_Type>=200?w().fire({position:"center",icon:"warning",title:"Account Type is too long",showConfirmButton:!1,timer:1500}):O.Account_ID>=200?w().fire({position:"center",icon:"warning",title:"Account ID is too long",showConfirmButton:!1,timer:1500}):O.BankName>=200?w().fire({position:"center",icon:"warning",title:"invalid Bank is too long",showConfirmButton:!1,timer:1500}):O.Identity>=200?w().fire({position:"center",icon:"warning",title:"invalid identity is too long",showConfirmButton:!1,timer:1500}):void("edit"===O.mode?(0,L.s)({isUpdate:!0,cb:function(e){pe((0,c.Z)((0,c.Z)({},O),{},{userCodeConfirmation:e}))}}):(0,L.L)({isConfirm:function(){de(O)}}))}function Le(){var e;V(Q,T),null===(e=ae.current)||void 0===e||e.removeSelection(),(0,C.D)(500).then((function(){le()}))}function Me(e){if(e.data.success)return ie.invalidateQueries("bank-account-trans"),Le(),w().fire({position:"center",icon:"success",title:e.data.message,showConfirmButton:!1,timer:1500});w().fire({position:"center",icon:"error",title:e.data.message,showConfirmButton:!1,timer:1500})}return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(M.Z,{title:"Bank Account"}),(0,E.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"100%",height:"100%",flex:1,padding:"5px"},children:[(0,E.jsxs)(u.Z,{sx:function(e){return(0,r.Z)({display:"flex",alignItems:"center",columnGap:"20px"},e.breakpoints.down("sm"),{flexDirection:"column",alignItems:"flex-start",marginBottom:"15px"})},children:[(0,E.jsx)("div",{style:{marginTop:"10px",marginBottom:"12px",width:"100%"},children:(0,E.jsx)(d.Z,{label:"Search",fullWidth:!0,size:"small",type:"text",name:"search",value:O.search,onChange:Se,InputProps:{style:{height:"27px",fontSize:"14px"}},sx:{height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},onKeyDown:function(e){if("Enter"===e.code||"NumpadEnter"===e.code)return e.preventDefault(),le()}})}),(0,E.jsx)("div",{style:{display:"flex",alignItems:"center",columnGap:"20px"},children:(0,E.jsxs)("div",{style:{display:"flex",alignItems:"center",columnGap:"5px"},children:[""===O.mode&&(0,E.jsx)(s.Z,{sx:{height:"30px",fontSize:"11px"},variant:"contained",startIcon:(0,E.jsx)(b.Z,{}),id:"entry-header-save-button",onClick:function(){Se({target:{value:"add",name:"mode"}})},children:"New"}),(0,E.jsx)(z.Z,{sx:{height:"30px",fontSize:"11px"},id:"save-entry-header",color:"primary",variant:"contained",type:"submit",onClick:Fe,startIcon:(0,E.jsx)(j.Z,{}),loading:se||me,disabled:""===O.mode,children:"Save"}),""!==O.mode&&(0,E.jsx)(s.Z,{sx:{height:"30px",fontSize:"11px"},variant:"contained",startIcon:(0,E.jsx)(_.Z,{}),color:"error",onClick:function(){w().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, cancel it!"}).then((function(e){e.isConfirmed&&Le()}))},children:"Cancel"}),(0,E.jsx)(z.Z,{id:"save-entry-header",variant:"contained",loading:ve,sx:{height:"30px",fontSize:"11px",backgroundColor:I.Z[500],"&:hover":{backgroundColor:I.Z[600]}},startIcon:(0,E.jsx)(A.Z,{}),disabled:"edit"!==O.mode,onClick:function(){(0,L.s)({isUpdate:!1,cb:function(e){xe({Auto:O.Auto,userCodeConfirmation:e})}})},children:"Delete"})]})})]}),(0,E.jsxs)("form",{onKeyDown:function(e){if(!["Account_ID_Name","BankName","IDNo"].includes(e.target.name))return"Enter"===e.code||"NumpadEnter"===e.code?(e.preventDefault(),void Fe(e)):void 0;"Enter"!==e.code&&"NumpadEnter"!==e.code||e.preventDefault()},children:[(0,E.jsx)(u.Z,{sx:function(e){return(0,r.Z)({width:"100%",display:"flex",columnGap:"15px"},e.breakpoints.down("sm"),{flexDirection:"column",rowGap:"10px"})},children:!ce&&(0,E.jsxs)(l.Fragment,{children:[(0,E.jsx)(d.Z,{required:!0,variant:"outlined",size:"small",label:"Account No",name:"Account_No",value:O.Account_No,onChange:Se,InputProps:{style:{height:"27px",fontSize:"14px"}},sx:{flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},disabled:""===O.mode||"edit"===O.mode}),(0,E.jsx)(d.Z,{required:!0,variant:"outlined",size:"small",label:"Account Name",name:"Account_Name",value:O.Account_Name,onChange:Se,InputProps:{style:{height:"27px",fontSize:"14px"}},sx:{flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},disabled:""===O.mode}),(0,E.jsx)(d.Z,{required:!0,variant:"outlined",size:"small",label:"Account Type",name:"Account_Type",value:O.Account_Type,onChange:Se,InputProps:{style:{height:"27px",fontSize:"14px"}},sx:{flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},disabled:""===O.mode}),(0,E.jsx)(f.Z,{sx:{".MuiTypography-root":{fontSize:"14px"},minWidth:"200px"},disabled:""===O.mode,control:(0,E.jsx)(p.Z,{size:"small",name:"Inactive",checked:O.Inactive,onChange:function(e){Q({type:"UPDATE_FIELD",field:"Inactive",value:e.target.checked})}}),label:"Mark as Inactive"})]})}),(0,E.jsx)("br",{}),(0,E.jsxs)(u.Z,{sx:function(e){return(0,r.Z)({width:"100%",display:"flex",columnGap:"15px",gap:"20px",padding:"15px",border:"1px solid #cbd5e1",borderRadius:"5px",position:"relative"},e.breakpoints.down("sm"),{flexDirection:"column",rowGap:"10px"})},children:[(0,E.jsx)("span",{style:{position:"absolute",top:"-12px",left:"20px",background:"white",padding:"0 5px"},children:"Deposit Slip"}),Ae?(0,E.jsx)(z.Z,{loading:Ae}):(0,E.jsxs)(m.Z,{disabled:""===O.mode,variant:"outlined",size:"small",sx:{flex:1,".MuiFormLabel-root":{fontSize:"14px",background:"white",zIndex:99,padding:"0 3px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},children:[(0,E.jsx)(h.Z,{htmlFor:"Bank",children:"Bank"}),(0,E.jsx)(x.Z,{disabled:""===O.mode,sx:{height:"27px",fontSize:"14px"},fullWidth:!0,label:"Bank",name:"BankName",value:O.BankName,onChange:Se,onKeyDown:function(e){if("Enter"===e.code||"NumpadEnter"===e.code)return e.preventDefault(),be(O.BankName)},id:"Bank",endAdornment:(0,E.jsx)(v.Z,{position:"end",children:(0,E.jsx)(g.Z,{disabled:""===O.mode,color:"secondary",edge:"end",onClick:function(){be(O.BankName)},children:(0,E.jsx)(y.Z,{})})})})]}),Ze?(0,E.jsx)(z.Z,{loading:Ze}):(0,E.jsxs)(m.Z,{disabled:""===O.mode,variant:"outlined",size:"small",sx:{flex:1,".MuiFormLabel-root":{fontSize:"14px",background:"white",zIndex:99,padding:"0 3px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},children:[(0,E.jsx)(h.Z,{htmlFor:"account",children:"Account"}),(0,E.jsx)(x.Z,{disabled:""===O.mode,sx:{height:"27px",fontSize:"14px"},fullWidth:!0,label:"Account",name:"Account_ID_Name",value:O.Account_ID_Name,onChange:Se,onKeyDown:function(e){if("Enter"===e.code||"NumpadEnter"===e.code)return e.preventDefault(),De(O.Account_ID_Name)},id:"account",endAdornment:(0,E.jsx)(v.Z,{position:"end",children:(0,E.jsx)(g.Z,{disabled:""===O.mode,color:"secondary",edge:"end",onClick:function(){De(O.Account_ID_Name)},children:(0,E.jsx)(N.Z,{})})})})]}),Be?(0,E.jsx)(z.Z,{loading:Be}):(0,E.jsxs)(m.Z,{disabled:""===O.mode,variant:"outlined",size:"small",sx:{flex:1,".MuiFormLabel-root":{fontSize:"14px",background:"white",zIndex:99,padding:"0 3px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},children:[(0,E.jsx)(h.Z,{htmlFor:"ID-No",children:"ID No"}),(0,E.jsx)(x.Z,{disabled:""===O.mode,sx:{height:"27px",fontSize:"14px"},fullWidth:!0,label:"ID No",name:"IDNo",value:O.IDNo,onChange:Se,onKeyDown:function(e){if("Enter"===e.code||"NumpadEnter"===e.code)return e.preventDefault(),je(O.IDNo)},id:"ID-No",endAdornment:(0,E.jsx)(v.Z,{position:"end",children:(0,E.jsx)(g.Z,{disabled:""===O.mode,"aria-label":"search-client",color:"secondary",edge:"end",onClick:function(){je(O.IDNo)},children:(0,E.jsx)(B.Z,{})})})})]}),(0,E.jsx)(d.Z,{disabled:""===O.mode,required:!0,variant:"outlined",size:"small",label:"Identity",name:"Identity",value:O.Identity,onChange:Se,InputProps:{readOnly:!0,style:{height:"27px",fontSize:"14px"}},sx:{flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}})]})]}),(0,E.jsx)("div",{ref:G,style:{marginTop:"10px",width:"100%",position:"relative",flex:1},children:(0,E.jsx)(u.Z,{style:{height:"".concat(null===(K=G.current)||void 0===K?void 0:K.getBoundingClientRect().height,"px"),width:"100%",overflowX:"scroll",position:"absolute"},children:(0,E.jsx)(F.Z,{ref:ae,isLoading:ce||se||me||ve,columns:P,rows:ne,table_id:"Auto",isSingleSelection:!0,isRowFreeze:!1,dataSelection:function(e,n,t){var o=n.filter((function(n){return n.Auto===e[0]}))[0];if(void 0===o||o.length<=0)return V(Q,T),void Se({target:{value:"",name:"mode"}});if(Se({target:{value:"edit",name:"mode"}}),"Delete"!==t&&"Backspace"!==t){var i=(0,c.Z)((0,c.Z)({},o),{},{Inactive:"NO"!==o.Inactive});console.log(i),V(Q,i)}else(0,L.s)({isUpdate:!1,cb:function(e){xe({Auto:o.Auto,userCodeConfirmation:e})}})}})})}),_e,ke,ye]})]})}function V(e,n){Object.entries(n).forEach((function(n){var t=(0,a.Z)(n,2),o=t[0],i=t[1];e({type:"UPDATE_FIELD",field:o,value:i})}))}},27247:function(e,n,t){var o=t(64836);n.Z=void 0;var i=o(t(45649)),a=t(80184),r=(0,i.default)((0,a.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");n.Z=r},91421:function(e,n,t){var o=t(64836);n.Z=void 0;var i=o(t(45649)),a=t(80184),r=(0,i.default)([(0,a.jsx)("circle",{cx:"10",cy:"8",r:"4"},"0"),(0,a.jsx)("path",{d:"M10.35 14.01C7.62 13.91 2 15.27 2 18v2h9.54c-2.47-2.76-1.23-5.89-1.19-5.99zm9.08 4.01c.36-.59.57-1.28.57-2.02 0-2.21-1.79-4-4-4s-4 1.79-4 4 1.79 4 4 4c.74 0 1.43-.22 2.02-.57L20.59 22 22 20.59l-2.57-2.57zM16 18c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"},"1")],"PersonSearch");n.Z=r},93421:function(e,n,t){var o=t(64836);n.Z=void 0;var i=o(t(45649)),a=t(80184),r=(0,i.default)((0,a.jsx)("path",{d:"M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-6 2c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm6 12H8v-1.5c0-1.99 4-3 6-3s6 1.01 6 3V16z"}),"SwitchAccount");n.Z=r},4378:function(e,n){n.Z={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162"}}}]);
//# sourceMappingURL=9372.74735ad8.chunk.js.map