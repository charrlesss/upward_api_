{"version":3,"file":"static/js/3911.ed011c0a.chunk.js","mappings":"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","sources":["feautures/LandingPage.tsx"],"sourcesContent":["import { useState, FormEvent, useContext } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { AuthContext } from \"../components/AuthContext\";\nimport { useMutation } from \"react-query\";\nimport { wait } from \"../lib/wait\";\nimport axios, { AxiosInstance } from \"axios\";\nimport Swal from \"sweetalert2\";\nimport \"../style/landingpage.css\"\nimport \"../style/laoding.css\"\n\nasync function Login(\n  myAxios: AxiosInstance,\n  username: string,\n  password: string\n) {\n  return await myAxios.post(\n    \"/login\",\n    {\n      username,\n      password,\n    },\n    { withCredentials: true }\n  );\n}\n\nexport default function LandingPage() {\n  const navigate = useNavigate();\n  const [showPassword, setShowPassword] = useState(false);\n  const [errors, setErrors] = useState({\n    username: false,\n    password: false,\n    success: false,\n    message: \"\",\n  });\n  const { setUser, myAxios } = useContext(AuthContext);\n  const { mutate, isLoading } = useMutation({\n    mutationKey: \"login\",\n    mutationFn: async (variables: { username: string; password: string }) =>\n      wait(1200).then(\n        async () => await Login(myAxios, variables.username, variables.password)\n      ),\n    onSuccess: (res) => {\n      if (res.data.username) {\n        return setErrors({\n          username: true,\n          password: false,\n          success: false,\n          message: res.data.message,\n        });\n      }\n      if (res.data.password) {\n        return setErrors({\n          username: false,\n          password: true,\n          success: false,\n          message: res.data.message,\n        });\n      }\n      setErrors({\n        username: false,\n        password: false,\n        success: true,\n        message: res.data.message,\n      });\n      Swal.fire({\n        position: \"center\",\n        icon: \"success\",\n        title: res.data.message,\n        showConfirmButton: false,\n        timer: 800,\n      }).then(() => {\n        setUser(res.data.user);\n        if (res.data.user.is_master_admin) {\n          navigate(\"/master-admin-dashboard\");\n        } else {\n          window.localStorage.setItem('__policy__', 'COM')\n          if (res.data.user.department === 'UCSMI') {\n            window.localStorage.setItem('__policy_type__', 'TEMP')\n          }\n          if (res.data.user.department === 'UMIS') {\n            window.localStorage.setItem('__policy_type__', 'REG')\n          }\n          navigate(\"/dashboard\");\n        }\n      });\n    },\n  });\n\n  async function onSubmit(e: FormEvent) {\n    e.preventDefault();\n    const formData = new FormData(e.currentTarget as HTMLFormElement);\n    mutate({\n      username: formData.get(\"username\") as string,\n      password: formData.get(\"password\") as string,\n    });\n  }\n\n\n\n  return (\n    <div className=\"main-landing-page\">\n      <form className=\"content\" onSubmit={onSubmit}>\n        <img\n          alt=\"Upward Insurance\"\n          src={process.env.REACT_APP_IMAGE_URL + \"logo.png\"}\n          style={{ width: \"120px\", height: \"auto\", background: \"white\" }}\n        />\n        <h3 style={{ fontWeight: \"400\", marginBottom: \"30px\" }}>LOGIN TO UPWARD INSURANCE</h3>\n        <div className=\"content-field\">\n          <div>\n            <label htmlFor=\"username\"> USERNAME</label>\n            <input\n              name=\"username\"\n              id=\"username\"\n              className={errors.username ? \"error\" : \"\"}\n              onFocus={() =>\n                setErrors({\n                  username: false,\n                  password: false,\n                  success: false,\n                  message: \"\",\n                })}\n            />\n            {errors.username && <p className=\"warning-text\">{errors.username && errors.message}</p>}\n          </div>\n        </div>\n        <div className=\"content-field\" style={{ marginTop: \"15px\" }}>\n          <div>\n            <label htmlFor=\"password\"> PASSWORD</label>\n            <input\n              name=\"password\"\n              id=\"password\"\n              type={showPassword ? \"text\" : \"password\"}\n              className={errors.password ? \"error\" : \"\"}\n              onFocus={() =>\n                setErrors({\n                  username: false,\n                  password: false,\n                  success: false,\n                  message: \"\",\n                })}\n            />\n            {errors.password && <p className=\"warning-text\">{errors.message}</p>}\n          </div>\n        </div>\n        <div style={{ display: \"flex\", alignItems: \"center\", columnGap: \"10px\", marginTop: \"10px\" }}>\n          <input name=\"showpass\" id=\"showpass\" type=\"checkbox\" style={{ padding: \"0\", margin: 0 }} onChange={(e) => {\n            console.log(e.currentTarget.checked)\n            setShowPassword(e.currentTarget?.checked)\n          }} />\n          <label htmlFor=\"showpass\" style={{ fontSize: \"10px\", cursor: \"pointer\", padding: \"0\", margin: 0 }}>SHOW PASSWORD</label>\n        </div>\n        <button>SUBMIT</button>\n      </form>\n      {isLoading && <div className=\"loading-component\"><div className=\"loader\"></div></div>}\n    </div>\n  )\n  \n}\n"],"names":["Login","_x","_x2","_x3","_Login","_asyncToGenerator","_regeneratorRuntime","mark","_callee","myAxios","username","password","wrap","_context","prev","next","post","withCredentials","abrupt","sent","stop","apply","arguments","LandingPage","_mutationFn","_onSubmit","navigate","useNavigate","_useState","useState","_useState2","_slicedToArray","showPassword","setShowPassword","_useState3","success","message","_useState4","errors","setErrors","_useContext","useContext","AuthContext","setUser","_useMutation","useMutation","mutationKey","mutationFn","_x4","_callee3","variables","_context3","wait","then","_callee2","_context2","onSuccess","res","data","Swal","position","icon","title","showConfirmButton","timer","user","is_master_admin","window","localStorage","setItem","department","mutate","isLoading","_jsxs","className","children","onSubmit","_x5","_callee4","e","formData","_context4","preventDefault","FormData","currentTarget","get","_jsx","alt","src","process","style","width","height","background","fontWeight","marginBottom","htmlFor","name","id","onFocus","marginTop","type","display","alignItems","columnGap","padding","margin","onChange","_e$currentTarget","console","log","checked","fontSize","cursor"],"sourceRoot":""}