"use strict";(self.webpackChunkupward=self.webpackChunkupward||[]).push([[3568],{70272:function(e,t,n){var r=n(54270),u=n(80184);t.Z=function(e){var t=e.title,n=void 0===t?"":t;return(0,u.jsxs)(r.q,{children:[(0,u.jsx)("title",{children:n}),(0,u.jsx)("link",{rel:"icon",type:"image/png",href:"".concat("/","/logo.png")})]})}},77935:function(e,t,n){n.r(t),n.d(t,{default:function(){return y}});var r=n(74165),u=n(15861),o=n(39709),i=n(72791),a=n(91933),l=n(3380),c=n(37209),s=n(11690),d=n(36151),p=n(21830),f=n.n(p),h=n(65413),v=n(70272),x=n(80184),m=[{key:"row_count",label:"#",width:30},{key:"Check_Date",label:"Date",width:80},{key:"Bank",label:"Bank",width:150},{key:"CheckNo",label:"Check No",width:150},{key:"Check_Amnt",label:"Amount",width:120,type:"number"}];function y(){var e,t,n,p,y,g=(0,i.useContext)(l.V),w=g.myAxios,k=g.user,b=(0,i.useRef)(null),C=(0,i.useRef)(null),j=(0,i.useRef)(null),N=(0,i.useRef)(null),R=(0,i.useRef)(null),S=(0,i.useRef)(null),Z=(0,i.useRef)(null),B=(0,a.useQuery)({queryKey:"load-request-number",queryFn:function(){return(e=e||(0,u.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.get("/task/accounting/pullout/approved/load-request-number",{headers:{Authorization:"Bearer ".concat(null===k||void 0===k?void 0:k.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},refetchOnWindowFocus:!1}),z=B.isLoading,A=B.data,P=B.refetch,T=(0,a.useMutation)({mutationKey:"load-details",mutationFn:function(e){return(t=t||(0,u.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.post("/task/accounting/pullout/approved/load-details",t,{headers:{Authorization:"Bearer ".concat(null===k||void 0===k?void 0:k.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t=null===e||void 0===e?void 0:e.data.details;j.current&&(j.current.value=t[0].PNNo),N.current&&(N.current.value=t[0].Name),R.current&&(R.current.value=t[0].Reason),b.current.setDataFormated(t)}}),F=T.isLoading,L=T.mutate,D=(0,a.useMutation)({mutationKey:"confirm-code",mutationFn:function(e){return(n=n||(0,u.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.post("/task/accounting/pullout/approved/confirm-code",t,{headers:{Authorization:"Bearer ".concat(null===k||void 0===k?void 0:k.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){b.current.resetTable(),C.current&&(C.current.value=""),j.current&&(j.current.value=""),N.current&&(N.current.value=""),R.current&&(R.current.value=""),S.current&&(S.current.value=""),f().fire({position:"center",icon:"warning",title:e.data.message,timer:1500}).then((function(){P()}))}}),q=D.isLoading,W=D.mutate,_=(0,a.useMutation)({mutationKey:"confirm",mutationFn:function(e){return(p=p||(0,u.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.post("/task/accounting/pullout/approved/confirm",t,{headers:{Authorization:"Bearer ".concat(null===k||void 0===k?void 0:k.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){if(e.data.success)return f().fire({title:"Are you sure?",text:e.data.message,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, confirm it!"}).then((function(e){if(e.isConfirmed){var t,n,r,u,o,i=b.current.getData().map((function(e){return{Check_Date:e[1],Bank:e[2],Check_No:e[3],Check_Amnt:e[4]}}));W({RCPNo:null===(t=C.current)||void 0===t?void 0:t.value,PNNo:null===(n=j.current)||void 0===n?void 0:n.value,reason:null===(r=R.current)||void 0===r?void 0:r.value,Name:null===(u=N.current)||void 0===u?void 0:u.value,code:null===(o=S.current)||void 0===o?void 0:o.value,selected:JSON.stringify(i)})}}));alert(e.data.message)}}),K=_.isLoading,I=_.mutate;return(0,x.jsxs)("div",{style:{flex:"1",display:"flex",justifyContent:"center",alignItems:"center",background:"#F1F1F1"},children:[(0,x.jsx)(v.Z,{title:"Pullout Approved"}),(F||K||q)&&(0,x.jsx)(h.g,{}),(0,x.jsxs)("div",{style:{padding:"10px",width:"62%",border:"1px sold black",height:"500px",boxShadow:"1px 1px 2px 2px black",display:"flex",flexDirection:"column"},children:[(0,x.jsxs)("div",{style:{height:"auto"},children:[z?(0,x.jsx)(o.Z,{loading:z}):(0,x.jsx)("div",{style:{width:"100%",marginBottom:"8px"},children:(0,x.jsx)(c.lq,{label:{title:"RCP No.  : ",style:{fontSize:"12px",fontWeight:"bold",width:"100px"}},selectRef:C,select:{style:{flex:1,height:"22px"},defaultValue:"Non-VAT",onChange:function(e){return(y=y||(0,u.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:0===t.currentTarget.selectedIndex&&(b.current.resetTable(),C.current&&(C.current.value=""),j.current&&(j.current.value=""),N.current&&(N.current.value=""),R.current&&(R.current.value=""),S.current&&(S.current.value="")),L({RCPNo:t.target.value});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},containerStyle:{width:"300px",marginBottom:"12px"},datasource:null===A||void 0===A?void 0:A.data.rcpn,values:"RCPNo",display:"RCPNo"})}),(0,x.jsx)(c.oi,{containerStyle:{width:"50%",marginBottom:"8px",marginLeft:"50px"},label:{title:"PN No. :",style:{fontSize:"12px",fontWeight:"bold",width:"100px"}},input:{disabled:!0,type:"text",style:{width:"calc(100% - 100px)"}},inputRef:j}),(0,x.jsx)(c.oi,{containerStyle:{width:"50%",marginBottom:"8px",marginLeft:"50px"},label:{title:"Client :",style:{fontSize:"12px",fontWeight:"bold",width:"100px"}},input:{disabled:!0,type:"text",style:{width:"calc(100% - 100px)"}},inputRef:N}),(0,x.jsx)(c.oi,{containerStyle:{width:"50%",marginBottom:"8px",marginLeft:"50px"},label:{title:"Reason :",style:{fontSize:"12px",fontWeight:"bold",width:"100px"}},input:{disabled:!0,type:"text",style:{width:"calc(100% - 100px)"}},inputRef:R})]}),(0,x.jsx)(s.O0,{isTableSelectable:!1,ref:b,columns:m,rows:[],containerStyle:{flex:1},getSelectedItem:function(e){}}),(0,x.jsxs)("div",{style:{height:"35px",display:"flex",justifyContent:"flex-end",alignItems:"center",columnGap:"5px"},children:[(0,x.jsx)(c.oi,{label:{title:"Authentication Code:",style:{fontSize:"12px",fontWeight:"bold",width:"140px"}},input:{type:"text",style:{width:"300px"},onKeyDown:function(e){var t;"Enter"!==e.key&&"NumEnter"!==e.key||I({RCPNo:null===(t=C.current)||void 0===t?void 0:t.value,code:e.currentTarget.value})}},inputRef:S}),(0,x.jsx)(d.Z,{ref:Z,variant:"contained",color:"info",style:{height:"25px",fontSize:"12px"},onClick:function(e){var t,n;I({RCPNo:null===(t=C.current)||void 0===t?void 0:t.value,code:null===(n=S.current)||void 0===n?void 0:n.value})},children:"Confirm"})]})]})]})}},5403:function(e,t,n){var r=n(64836);t.Z=void 0;var u=r(n(45649)),o=n(80184),i=(0,u.default)((0,o.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"Search");t.Z=i}}]);
//# sourceMappingURL=3568.97e96900.chunk.js.map