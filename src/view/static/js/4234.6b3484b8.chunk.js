"use strict";(self.webpackChunkupward=self.webpackChunkupward||[]).push([[4234,2074],{82399:function(e,t,n){n.d(t,{M:function(){return c},s:function(){return u}});var i=n(1413),r=n(45987),a=n(72791),o=n(11888),d=n(80184),s=["onChange"],l=["onChange"],u=a.forwardRef((function(e,t){var n=e.onChange,a=(0,r.Z)(e,s);return(0,d.jsx)(o.oc,(0,i.Z)((0,i.Z)({},a),{},{mask:"0000-0000",definitions:{"#":/[1-9]/},inputRef:t,onAccept:function(t){return n({target:{name:e.name,value:t}})},overwrite:!0}))})),c=a.forwardRef((function(e,t){var n=e.onChange,a=(0,r.Z)(e,l);return(0,d.jsx)(o.oc,(0,i.Z)((0,i.Z)({},a),{},{mask:"(+63) 000-000-0000",definitions:{"#":/[1-9]/},inputRef:t,onAccept:function(t){return n({target:{name:e.name,value:t}})},prefix:"+",overwrite:!0}))}))},58564:function(e,t,n){n.r(t),n.d(t,{default:function(){return q}});var i=n(4942),r=n(1413),a=n(74165),o=n(15861),d=n(29439),s=n(72791),l=n(64554),u=n(27391),c=n(36151),m=n(68096),h=n(94925),f=n(77196),p=n(63466),x=n(13400),g=n(58406),b=n(23786),y=n(3380),w=n(91933),v=n(21830),Z=n.n(v),N=n(48749),C=n(82399),S=n(39709),A=n(8185),k=n(79018),_=n(86753),j=n(42419),z=n(27247),F=n(29823),L=n(53329),D=n(4378),I=n(64230),M=n(93346),B=n(70272),T=n(80184),E={firstname:"",lastname:"",middlename:"",address:"",email:"",mobile:"",telephone:"",sub_account:"c02534ee-6d7e-40dd-a22b-bc9024fa12ca",entry_agent_id:"",search:"",mode:""};function q(){(0,s.useRef)(null);var e,t,n,v,q,P,W=(0,s.useState)([]),R=(0,d.Z)(W,2),K=R[0],U=R[1],V=(0,s.useReducer)(N.I6,E),G=(0,d.Z)(V,2),O=G[0],Q=G[1],Y=(0,s.useContext)(y.V),H=Y.myAxios,J=Y.user,X=(0,s.useRef)(null),$="entry_agent_id",ee=(0,w.useQueryClient)(),te=(0,w.useQuery)({queryKey:"sub-accounts",queryFn:function(){return(e=e||(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.get("/reference/sub-account",{headers:{Authorization:"Bearer ".concat(null===J||void 0===J?void 0:J.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t,n;Q({type:"UPDATE_FIELD",field:"sub_account",value:null===(t=e.data)||void 0===t||null===(n=t.defaultValue[0])||void 0===n?void 0:n.Sub_Acct})}}),ne=te.data,ie=te.isLoading,re=te.refetch,ae=(0,w.useQuery)({queryKey:"agent-generate-id",queryFn:function(){return(t=t||(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.post("/reference/id-entry-generate-id",{sign:"A",type:"entry agent"},{headers:{Authorization:"Bearer ".concat(null===J||void 0===J?void 0:J.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},refetchOnWindowFocus:!1,onSuccess:function(e){we({target:{value:e.data.generateID,name:"entry_agent_id"}})}}),oe=ae.isLoading,de=ae.refetch,se=(0,w.useQuery)({queryKey:$,queryFn:function(){return(n=n||(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.get("/reference/search-entry?entrySearch=".concat(O.search,"&entry=Agent"),{headers:{Authorization:"Bearer ".concat(null===J||void 0===J?void 0:J.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){U(null===e||void 0===e?void 0:e.data.entry)}}),le=se.isLoading,ue=se.refetch,ce=(0,w.useMutation)({mutationKey:$,mutationFn:function(e){return(v=v||(0,o.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.post("/reference/id-entry-agent",t,{headers:{Authorization:"Bearer ".concat(null===J||void 0===J?void 0:J.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:ve}),me=ce.mutate,he=ce.isLoading,fe=(0,w.useMutation)({mutationKey:$,mutationFn:function(e){return(q=q||(0,o.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.post("/reference/entry-update?entry=Agent",t,{headers:{Authorization:"Bearer ".concat(null===J||void 0===J?void 0:J.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:ve}),pe=fe.mutate,xe=fe.isLoading,ge=(0,w.useMutation)({mutationKey:$,mutationFn:function(e){return(P=P||(0,o.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.post("/reference/entry-delete?entry=Agent",t,{headers:{Authorization:"Bearer ".concat(null===J||void 0===J?void 0:J.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:ve}),be=ge.mutate,ye=ge.isLoading,we=function(e){var t=e.target,n=t.name,i=t.value;if(["lastname","middlename","firstname"].includes(n))return Q({type:"UPDATE_FIELD",field:n,value:i.toUpperCase()});Q({type:"UPDATE_FIELD",field:n,value:i})};function ve(e){if(e.data.success)return ee.invalidateQueries($),Ne(),Z().fire({position:"center",icon:"success",title:e.data.message,showConfirmButton:!1,timer:1500});Z().fire({position:"center",icon:"error",title:e.data.message,showConfirmButton:!1,timer:1500})}function Ze(e){return""===O.firstname?Z().fire({position:"center",icon:"error",title:"Firstname is required!",showConfirmButton:!1,timer:1500}):""===O.lastname?Z().fire({position:"center",icon:"error",title:"Lastname is required!",showConfirmButton:!1,timer:1500}):""===O.sub_account?Z().fire({position:"center",icon:"error",title:"Sub Account is required!",showConfirmButton:!1,timer:1500}):O.firstname.length>=200?Z().fire({position:"center",icon:"error",title:"Firstname is too long!",showConfirmButton:!1,timer:1500}):O.middlename.length>=200?Z().fire({position:"center",icon:"error",title:"Middlename is too long!",showConfirmButton:!1,timer:1500}):O.lastname.length>=200?Z().fire({position:"center",icon:"error",title:"Lastname is too long!",showConfirmButton:!1,timer:1500}):O.email.length>=200?Z().fire({position:"center",icon:"error",title:"Email is too long!",showConfirmButton:!1,timer:1500}):O.mobile.length>=200?Z().fire({position:"center",icon:"error",title:"Mobile is too long!",showConfirmButton:!1,timer:1500}):O.telephone.length>=200?Z().fire({position:"center",icon:"error",title:"Telephone is too long!",showConfirmButton:!1,timer:1500}):O.address.length>=200?Z().fire({position:"center",icon:"error",title:"Address is too long!",showConfirmButton:!1,timer:1500}):(e.preventDefault(),void("edit"===O.mode?(0,I.s)({isUpdate:!0,cb:function(e){pe((0,r.Z)((0,r.Z)({},O),{},{userCodeConfirmation:e}))}}):(0,I.L)({isConfirm:function(){me(O)}})))}function Ne(){var e;(0,A.setNewStateValue)(Q,E),null===(e=X.current)||void 0===e||e.resetTableSelected(),(0,k.D)(250).then((function(){ue(),de(),re()}))}var Ce=window.innerWidth-40,Se=window.innerHeight-180;return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(B.Z,{title:"ID Entry - Agent"}),(0,T.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"100%",height:"100%",flex:1},children:[(0,T.jsxs)(l.Z,{sx:function(e){return(0,i.Z)({display:"flex",alignItems:"center",columnGap:"20px"},e.breakpoints.down("sm"),{flexDirection:"column",alignItems:"flex-start",flex:1,marginBottom:"15px"})},children:[(0,T.jsx)("div",{style:{marginTop:"10px",marginBottom:"12px",width:"100%"},children:(0,T.jsx)(u.Z,{label:"Search",fullWidth:!0,size:"small",type:"text",value:O.search,name:"search",onChange:we,onKeyDown:function(e){if("Enter"===e.code||"NumpadEnter"===e.code)return e.preventDefault(),ue();"ArrowDown"===e.key&&(e.preventDefault(),document.querySelector(".grid-container").focus())},InputProps:{style:{height:"27px",fontSize:"14px"},className:"manok"},sx:{width:"500px",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}})}),(0,T.jsx)("div",{style:{display:"flex",alignItems:"center",columnGap:"20px"},children:(0,T.jsxs)("div",{style:{display:"flex",alignItems:"center",columnGap:"5px"},children:[""===O.mode&&(0,T.jsx)(c.Z,{variant:"contained",startIcon:(0,T.jsx)(j.Z,{}),id:"entry-header-save-button",sx:{height:"30px",fontSize:"11px"},onClick:function(){de(),we({target:{value:"add",name:"mode"}})},children:"New"}),(0,T.jsx)(S.Z,{id:"save-entry-header",color:"primary",variant:"contained",type:"submit",sx:{height:"30px",fontSize:"11px"},onClick:Ze,startIcon:(0,T.jsx)(L.Z,{}),disabled:""===O.mode,loading:he||xe,children:"Save"}),""!==O.mode&&(0,T.jsx)(c.Z,{sx:{height:"30px",fontSize:"11px"},variant:"contained",startIcon:(0,T.jsx)(F.Z,{}),color:"error",onClick:function(){Z().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, cancel it!"}).then((function(e){e.isConfirmed&&Ne()}))},children:"Cancel"}),(0,T.jsx)(S.Z,{id:"save-entry-header",variant:"contained",sx:{height:"30px",fontSize:"11px",backgroundColor:D.Z[500],"&:hover":{backgroundColor:D.Z[600]}},loading:ye,startIcon:(0,T.jsx)(z.Z,{}),disabled:"edit"!==O.mode,onClick:function(){(0,I.s)({isUpdate:!1,cb:function(e){be({id:O.entry_agent_id,userCodeConfirmation:e})}})},children:"Delete"})]})})]}),(0,T.jsxs)("form",{onKeyDown:function(e){"Enter"!==e.code&&"NumpadEnter"!==e.code||!["firstname","lastname","middlename","address","email","mobile","telephone","entry_agent_id"].includes(e.target.name)||(e.preventDefault(),Ze(e))},onSubmit:Ze,style:{width:"100%"},id:"Form-Agent",children:[(0,T.jsxs)(l.Z,{sx:function(e){var t;return t={display:"flex",gap:"10px",flexDirection:"column"},(0,i.Z)(t,e.breakpoints.down("md"),{flexDirection:"column",rowGap:"10px"}),(0,i.Z)(t,"marginBottom","10px"),t},children:[(0,T.jsxs)(l.Z,{sx:{display:"flex",gap:"10px"},children:[oe?(0,T.jsx)(S.Z,{loading:oe}):(0,T.jsxs)(m.Z,{fullWidth:!0,variant:"outlined",size:"small",disabled:""===O.mode,sx:{flex:1,".MuiFormLabel-root":{fontSize:"14px",background:"white",zIndex:99,padding:"0 3px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},children:[(0,T.jsx)(h.Z,{htmlFor:"agent-auto-generate-id-field",children:"Agent ID"}),(0,T.jsx)(f.Z,{sx:{height:"27px",fontSize:"14px"},disabled:""===O.mode,fullWidth:!0,label:"Agent ID",name:"entry_agent_id",value:O.entry_agent_id,onChange:we,readOnly:!0,id:"agent-auto-generate-id-field",endAdornment:(0,T.jsx)(p.Z,{position:"end",children:(0,T.jsx)(x.Z,{disabled:""===O.mode,"aria-label":"search-agent",color:"secondary",edge:"end",onClick:function(){de()},children:(0,T.jsx)(_.Z,{})})})})]}),(0,T.jsx)(u.Z,{type:"text",name:"firstname",label:"First Name",size:"small",fullWidth:!0,value:O.firstname,onChange:we,disabled:""===O.mode,InputProps:{style:{height:"27px",fontSize:"14px"}},sx:{flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}}),(0,T.jsx)(u.Z,{type:"text",name:"middlename",label:"Middle Name",size:"small",fullWidth:!0,value:O.middlename,onChange:we,disabled:""===O.mode,InputProps:{style:{height:"27px",fontSize:"14px"}},sx:{flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}}),(0,T.jsx)(u.Z,{type:"text",name:"lastname",label:"Last Name",size:"small",fullWidth:!0,required:!0,value:O.lastname,onChange:we,disabled:""===O.mode,InputProps:{style:{height:"27px",fontSize:"14px"}},sx:{flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}})]}),(0,T.jsxs)(l.Z,{sx:{display:"flex",gap:"10px"},children:[(0,T.jsx)(u.Z,{type:"email",name:"email",label:"Email",size:"small",fullWidth:!0,required:!0,value:O.email,onChange:we,disabled:""===O.mode,InputProps:{style:{height:"27px",fontSize:"14px"}},sx:{flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}}),(0,T.jsx)(u.Z,{name:"mobile",label:"Mobile Number",size:"small",fullWidth:!0,required:!0,value:O.mobile,onChange:we,disabled:""===O.mode,InputProps:{style:{height:"27px",fontSize:"14px"},inputComponent:C.M},sx:{flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},placeholder:"(+63) 000-000-0000"}),(0,T.jsx)(u.Z,{name:"telephone",label:"Telephone Number",size:"small",fullWidth:!0,required:!0,value:O.telephone,onChange:we,disabled:""===O.mode,InputProps:{style:{height:"27px",fontSize:"14px"},inputComponent:C.s},sx:{flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},placeholder:"0000-0000"}),ie?(0,T.jsx)(S.Z,{loading:ie}):(0,T.jsxs)(m.Z,{fullWidth:!0,required:!0,size:"small",sx:{flex:1,".MuiFormLabel-root":{fontSize:"14px",background:"white",zIndex:99,padding:"0 3px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},children:[(0,T.jsx)(h.Z,{id:"Sub Account",children:"Sub Account"}),(0,T.jsx)(g.Z,{sx:{height:"27px",fontSize:"14px"},disabled:""===O.mode,value:O.sub_account,onChange:function(e){Q({type:"UPDATE_FIELD",field:"sub_account",value:e.target.value})},labelId:"Sub Account",label:"Sub Account",name:"sub_account",children:null===ne||void 0===ne?void 0:ne.data.subAccount.map((function(e){return(0,T.jsx)(b.Z,{value:e.Sub_Acct,children:e.NewShortName},e.Sub_Acct)}))})]})]})]}),(0,T.jsx)(u.Z,{label:"Address",name:"address",minRows:10,fullWidth:!0,size:"small",required:!0,value:O.address,onChange:we,disabled:""===O.mode,InputProps:{style:{height:"27px",fontSize:"14px"}},sx:{flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}})]}),(0,T.jsx)("br",{}),(0,T.jsx)(M.r,{ref:X,isLoading:le||ye||xe||he,rows:K,column:N.y,width:Ce,height:Se,dataReadOnly:!0,onSelectionChange:function(e){e.length>0?(we({target:{value:"edit",name:"mode"}}),(0,A.setNewStateValue)(Q,e[0])):((0,A.setNewStateValue)(Q,E),we({target:{value:"",name:"mode"}}))},onKeyDown:function(e,t){if("Delete"!==t&&"Backspace"!==t);else{var n=e[0];(0,k.D)(100).then((function(){(0,I.s)({isUpdate:!1,cb:function(e){be({id:n.entry_agent_id,userCodeConfirmation:e})}})}))}},inputsearchselector:".manok"})]})]})}},48749:function(e,t,n){n.d(t,{GY:function(){return s},I6:function(){return u},fJ:function(){return d},kb:function(){return a},m5:function(){return l},y:function(){return o}});var i=n(4942),r=n(1413),a=[{field:"entry_employee_id",headerName:"ID",width:130},{field:"firstname",headerName:"First Name",width:200},{field:"lastname",headerName:"Last Name",width:200},{field:"middlename",headerName:"Middle Name",width:200},{field:"NewShortName",headerName:"Sub Account",width:130},{field:"createdAt",headerName:"Created At",width:130},{field:"address",headerName:"Address",width:500}],o=[{field:"entry_agent_id",headerName:"ID",width:130},{field:"firstname",headerName:"First Name",width:200},{field:"lastname",headerName:"Last Name",width:200},{field:"middlename",headerName:"Middle Name",width:200},{field:"email",headerName:"Email",width:250},{field:"mobile",headerName:"Mobile",width:130},{field:"telephone",headerName:"Telephone",width:130},{field:"createdAt",headerName:"Created At",width:130},{field:"address",headerName:"Address",width:500},{field:"sub_account",headerName:"sub_account",width:500,hide:!0}],d=[{field:"entry_fixed_assets_id",headerName:"ID",width:130},{field:"fullname",headerName:"Full Name",width:250},{field:"description",headerName:"Description",flex:1},{field:"remarks",headerName:"Remarks",flex:1},{field:"createdAt",headerName:"Created At",width:200}],s=[{field:"entry_supplier_id",headerName:"ID",width:130},{field:"company",headerName:"Company",width:200},{field:"firstname",headerName:"First Name",width:200},{field:"lastname",headerName:"Last Name",width:200},{field:"middlename",headerName:"Middle Name",width:200},{field:"email",headerName:"Email",width:200},{field:"mobile",headerName:"Mobile",width:200},{field:"telephone",headerName:"Telephone",width:200},{field:"tin_no",headerName:"TIN NO.",width:200},{field:"option",headerName:"Option",width:200},{field:"VAT_Type",headerName:"Vat Type",width:200},{field:"createdAt",headerName:"Created At",width:200},{field:"address",headerName:"Address",width:500}],l=[{field:"entry_others_id",headerName:"ID",width:130},{field:"description",headerName:"Description",flex:1},{field:"remarks",headerName:"Remarks",flex:1},{field:"createdAt",headerName:"Created At",width:200}],u=function(e,t){return"UPDATE_FIELD"===t.type?(0,r.Z)((0,r.Z)({},e),{},(0,i.Z)({},t.field,t.value)):e}}}]);
//# sourceMappingURL=4234.6b3484b8.chunk.js.map