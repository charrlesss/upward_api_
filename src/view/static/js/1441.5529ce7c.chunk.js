"use strict";(self.webpackChunkupward=self.webpackChunkupward||[]).push([[1441],{81582:function(e,t,n){n.d(t,{XT:function(){return p},ZP:function(){return f},rO:function(){return h}});n(72791);var o=n(88447),r=n(64554),i=n(20890),a=n(27391),u=n(13400),c=n(29823),l=n(89767),d=n(80184),s={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"80%",bgcolor:"background.paper",boxShadow:24,p:4,heigth:"auto"};function f(e){var t=e.height,n=e.isLoading,f=(e.queryKey,e.columns),v=e.onSelectionChange,x=(e.setRows,e.rows),y=e.id,w=e.onCloseModal,g=e.showModal,m=e.onClickCloseIcon,b=e.searchOnChange,C=e.title,S=void 0===C?"":C,k=e.searchRef,D=(e.onCellKeyDown,e.onSearchKeyEnter),Z=void 0===D?function(){}:D,N=e.isRowSelectable,j=e.getCellClassName,R=p();return(0,d.jsx)(o.Z,{open:g,onClose:w,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,d.jsxs)(r.Z,{sx:s,children:[(0,d.jsx)(i.Z,{id:"modal-modal-title",variant:"h6",component:"h2",mb:2,children:S}),(0,d.jsx)(a.Z,{size:"small",label:"Search",sx:{marginBottom:"10px"},fullWidth:!0,onChange:b,InputProps:{inputRef:k},onKeyDown:function(e){var t;"Enter"!==e.code&&"NumpadEnter"!==e.code||(e.preventDefault(),Z(null===k||void 0===k||null===(t=k.current)||void 0===t?void 0:t.value));h(e,R,null===k||void 0===k?void 0:k.current)}}),(0,d.jsx)("div",{className:"".concat(R," main-table-selection-container"),style:{position:"relative",height:"".concat(t+20,"px")},children:(0,d.jsx)(l.Z,{isSingleSelection:!0,isRowFreeze:!1,columns:f,isLoading:n,dataSelection:function(e,t,n){v(e,t)},table_id:y,rows:x,isRowSelectable:N,getCellClassName:j})}),(0,d.jsx)("div",{style:{position:"absolute",top:"10px",right:"10px"},children:(0,d.jsx)(u.Z,{"aria-label":"search-client",color:"secondary",onClick:m,children:(0,d.jsx)(c.Z,{})})})]})})}function p(){return"main-"+Math.floor(1e4*Math.random())}function h(e,t,n){var o=t;if("ArrowDown"===e.code){var r,i=document.querySelectorAll(".".concat(o," .MuiDataGrid-row"));e.preventDefault(),null===(r=i[0])||void 0===r||r.classList.add("hover-keyboard"),function(e,t){var n=document.querySelector(".".concat(e," .MuiDataGrid-row")),o=null===n||void 0===n?void 0:n.querySelector("input");null===o||void 0===o||o.focus();var r=new MouseEvent("mouseenter",{bubbles:!0,cancelable:!0,view:window});null===n||void 0===n||n.dispatchEvent(r),null===o||void 0===o||o.addEventListener("keydown",(function(e){"ArrowUp"===e.key&&(e.preventDefault(),t.focus()),"ArrowUp"===e.key&&(null===n||void 0===n||n.classList.remove("hover-keyboard"))}))}(t,n),i.forEach((function(e,t){e.addEventListener("keydown",(function(e){if("ArrowUp"===e.key){var n,o;if(t<=0)return;return e.preventDefault(),null===(n=i[t])||void 0===n||n.classList.remove("hover-keyboard"),void(null===(o=i[t-1])||void 0===o||o.classList.add("hover-keyboard"))}if("ArrowDown"===e.key){var r,a;if(e.preventDefault(),t>=i.length-1)return;null===(r=i[t])||void 0===r||r.classList.remove("hover-keyboard"),null===(a=i[t+1])||void 0===a||a.classList.add("hover-keyboard")}}))}))}}},89767:function(e,t,n){var o=n(93433),r=n(1413),i=n(29439),a=n(72791),u=n(57482),c=n(64554),l=n(70561),d=n(29961),s=n(54277),f=n(70169),p=n(5794),h=n(16088),v=n(80184),x=(0,a.createContext)({rows:[],rowSelectionModel:[],footerChildren:function(){return(0,v.jsx)("div",{})},footerPaginationPosition:"right-left",showFooterSelectedCount:!0}),y=(0,a.forwardRef)((function(e,t){var n=e.isLoading,c=e.columns,d=e.rows,s=e.table_id,f=e.isSingleSelection,p=e.isRowFreeze,h=e.dataSelection,y=e.CustomFooterComponent,w=void 0===y?m:y,g=e.isRowSelectable,b=e.getCellClassName,C=e.checkboxSelection,S=void 0===C||C,k=e.footerChildren,D=void 0===k?function(e,t){return(0,v.jsx)("div",{})}:k,Z=e.footerPaginationPosition,N=void 0===Z?"right-left":Z,j=e.showFooterSelectedCount,R=void 0===j||j,I=(0,a.useState)([]),M=(0,i.Z)(I,2),A=M[0],E=M[1];function T(e,t,n){h&&h(e,t,n)}(0,a.useImperativeHandle)(t,(function(){return{removeSelection:function(){E([])},getSelectedRows:function(){return d.filter((function(e){return null===A||void 0===A?void 0:A.includes(e[s])}))},setSelectedRows:function(e){E(e)}}}));var P=[];return(0,v.jsx)(x.Provider,{value:{showFooterSelectedCount:R,footerPaginationPosition:N,rowSelectionModel:A,rows:d,footerChildren:D},children:(0,v.jsx)(l._$,{slots:{loadingOverlay:u.Z,footer:w},initialState:{pagination:{paginationModel:{pageSize:100}}},loading:n,getRowId:function(e){return e[s]},columns:c.filter((function(e){return!e.hide})),rows:d,showCellVerticalBorder:!0,showColumnVerticalBorder:!0,checkboxSelection:S,rowSelectionModel:A,rowHeight:25,columnHeaderHeight:35,pageSizeOptions:[10,20,35,50,75,100],sx:(0,r.Z)((0,r.Z)({"& .cash":{color:"#ec4899"},"& .check":{color:"#0891b2"},"& .approved":{color:"green"},"& .pending":{color:"orange"},"& .disapproved":{color:"red"},"& .normal":{color:"red"},"& .MuiDataGrid-row.Mui-selected:hover":{color:"black","& .MuiSvgIcon-root ":{fill:"#3b82f6"}},"& .hover-keyboard":{background:"#2563eb",color:"white","& .MuiSvgIcon-root ":{fill:"white"}},"& .MuiDataGrid-row:hover":{background:"#2563eb",color:"white","& .MuiSvgIcon-root ":{fill:"white"}},"& .MuiDataGrid-row.hover":{background:"#2563eb",color:"white","& .MuiSvgIcon-root ":{fill:"white"}},"& .MuiTablePagination-root p ":{padding:"0 !important"}},{"& .MuiDataGrid-columnHeaders":{background:"#64748b",color:"white",fontSize:"14px"},"& .MuiDataGrid-columnHeaderCheckbox .MuiDataGrid-columnHeaderTitleContainer .MuiSvgIcon-root ":{display:f||p?"none":"block",fill:"white"},"& .MuiDataGrid-columnHeaderCheckbox .MuiDataGrid-columnHeaderTitleContainer input ":{display:f||p?"none":"block"}}),{fontSize:13,fontWeight:500,"& .MuiDataGrid-checkboxInput":{height:"27px",width:"27px"},"& .MuiDataGrid-checkboxInput svg":{height:"20px",width:"20px"}}),onRowSelectionModelChange:function(e){if(p){if(e.length<=0)return;if(P=e,A.includes(P[P.length-1]))return;return E(e),void T([e[e.length-1]],d,null)}if(!p&&f)if(A&&(null===A||void 0===A?void 0:A.length)>0){var t=new Set(A);E(e.filter((function(e){return!t.has(e)})))}else E(e);else E(e);T([e[e.length-1]],d,null)},onCellKeyDown:function(e,t){if(["NumpadEnter","Enter","Delete","Backspace"].includes(t.code))return t.preventDefault(),"Enter"===t.code||"NumpadEnter"===t.code?f&&!p?E((function(n){return n&&n.length>0&&n[0]===e.rowNode.id?(T([],d,t.code),[]):(T([e.rowNode.id],d,t.code),[e.rowNode.id])})):void E((function(n){return n&&!p&&n.length>0&&n.includes(e.rowNode.id)?(n=n.filter((function(t){return t!==e.rowNode.id})),T([],d,t.code),n):n&&p&&n.length>0&&n.includes(e.rowNode.id)?n:(T([e.rowNode.id],d,t.code),[].concat((0,o.Z)(n),[e.rowNode.id]))})):"Delete"===t.code||"Backspace"===t.code?(E([e.rowNode.id]),T([e.rowNode.id],d,t.code)):void 0},disableVirtualization:!0,isRowSelectable:g,getCellClassName:b})})}));function w(e){var t=e.page,n=e.onPageChange,o=e.className,r=(0,d.l)(),i=(0,s.P)(r,f.UB);return(0,v.jsx)(h.Z,{variant:"outlined",color:"primary",className:o,count:i,page:t+1,onChange:function(e,t){n(e,t-1)}})}function g(e){return(0,v.jsx)(p.x,(0,r.Z)({ActionsComponent:w},e))}function m(e){var t=(0,a.useContext)(x),n=t.rowSelectionModel,o=t.showFooterSelectedCount,i=t.footerPaginationPosition,u=t.footerChildren,l=t.rows;return(0,v.jsxs)(c.Z,{sx:{columnGap:"50px",display:"flex",width:"100%",justifyContent:"space-between",px:3,alignItems:"center",flexDirection:"right-left"===i?"row-reverse":"row"},children:[(0,v.jsx)(g,(0,r.Z)({},e)),(0,v.jsxs)(c.Z,{sx:{display:"flex",justifyContent:"right-left"===i?"flex-start":"flex-end",flex:1,alignItems:"center"},children:[o&&(0,v.jsxs)("div",{children:["Selected:",null===n||void 0===n?void 0:n.length]}),(0,v.jsx)("div",{children:u(n,l)})]})]})}t.Z=y},1441:function(e,t,n){n.r(t),n.d(t,{Autocomplete:function(){return T},chartColumn:function(){return M},default:function(){return A},reducer:function(){return R}});var o=n(93433),r=n(74165),i=n(15861),a=n(29439),u=n(4942),c=n(1413),l=n(72791),d=n(36151),s=n(39709),f=n(42419),p=n(53329),h=n(29823),v=n(21830),x=n.n(v),y=n(3380),w=n(86753),g=n(91933),m=n(93263),b=n(79018),C=n(64230),S=n(70272),k=n(37209),D=n(30948),Z=n(16386),N=n(637),j=n(80184),R=function(e,t){return"UPDATE_FIELD"===t.type?(0,c.Z)((0,c.Z)({},e),{},(0,u.Z)({},t.field,t.value)):e},I=[{key:"purpose",label:"Purpose",width:400},{key:"amount",label:"Amount",width:140},{key:"usage",label:"Usage",width:450},{key:"accountID",label:"Account ID",width:400},{key:"sub_account",label:"Sub Account",width:80},{key:"clientID",label:"ID No",width:140},{key:"clientName",label:"Name",width:350},{key:"accountCode",label:"Accoount Code",width:130},{key:"accountShort",label:"Account Short",width:300},{key:"vatType",label:"Vat Type",width:100},{key:"invoice",label:"Invoice",width:200},{key:"TempID",label:"TempId",hide:!0}],M=[{field:"Acct_Code",headerName:"Code",flex:1},{field:"Acct_Title",headerName:"Title",flex:1},{field:"Short",headerName:"Short Name",flex:1}];function A(){var e,t,n,o,u,c=(0,l.useContext)(y.V),v=c.myAxios,R=c.user,M=(0,l.useState)(""),A=(0,a.Z)(M,2),P=A[0],z=A[1],L=(0,N.Z)().executeQueryToClient,_=(0,l.useRef)(null),K=(0,l.useRef)(null),F=(0,l.useRef)(""),B=(0,l.useRef)(null),q=(0,l.useRef)(null),V=(0,l.useRef)(null),G=(0,l.useRef)(null),O=(0,l.useRef)(null),W=(0,l.useRef)(null),U=(0,l.useRef)(null),H=(0,l.useRef)(null),Q=(0,l.useRef)(null),Y=(0,l.useRef)(null),J=(0,l.useRef)(""),X=(0,l.useRef)(""),$=(0,l.useRef)(""),ee=(0,l.useRef)(""),te=""===P,ne=(0,g.useQuery)({queryKey:"petty-cash-id-generator",queryFn:function(){return(e=e||(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.get("/task/accounting/get-petty-cash-id",{headers:{Authorization:"Bearer ".concat(null===R||void 0===R?void 0:R.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},refetchOnWindowFocus:!1,onSuccess:function(e){var t=e;(0,b.D)(100).then((function(){F.current=t.data.pettyCashId[0].petty_cash_id,B.current&&(B.current.value=t.data.pettyCashId[0].petty_cash_id)}))}}),oe=ne.isLoading,re=ne.refetch,ie=(0,g.useMutation)({mutationKey:"add-update-petty-cash",mutationFn:function(e){return(t=t||(0,i.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.post("/task/accounting/add-petty-cash",t,{headers:{Authorization:"Bearer ".concat(null===R||void 0===R?void 0:R.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t=e;return t.data.success?(De(),x().fire({position:"center",icon:"success",title:t.data.message,timer:1500})):x().fire({position:"center",icon:"warning",title:t.data.message,timer:1500})}}),ae=ie.isLoading,ue=ie.mutate,ce=(0,g.useMutation)({mutationKey:"load-selected-petty-cash",mutationFn:function(e){return(n=n||(0,i.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.post("/task/accounting/load-selected-petty-cash",t,{headers:{Authorization:"Bearer ".concat(null===R||void 0===R?void 0:R.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t=e.data.loadSelectedPettyCash;F.current=t[0].PC_No,B.current&&(B.current.value=t[0].PC_No),q.current&&(q.current.value=t[0].PC_Date),V.current&&(V.current.value=t[0].Payee),G.current&&(G.current.value=t[0].Explanation),_.current.setDataFormated(t)}}),le=(ce.isLoading,ce.mutate),de=(0,g.useQuery)({queryKey:"load-transcation",queryFn:function(){return(o=o||(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.get("/task/accounting/load-transcation",{headers:{Authorization:"Bearer ".concat(null===R||void 0===R?void 0:R.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},refetchOnWindowFocus:!1}),se=de.isLoading,fe=de.data,pe=(0,m.Z)({link:{url:"/task/accounting/search-pdc-policy-id",queryUrlName:"searchPdcPolicyIds"},columns:[{field:"Type",headerName:"Type",width:130},{field:"IDNo",headerName:"ID No.",width:200},{field:"Name",headerName:"Name",flex:1},{field:"ID",headerName:"ID",flex:1,hide:!0}],queryKey:"collection-polidy-ids",uniqueId:"IDNo",responseDataKey:"clientsId",onSelected:function(e,t){ye(),(0,b.D)(100).then((function(){$.current=e[0].IDNo,ee.current=e[0].Acronym,W.current&&(W.current.value=e[0].Name)})),(0,b.D)(200).then((function(){var e;U.current&&(null===(e=U.current)||void 0===e||e.focus(),U.current.value="")}))},searchRef:Y}),he=pe.ModalComponent,ve=pe.openModal,xe=pe.isLoading,ye=pe.closeModal,we=(0,m.Z)({link:{url:"/task/accounting/search-petty-cash",queryUrlName:"searchPettyCash"},columns:[{field:"PC_Date",headerName:"Type",width:130},{field:"PC_No",headerName:"ID No.",width:200},{field:"Payee",headerName:"Name",flex:1},{field:"Explanation",headerName:"ID",flex:1},{field:"Explanation",headerName:"ID",flex:1,hide:!0}],queryKey:"petty-cash-search",uniqueId:"PC_No",responseDataKey:"searchPettyCash",onSelected:function(e){le({PC_No:e[0].PC_No}),z("edit"),Ce()},searchRef:Y}),ge=we.ModalComponent,me=we.openModal,be=we.isLoading,Ce=we.closeModal;function Se(){return(u=u||(0,i.Z)((0,r.Z)().mark((function e(){var t,n,o,i,a,u,c,l,d,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!O.current||""!==O.current.value){e.next=2;break}return e.abrupt("return",x().fire({position:"center",icon:"warning",title:"Please provide transaction",timer:1500}).then((function(){(0,b.D)(300).then((function(){var e;null===(e=O.current)||void 0===e||e.focus()}))})));case 2:if(""!==$.current){e.next=4;break}return e.abrupt("return",x().fire({position:"center",icon:"warning",title:"Please provide usage",timer:1500}).then((function(){(0,b.D)(300).then((function(){ve()}))})));case 4:if(!U.current||!(""===U.current.value||parseFloat(U.current.value.replace(/,/g,""))<1)){e.next=6;break}return e.abrupt("return",x().fire({position:"center",icon:"warning",title:"Please provide proper amount",timer:1500}).then((function(){(0,b.D)(300).then((function(){var e;null===(e=U.current)||void 0===e||e.focus()}))})));case 6:return e.next=8,L("\n         SELECT DISTINCT\n              Chart_Account.Acct_Code,\n              Chart_Account.Acct_Title,\n              Chart_Account.Short\n          FROM\n              Petty_Log\n                  LEFT JOIN\n              Chart_Account ON Petty_Log.Acct_Code = Chart_Account.Acct_Code\n          WHERE\n              Petty_Log.Acct_Code = '".concat(J.current,"'\n      "));case 8:c=e.sent,l=_.current.getData(),d=0,l.length<=0?l[0]=[]:(s=_.current.getSelectedRow())?d=s:(d=l.length,l[l.length]=[]),l[d][0]=null===(t=O.current)||void 0===t?void 0:t.value,l[d][1]=null===(n=U.current)||void 0===n?void 0:n.value,l[d][2]="".concat(null===(o=W.current)||void 0===o?void 0:o.value," > ").concat($.current," > ").concat(ee.current),l[d][3]="".concat(c.data.data[0].Short," > ").concat(c.data.data[0].Acct_Code),l[d][4]=ee.current,l[d][5]=$.current,l[d][6]=null===(i=W.current)||void 0===i?void 0:i.value,l[d][7]=c.data.data[0].Acct_Code,l[d][8]=c.data.data[0].Short,l[d][9]=null===(a=H.current)||void 0===a?void 0:a.value,l[d][10]=null===(u=Q.current)||void 0===u?void 0:u.value,_.current.setData(l),_.current.setSelectedRow(null),ke(),O.current&&O.current.focus();case 27:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ke(){setTimeout((function(){O.current&&(O.current.value=""),U.current&&(U.current.value=""),W.current&&(W.current.value=""),H.current&&(H.current.value="NON-VAT"),Q.current&&(Q.current.value=""),ee.current="",$.current="",J.current="",X.current=""}),100)}function De(){z(""),re(),setTimeout((function(){re(),q.current&&(q.current.value=(0,Z.Z)(new Date,"yyyy-MM-dd")),V.current&&(V.current.value=""),G.current&&(G.current.value="")}),100),ke(),_.current.setData([])}return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(S.Z,{title:"Petty Cash"}),(0,j.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"100%",height:"100%",flex:1,padding:"5px",background:"#F1F1F1"},children:[(0,j.jsxs)("div",{style:{display:"flex",alignItems:"center",columnGap:"5px",marginBottom:"10px"},children:[be?(0,j.jsx)(s.Z,{loading:be}):(0,j.jsx)(k.oi,{label:{title:"Search: ",style:{fontSize:"12px",fontWeight:"bold",width:"50px"}},input:{className:"search-input-up-on-key-down",type:"search",onKeyDown:function(e){("Enter"!==e.key&&"NumpadEnter"!==e.key||(e.preventDefault(),me(e.currentTarget.value)),"ArrowDown"===e.key)&&(e.preventDefault(),document.querySelector(".grid-container").focus())},style:{width:"500px"}},inputRef:K}),""===P&&(0,j.jsx)(d.Z,{sx:{height:"30px",fontSize:"11px"},variant:"contained",startIcon:(0,j.jsx)(f.Z,{sx:{width:15,height:15}}),id:"entry-header-save-button",onClick:function(){z("add")},children:"New"}),(0,j.jsx)(s.Z,{sx:{height:"30px",fontSize:"11px"},id:"save-entry-header",color:"primary",variant:"contained",type:"submit",onClick:function(){if(V.current&&""===V.current.value)return x().fire({position:"center",icon:"warning",title:"Please provide payee!",timer:1500}).then((function(e){(0,b.D)(300).then((function(){var e;null===(e=V.current)||void 0===e||e.focus()}))}));if(G.current&&""===G.current.value)return x().fire({position:"center",icon:"warning",title:"Please provide explanation!",timer:1500}).then((function(e){(0,b.D)(300).then((function(){var e;null===(e=G.current)||void 0===e||e.focus()}))}));var e=_.current.getDataFormatted();if(e.length<=0)return x().fire({position:"center",icon:"warning",title:"Please provide transaction entry!",timer:1500});"edit"===P?(0,C.s)({isUpdate:!0,cb:function(t){var n,o,r,i;ue({refNo:null===(n=B.current)||void 0===n?void 0:n.value,datePetty:null===(o=q.current)||void 0===o?void 0:o.value,payee:null===(r=V.current)||void 0===r?void 0:r.value,explanation:null===(i=G.current)||void 0===i?void 0:i.value,hasSelected:"edit"===P,pettyCash:e,userCodeConfirmation:t})}}):(0,C.L)({isConfirm:function(){var t,n,o,r;ue({refNo:null===(t=B.current)||void 0===t?void 0:t.value,datePetty:null===(n=q.current)||void 0===n?void 0:n.value,payee:null===(o=V.current)||void 0===o?void 0:o.value,explanation:null===(r=G.current)||void 0===r?void 0:r.value,hasSelected:"edit"===P,pettyCash:e})}})},disabled:""===P,startIcon:(0,j.jsx)(p.Z,{sx:{width:15,height:15}}),loading:ae,children:"edit"===P?"Update":"Save"}),""!==P&&(0,j.jsx)(d.Z,{sx:{height:"30px",fontSize:"11px"},variant:"contained",startIcon:(0,j.jsx)(h.Z,{sx:{width:15,height:15}}),color:"error",onClick:function(){x().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, cancel it!"}).then((function(e){e.isConfirmed&&De()}))},children:"Cancel"})]}),(0,j.jsxs)("div",{style:{display:"flex",flexDirection:"row",width:"100%",borderBottom:"1px dashed  #334155",paddingBottom:"20px",gap:"50px",marginTop:"5px"},children:[(0,j.jsxs)("div",{style:{display:"flex",flexDirection:"column",rowGap:"10px"},children:[oe?(0,j.jsx)(s.Z,{loading:oe}):(0,j.jsx)(k.oi,{label:{title:"Ref. No. : ",style:{fontSize:"12px",fontWeight:"bold",width:"80px"}},input:{disabled:te,type:"text",style:{width:"200px"},readOnly:!0,onKeyDown:function(e){var t;"NumpadEnter"!==e.code&&"Enter"!==e.code||(null===(t=q.current)||void 0===t||t.focus())}},icon:(0,j.jsx)(w.Z,{sx:{fontSize:"18px"}}),onIconClick:function(e){e.preventDefault(),re()},inputRef:B}),(0,j.jsx)(k.oi,{label:{title:"Deposit Date: ",style:{fontSize:"12px",fontWeight:"bold",width:"80px"}},input:{defaultValue:(0,Z.Z)(new Date,"yyyy-MM-dd"),className:"search-input-up-on-key-down",type:"date",style:{width:"200px"},disabled:te,onKeyDown:function(e){var t;"NumpadEnter"!==e.code&&"Enter"!==e.code||(null===(t=V.current)||void 0===t||t.focus())}},inputRef:q})]}),(0,j.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column",rowGap:"10px"},children:[(0,j.jsx)(k.oi,{label:{title:"Payee : ",style:{fontSize:"12px",fontWeight:"bold",width:"100px"}},input:{disabled:te,type:"text",style:{width:"400px"},onKeyDown:function(e){var t;"NumpadEnter"!==e.code&&"Enter"!==e.code||(null===(t=G.current)||void 0===t||t.focus())}},inputRef:V}),(0,j.jsx)(k.oi,{label:{title:"Explanation : ",style:{fontSize:"12px",fontWeight:"bold",width:"100px"}},input:{disabled:te,type:"text",style:{flex:1},onKeyDown:function(e){var t;"NumpadEnter"!==e.code&&"Enter"!==e.code||(null===(t=O.current)||void 0===t||t.focus())}},inputRef:G})]})]}),(0,j.jsx)("div",{style:{display:"flex",flexDirection:"row",width:"100%",paddingTop:"20px",gap:"50px",borderRadius:"3px"},children:(0,j.jsxs)("div",{style:{display:"flex",flexDirection:"column",rowGap:"10px"},children:[se?(0,j.jsx)(s.Z,{loading:se}):(0,j.jsx)(T,{DisplayMember:"Purpose",DataSource:null===fe||void 0===fe?void 0:fe.data.laodTranscation,disableInput:te,inputRef:O,onChange:function(e,t){J.current=e.Acct_Code,X.current=e.Short},onKeydown:function(e){var t;"Enter"!==e.key&&"NumpadEnter"!==e.key||(e.preventDefault(),null===(t=W.current)||void 0===t||t.focus())}}),(0,j.jsxs)("div",{style:{display:"flex",columnGap:"20px"},children:[xe?(0,j.jsx)(s.Z,{loading:xe}):(0,j.jsx)(k.oi,{label:{title:"Usage : ",style:{fontSize:"12px",fontWeight:"bold",width:"80px"}},input:{disabled:te,type:"text",style:{width:"450px"},onKeyDown:function(e){"NumpadEnter"!==e.code&&"Enter"!==e.code||ve(e.currentTarget.value)}},icon:(0,j.jsx)(w.Z,{sx:{fontSize:"18px"}}),onIconClick:function(e){e.preventDefault(),W.current&&ve(W.current.value)},inputRef:W}),(0,j.jsxs)("div",{style:{display:"flex"},children:[(0,j.jsx)("label",{style:{fontSize:"12px",fontWeight:"bold",width:"70px"},children:"Amount :"}),(0,j.jsx)(D.h3,{disabled:te,getInputRef:U,decimalScale:2,fixedDecimalScale:!0,style:{width:"200px"},onKeyDown:function(e){var t;"Enter"!==e.code&&"NumpadEnter"!==e.code||(e.currentTarget.value=function(e){if(""!==e&&null!==e){var t=parseFloat(e.replace(/,/g,""));return isNaN(t)?"0.00":e}return"0.00"}(e.currentTarget.value),null===(t=H.current)||void 0===t||t.focus())},onBlur:function(e){""===e.currentTarget.value&&(e.currentTarget.value="0.00")},allowNegative:!1,thousandSeparator:!0,valueIsNumericString:!0})]})]}),(0,j.jsxs)("div",{style:{display:"flex",columnGap:"20px"},children:[(0,j.jsx)(k.lq,{containerStyle:{fontSize:"12px",fontWeight:"bold"},label:{title:"VAT Type",style:{width:"80px"}},select:{defaultValue:"NON-VAT",disabled:te,style:{width:"100% !important",flex:1,height:"100% !important",padding:0,margin:0,cursor:"pointer"},onKeyDown:function(e){var t;"Enter"!==e.code&&"NumpadEnter"!==e.code||(null===(t=Q.current)||void 0===t||t.focus())}},datasource:[{key:"NON-VAT"},{key:"VAT"}],values:"key",display:"key",selectRef:H}),(0,j.jsx)(k.oi,{label:{title:"Invoice : ",style:{fontSize:"12px",fontWeight:"bold",width:"80px"}},input:{disabled:te,type:"text",style:{width:"270px"},onKeyDown:function(e){"NumpadEnter"!==e.code&&"Enter"!==e.code||(e.preventDefault(),Se())}},inputRef:Q}),(0,j.jsx)(d.Z,{disabled:te,color:"success",variant:"contained",style:{gridArea:"button",height:"22px",fontSize:"12px",width:"270px"},startIcon:(0,j.jsx)(f.Z,{}),onClick:function(){Se()},children:"Save Transaction"})]})]})}),(0,j.jsx)("br",{}),(0,j.jsx)(E,{ref:_,width:"100%",height:"350px",columns:I,rows:[],getSelectedItem:function(e,t,n,o){O.current&&(O.current.value=e[0]),U.current&&(U.current.value=e[1]),W.current&&(W.current.value=e[6]),H.current&&(H.current.value=e[9]),Q.current&&(Q.current.value=e[10]),ee.current=e[4],$.current=e[5],J.current=e[7],X.current=e[8]}}),he,ge]})]})}var E=(0,l.forwardRef)((function(e,t){var n=e.columns,r=e.rows,i=e.height,u=void 0===i?"400px":i,c=e.getSelectedItem,d=e.disbaleTable,s=void 0!==d&&d,f=e.isTableSelectable,p=void 0===f||f,h=(0,l.useRef)(null),v=(0,l.useState)([]),x=(0,a.Z)(v,2),y=x[0],w=x[1],g=(0,l.useState)([]),m=(0,a.Z)(g,2),b=m[0],C=m[1],S=(0,l.useState)(0),k=(0,a.Z)(S,2),D=k[0],Z=k[1],N=(0,l.useState)(null),R=(0,a.Z)(N,2),I=R[0],M=R[1],A=b.reduce((function(e,t){return e+t.width}),0);return(0,l.useEffect)((function(){n.length>0&&C(n.filter((function(e){return!e.hide})))}),[n]),(0,l.useEffect)((function(){r.length>0&&w(r.map((function(e){return n.map((function(t){return e[t.key]}))})))}),[r,n]),(0,l.useImperativeHandle)(t,(function(){return{selectedRow:function(){return D},getData:function(){return(0,o.Z)(y)},setData:function(e){w(e)},getColumns:function(){return n},resetTable:function(){w([]),Z(0)},getSelectedRow:function(){return I},setSelectedRow:function(e){return M(e)},setDataFormated:function(e){w(e.map((function(e){return n.map((function(t){return e[t.key]}))})))},getDataFormatted:function(){return(0,o.Z)(y).map((function(e){return{purpose:e[0],amount:e[1],usage:e[2],accountID:e[3],sub_account:e[4],clientID:e[5],clientName:e[6],accountCode:e[7],accountShort:e[8],vatType:e[9],invoice:e[10]}}))}}})),(0,j.jsx)("div",{ref:h,style:{width:"100%",height:u,overflow:"auto",position:"relative",pointerEvents:s?"none":"auto",border:s?"2px solid #8c8f8e":"2px solid #c0c0c0",boxShadow:"inset -2px -2px 0 #ffffff, \n                      inset 2px 2px 0 #808080"},children:(0,j.jsx)("div",{style:{position:"absolute",width:"".concat(A,"px"),height:"auto"},children:(0,j.jsxs)("table",{style:{borderCollapse:"collapse",width:"100%",position:"relative",background:"white"},children:[(0,j.jsx)("thead",{children:(0,j.jsxs)("tr",{children:[(0,j.jsx)("th",{style:{width:"30px",border:"1px solid black",position:"sticky",top:0,zIndex:1,background:"#f0f0f0"}}),b.map((function(e,t){return(0,j.jsx)("th",{style:{width:e.width,border:"1px solid black",position:"sticky",top:0,zIndex:1,background:"#f0f0f0",fontSize:"12px",textAlign:"left",padding:"0px 5px"},children:e.label},t)}))]})}),(0,j.jsx)("tbody",{children:null===y||void 0===y?void 0:y.map((function(e,t){var n=D===t&&I===t?"#dedfe0":D===t?"#b6e4fc":I===t?"#cbcfd4":"";return(0,j.jsxs)("tr",{children:[(0,j.jsx)("td",{style:{position:"relative",borderBottom:"1px solid black",borderLeft:"1px solid black",borderTop:"none",borderRight:"1px solid black",cursor:"pointer",background:n},children:(0,j.jsx)("input",{style:{cursor:"pointer",height:"10px"},readOnly:!0,checked:I===t,type:"checkbox",onClick:function(){p&&(M(t),c&&c(e,null,t,null),Z(null))}})}),b.map((function(o,r){return(0,j.jsx)("td",{className:"td row-".concat(t," col-").concat(r),tabIndex:0,onDoubleClick:function(){p&&(M(t),c&&c(e,null,t,null),Z(null))},onClick:function(){Z(t)},onMouseEnter:function(e){e.preventDefault(),Z(t)},onMouseLeave:function(e){e.preventDefault(),Z(null)},onKeyDown:function(n){if("ArrowUp"===n.key?Z((function(e){var t=Math.max(e-1,0),n=document.querySelector(".td.row-".concat(t));return n&&n.focus(),t})):"ArrowDown"===n.key&&Z((function(e){var t=Math.min(e+1,y.length-1),n=document.querySelector(".td.row-".concat(t));return n&&n.focus(),t})),"Enter"===n.code||"NumpadEnter"===n.code){if(n.preventDefault(),!p)return;M(t),c&&c(e,null,t,null),Z(null)}},style:{border:"1px solid black",background:n,fontSize:"12px",padding:"0px 5px",cursor:"pointer"},children:(0,j.jsx)("input",{readOnly:!0,value:e[r],style:{width:o.width,pointerEvents:"none",border:"none",background:"transparent",userSelect:"none"}})},r)}))]},t)}))})]})})})})),T=function(e){var t=e.DisplayMember,n=e.DataSource,o=e.inputRef,r=e.disableInput,i=void 0!==r&&r,u=e.onKeydown,d=e.onChange,s=e.label,f=void 0===s?{title:"Transaction : ",style:{fontSize:"12px",fontWeight:"bold",width:"100px"}}:s,p=e.input,h=void 0===p?{width:"740px"}:p,v=(0,l.useState)(""),x=(0,a.Z)(v,2),y=x[0],w=x[1],g=(0,l.useState)([]),m=(0,a.Z)(g,2),b=m[0],C=m[1],S=(0,l.useState)(!1),D=(0,a.Z)(S,2),Z=D[0],N=D[1],R=(0,l.useState)(0),I=(0,a.Z)(R,2),M=I[0],A=I[1],E=(0,l.useRef)(null);(0,l.useEffect)((function(){var e,t=null===(e=E.current)||void 0===e?void 0:e.children[M];t&&t.scrollIntoView({behavior:"smooth",block:"nearest"})}),[M]);return(0,j.jsxs)("div",{style:{flex:1},children:[(0,j.jsx)(k.oi,{label:f,input:(0,c.Z)((0,c.Z)({},h),{},{disabled:i,type:"text",value:y,onKeyDown:function(e){if("ArrowDown"===e.key)e.preventDefault(),A((function(e){return Math.min(e+1,b.length-1)}));else if("ArrowUp"===e.key)e.preventDefault(),A((function(e){return Math.max(e-1,0)}));else if(("Enter"===e.key||"NumpadEnter"===e.key)&&(e.preventDefault(),b.length>0)){var n=b[M];d(n,e),w(n[t]),N(!1)}setTimeout((function(){u&&u(e)}),150)},onChange:function(e){var o=e.target.value;if(w(o),o.trim()){var r=n.filter((function(e){return e[t].toLowerCase().includes(o.toLowerCase())}));C(r),N(!0)}else C([]),N(!1)}}),inputRef:o}),Z&&b.length>0&&(0,j.jsx)("ul",{className:"suggestions",ref:E,children:b.map((function(e,n){return(0,j.jsx)("li",{onClick:function(n){!function(e){w(e[t]),N(!1)}(e),d(e,n)},className:n===M?"active":"",onMouseEnter:function(e){e.preventDefault(),A(Math.min(n,b.length-1))},children:e[t]},n)}))}),(0,j.jsx)("style",{children:"\n          .suggestions {\n            margin-top: 0;\n            padding: 0;\n            list-style: none;\n            max-height: 150px;\n            overflow-y: auto;\n            position:absolute;\n            z-index:100;\n            background:white;\n            width:350px;\n            border:1px solid #e5e7eb;\n            box-shadow: 0px 23px 32px -17px rgba(0,0,0,0.75);\n          }\n          .suggestions li {\n            padding:3px 10px;\n            cursor: pointer;\n            font-size:14px;\n          }\n          .suggestions li.active {\n            background-color: #e2e8f0;\n          }\n      \n        "})]})}},93263:function(e,t,n){var o,r=n(29439),i=n(74165),a=n(15861),u=n(72791),c=n(91933),l=n(3380),d=n(81582),s=n(54164),f=n(80184);function p(e,t,n){return(o=o||(0,a.Z)((0,i.Z)().mark((function e(t,n,o){var r,a=arguments;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>3&&void 0!==a[3]?a[3]:"",e.abrupt("return",t.get("".concat(null===o||void 0===o?void 0:o.url,"?").concat(null===o||void 0===o?void 0:o.queryUrlName,"=").concat(r),{headers:{Authorization:"Bearer ".concat(null===n||void 0===n?void 0:n.accessToken)}}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t.Z=function(e){var t,n,o=e.link,h=e.uniqueId,v=e.queryKey,x=e.responseDataKey,y=e.columns,w=e.onSelected,g=void 0===w?function(){}:w,m=e.onRemoveSelected,b=void 0===m?function(){}:m,C=e.onSuccess,S=void 0===C?function(){}:C,k=e.searchRef,D=e.onCellKeyDown,Z=e.onCloseFunction,N=void 0===Z?function(){}:Z,j=e.CustomizeAxios,R=void 0===j?p:j,I=e.isRowSelectable,M=e.getCellClassName,A=(0,u.useContext)(l.V),E=A.myAxios,T=A.user,P=(0,u.useState)(!1),z=(0,r.Z)(P,2),L=z[0],_=z[1],K=(0,u.useState)([]),F=(0,r.Z)(K,2),B=F[0],q=F[1];function V(){return(t=t||(0,a.Z)((0,i.Z)().mark((function e(){var t,n=arguments;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:"",e.next=3,R(E,T,o,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var G=(0,c.useQuery)({queryKey:v,queryFn:function(){return(n=n||(0,a.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t=e;q(t.data[x]),S(t)},refetchOnWindowFocus:!1}),O=G.isLoading,W=G.refetch;return{show:L,rows:B,isLoading:O,openModal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";(0,s.flushSync)((function(){_(!0)})),null!==k&&void 0!==k&&k.current&&(k.current.value=e,V(e).then((function(e){if(null===e||void 0===e||!e.data.success)return alert("Error : ".concat(null===e||void 0===e?void 0:e.data.message));q(e.data[x]),null!==k&&void 0!==k&&k.current&&k.current.focus()})))},closeModal:function(){var e;(_(!1),N)&&N(null===k||void 0===k||null===(e=k.current)||void 0===e?void 0:e.value)},ModalComponent:(0,f.jsx)(d.ZP,{getCellClassName:M,searchRef:k,showModal:L,onCloseModal:function(){var e;(_(!1),N)&&N(null===k||void 0===k||null===(e=k.current)||void 0===e?void 0:e.value)},onClickCloseIcon:function(){var e;(_(!1),N)&&N(null===k||void 0===k||null===(e=k.current)||void 0===e?void 0:e.value)},searchOnChange:function(e){},onSearchKeyEnter:function(e){V(e).then((function(e){if(null===e||void 0===e||!e.data.success)return alert("Error : ".concat(null===e||void 0===e?void 0:e.data.message));q(e.data[x])}))},onCellKeyDown:D,height:300,isLoading:O,queryKey:v,columns:y,onSelectionChange:function(e,t){if(e.length<=0)return b(t);var n=new Set(e),o=t.filter((function(e){return n.has(e[h].toString())}));o.length<=0||g(o,t)},id:h,rows:B,setRows:q,isRowSelectable:I}),refetch:W}}},64230:function(e,t,n){n.d(t,{L:function(){return c},s:function(){return u}});var o=n(74165),r=n(15861),i=n(21830),a=n.n(i);function u(e){var t;a().fire({title:"Are you sure!",html:null!==e&&void 0!==e&&e.text?null===e||void 0===e?void 0:e.text:e.isUpdate?"Are you sure you want to make this change?":"Are you sure you want to delete this?",icon:"warning",input:"text",inputAttributes:{autocapitalize:"off"},showCancelButton:!0,confirmButtonText:"Save",confirmButtonColor:"green",showLoaderOnConfirm:!0,preConfirm:function(n){return(t=t||(0,r.Z)((0,o.Z)().mark((function t(n){return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{e.cb(n)}catch(o){a().showValidationMessage("\n            Request failed: ".concat(o,"\n          "))}case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)},allowOutsideClick:function(){return!a().isLoading()}}).then((function(t){if(t.isConfirmed&&e.isConfirm)return e.isConfirm();e.isDeclined&&e.isDeclined()}))}function c(e){a().fire({title:"Are you sure?",text:null!==e&&void 0!==e&&e.text?null===e||void 0===e?void 0:e.text:"Do you want to proceed with saving?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, save it!"}).then((function(t){if(t.isConfirmed&&e.isConfirm)return e.isConfirm();e.isDeclined&&e.isDeclined()}))}},42419:function(e,t,n){var o=n(64836);t.Z=void 0;var r=o(n(45649)),i=n(80184),a=(0,r.default)((0,i.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");t.Z=a},86753:function(e,t,n){var o=n(64836);t.Z=void 0;var r=o(n(45649)),i=n(80184),a=(0,r.default)((0,i.jsx)("path",{d:"M12 5V2L8 6l4 4V7c3.31 0 6 2.69 6 6 0 2.97-2.17 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93 0-4.42-3.58-8-8-8zm-6 8c0-1.65.67-3.15 1.76-4.24L6.34 7.34C4.9 8.79 4 10.79 4 13c0 4.08 3.05 7.44 7 7.93v-2.02c-2.83-.48-5-2.94-5-5.91z"}),"RestartAlt");t.Z=a},53329:function(e,t,n){var o=n(64836);t.Z=void 0;var r=o(n(45649)),i=n(80184),a=(0,r.default)((0,i.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"}),"Save");t.Z=a}}]);
//# sourceMappingURL=1441.5529ce7c.chunk.js.map