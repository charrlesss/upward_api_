"use strict";(self.webpackChunkupward=self.webpackChunkupward||[]).push([[8255,7899],{11690:function(e,t,n){n.d(t,{B:function(){return u}});var r=n(1413),o=n(93433),a=n(29439),c=n(72791),i=n(80184),u=(0,c.forwardRef)((function(e,t){var n=e.columns,u=e.rows,l=void 0===u?[]:u,d=e.height,s=void 0===d?"400px":d,f=e.getSelectedItem,p=e.onKeyDown,h=e.disbaleTable,x=void 0!==h&&h,v=e.isTableSelectable,m=void 0===v||v,y=e.containerStyle,k=(0,c.useRef)(null),b=(0,c.useState)([]),g=(0,a.Z)(b,2),C=g[0],w=g[1],R=(0,c.useState)([]),D=(0,a.Z)(R,2),S=D[0],N=D[1],j=(0,c.useState)(0),A=(0,a.Z)(j,2),_=A[0],T=A[1],Z=(0,c.useState)(null),B=(0,a.Z)(Z,2),E=B[0],I=B[1],F=S.reduce((function(e,t){return e+t.width}),0);return(0,c.useEffect)((function(){n.length>0&&N(n.filter((function(e){return!e.hide})))}),[n]),(0,c.useEffect)((function(){l.length>0&&w(l.map((function(e){return n.map((function(t){return e[t.key]}))})))}),[l,n]),(0,c.useImperativeHandle)(t,(function(){return{checkNoIsExist:function(e){return C.some((function(t){return t[2]===e}))},selectedRow:function(){return _},getData:function(){return(0,o.Z)(C)},setData:function(e){w(e)},getColumns:function(){return n},resetTable:function(){w([]),T(0)},getSelectedRow:function(){return E},setSelectedRow:function(e){return I(e)},_setSelectedRow:function(e){return T(e)},setDataFormated:function(e){w(e.map((function(e){return n.map((function(t){return e[t.key]}))})))},getDataFormatted:function(){return(0,o.Z)(C).map((function(e){return{Check_No:e[0],Check_Date:e[1],Check_Amnt:e[2],BankName:e[3],Branch:e[4],Check_Remarks:e[5],Deposit_Slip:e[6],DateDeposit:e[7],OR_No:e[8],BankCode:e[9]}}))}}})),(0,i.jsx)("div",{ref:k,style:(0,r.Z)((0,r.Z)({width:"100%",height:s,overflow:"auto",position:"relative",pointerEvents:x?"none":"auto",border:x?"2px solid #8c8f8e":"2px solid #c0c0c0",boxShadow:"inset -2px -2px 0 #ffffff, \n                        inset 2px 2px 0 #808080"},y),{},{background:"#dcdcdc"}),children:(0,i.jsxs)("div",{style:{position:"absolute",width:"".concat(F,"px"),height:"auto"},children:[(0,i.jsxs)("table",{id:"upward-cutom-table",style:{borderCollapse:"collapse",width:"100%",position:"relative",background:"#dcdcdc"},children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{style:{width:"30px",border:"none",position:"sticky",top:0,zIndex:1,background:"#f0f0f0"}}),S.map((function(e,t){return(0,i.jsx)("th",{style:{width:e.width,borderRight:"1px solid #e2e8f0",position:"sticky",top:0,zIndex:1,background:"#f0f0f0",fontSize:"12px",textAlign:"left",padding:"0px 5px"},children:e.label},t)}))]})}),(0,i.jsx)("tbody",{children:null===C||void 0===C?void 0:C.map((function(e,t){return(0,i.jsxs)("tr",{className:"".concat(_===t||E===t?"selected":""),children:[(0,i.jsx)("td",{style:{position:"relative",border:"none",cursor:"pointer",background:_===t?"#0076d":"",padding:0,margin:0},children:(0,i.jsx)("div",{style:{width:"18px",height:"18px",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,i.jsx)("input",{style:{cursor:"pointer",margin:"0px !important",position:"absolute"},readOnly:!0,checked:E===t,type:"checkbox",onClick:function(){m&&(I(t),f&&f(e,null,t,null),T(null))}})})}),S.map((function(n,r){return(0,i.jsx)("td",{className:"td row-".concat(t," col-").concat(r," "),tabIndex:0,onDoubleClick:function(){m&&(E===t?(I(null),f&&f(null,null,t,null)):(I(t),f&&f(e,null,t,null)),T(null))},onClick:function(){T(t)},onKeyDown:function(n){if(p&&p(e,t,n),"ArrowUp"===n.key?T((function(e){var t=Math.max(e-1,0),n=document.querySelector(".td.row-".concat(t));return n&&n.focus(),t})):"ArrowDown"===n.key&&T((function(e){var t=Math.min(e+1,C.length-1);document.querySelector(".td.row-".concat(t));return t})),"Enter"===n.code||"NumpadEnter"===n.code){if(n.preventDefault(),!m)return;I(t),f&&f(e,null,t,null),T(null)}},style:{border:"none",fontSize:"12px",padding:"0px 5px",cursor:"pointer",height:"20px",userSelect:"none"},children:(0,i.jsx)("input",{readOnly:!0,value:e[r],style:{width:n.width,pointerEvents:"none",border:"none",background:"transparent",userSelect:"none",height:"100%",textAlign:"number"===n.type?"right":"left"}})},r)}))]},t)}))})]}),(0,i.jsx)("style",{children:"\n             #upward-cutom-table tr td{\n               border-right:1px solid #f1f5f9 !important;\n             }\n          \n              #upward-cutom-table tr:nth-child(odd) td {\n                  background-color: #ffffff !important;\n              }\n              #upward-cutom-table tr:nth-child(even) td {\n                  background-color: #f5f5f5 !important;\n              }\n              #upward-cutom-table tr.selected td {\n                  background-color: #0076d7 !important;\n                  color: #ffffff !important;\n                  border-right:1px solid white !important;\n              }\n              \n               #upward-cutom-table tr.selected td input {\n                  color: #ffffff !important;\n              }\n  \n              "})]})})}))},4161:function(e,t,n){n.r(t),n.d(t,{creditColumn:function(){return z},debitColumn:function(){return F},default:function(){return M},setNewStateValue:function(){return H}});var r=n(1413),o=n(93433),a=n(74165),c=n(15861),i=n(29439),u=n(72791),l=n(13400),d=n(36151),s=n(13239),f=n(42419),p=n(91933),h=n(21830),x=n.n(h),v=n(29823),m=n(53329),y=n(3380),k=n(79018),b=n(39709),g=n(93263),C=n(54164),w=n(86753),R=n(64230),D=n(70272),S=n(37209),N=n(25294),j=n(1441),A=n(59332),_=n(16386),T=n(5403),Z=n(637),B=n(67236),E=n(11690),I=n(80184),F=[{key:"Payment",label:"Payment",flex:1,width:170},{key:"Amount",label:"Amount",flex:1,width:170,type:"number"},{key:"Check_No",label:"Check No",width:170},{key:"Check_Date",label:"Check Date",width:170},{key:"Bank_Branch",label:"Bank/Branch",width:300},{key:"Acct_Code",label:"DR Code",width:170},{key:"Acct_Title",label:"DR Title",width:300},{key:"Deposit_Slip",label:"Deposit Slip",width:170},{key:"Cntr",label:"Cntr",width:170},{key:"Remarks",label:"Remarks",width:300},{key:"TC",label:"TC",width:170},{key:"Bank",label:"Bank",hide:!0},{key:"BankName",label:"BankName",hide:!0}],z=[{key:"transaction",label:"Transaction",width:200},{key:"amount",label:"Amount",width:150,type:"number"},{key:"Name",label:"Name",width:350},{key:"Remarks",label:"Remarks",width:350},{key:"VATType",label:"VAT Type",width:150},{key:"invoiceNo",label:"Invoice No",width:250},{key:"Code",label:"Code",width:150},{key:"Title",label:"Title",width:350},{key:"TC",label:"TC",width:200},{key:"Account_No",label:"Accoount No.",width:180}],O="payment-type-code",K="new-or-number";function M(){var e,t,n,s,h,M,H,U,q=(0,u.useRef)(null),G=(0,u.useRef)(null),J=(0,u.useRef)(null),Y=(0,u.useState)("CSH"),Q=(0,i.Z)(Y,2),X=Q[0],$=Q[1],ee=(0,u.useState)(0),te=(0,i.Z)(ee,2),ne=te[0],re=te[1],oe=(0,u.useState)(0),ae=(0,i.Z)(oe,2),ce=ae[0],ie=ae[1],ue=(0,u.useState)(""),le=(0,i.Z)(ue,2),de=le[0],se=le[1],fe=(0,u.useRef)(null),pe=(0,u.useRef)(""),he=(0,u.useRef)(null),xe=(0,u.useRef)(null),ve=(0,u.useRef)(null),me=(0,u.useRef)(null),ye=(0,u.useRef)(""),ke=(0,u.useRef)(null),be=(0,u.useRef)(null),ge=(0,u.useRef)(null),Ce=(0,u.useRef)(null),we=(0,u.useRef)(null),Re=(0,u.useRef)(null),De=(0,u.useRef)(null),Se=(0,u.useRef)(null),Ne=(0,u.useRef)(null),je=(0,u.useRef)(null),Ae=(0,u.useRef)(null),_e=(0,u.useRef)(""),Te=(0,u.useRef)(""),Ze=(0,u.useRef)(""),Be=(0,u.useRef)(""),Ee=(0,u.useRef)(null),Ie=(0,u.useContext)(y.V),Fe=Ie.myAxios,ze=Ie.user,Oe=(0,Z.Z)().executeQueryToClient,Ke=""===de,Me=P({column:[{key:"Check_No",label:"Check No",width:100},{key:"Check_Date",label:"Check Date",width:100},{key:"Amount",label:"Amount",width:90,type:"number"},{key:"Bank_Branch",label:"Bank Branch",width:200},{key:"Remarks",label:"Remarks",width:200,hide:!0}],query:function(e){return ve.current?"\n            SELECT \n               Check_No AS Check_No, \n               date_FORMAT(Check_Date,'%b. %d, %Y') AS Check_Date,\n               FORMAT(Check_Amnt, 2) AS Amount, \n              CONCAT(Bank, '/', Branch) AS Bank_Branch\n            FROM PDC \n            WHERE (\n              Check_No LIKE '%".concat(e,"%' \n              OR Bank  LIKE '%").concat(e,"%' \n              OR Branch LIKE '%").concat(e,"%') \n              AND (PNo = '").concat(ve.current.value,"' ) \n              AND (ORNum IS NULL OR ORNum = '')\n            ORDER BY PDC.Check_Date\n        "):""},getSelectedItem:function(t,n,r,o){return(e=e||(0,c.Z)((0,a.Z)().mark((function e(t,n,r,o){var c,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=10;break}if(!ve.current){e.next=10;break}return e.next=4,Oe("\n            SELECT \n              Check_No, \n              Check_Date, \n              Check_Amnt, \n              PDC.Bank, \n              Bank.Bank AS BName, \n              Branch, \n              Remarks \n            FROM PDC \n            LEFT JOIN Bank ON PDC.Bank = Bank.Bank_Code\n            WHERE PNo = '".concat(ve.current.value,"' AND Check_No = '").concat(t[0],"'"));case 4:c=e.sent,i=null===c||void 0===c?void 0:c.data.data[0],(0,k.D)(100).then((function(){J.current&&(J.current.checknoRef.current&&(J.current.checknoRef.current.value=i.Check_No),J.current.bankRef.current&&(J.current.bankRef.current.value=i.Bank),J.current.branchRef.current&&(J.current.branchRef.current.value=i.Branch),J.current.remarksRef.current&&(J.current.remarksRef.current.value=i.Remarks),J.current.checkdateRef.current&&(J.current.checkdateRef.current.value=i.Check_Date),J.current.amountRef.current&&(J.current.amountRef.current.value=i.Check_Amnt),J.current.bankRefName.current&&(J.current.bankRefName.current=i.BName))})),gt({amountRef:{current:{value:i.Check_Amnt}},checknoRef:{current:{value:i.Check_No}},checkdateRef:{current:{value:i.Check_Date}},branchRef:{current:{value:i.Branch}},remarksRef:{current:{value:i.Remarks}},bankRef:{current:{value:i.Bank}},bankRefName:{current:i.BName}},!1),We(),(0,k.D)(250).then((function(){var e;null===(e=we.current)||void 0===e||e.focus()}));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}),Pe=Me.UpwardTableModalSearch,Le=Me.openModal,We=Me.closeModal,Ve=(0,p.useQuery)({queryKey:O,queryFn:function(){return(t=t||(0,c.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fe.get("/task/accounting/get-transaction-code-title",{headers:{Authorization:"Bearer ".concat(null===ze||void 0===ze?void 0:ze.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},refetchOnWindowFocus:!1}),He=Ve.isLoading,Ue=Ve.data,qe=(0,g.Z)({link:{url:"/task/accounting/search-pdc-policy-id",queryUrlName:"searchPdcPolicyIds"},columns:[{field:"Type",headerName:"Type",width:130},{field:"IDNo",headerName:"ID No.",width:200},{field:"Name",headerName:"Name",flex:1},{field:"ID",headerName:"ID",flex:1,hide:!0}],queryKey:"collection-polidy-ids",uniqueId:"IDNo",responseDataKey:"clientsId",onSelected:function(e,t){(0,k.D)(100).then((function(){var t,n;(ye.current=e[0].client_id,ve.current&&(ve.current.value=e[0].IDNo),me.current)&&(me.current.value=null!==(n=e[0].Name)&&void 0!==n?n:"");null===(t=ke.current)||void 0===t||t.focus()})),Qe()},searchRef:Ee}),Ge=qe.ModalComponent,Je=qe.openModal,Ye=qe.isLoading,Qe=qe.closeModal,Xe=(0,g.Z)({link:{url:"/task/accounting/search-pdc-policy-id",queryUrlName:"searchPdcPolicyIds"},columns:[{field:"Type",headerName:"Type",width:130},{field:"IDNo",headerName:"ID No.",width:200},{field:"Name",headerName:"Name",flex:1},{field:"ID",headerName:"ID",flex:1,hide:!0}],queryKey:"collection-polidy-ids",uniqueId:"IDNo",responseDataKey:"clientsId",onSelected:function(e,t){(0,k.D)(100).then((function(){var t,n;(_e.current=e[0].IDNo,Se.current)&&(Se.current.value=null!==(n=e[0].Name)&&void 0!==n?n:"");null===(t=Ne.current)||void 0===t||t.focus()})),nt()},searchRef:Ee}),$e=Xe.ModalComponent,et=Xe.openModal,tt=Xe.isLoading,nt=Xe.closeModal,rt=(0,p.useMutation)({mutationKey:"get-collection-data-search",mutationFn:function(e){return(n=n||(0,c.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fe.get("/task/accounting/get-collection-data-search?ORNo=".concat(t.ORNo),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(null===ze||void 0===ze?void 0:ze.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t=e.data.collection;he.current&&xe.current&&ve.current&&me.current&&(he.current.value=t[0].ORNo,xe.current.value=t[0].Date_OR,ve.current.value=t[0].ID_No,me.current.value=t[0].Short);for(var n=[],r=[],o=0;o<=t.length-1;o++)"Check"===t[o].Payment&&n.push({Payment:t[o].Payment,Amount:t[o].Debit,Check_No:t[o].Check_No,Check_Date:(0,_.Z)(new Date(t[o].Check_Date),"yyyy-MM-dd"),Bank_Branch:t[o].Bank,Acct_Code:t[o].DRCode,Acct_Title:t[o].DRTitle,Deposit_Slip:t[o].SlipCode,Cntr:"",Remarks:t[o].DRRemarks,TC:"CHK",Bank:t[o].Bank_Code,BankName:t[o].BankName}),"Cash"===t[o].Payment&&n.push({Payment:t[o].Payment,Amount:t[o].Debit,Check_No:"",Check_Date:"",Bank_Branch:"",Acct_Code:t[o].DRCode,Acct_Title:t[o].DRTitle,Deposit_Slip:t[o].SlipCode,Cntr:"",Remarks:"",TC:"CSH",Bank:"",BankName:""}),""!==t[o].Purpose&&"0"!==t[o].Credit&&""!==t[o].CRCode&&""!==t[o].CRTitle&&""!==t[o].CRLoanID&&""!==t[o].CRLoanName&&""!==t[o].CRVatType&&""!==t[o].CRInvoiceNo&&r.push({temp_id:"".concat(o),transaction:t[o].Purpose,amount:t[o].Credit,Remarks:t[o].CRRemarks,Code:t[o].CRCode,Title:t[o].CRTitle,TC:t[o].CRTitle,Account_No:t[o].CRLoanID,Name:t[o].CRLoanName,VATType:t[o].CRVATType,invoiceNo:t[o].CRInvoiceNo});q.current.setDataFormated(n),G.current.setDataFormated(r),re(n.reduce((function(e,t){return e+parseFloat(t.Amount.replace(/,/g,""))}),0)),ie(r.reduce((function(e,t){return e+parseFloat(t.amount.replace(/,/g,""))}),0)),se("update"),lt()}}),ot=rt.isLoading,at=rt.mutate,ct=(0,g.Z)({link:{url:"/task/accounting/search-collection",queryUrlName:"searchCollectionInput"},columns:[{field:"Date",headerName:"OR Date",width:170},{field:"ORNo",headerName:"OR No.",width:200},{field:"Name",headerName:"Name",flex:1}],queryKey:"collection-search",uniqueId:"ORNo",responseDataKey:"collection",onSelected:function(e,t){Rt(!1),wt(!1),at({ORNo:e[0].ORNo})},searchRef:Ee}),it=ct.ModalComponent,ut=ct.openModal,lt=ct.closeModal,dt=ct.isLoading,st=(0,p.useQuery)({queryKey:K,queryFn:function(){return(s=s||(0,c.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fe.get("/task/accounting/get-new-or-number",{headers:{Authorization:"Bearer ".concat(null===ze||void 0===ze?void 0:ze.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},refetchOnWindowFocus:!1,onSuccess:function(e){var t=e;(0,k.D)(100).then((function(){var e,n;(pe.current=null===(e=t.data)||void 0===e?void 0:e.ORNo[0].collectionID,he.current)&&(he.current.value=null===(n=t.data)||void 0===n?void 0:n.ORNo[0].collectionID)}))}}),ft=st.isLoading,pt=st.refetch,ht=(0,p.useMutation)({mutationKey:"add-update-collection",mutationFn:function(e){return(h=h||(0,c.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("update"!==de){e.next=5;break}return delete t.mode,e.next=4,Fe.post("/task/accounting/update-collection",t,{headers:{Authorization:"Bearer ".concat(null===ze||void 0===ze?void 0:ze.accessToken)}});case 4:case 8:return e.abrupt("return",e.sent);case 5:return delete t.mode,e.next=8,Fe.post("/task/accounting/add-collection",t,{headers:{Authorization:"Bearer ".concat(null===ze||void 0===ze?void 0:ze.accessToken)}});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){if(e.data.success)return bt(),x().fire({position:"center",icon:"success",title:e.data.message,showConfirmButton:!1,timer:1500});x().fire({position:"center",icon:"error",title:e.data.message,showConfirmButton:!1,timer:1500})}}),xt=ht.mutate,vt=ht.isLoading,mt=(0,p.useMutation)({mutationKey:"on-print",mutationFn:function(e){return(M=M||(0,c.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fe.post("/task/accounting/on-print",t,{headers:{Authorization:"Bearer ".concat(null===ze||void 0===ze?void 0:ze.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){e.data.success&&function(e){var t=e.data.concat(e.data1);console.log(e),(0,C.flushSync)((function(){localStorage.removeItem("printString"),localStorage.setItem("dataString",JSON.stringify(t)),localStorage.setItem("paper-width","8.5in"),localStorage.setItem("paper-height","11in"),localStorage.setItem("module","collection"),"UMIS"===(null===ze||void 0===ze?void 0:ze.department)?localStorage.setItem("title","UMIS"===(null===ze||void 0===ze?void 0:ze.department)?"UPWARD MANAGEMENT INSURANCE SERVICES":"UPWARD CONSULTANCY SERVICES AND MANAGEMENT INC."):localStorage.setItem("title","UPWARD CONSULTANCY SERVICES AND MANAGEMENT INC.")})),window.open("/dashboard/print","_blank")}(e.data)}}),yt=mt.mutate,kt=mt.isLoading;function bt(){(0,k.D)(100).then((function(){var e,t,n;pt(),(0,k.D)(100).then((function(){xe.current&&(xe.current.value=(0,_.Z)(new Date,"yyyy-MM-dd")),ve.current&&(ve.current.value=""),me.current&&(me.current.value=""),ye.current=""})),Rt(!1),wt(!1),null===(e=q.current)||void 0===e||e.setData([]),null===(t=G.current)||void 0===t||t.setData([]),null===(n=ve.current)||void 0===n||n.focus(),ie(0),re(0)}))}function gt(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];(0,k.D)(100).then((0,c.Z)((0,a.Z)().mark((function n(){var r,c,i,u,l,d,s,f,p,h,x,v,m,y,k,b,g,C,w,R,D,S;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(s=parseFloat(null===(r=e.amountRef.current)||void 0===r?void 0:r.value.replace(/,/g,"")),f=null===(c=e.checknoRef.current)||void 0===c?void 0:c.value,p=null===(i=e.checkdateRef.current)||void 0===i?void 0:i.value,h=null===(u=e.branchRef.current)||void 0===u?void 0:u.value,x=null===(l=e.remarksRef.current)||void 0===l?void 0:l.value,v=null===(d=e.bankRef.current)||void 0===d?void 0:d.value,m=e.bankRefName.current,y=q.current.getSelectedRow(),!q.current.checkNoIsExist(f)||null!==y){n.next=10;break}return n.abrupt("return",alert("check no is already exist"));case 10:if(null===y){n.next=24;break}(k=q.current.getData())[y][1]=s.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),k[y][2]=f,k[y][3]=p,k[y][4]=h,k[y][9]=x,k[y][11]=v,k[y][12]=m,q.current.setData(k),q.current.setSelectedRow(null),re(k.reduce((function(e,t){return e+parseFloat(t[1].replace(/,/g,""))}),0)),n.next=33;break;case 24:return n.next=26,Oe("select * from Transaction_Code LEFT JOIN Chart_Account ON Transaction_Code.Acct_Code = Chart_Account.Acct_Code WHERE Code = 'CHK'");case 26:C=n.sent,w={Payment:"Check",Amount:s.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),Check_No:f,Check_Date:p,Bank_Branch:h,Acct_Code:null===(b=C.data)||void 0===b?void 0:b.data[0].Acct_Code,Acct_Title:null===(g=C.data)||void 0===g?void 0:g.data[0].Acct_Title,Deposit_Slip:"",Cntr:"",Remarks:x,TC:X,Bank:v,BankName:m},R=q.current.getData(),D=R.map((function(e){return{Payment:e[0],Amount:e[1],Check_No:e[2],Check_Date:e[3],Bank_Branch:e[4],Acct_Code:e[5],Acct_Title:e[6],Deposit_Slip:e[7],Cntr:e[8],Remarks:e[9],TC:e[10],Bank:e[11],BankName:e[12]}})),S=[].concat((0,o.Z)(D),[w]),q.current.setDataFormated(S),re(S.reduce((function(e,t){return e+parseFloat(t.Amount.replace(/,/g,""))}),0));case 33:t&&J.current.closeDelay();case 34:case"end":return n.stop()}}),n)}))))}function Ct(){return(U=U||(0,c.Z)((0,a.Z)().mark((function e(){var t,n,r,c,i,u,l,d,s,f,p,h,x,v,m,y,k,b,g,C,w,R,D,S,N,j,A,_,T,Z,B,E,I,F,z,O,K,M,P,L;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(Re.current&&""===Re.current.value||Re.current&&null===Re.current.value||Re.current&&void 0===Re.current.value)){e.next=3;break}return Re.current.focus(),e.abrupt("return",alert("Please select a transaction!"));case 3:if(!Re.current){e.next=9;break}return e.next=6,Oe('SELECT * FROM transaction_code where Description = "'.concat(Re.current.value,'"'));case 6:if(n=e.sent,!((null===(t=n.data.data)||void 0===t?void 0:t.length)<=0)){e.next=9;break}return e.abrupt("return",alert("Transaction not yet defined!"));case 9:if(!De.current){e.next=13;break}if(!(isNaN(parseFloat(De.current.value.replace(/,/g,"")))||parseFloat(De.current.value.replace(/,/g,""))<=0)){e.next=13;break}return De.current.focus(),e.abrupt("return",alert("Please provide amount!"));case 13:if(!Ae.current||""!==Ae.current.value){e.next=16;break}return Ae.current.focus(),e.abrupt("return",alert("Please provide invoice!"));case 16:if(""!==_e.current){e.next=19;break}return null===(r=Se.current)||void 0===r||r.focus(),e.abrupt("return",alert("Please provide usage!"));case 19:if(null!==(c=G.current.getSelectedRow())?((p=G.current.getData())[c][0]=null===(i=Re.current)||void 0===i?void 0:i.value,p[c][1]=null===(u=De.current)||void 0===u?void 0:u.value,p[c][2]=null===(l=Se.current)||void 0===l?void 0:l.value,p[c][3]=null===(d=Ne.current)||void 0===d?void 0:d.value,p[c][4]=null===(s=je.current)||void 0===s?void 0:s.value,p[c][5]=null===(f=Ae.current)||void 0===f?void 0:f.value,p[c][6]=Te.current,p[c][7]=Ze.current,p[c][8]=Be.current,p[c][9]=_e.current,G.current.setData(p),G.current.setSelectedRow(null),ie(p.reduce((function(e,t){return e+parseFloat(t[1].replace(/,/g,""))}),0))):(b={transaction:null===(h=Re.current)||void 0===h?void 0:h.value,amount:null===(x=De.current)||void 0===x?void 0:x.value,Name:null===(v=Se.current)||void 0===v?void 0:v.value,Remarks:null===(m=Ne.current)||void 0===m?void 0:m.value,VATType:null===(y=je.current)||void 0===y?void 0:y.value,invoiceNo:null===(k=Ae.current)||void 0===k?void 0:k.value,Code:Te.current,Title:Ze.current,TC:Be.current,Account_No:_e.current},g=G.current.getData(),C=g.map((function(e){return{transaction:e[0],amount:e[1],Name:e[2],Remarks:e[3],VATType:e[4],invoiceNo:e[5],Code:e[6],Title:e[7],TC:e[8],Account_No:e[9]}})),w=[].concat((0,o.Z)(C),[b]),G.current.setDataFormated(w),ie(w.reduce((function(e,t){return e+parseFloat(t.amount.replace(/,/g,""))}),0))),!je.current||"VAT"!==je.current.value){e.next=33;break}return e.next=24,Oe("select chart_account.Acct_Code,chart_account.Acct_Title from transaction_code LEFT JOIN chart_account ON transaction_code.Acct_Code = chart_account.Acct_Code WHERE Description = 'Output Tax'");case 24:return R=e.sent,e.next=27,Oe("select Code from transaction_code WHERE Description = 'Output Tax' ");case 27:D=e.sent,S=0,N=0,De.current&&(S=parseFloat(De.current.value.replace(/,/g,""))/1.12,N=.12*S),j=G.current.getData(),null!==c?((I=[])[0]="Output Tax",I[1]=N.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),I[2]=null===(A=Se.current)||void 0===A?void 0:A.value,I[3]=null===(_=Ne.current)||void 0===_?void 0:_.value,I[4]="VAT",I[5]=null===(T=Ae.current)||void 0===T?void 0:T.value,I[6]=null===(Z=R.data)||void 0===Z?void 0:Z.data[0].Acct_Code,I[7]=null===(B=R.data)||void 0===B?void 0:B.data[0].Acct_Title,I[8]=null===(E=D.data)||void 0===E?void 0:E.data[0].Code,I[9]=_e.current,j[c][1]=S.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),j.splice(c+1,0,I),G.current.setData(j)):((L=[])[0]="Output Tax",L[1]=N.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),L[2]=null===(F=Se.current)||void 0===F?void 0:F.value,L[3]=null===(z=Ne.current)||void 0===z?void 0:z.value,L[4]="VAT",L[5]=null===(O=Ae.current)||void 0===O?void 0:O.value,L[6]=null===(K=R.data)||void 0===K?void 0:K.data[0].Acct_Code,L[7]=null===(M=R.data)||void 0===M?void 0:M.data[0].Acct_Title,L[8]=null===(P=D.data)||void 0===P?void 0:P.data[0].Code,L[9]=_e.current,j[j.length]=L,j[j.length-2][1]=S.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),G.current.setData(j));case 33:Rt();case 34:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wt(){var e,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];null===(e=J.current)||void 0===e||e.closeDelay(),$("CSH"),ke.current&&(ke.current.value="CSH"),(0,k.D)(100).then((function(){var e;be.current&&(be.current.value="",t&&(null===(e=be.current)||void 0===e||e.focus()))}))}function Rt(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];(0,k.D)(100).then((function(){var t;Re.current&&(Re.current.value=""),De.current&&(De.current.value="0.00"),Se.current&&(Se.current.value=""),Ne.current&&(Ne.current.value=""),je.current&&(je.current.value="Non-VAT"),Ae.current&&(Ae.current.value=""),Te.current="",Ze.current="",Be.current="",_e.current="",e&&(null===(t=Re.current)||void 0===t||t.focus())}))}return(0,I.jsxs)("div",{style:{height:"100%",width:"100%",background:"#F1F1F1"},children:[(0,I.jsx)(Pe,{}),(0,I.jsx)(D.Z,{title:"Collection"}),(0,I.jsxs)("div",{style:{width:"100%",height:"20%",display:"flex",flexDirection:"column",padding:"5px"},children:[(0,I.jsxs)("div",{style:{height:"30px",display:"flex",columnGap:"10px"},children:[dt?(0,I.jsx)(b.Z,{loading:dt}):(0,I.jsx)(S.oi,{containerStyle:{width:"550px"},label:{title:"Search: ",style:{fontSize:"12px",fontWeight:"bold",width:"50px"}},input:{className:"search-input-up-on-key-down",type:"search",onKeyDown:function(e){"Enter"!==e.key&&"NumpadEnter"!==e.key||(e.preventDefault(),ut(e.currentTarget.value))},style:{width:"500px",height:"22px"}},icon:(0,I.jsx)(T.Z,{sx:{fontSize:"18px"}}),onIconClick:function(e){e.preventDefault(),fe.current&&ut(fe.current.value)},inputRef:fe}),it,(0,I.jsx)(l.Z,{"aria-label":"add",size:"small",color:"info",onClick:function(){se("add"),bt()},children:(0,I.jsx)(f.Z,{})}),(0,I.jsx)(l.Z,{disabled:Ke,"aria-label":"save",size:"small",color:"success",onClick:function(){var e,t,n,o,a=q.current.getData(),c=G.current.getData();if(he.current&&""===he.current.value)return x().fire({position:"center",icon:"warning",title:"Please provide OR number",timer:1500});if(ve.current&&""===ve.current.value)return x().fire({position:"center",icon:"warning",title:"Please provide PN/Client ID",timer:1500}).then((function(){(0,k.D)(350).then((function(){Je()}))}));if(a.length<=0)return x().fire({position:"center",icon:"warning",title:"Please provide debit entry",timer:1500}).then((function(){(0,k.D)(300).then((function(){var e;null===(e=ke.current)||void 0===e||e.focus()}))}));if(c.length<=0)return x().fire({position:"center",icon:"warning",title:"Please provide credit entry",timer:1500}).then((function(){(0,k.D)(300).then((function(){var e;null===(e=Re.current)||void 0===e||e.focus()}))}));if(a.reduce((function(e,t){return e+parseFloat(t[1].toString().replace(/,/g,""))}),0)!==c.reduce((function(e,t){return e+parseFloat(t[1].toString().replace(/,/g,""))}),0))return x().fire({position:"center",icon:"warning",title:"Transaction is not balanced. Check if the amount you entered are correct!",timer:1500});var i=c.map((function(e){return{transaction:e[0],amount:e[1],Name:e[2],Remarks:e[3],VATType:e[4],invoiceNo:e[5],Code:e[6],Title:e[7],TC:e[8],Account_No:e[9]}})),u=a.map((function(e){return{Payment:e[0],Amount:e[1],Check_No:e[2],Check_Date:e[3],Bank_Branch:e[4],Acct_Code:e[5],Acct_Title:e[6],Deposit_Slip:e[7],Cntr:e[8],Remarks:e[9],TC:e[10],Bank:e[11],BankName:e[12]}})),l={ORNo:null===(e=he.current)||void 0===e?void 0:e.value,Date:null===(t=xe.current)||void 0===t?void 0:t.value,PNo:null===(n=ve.current)||void 0===n?void 0:n.value,Name:null===(o=me.current)||void 0===o?void 0:o.value,debit:JSON.stringify(u),credit:JSON.stringify(i)};"update"===de?(0,R.s)({isUpdate:!0,cb:function(e){xt((0,r.Z)((0,r.Z)({},l),{},{userCodeConfirmation:e,mode:""}))}}):(0,R.L)({isConfirm:function(){xt((0,r.Z)((0,r.Z)({},l),{},{mode:""}))}})},children:(0,I.jsx)(m.Z,{})}),(0,I.jsx)(l.Z,{disabled:"update"!==de,"aria-label":"print",size:"small",color:"secondary",onClick:function(){he.current&&yt({ORNo:he.current.value})},children:(0,I.jsx)(B.Z,{})}),(0,I.jsx)(l.Z,{disabled:Ke,"aria-label":"print",size:"small",color:"error",onClick:function(){x().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, cancel it!"}).then((function(e){e.isConfirmed&&(se(""),bt())}))},children:(0,I.jsx)(v.Z,{})})]}),(0,I.jsxs)("div",{style:{flex:1,border:"1px solid #64748b",display:"flex",alignItems:"center",columnGap:"50px",padding:"5px",width:"100%"},children:[(0,I.jsxs)("div",{style:{display:"flex",flexDirection:"column",rowGap:"5px",width:"50%"},children:[ft?(0,I.jsx)(b.Z,{loading:ft}):(0,I.jsx)(S.oi,{containerStyle:{width:"320px"},label:{title:"OR No. : ",style:{fontSize:"12px",fontWeight:"bold",width:"70px"}},input:{disabled:Ke,readOnly:!0,type:"text",style:{width:"250px"},onKeyDown:function(e){"NumpadEnter"!==e.code&&"Enter"!==e.code||pt()}},inputRef:he,icon:(0,I.jsx)(w.Z,{sx:{fontSize:"18px"}}),onIconClick:function(e){e.preventDefault(),Se.current&&pt()}}),(0,I.jsx)(S.oi,{label:{title:"Date : ",style:{fontSize:"12px",fontWeight:"bold",width:"70px"}},input:{disabled:Ke,type:"date",style:{width:"250px"},defaultValue:(0,_.Z)(new Date,"yyyy-MM-dd"),onKeyDown:function(e){var t;"NumpadEnter"!==e.code&&"Enter"!==e.code||(null===(t=ve.current)||void 0===t||t.focus())}},inputRef:xe})]}),(0,I.jsxs)("div",{style:{display:"flex",flexDirection:"column",rowGap:"5px",width:"50%"},children:[Ye?(0,I.jsx)(b.Z,{loading:Ye}):(0,I.jsx)(S.oi,{containerStyle:{width:"60%"},label:{title:"PN/Client ID : ",style:{fontSize:"12px",fontWeight:"bold",width:"100px"}},input:{disabled:Ke,type:"text",style:{flex:1},onKeyDown:function(e){"NumpadEnter"!==e.code&&"Enter"!==e.code||Je(e.currentTarget.value)}},icon:(0,I.jsx)(A.Z,{sx:{fontSize:"18px"}}),onIconClick:function(e){e.preventDefault(),Se.current&&Je(Se.current.value)},inputRef:ve}),Ge,(0,I.jsx)(S.oi,{label:{title:"Client Name : ",style:{fontSize:"12px",fontWeight:"bold",width:"100px"}},input:{disabled:Ke,type:"text",style:{width:"80%"},onKeyDown:function(e){"NumpadEnter"===e.code||e.code}},inputRef:me})]})]})]}),(0,I.jsx)("div",{style:{height:"5px"}}),(0,I.jsx)(W,{title:"Particulars (Debit)",firstContent:(0,I.jsxs)("div",{style:{display:"flex",flexDirection:"column",rowGap:"5px",width:"100%"},children:[(0,I.jsxs)("div",{style:{display:"flex",alignItems:"center",columnGap:"15px",marginTop:"5px",flex:1},children:[(0,I.jsx)(S.lq,{containerStyle:{width:"100%"},label:{title:"Payment Type : ",style:{fontSize:"12px",fontWeight:"bold",width:"100px"}},selectRef:ke,select:{disabled:Ke,style:{flex:1,height:"22px"},value:X,onKeyDown:function(e){var t;"NumpadEnter"!==e.code&&"Enter"!==e.code||(e.preventDefault(),null===(t=be.current)||void 0===t||t.focus())},onChange:function(e){"CHK"===e.target.value&&be.current&&(be.current.value="0.00",(0,k.D)(100).then((function(){var e;null===(e=Ce.current)||void 0===e||e.focus()}))),$(e.target.value)}},datasource:[{key:"Cash",value:"CSH"},{key:"Check",value:"CHK"}],values:"value",display:"key"}),(0,I.jsx)("button",{ref:Ce,disabled:"CSH"===X,className:"custom-btn ripple-button ".concat("CSH"===X?"disabled":"not-disabled"),style:{padding:"0 5px",borderRadius:"0px",color:"white",height:"22px",background:"CSH"===X?"#8fc993":"#1b5e20"},onClick:function(e){var t;null===(t=J.current)||void 0===t||t.showModal(),(0,k.D)(100).then((function(){var e,t;null===(e=J.current)||void 0===e||null===(t=e.checknoRef.current)||void 0===t||t.focus()}))},children:(0,I.jsx)(f.Z,{sx:{fontSize:"22px"}})})]}),(0,I.jsxs)("div",{style:{display:"flex",alignItems:"center",columnGap:"15px"},children:[(0,I.jsx)(S.iA,{containerStyle:{flex:1},label:{title:"Amount : ",style:{fontSize:"12px",fontWeight:"bold",width:"100px"}},input:{disabled:"CHK"===X||Ke,type:"text",style:{flex:1},onKeyDown:function(e){var t;"NumpadEnter"!==e.code&&"Enter"!==e.code||(null===(t=ge.current)||void 0===t||t.click())}},inputRef:be}),(0,I.jsx)("button",{ref:ge,disabled:"CHK"===X,className:"custom-btn ripple-button ".concat("CHK"===X?"disabled":"not-disabled"),style:{padding:"0 5px",borderRadius:"0px",color:"white",height:"22px",background:"CHK"===X?"#8fc993":"#1b5e20"},onClick:function(e){be.current&&ke.current&&function(e,t){(H=H||(0,c.Z)((0,a.Z)().mark((function e(t,n){var r,c,i,u,l,d,s,f,p,h,x;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=parseFloat(t.replace(/,/g,"")),!(isNaN(r)||r<=0)){e.next=4;break}return null===(c=be.current)||void 0===c||c.focus(),e.abrupt("return",alert("Please provide amount!"));case 4:if(i=q.current.getSelectedRow(),u=q.current.getData(),null===i){e.next=13;break}u[i][1]=r.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),q.current.setData(u),q.current.setSelectedRow(null),re(u.reduce((function(e,t){return e+parseFloat(t[1].replace(/,/g,""))}),0)),e.next=21;break;case 13:return e.next=15,Oe("select * from Transaction_Code LEFT JOIN Chart_Account ON Transaction_Code.Acct_Code = Chart_Account.Acct_Code WHERE Code = 'CSH'");case 15:s=e.sent,f={Payment:"Cash",Amount:r.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),Check_No:"",Check_Date:"",Bank_Branch:"",Acct_Code:null===(l=s.data)||void 0===l?void 0:l.data[0].Acct_Code,Acct_Title:null===(d=s.data)||void 0===d?void 0:d.data[0].Acct_Title,Deposit_Slip:"",Cntr:"",Remarks:"",TC:n,Bank:"",BankName:""},p=u.map((function(e){return{Payment:e[0],Amount:e[1],Check_No:e[2],Check_Date:e[3],Bank_Branch:e[4],Acct_Code:e[5],Acct_Title:e[6],Deposit_Slip:e[7],Cntr:e[8],Remarks:e[9],TC:e[10],Bank:e[11],BankName:e[12]}})),h=[].concat((0,o.Z)(p),[f]),q.current.setDataFormated(h),re(h.reduce((function(e,t){return e+parseFloat(t.Amount.replace(/,/g,""))}),0));case 21:be.current&&(be.current.value="",null===(x=be.current)||void 0===x||x.focus());case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(be.current.value,ke.current.value)},children:(0,I.jsx)(N.Z,{sx:{fontSize:"22px"}})})]}),(0,I.jsx)(d.Z,{ref:we,disabled:"CSH"===X,startIcon:(0,I.jsx)(f.Z,{}),sx:{height:"30px",fontSize:"11px",marginTop:"20px"},color:"success",variant:"contained",onClick:Le,children:"Add Check from PDC Entry"})]}),secondContent:(0,I.jsxs)("div",{style:{position:"relative",height:"100%",width:"100%",flex:1,display:"flex",flexDirection:"column"},children:[(0,I.jsx)(E.B,{ref:q,columns:F,rows:[],containerStyle:{height:"auto",flex:1},getSelectedItem:function(e){if(e)if("Cash"===e[0])(0,k.D)(100).then((function(){be.current&&(be.current.value=e[1])}));else{var t,n,r;if(e[7]&&""!==e[7])return q.current.setSelectedRow(null),null===(n=Ce.current)||void 0===n||n.focus(),alert(" Unable to edit. Check No [".concat(e[2],"] already deposited!"));if(e[8]&&""!==e[8])return q.current.setSelectedRow(null),null===(r=Ce.current)||void 0===r||r.focus(),alert(" Unable to edit. Check No [".concat(e[2],"] is a PDC reference!"));var o=e[4].split("/"),a=Oe("select * from bank where Bank_Code = '".concat(o[0],"'"));null===(t=J.current)||void 0===t||t.showModal(),(0,k.D)(100).then((function(){J.current&&(J.current.checknoRef.current&&(J.current.checknoRef.current.value=e[2]),J.current.bankRef.current&&(J.current.bankRef.current.value=o[0]),J.current.branchRef.current&&(J.current.branchRef.current.value=e[4]),J.current.remarksRef.current&&(J.current.remarksRef.current.value=e[9]),J.current.checkdateRef.current&&(J.current.checkdateRef.current.value=e[3]),J.current.amountRef.current&&(J.current.amountRef.current.value=e[1]),J.current.bankRefName.current&&(J.current.bankRefName.current=a))}))}else(0,k.D)(100).then((function(){be.current&&(be.current.value="0.00")}))},onKeyDown:function(e,t,n){if(("Delete"===n.code||"Backspace"===n.code)&&window.confirm("Are you sure you want to delete?")){var r=q.current.getData();return r.splice(t,1),q.current.setData(r),void re(r.reduce((function(e,t){return e+parseFloat(t[1].replace(/,/g,""))}),0))}}}),(0,I.jsx)("div",{style:{fontSize:"13px",textAlign:"right",border:"1px solid #d1cdcd",background:"#dcdcdc",fontWeight:"bold"},children:ne.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})})]}),contentStyle:"\n          .custom-btn.not-disabled:hover{\n            background:#154f19 !important;\n          }\n          "}),(0,I.jsx)("div",{style:{height:"5px"}}),(0,I.jsx)(W,{title:"Particulars Breakdown (Credit)",firstContent:(0,I.jsxs)("div",{style:{display:"flex",rowGap:"5px",flexDirection:"column"},children:[(0,I.jsx)("label",{htmlFor:"auto-solo-collection",style:{fontSize:"12px",fontWeight:"bold",marginTop:"5px"},children:"Transaction :"}),(0,I.jsxs)("div",{style:{display:"flex",alignItems:"center",columnGap:"15px",flex:1},children:[He?(0,I.jsx)(b.Z,{loading:He}):(0,I.jsx)("div",{style:{flex:1},children:(0,I.jsx)(j.Autocomplete,{label:{title:" ",style:{width:"0px",display:"none"}},input:{id:"auto-solo-collection",style:{width:"100%",flex:1}},width:"100%",DisplayMember:"label",DataSource:null===Ue||void 0===Ue?void 0:Ue.data.transactionDesc,disableInput:Ke,inputRef:Re,onChange:function(e,t){Te.current=e.Acct_Code,Ze.current=e.Acct_Title,Be.current=e.Code},onKeydown:function(e){var t;"Enter"!==e.key&&"NumpadEnter"!==e.key||(e.preventDefault(),null===(t=De.current)||void 0===t||t.focus())}})}),(0,I.jsx)("button",{className:"custom-btn ripple-button",style:{background:"#1b5e20",padding:"0 5px",borderRadius:"0px",color:"white",height:"22px"},onClick:function(){(0,k.D)(100).then((function(){var e;Re.current&&(Re.current.value=""),De.current&&(De.current.value="0.00"),Se.current&&(Se.current.value=""),Ne.current&&(Ne.current.value=""),je.current&&(je.current.value="Non-VAT"),Ae.current&&(Ae.current.value=""),Te.current="",Ze.current="",Be.current="",_e.current="",null===(e=Re.current)||void 0===e||e.focus(),G.current.setSelectedRow(null)}))},children:(0,I.jsx)(f.Z,{sx:{fontSize:"22px"}})})]}),(0,I.jsxs)("div",{style:{display:"flex",alignItems:"center",columnGap:"15px",width:"100%",flex:1},children:[(0,I.jsx)(S.iA,{containerStyle:{flex:1},label:{title:"Amount : ",style:{fontSize:"12px",fontWeight:"bold",width:"70px"}},input:{disabled:Ke,type:"text",style:{flex:1,width:"100%"},onKeyDown:function(e){var t;"NumpadEnter"!==e.code&&"Enter"!==e.code||(null===(t=Se.current)||void 0===t||t.focus())}},inputRef:De}),(0,I.jsx)("button",{className:"custom-btn ripple-button",style:{background:"#1b5e20",padding:"0 5px",borderRadius:"0px",color:"white",height:"22px"},onClick:function(){Ct()},children:(0,I.jsx)(N.Z,{sx:{fontSize:"22px"}})})]}),tt?(0,I.jsx)(b.Z,{loading:tt}):(0,I.jsx)(S.oi,{containerStyle:{width:"100%"},label:{title:"Usage : ",style:{fontSize:"12px",fontWeight:"bold",width:"70px"}},input:{disabled:Ke,type:"text",style:{flex:1},onKeyDown:function(e){"NumpadEnter"!==e.code&&"Enter"!==e.code||et(e.currentTarget.value)}},icon:(0,I.jsx)(A.Z,{sx:{fontSize:"18px"}}),onIconClick:function(e){e.preventDefault(),Se.current&&et(Se.current.value)},inputRef:Se}),$e,(0,I.jsx)(S.Fz,{label:{title:"Remarks : ",style:{fontSize:"12px",fontWeight:"bold",width:"70px"}},textarea:{disabled:Ke,rows:3,style:{flex:1},onKeyDown:function(e){var t;(e.stopPropagation(),"NumpadEnter"===e.code&&!e.shiftKey||"Enter"===e.code&&!e.shiftKey)&&(null===(t=je.current)||void 0===t||t.focus())}},_inputRef:Ne}),(0,I.jsx)(S.lq,{label:{title:"Vat Type : ",style:{fontSize:"12px",fontWeight:"bold",width:"70px"}},selectRef:je,select:{disabled:Ke,style:{flex:1,height:"22px"},defaultValue:"Non-VAT",onKeyDown:function(e){var t;"NumpadEnter"!==e.code&&"Enter"!==e.code||(e.preventDefault(),null===(t=Ae.current)||void 0===t||t.focus())}},datasource:[{key:"VAT",value:"VAT"},{key:"Non-VAT",value:"Non-VAT"}],values:"value",display:"key"}),(0,I.jsx)(S.oi,{label:{title:"Invoice : ",style:{fontSize:"12px",fontWeight:"bold",width:"70px"}},input:{disabled:Ke,type:"text",style:{flex:1},onKeyDown:function(e){"NumpadEnter"!==e.code&&"Enter"!==e.code||Ct()}},inputRef:Ae})]}),secondContent:(0,I.jsxs)("div",{style:{position:"relative",height:"100%",width:"100%",flex:1,display:"flex",flexDirection:"column"},children:[(0,I.jsx)(E.B,{ref:G,columns:z,rows:[],containerStyle:{height:"auto",flex:1},getSelectedItem:function(e){e?(0,k.D)(100).then((function(){Re.current&&(Re.current.value=e[0]),De.current&&(De.current.value=e[1]),Se.current&&(Se.current.value=e[2]),Ne.current&&(Ne.current.value=e[3]),je.current&&(je.current.value=e[4]),Ae.current&&(Ae.current.value=e[5]),Te.current=e[6],Ze.current=e[7],Be.current=e[8],_e.current=e[9]})):(0,k.D)(100).then((function(){Re.current&&(Re.current.value=""),De.current&&(De.current.value="0.00"),Se.current&&(Se.current.value=""),Ne.current&&(Ne.current.value=""),je.current&&(je.current.value="Non-VAT"),Ae.current&&(Ae.current.value=""),Te.current="",Ze.current="",Be.current="",_e.current=""}))},onKeyDown:function(e,t,n){if(("Delete"===n.code||"Backspace"===n.code)&&window.confirm("Are you sure you want to delete?")){var r=G.current.getData();return r.splice(t,1),G.current.setData(r),void ie(r.reduce((function(e,t){return e+parseFloat(t[1].replace(/,/g,""))}),0))}}}),(0,I.jsx)("div",{style:{fontSize:"13px",textAlign:"right",border:"1px solid #d1cdcd",background:"#dcdcdc",fontWeight:"bold"},children:ce.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})})]}),contentStyle:"\n          .custom-btn.not-disabled:hover{\n            background:#154f19 !important;\n          }\n            .custom-btn:focus{\n              outline:3px solid #2563eb;\n            }\n        "}),(0,I.jsx)(V,{ref:J,handleOnSave:function(){gt(J.current.getRefs())},handleOnClose:function(){var e;q.current.setSelectedRow(null),null===(e=Ce.current)||void 0===e||e.focus()}}),(vt||kt||ot)&&(0,I.jsx)(L,{})]})}var P=function(e){var t=e.column,n=e.query,r=e.getSelectedItem,o=e.onKeyDown,l=(0,u.useState)(!1),d=(0,i.Z)(l,2),s=d[0],f=d[1],p=(0,u.useRef)(null);function h(){f(!1)}return{UpwardTableModalSearch:function(){var e,i,l=(0,Z.Z)().executeQueryToClient,d=(0,u.useRef)(null);return s?(0,I.jsxs)("div",{style:{background:"#F1F1F1",width:"450px",height:"500px",position:"absolute",zIndex:111111,top:"50%",left:"50%",transform:"translate(-50%,-50%)",boxShadow:"3px 6px 32px -7px rgba(0,0,0,0.75)",boxSizing:"border-box",display:"flex",flexDirection:"column"},children:[(0,I.jsxs)("div",{style:{height:"22px",background:"white",display:"flex",justifyContent:"space-between",padding:"5px",position:"relative",alignItems:"center"},children:[(0,I.jsx)("span",{style:{fontSize:"13px",fontWeight:"bold"},children:"Search"}),(0,I.jsx)("button",{className:"btn-check-exit-modal",style:{padding:"0 5px",borderRadius:"0px",background:"white",color:"black",height:"22px",position:"absolute",top:0,right:0},onClick:function(){h()},children:(0,I.jsx)(v.Z,{sx:{fontSize:"22px"}})})]}),(0,I.jsx)("div",{style:{padding:"5px"},children:(0,I.jsx)(S.oi,{containerStyle:{width:"100%"},label:{title:"Search : ",style:{fontSize:"12px",fontWeight:"bold",width:"70px",display:"none"}},input:{type:"text",style:{width:"100%"},onKeyDown:function(t){return(e=e||(0,c.Z)((0,a.Z)().mark((function e(t){var r,o,c,i,u,s,f,p;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("NumpadEnter"!==t.code&&"Enter"!==t.code){e.next=6;break}return o=n(t.currentTarget.value),e.next=4,l(o);case 4:c=e.sent,null===(r=d.current)||void 0===r||r.setDataFormated(c.data.data);case 6:"ArrowDown"===t.code&&(s=null===(i=d.current)||void 0===i?void 0:i.selectedRow(),f=Math.max(s-1,0),(p=document.querySelector(".td.row-".concat(f)))&&p.focus(),null===(u=d.current)||void 0===u||u._setSelectedRow(f));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},inputRef:p,icon:(0,I.jsx)(T.Z,{sx:{fontSize:"18px"}}),onIconClick:function(e){return(i=i||(0,c.Z)((0,a.Z)().mark((function e(t){var r,o,c,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),c=n(null===(r=p.current)||void 0===r?void 0:r.value),e.next=4,l(c);case 4:i=e.sent,null===(o=d.current)||void 0===o||o.setDataFormated(i.data.data);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}})}),(0,I.jsx)("div",{style:{flex:1},children:(0,I.jsx)(E.B,{columns:t,height:"100%",ref:d,getSelectedItem:r,onKeyDown:o})}),(0,I.jsx)("style",{children:"\n          .btn-check-exit-modal:hover{\n            background:red !important;\n            color:white !important;\n          }\n        "})]}):(0,I.jsx)(I.Fragment,{})},openModal:function(){f(!0),setTimeout((function(){if(p.current){var e=new KeyboardEvent("keydown",{code:"Enter",bubbles:!0});p.current.focus(),p.current.dispatchEvent(e)}}),100)},closeModal:h}},L=function(){return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)("div",{style:{position:"fixed",top:0,bottom:0,left:0,right:0,background:"red",zIndex:"88",backgroundColor:"rgba(0, 0, 0, 0.4)"}}),(0,I.jsxs)("div",{style:{position:"absolute",zIndex:"1",background:"white",width:"auto",height:"auto",top:"50%",left:"50%",transform:"translate(-50%,-50%)",boxShadow:"3px 6px 32px -7px rgba(0,0,0,0.75)",display:"flex",columnGap:"20px",alignItems:"center",justifyContent:"center",padding:"10px 15px"},children:[(0,I.jsx)(s.Z,{color:"primary"}),(0,I.jsx)("span",{children:"Loading..."})]})]})},W=function(e){var t=e.firstContent,n=e.secondContent,r=e.title,o=e.contentStyle;return(0,I.jsxs)("div",{style:{width:"100%",height:"38%",display:"flex",padding:"5px"},children:[(0,I.jsx)("style",{children:o}),(0,I.jsxs)("div",{style:{flex:1,display:"flex",width:"100%",border:"1px solid #64748b",position:"relative"},children:[(0,I.jsx)("span",{style:{position:"absolute",top:"-15px",left:"20px",background:"#F1F1F1",padding:"0 5px",fontSize:"14px",fontWeight:"bold"},children:r}),(0,I.jsx)("div",{style:{width:"30%",height:"100%",padding:"10px 5px",boxSizing:"border-box"},children:t}),(0,I.jsx)("div",{style:{width:"70%",height:"100%",padding:"10px 5px",boxSizing:"border-box"},children:n})]})]})},V=(0,u.forwardRef)((function(e,t){var n=e.handleOnSave,r=e.handleOnClose,o=(0,u.useState)(!1),a=(0,i.Z)(o,2),c=a[0],l=a[1],s=(0,u.useState)(!1),f=(0,i.Z)(s,2),p=f[0],h=f[1],x=(0,u.useState)(!1),m=(0,i.Z)(x,2),y=m[0],C=m[1],w=(0,u.useRef)(null),R=(0,u.useRef)(null),D=(0,u.useRef)(null),N=(0,u.useRef)(null),j=(0,u.useRef)(null),T=(0,u.useRef)(null),Z=(0,u.useRef)(""),B=(0,u.useRef)(null),E=function(){h(!0),setTimeout((function(){l(!1),h(!1),r()}),100)},F=(0,u.useRef)(E);(0,u.useImperativeHandle)(t,(function(){return{showModal:function(){l(!0)},clsoeModal:function(){l(!1)},getRefs:function(){return{checknoRef:w,bankRef:R,branchRef:D,remarksRef:N,checkdateRef:j,amountRef:T,bankRefName:Z}},checknoRef:w,bankRef:R,branchRef:D,remarksRef:N,checkdateRef:j,amountRef:T,bankRefName:Z,searchModalInputRef:B,closeDelay:E}}));var z=(0,g.Z)({link:{url:"/task/accounting/search-pdc-banks",queryUrlName:"searchPdcBanks"},columns:[{field:"Bank_Code",headerName:"Code",width:130},{field:"Bank",headerName:"Bank Name",flex:1}],queryKey:"collection-banks",uniqueId:"Bank_Code",responseDataKey:"pdcBanks",onSelected:function(e,t){(0,k.D)(100).then((function(){var t;Z.current=e[0].Bank_Code,R.current&&(R.current.value=e[0].Bank),null===(t=D.current)||void 0===t||t.focus()})),M()},searchRef:B}),O=z.ModalComponent,K=z.openModal,M=z.closeModal,P=z.isLoading;return(0,u.useEffect)((function(){window.addEventListener("keydown",(function(e){"Escape"===e.key&&F.current()}))}),[]),c?(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)("div",{style:{position:"fixed",top:0,bottom:0,left:0,right:0,background:"transparent",zIndex:"88"},onClick:function(){C(!0),setTimeout((function(){C(!1)}),250)}}),(0,I.jsxs)("div",{style:{height:y?"202px":"200px",width:y?"60.3%":"60%",border:"1px solid #64748b",position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -75%)",display:"flex",flexDirection:"column",zIndex:p?-100:100,opacity:p?0:1,transition:"all 150ms",boxShadow:"3px 6px 32px -7px rgba(0,0,0,0.75)"},children:[(0,I.jsxs)("div",{style:{height:"22px",background:"white",display:"flex",justifyContent:"space-between",padding:"5px",position:"relative",alignItems:"center"},children:[(0,I.jsx)("span",{style:{fontSize:"13px",fontWeight:"bold"},children:"Check Details"}),(0,I.jsx)("button",{className:"btn-check-exit-modal",style:{padding:"0 5px",borderRadius:"0px",background:"white",color:"black",height:"22px",position:"absolute",top:0,right:0},onClick:function(){E()},children:(0,I.jsx)(v.Z,{sx:{fontSize:"22px"}})})]}),(0,I.jsxs)("div",{style:{flex:1,background:"#F1F1F1",padding:"5px",display:"flex"},children:[(0,I.jsxs)("div",{style:{width:"55%",display:"flex",flexDirection:"column",rowGap:"5px",padding:"10px"},children:[(0,I.jsx)(S.oi,{label:{title:"Check No. : ",style:{fontSize:"12px",fontWeight:"bold",width:"70px"}},input:{type:"text",style:{width:"160px"},onKeyDown:function(e){var t;"NumpadEnter"!==e.code&&"Enter"!==e.code||(null===(t=R.current)||void 0===t||t.focus())}},inputRef:w}),P?(0,I.jsx)(b.Z,{loading:P}):(0,I.jsx)(S.oi,{containerStyle:{width:"370px"},label:{title:"Bank : ",style:{fontSize:"12px",fontWeight:"bold",width:"70px"}},input:{disabled:!1,type:"text",style:{width:"300px"},onKeyDown:function(e){"NumpadEnter"!==e.code&&"Enter"!==e.code||K(e.currentTarget.value)}},icon:(0,I.jsx)(A.Z,{sx:{fontSize:"18px"}}),onIconClick:function(e){e.preventDefault(),R.current&&K(R.current.value)},inputRef:R}),(0,I.jsx)(S.oi,{label:{title:"Branch : ",style:{fontSize:"12px",fontWeight:"bold",width:"70px"}},input:{type:"text",style:{width:"300px"},onKeyDown:function(e){var t;"NumpadEnter"!==e.code&&"Enter"!==e.code||(null===(t=N.current)||void 0===t||t.focus())}},inputRef:D}),(0,I.jsx)(S.Fz,{label:{title:"Remarks : ",style:{fontSize:"12px",fontWeight:"bold",width:"70px"}},textarea:{rows:4,style:{width:"300px"},onKeyDown:function(e){var t;(e.stopPropagation(),"NumpadEnter"===e.code&&!e.shiftKey||"Enter"===e.code&&!e.shiftKey)&&(null===(t=j.current)||void 0===t||t.focus())}},_inputRef:N})]}),(0,I.jsxs)("div",{style:{width:"45%",display:"flex",flexDirection:"column",rowGap:"5px",position:"relative",padding:"10px",alignItems:"flex-end"},children:[(0,I.jsx)(S.oi,{label:{title:"Date : ",style:{fontSize:"12px",fontWeight:"bold",width:"70px"}},input:{type:"date",style:{width:"200px"},defaultValue:(0,_.Z)(new Date,"yyyy-MM-dd"),onKeyDown:function(e){var t;"NumpadEnter"!==e.code&&"Enter"!==e.code||(null===(t=T.current)||void 0===t||t.focus())}},inputRef:j}),(0,I.jsx)(S.iA,{label:{title:"Amount : ",style:{fontSize:"12px",fontWeight:"bold",width:"70px"}},input:{type:"text",style:{width:"200px"},onKeyDown:function(e){"NumpadEnter"!==e.code&&"Enter"!==e.code||n&&n()}},inputRef:T}),(0,I.jsxs)("div",{style:{display:"flex",columnGap:"10px",flex:1,justifyContent:"flex-end",alignItems:"flex-end"},children:[(0,I.jsx)(d.Z,{variant:"contained",color:"success",style:{height:"22px",fontSize:"12px"},onClick:function(e){n&&n()},children:"OK"}),(0,I.jsx)(d.Z,{variant:"contained",color:"success",style:{height:"22px",fontSize:"12px"},onClick:function(e){E()},children:"Cancel"})]})]})]}),O,(0,I.jsx)("style",{children:"\n              .btn-check-exit-modal:hover{\n                background:red !important;\n                color:white !important;\n              }\n            "})]})]}):null}));function H(e,t){Object.entries(t).forEach((function(t){var n=(0,i.Z)(t,2),r=n[0],o=n[1];e({type:"UPDATE_FIELD",field:r,value:o})}))}},59332:function(e,t,n){var r=n(64836);t.Z=void 0;var o=r(n(45649)),a=n(80184),c=(0,o.default)((0,a.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 3c1.93 0 3.5 1.57 3.5 3.5S13.93 13 12 13s-3.5-1.57-3.5-3.5S10.07 6 12 6zm7 13H5v-.23c0-.62.28-1.2.76-1.58C7.47 15.82 9.64 15 12 15s4.53.82 6.24 2.19c.48.38.76.97.76 1.58V19z"}),"AccountBox");t.Z=c},25294:function(e,t,n){var r=n(64836);t.Z=void 0;var o=r(n(45649)),a=n(80184),c=(0,o.default)((0,a.jsx)("path",{d:"M12 8V4l8 8-8 8v-4H4V8z"}),"Forward");t.Z=c},67236:function(e,t,n){var r=n(64836);t.Z=void 0;var o=r(n(45649)),a=n(80184),c=(0,o.default)((0,a.jsx)("path",{d:"M19 8H5c-1.66 0-3 1.34-3 3v6h4v4h12v-4h4v-6c0-1.66-1.34-3-3-3zm-3 11H8v-5h8v5zm3-7c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm-1-9H6v4h12V3z"}),"LocalPrintshop");t.Z=c},5403:function(e,t,n){var r=n(64836);t.Z=void 0;var o=r(n(45649)),a=n(80184),c=(0,o.default)((0,a.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"Search");t.Z=c}}]);
//# sourceMappingURL=8255.bd86d8b8.chunk.js.map