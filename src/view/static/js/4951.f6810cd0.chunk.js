"use strict";(self.webpackChunkupward=self.webpackChunkupward||[]).push([[4951],{93346:function(e,t,n){n.d(t,{Z:function(){return u}});var o=n(93433),i=n(29439),r=n(72791),a=n(80184),u=(0,r.forwardRef)((function(e,t){var n=e.rows,u=e.column,l=e.width,s=e.height,c=e.dataReadOnly,d=e.onSelectionChange,p=void 0===d?function(){}:d,f=e.isMultipleSelect,h=void 0!==f&&f,v=e.freeze,x=void 0!==v&&v,m=e.onKeyDown,g=e.inputsearchselector,y=void 0===g?".search-input-up-on-key-down":g,N=e.isRowSelectable,P=void 0===N||N,w=e.unSelectable,Z=void 0===w?function(){return!1}:w,D=e.writeFooter,b=void 0===D?function(){return null}:D,C=e.isLoading,S=void 0!==C&&C,k=(0,r.useRef)(p),E=(0,r.useRef)(m),I=(0,r.useState)(u.filter((function(e){return!e.hide}))),R=(0,i.Z)(I,2),M=R[0],j=R[1],A=(0,r.useState)(null),L=(0,i.Z)(A,2),F=L[0],T=L[1],q=(0,r.useState)([0]),z=(0,i.Z)(q,2),_=z[0],B=z[1],U=(0,r.useState)(0),O=(0,i.Z)(U,2),V=O[0],K=O[1],W=(0,r.useState)([]),G=(0,i.Z)(W,2),H=G[0],Y=G[1],X=(0,r.useRef)(null),J=function(e,t){t.preventDefault(),t.stopPropagation();var n=t.clientX,i=M[e].width,r=function(t){var r=i+(t.clientX-n),a=(0,o.Z)(M);a[e].width=r>50?r:50,j(a)};document.addEventListener("mousemove",r),document.addEventListener("mouseup",(function e(){document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",e)}))},Q=function(e){T(e)},$=function(){T(null)};return(0,r.useImperativeHandle)(t,(function(){return{resetTableSelected:function(){if(B([0]),K(0),Y([]),n.length>0){var e=document.querySelector(".row-".concat(0));null===e||void 0===e||e.scrollIntoView({block:"end",behavior:"smooth"})}},getSelectedRows:function(){return n.filter((function(e,t){return H.includes(t)}))}}})),(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"center"},onKeyDown:function(e){if("Enter"===e.key||"NumpadEnter"===e.key){if(e.preventDefault(),!P)return;var t=[],i=_[_.length-1];t=h?[].concat((0,o.Z)(H),(0,o.Z)(_)):[i];var r=n[t[t.length-1]];if(Z(r))return;if(H.includes(i)&&!x)return t=H.filter((function(e){return e!==i})),Y(t),void k.current([]);Y(t),k.current([r])}else if("ArrowDown"===e.key)e.preventDefault(),B((function(e){var t;if(null===e[e.length-1])return[0];if(e[e.length-1]>=n.length-1)return[n.length-1];var o=e[e.length-1]+1,i=document.querySelector(".row-".concat(o));return null===i||void 0===i||null===(t=i.querySelector("input"))||void 0===t||t.focus(),null===i||void 0===i||i.scrollIntoView({block:"end",behavior:"smooth"}),[o]}));else if("ArrowUp"===e.key){if(e.preventDefault(),0===_[_.length-1]){var a=document.querySelector(y);if(a&&"INPUT"===a.tagName)null===a||void 0===a||a.focus();else if(a&&"DIV"===a.tagName){var u=document.querySelector("".concat(y," input"));null===u||void 0===u||u.focus()}}B((function(e){var t;if(0===e[e.length-1])return[0];var n=e[e.length-1]-1,o=document.querySelector(".row-".concat(n));return null===o||void 0===o||o.scrollIntoView({block:"end",behavior:"smooth"}),null===o||void 0===o||null===(t=o.querySelector("input"))||void 0===t||t.focus(),[n]}))}else if("Delete"===e.key||"Backspace"===e.key){if(!P)return;var l=n.filter((function(e,t){return _.includes(t)}));null!==E&&void 0!==E&&E.current&&(null===E||void 0===E||E.current(l,e.key))}},children:[(0,a.jsxs)("div",{className:"table-frame-color",children:[(0,a.jsx)("div",{style:{display:"flex",flexDirection:"column",width:"".concat(l-10,"px        "),height:"".concat(s-135,"px")},className:"table-frame",children:(0,a.jsx)("div",{className:"table-panel",children:(0,a.jsxs)("div",{ref:X,className:"grid-container ",tabIndex:-1,children:[(0,a.jsx)("div",{className:"grid-row grid-header",style:{position:"sticky",zIndex:"10",top:"-1px",background:"white"},children:M.map((function(e,t){return(0,a.jsxs)("div",{className:"grid-cell header-cell ".concat(F===t?"highlight-column":"","\n                      \n                      "),style:{width:e.width,height:"20px",textAlign:"number"===e.type?"center":"left"},children:[(0,a.jsx)("input",{style:{fontWeight:"bold"},defaultValue:e.headerName,readOnly:!0,onChange:function(e){}}),(0,a.jsx)("div",{className:"resize-handle",onMouseDown:function(e){return J(t,e)},onMouseEnter:function(e){e.preventDefault(),Q(t)},onMouseLeave:function(e){e.preventDefault(),$()}})]},t)}))}),n.map((function(e,t){return(0,a.jsx)("div",{className:"grid-row row-".concat(t),onClick:function(e){return function(e,t){if(h)if(t.shiftKey&&null!==V){for(var i=Math.min(V,e),r=Math.max(V,e),a=[],u=i;u<=r;u++)_.includes(u)||a.push(u);var l=[].concat((0,o.Z)(H),a);B([].concat((0,o.Z)(_),a));var s=function(e){var t=e.map((function(e,t){return Z(e)?null:{idx:t,data:e}})).filter((function(e){return null!==e})),n=t.map((function(e){return e.data}));return{newSelectedRowsFiltered:t.map((function(e){return e.idx})),data:n}}(n.filter((function(e,t){return l.includes(t)}))),c=s.newSelectedRowsFiltered,d=s.data;Y(c),k.current(d)}else if(t.ctrlKey||t.metaKey)if(_.includes(e)&&!x){B(_.filter((function(t){return t!==e}))),Y((function(t){return t=t.filter((function(t){return t!==e})),t}));var p=H.filter((function(t){return t!==e})),f=n.filter((function(e,t){return p.includes(t)}));Y(p),k.current(f)}else{B([].concat((0,o.Z)(_),[e])),Y((function(t){return t.push(e),t}));var v=[].concat((0,o.Z)(H),[e]),m=n.filter((function(e,t){return v.includes(t)}));Y(v),k.current(m)}else B([e]);else B([e]);K(e)}(t,e)},onDoubleClick:function(e){return function(e,t){var i=n[e];if(!Z(i)&&P){var r=[];if(!H.includes(e)||x){r=h?[].concat((0,o.Z)(H),[e]):[e],Y(r);var a=n.filter((function(e,t){return r.includes(t)}));k.current(a)}else{r=H.filter((function(t){return t!==e})),Y(r);var u=n.filter((function(e,t){return r.includes(t)}));k.current(u)}}}(t)},children:M.map((function(n,o){return(0,a.jsxs)("div",{style:{width:n.width},className:"grid-cell ".concat(F===o?"highlight-column":""),children:[(0,a.jsx)("input",{value:e[n.field],onChange:function(e){},readOnly:c,className:"".concat(_.includes(t)?"selected-row":""," ").concat(H.includes(t)?"selected-items":"","\n                          ").concat("number"===n.type?"number":"text","\n                          ")}),(0,a.jsx)("div",{className:"resize-handle",onMouseDown:function(e){e.preventDefault(),J(o,e)},onMouseEnter:function(e){e.preventDefault(),Q(o)},onMouseLeave:function(e){e.preventDefault(),$()}})]},o)}))},t)}))]})})}),b(n)?(0,a.jsx)(a.Fragment,{children:b(n)}):(0,a.jsxs)("div",{className:"table-panel-footer",children:["Records : ",n.length]})]}),S&&(0,a.jsx)("div",{className:"table-loading",children:(0,a.jsx)("div",{className:"loader",children:(0,a.jsx)("img",{alt:"loader-gif",src:"//image/loading.gif"})})})]})}))},84951:function(e,t,n){n.r(t),n.d(t,{default:function(){return T}});var o=n(74165),i=n(15861),r=n(29439),a=n(4942),u=n(1413),l=n(72791),s=n(68096),c=n(94925),d=n(77196),p=n(63466),f=n(13400),h=n(5712),v=n(48550),x=n(58406),m=n(23786),g=n(36151),y=n(64554),N=n(39709),P=n(42419),w=n(29823),Z=n(21830),D=n.n(Z),b=n(3380),C=n(91933),S=n(25756),k=n(86753),E=n(93346),I=n(80184),R=["","Fully Paid","Check Replacement","Account Closed","Hold","Not Renewed By Camfin"],M={RCPNo:"",PNNo:"",client:"",reason:"",requestMode:""},j={RCPNo:"",PNNo:"",client:"",reason:"",approvedMode:"",authCode:""},A=function(e,t){return"UPDATE_FIELD"===t.type?(0,u.Z)((0,u.Z)({},e),{},(0,a.Z)({},t.field,t.value)):e},L=[{field:"Check_Date",headerName:"Date",width:170},{field:"Bank",headerName:"Bank",width:400},{field:"Check_No",headerName:"Check No.",width:170},{field:"Check_Amnt",headerName:"Check",width:170,type:"number"},{field:"Status",headerName:"Status",width:170},{field:"RCPNO",headerName:"RCPNO",width:170},{field:"temp_id",headerName:"temp_id",width:100,hide:!0}],F=[{field:"Check_Date",headerName:"Date",width:150},{field:"Bank",headerName:"Bank",width:150},{field:"Check_No",headerName:"Check No.",width:150},{field:"Check_Amnt",headerName:"Check",width:150,type:"number"},{field:"RCPNO",headerName:"PDC_ID",width:150,hide:!0},{field:"reason",headerName:"reason",width:150,hide:!0},{field:"Status",headerName:"Status",width:650}];function T(){(0,l.useContext)(b.V).user;var e=(0,S.Z)([(0,I.jsx)(q,{}),(0,I.jsx)(z,{})]),t=e.currentStepIndex,n=e.step,o=e.goTo,i=function(e){return{border:"none",outline:"none",backgroundColor:"rgba(51, 51, 51, 0.05)",borderWidth:"0",color:t===e?"#7e22ce":"#333333",cursor:"pointer",display:"inline-block",fontFamily:'"Haas Grot Text R Web", "Helvetica Neue", Helvetica, Arial, sans-serif',fontSize:"14px",fontWeight:"500",lineHeight:"20px",listStyle:"none",margin:"0",padding:"10px 12px",textAlign:"center",transition:"all 200ms",verticalAlign:"baseline",whiteSpace:"nowrap",userSelect:"none",touchAction:"manipulation",position:"relative",overflow:"hidden"}};return(0,I.jsxs)("div",{style:{width:"100%",height:"calc(100vh - 80px)",maxHeight:"100%",display:"flex",flexDirection:"column"},children:[(0,I.jsxs)("div",{style:{display:"flex"},children:[(0,I.jsxs)("button",{style:(0,u.Z)({},i(0)),onClick:function(){return o(0)},children:[(0,I.jsx)("span",{style:{position:"absolute",top:0,bottom:0,left:0,right:0,background:"rgba(206, 214, 211, 0.18)",transition:"all 200ms",transform:_(t,0)}}),"Pullout Request"]}),(0,I.jsxs)("button",{style:(0,u.Z)({},i(1)),onClick:function(){return o(1)},children:[(0,I.jsx)("span",{style:{position:"absolute",top:0,bottom:0,left:0,right:0,background:"rgba(206, 214, 211, 0.18)",transition:"all 200ms",transform:_(t,1)}}),"Pullout Approved"]})]}),(0,I.jsx)("br",{}),n]})}function q(){var e,t,n,a,y,Z=(0,l.useState)([]),S=(0,r.Z)(Z,2),j=S[0],F=S[1],T=(0,l.useState)([]),q=(0,r.Z)(T,2),z=q[0],_=q[1],B=(0,l.useRef)(null),U=(0,l.useContext)(b.V),O=U.myAxios,V=U.user,K=(0,l.useState)([]),W=(0,r.Z)(K,2),G=W[0],H=W[1],Y=(0,l.useReducer)(A,M),X=(0,r.Z)(Y,2),J=X[0],Q=X[1],$=(0,l.useRef)(null),ee=(0,C.useQuery)({queryKey:"load-pn_no",queryFn:function(){return(e=e||(0,i.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.get("/task/accounting/pullout/reqeust/load-pnno",{headers:{Authorization:"Bearer ".concat(null===V||void 0===V?void 0:V.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){_(e.data.data)},refetchOnWindowFocus:!1}),te=ee.isLoading,ne=(0,C.useMutation)({mutationKey:"load-checks",mutationFn:function(e){return(t=t||(0,i.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.post("/task/accounting/pullout/reqeust/load-checks",t,{headers:{Authorization:"Bearer ".concat(null===V||void 0===V?void 0:V.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){H(e.data.data)}}),oe=ne.isLoading,ie=ne.mutate,re=(0,C.useMutation)({mutationKey:"load-rcpn",mutationFn:function(e){return(n=n||(0,i.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.post("/task/accounting/pullout/reqeust/load-rcpn",t,{headers:{Authorization:"Bearer ".concat(null===V||void 0===V?void 0:V.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){F(null===e||void 0===e?void 0:e.data.data)}}),ae=re.isLoading,ue=re.mutate,le=(0,C.useQuery)({queryKey:"pullout-request-id",queryFn:function(){return(a=a||(0,i.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.get("/task/accounting/pullout/reqeust/get-id",{headers:{Authorization:"Bearer ".concat(null===V||void 0===V?void 0:V.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t=e;"edit"!==J.requestMode&&Q({type:"UPDATE_FIELD",field:"RCPNo",value:t.data.id[0].pullout_request})}}),se=le.isLoading,ce=le.refetch,de=(0,C.useMutation)({mutationKey:"save-request",mutationFn:function(e){return(y=y||(0,i.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.post("/task/accounting/pullout/request/save",t,{headers:{Authorization:"Bearer ".concat(null===V||void 0===V?void 0:V.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){return e.data.success?(xe(),D().fire({position:"center",icon:"success",title:e.data.message,timer:1500})):D().fire({position:"center",icon:"warning",title:e.data.message,timer:1500})}}),pe=de.mutate,fe=de.isLoading,he=function(e){var t=e.target,n=t.name,o=t.value;Q({type:"UPDATE_FIELD",field:n,value:o})},ve=function(){D().fire({title:"Are you sure?",text:"You want to save it",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, save it!"}).then((function(e){if(e.isConfirmed){if($.current.getSelectedRows().length<=0)return D().fire({position:"center",icon:"warning",title:"Please select from list",timer:3e3});var t=$.current.getSelectedRows();"edit"===J.requestMode&&(t=$.current.getSelectedRows().map((function(e){return e.Status="--",e}))),pe((0,u.Z)((0,u.Z)({},J),{},{selected:JSON.stringify(t)}))}}))};function xe(){var e;null===(e=$.current)||void 0===e||e.resetTableSelected(),H([]),Object.entries(M).forEach((function(e){var t=(0,r.Z)(e,2),n=t[0],o=t[1];Q({type:"UPDATE_FIELD",field:n,value:o})})),ce()}var me=window.innerWidth-100,ge=window.innerHeight-145;return(0,I.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"100%",height:"100%",flex:1},children:[(0,I.jsxs)("div",{style:{height:"70px",display:"flex",alignItems:"center"},children:[(0,I.jsx)("div",{style:{display:"flex",flexDirection:"edit"===J.requestMode?"column":"row",columnGap:"5px",padding:"0px 40px"},children:(0,I.jsxs)("div",{style:{display:"flex",flexGrow:1,columnGap:"10px"},children:["edit"!==J.requestMode&&(0,I.jsx)(l.Fragment,{children:se?(0,I.jsx)(N.Z,{loading:se}):(0,I.jsxs)(s.Z,{variant:"outlined",size:"small",disabled:"add"!==J.requestMode,sx:{width:"200px",".MuiFormLabel-root":{fontSize:"14px",background:"white",zIndex:99,padding:"0 3px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},children:[(0,I.jsx)(c.Z,{htmlFor:"pullout-req-id",children:"RCP NO."}),(0,I.jsx)(d.Z,{sx:{height:"27px",fontSize:"14px"},disabled:"add"!==J.requestMode,fullWidth:!0,label:"RCP NO.",name:"RCPNo",value:J.RCPNo,onChange:he,onKeyDown:function(e){if("Enter"===e.code||"NumpadEnter"===e.code)return e.preventDefault(),ve()},readOnly:"UCSMI"!==(null===V||void 0===V?void 0:V.department),id:"pullout-req-id",endAdornment:(0,I.jsx)(p.Z,{position:"end",children:(0,I.jsx)(f.Z,{disabled:"add"!==J.requestMode,color:"secondary",edge:"end",onClick:function(){ce()},children:(0,I.jsx)(k.Z,{})})})})]})}),"edit"===J.requestMode&&(0,I.jsx)(h.Z,{loading:ae,freeSolo:!0,options:j,value:J.RCPNo,onChange:function(e,t){t&&(Q({type:"UPDATE_FIELD",field:"RCPNo",value:t.RCPNo}),Q({type:"UPDATE_FIELD",field:"PNNo",value:t.PNo}),Q({type:"UPDATE_FIELD",field:"client",value:t.Name}),Q({type:"UPDATE_FIELD",field:"reason",value:t.Reason}),ie({PNNo:t.PNo}))},onInput:function(e){Q({type:"UPDATE_FIELD",field:"RCPNo",value:e.target.value})},onBlur:function(e){var t=j.find((function(e){return e.RCPNo===J.RCPNo}));void 0!==t&&(Q({type:"UPDATE_FIELD",field:"RCPNo",value:t.RCPNo}),Q({type:"UPDATE_FIELD",field:"PNNo",value:t.PNo}),Q({type:"UPDATE_FIELD",field:"client",value:t.Name}),Q({type:"UPDATE_FIELD",field:"reason",value:t.Reason}),ie({PNNo:t.PNo}))},renderOption:function(e,t){return(0,l.createElement)("li",(0,u.Z)((0,u.Z)({},e),{},{key:t.RCPNo}),t.RCPNo)},renderInput:function(e){return(0,I.jsx)(v.Z,(0,u.Z)((0,u.Z)({},e),{},{InputProps:(0,u.Z)((0,u.Z)({},e.InputProps),{},{style:{height:"27px",fontSize:"14px"}}),label:"PN No."}))},sx:{width:"200px",".MuiFormLabel-root":{fontSize:"14px"},".MuiInputBase-input":{width:"100% !important"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"},".MuiAutocomplete-input ":{position:"absolute"}},size:"small"}),(0,I.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,I.jsx)(h.Z,{loading:te,disabled:"add"!==J.requestMode,freeSolo:!0,options:z.map((function(e){return e.PNo})),value:J.PNNo,onChange:function(e,t){t&&Q({type:"UPDATE_FIELD",field:"PNNo",value:t})},onInput:function(e){Q({type:"UPDATE_FIELD",field:"PNNo",value:e.target.value})},onBlur:function(e){var t=z.find((function(e){return e.PNo===J.PNNo}));void 0!==t&&(Q({type:"UPDATE_FIELD",field:"PNNo",value:t.PNo}),Q({type:"UPDATE_FIELD",field:"client",value:t.Name}),ie({PNNo:t.PNo}))},renderInput:function(e){return(0,I.jsx)(v.Z,(0,u.Z)((0,u.Z)({},e),{},{InputProps:(0,u.Z)((0,u.Z)({},e.InputProps),{},{style:{height:"27px",fontSize:"14px"}}),label:"PN No.",disabled:"add"!==J.requestMode}))},sx:{width:"300px",".MuiFormLabel-root":{fontSize:"14px"},".MuiInputBase-input":{width:"100% !important"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"},".MuiAutocomplete-input ":{position:"absolute"}},size:"small"}),(0,I.jsx)(h.Z,{loading:te,disabled:"add"!==J.requestMode,freeSolo:!0,options:z,value:J.client,onChange:function(e,t){t&&Q({type:"UPDATE_FIELD",field:"client",value:t.Name})},onInput:function(e){Q({type:"UPDATE_FIELD",field:"client",value:e.target.value})},onBlur:function(e){var t=z.find((function(e){return e.Name===J.client}));void 0!==t&&(Q({type:"UPDATE_FIELD",field:"PNNo",value:t.PNo}),Q({type:"UPDATE_FIELD",field:"client",value:t.Name}),ie({PNNo:t.PNo}))},renderOption:function(e,t){return(0,l.createElement)("li",(0,u.Z)((0,u.Z)({},e),{},{key:t.PNo}),t.Name)},renderInput:function(e){return(0,I.jsx)(v.Z,(0,u.Z)((0,u.Z)({},e),{},{InputProps:(0,u.Z)((0,u.Z)({},e.InputProps),{},{style:{height:"27px",fontSize:"14px"}}),fullWidth:!0,label:"Name",disabled:"add"!==J.requestMode}))},sx:{width:"300px",".MuiFormLabel-root":{fontSize:"14px"},".MuiInputBase-input":{width:"100% !important"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"},".MuiAutocomplete-input ":{position:"absolute"}},size:"small"})]}),(0,I.jsxs)(s.Z,{size:"small",variant:"outlined",disabled:"add"!==J.requestMode&&"edit"!==J.requestMode,sx:{width:"250px",".MuiFormLabel-root":{fontSize:"14px",background:"white",zIndex:99,padding:"0 3px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},children:[(0,I.jsx)(c.Z,{id:"reason",children:"Reason"}),(0,I.jsx)(x.Z,{labelId:"reason",value:J.reason,name:"reason",onChange:function(e){he(e),ie({PNNo:J.PNNo})},autoWidth:!0,sx:{height:"27px",fontSize:"14px"},children:R.map((function(e,t){return(0,I.jsx)(m.Z,{value:e,children:e},t)}))})]})]})}),(0,I.jsxs)("div",{style:{display:"flex",columnGap:"10px",paddingBottom:"5px"},children:[""===J.requestMode&&(0,I.jsx)(g.Z,{sx:{height:"30px",fontSize:"11px"},variant:"contained",startIcon:(0,I.jsx)(P.Z,{sx:{width:15,height:15}}),id:"entry-header-save-button",onClick:function(){he({target:{value:"add",name:"requestMode"}})},color:"primary",children:"New"}),""===J.requestMode&&(0,I.jsx)(N.Z,{sx:{height:"30px",fontSize:"11px"},onClick:function(){he({target:{value:"edit",name:"requestMode"}}),he({target:{value:"",name:"RCPNo"}}),ue({})},color:"secondary",variant:"contained",children:"Edit"}),""!==J.requestMode&&(0,I.jsx)(N.Z,{sx:{height:"30px",fontSize:"11px"},disabled:""===J.requestMode,onClick:ve,color:"success",variant:"contained",loading:fe,children:"Save"}),""!==J.requestMode&&(0,I.jsx)(N.Z,{sx:{height:"30px",fontSize:"11px"},variant:"contained",startIcon:(0,I.jsx)(w.Z,{sx:{width:15,height:15}}),color:"error",onClick:function(){D().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, cancel it!"}).then((function(e){e.isConfirmed&&xe()}))},children:"Cancel"})]})]}),(0,I.jsx)("div",{ref:B,style:{marginTop:"10px",width:"100%",position:"relative",flex:1},children:(0,I.jsx)(E.Z,{ref:$,rows:G,column:L,width:me,height:ge,dataReadOnly:!0,unSelectable:function(e){return"edit"===J.requestMode?["APPROVED","DISAPPROVED"].includes(e.Status):"add"===J.requestMode&&["PENDING","APPROVED","DISAPPROVED"].includes(e.Status)},isMultipleSelect:!0,isLoading:oe})})]})}function z(){var e,t,n,a,s=(0,l.useState)([]),c=(0,r.Z)(s,2),d=c[0],p=c[1],f=(0,l.useRef)(null),x=(0,l.useContext)(b.V),m=x.myAxios,g=x.user,P=(0,l.useState)([]),w=(0,r.Z)(P,2),Z=w[0],S=w[1],k=(0,l.useReducer)(A,j),R=(0,r.Z)(k,2),M=R[0],L=R[1],T=(0,l.useRef)(null),q=(0,C.useMutation)({mutationKey:"load-checks",mutationFn:function(t){return(e=e||(0,i.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.post("/task/accounting/pullout/reqeust/load-checks",t,{headers:{Authorization:"Bearer ".concat(null===g||void 0===g?void 0:g.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){S(e.data.data)}}),z=q.isLoading,_=q.mutate,B=(0,C.useQuery)({queryKey:"load-rcpn",queryFn:function(){return(t=t||(0,i.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.get("/task/accounting/pullout/reqeust/load-rcpn",{headers:{Authorization:"Bearer ".concat(null===g||void 0===g?void 0:g.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){p(null===e||void 0===e?void 0:e.data.data)}}),U=B.isLoading,O=(0,C.useMutation)({mutationKey:"approved",mutationFn:function(e){return(n=n||(0,i.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.post("/task/accounting/pullout/approved/approved",t,{headers:{Authorization:"Bearer ".concat(null===g||void 0===g?void 0:g.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){return e.data.success?(function(){var e;null===(e=T.current)||void 0===e||e.resetTableSelected(),S([]),Object.entries(j).forEach((function(e){var t=(0,r.Z)(e,2),n=t[0],o=t[1];L({type:"UPDATE_FIELD",field:n,value:o})}))}(),D().fire({position:"center",icon:"success",title:e.data.message,timer:1500})):D().fire({position:"center",icon:"warning",title:e.data.message,timer:1500})}}),V=O.mutate,K=O.isLoading;var W=function(e){var t=e.target,n=t.name,o=t.value;L({type:"UPDATE_FIELD",field:n,value:o})},G=window.innerWidth-100,H=window.innerHeight-145;return(0,I.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"100%",height:"100%",flex:1},children:[(0,I.jsx)("div",{style:{height:"auto",display:"flex",columnGap:"20px",marginBottom:"10px",padding:"0px 40px"},children:(0,I.jsxs)("div",{style:{display:"flex",flexGrow:1,columnGap:"10px"},children:[(0,I.jsx)(h.Z,{loading:U,freeSolo:!0,options:d,value:M.RCPNo,onChange:function(e,t){t&&(L({type:"UPDATE_FIELD",field:"RCPNo",value:t.RCPNo}),L({type:"UPDATE_FIELD",field:"PNNo",value:t.PNo}),L({type:"UPDATE_FIELD",field:"client",value:t.Name}),L({type:"UPDATE_FIELD",field:"reason",value:t.Reason}),_({PNNo:t.PNo}))},onInput:function(e){L({type:"UPDATE_FIELD",field:"RCPNo",value:e.target.value})},onBlur:function(e){var t=d.find((function(e){return e.RCPNo===M.RCPNo}));void 0!==t&&(L({type:"UPDATE_FIELD",field:"RCPNo",value:t.RCPNo}),L({type:"UPDATE_FIELD",field:"PNNo",value:t.PNo}),L({type:"UPDATE_FIELD",field:"client",value:t.Name}),L({type:"UPDATE_FIELD",field:"reason",value:t.Reason}),_({PNNo:t.PNo}))},renderOption:function(e,t){return(0,l.createElement)("li",(0,u.Z)((0,u.Z)({},e),{},{key:t.RCPNo}),t.RCPNo)},renderInput:function(e){return(0,I.jsx)(v.Z,(0,u.Z)((0,u.Z)({},e),{},{InputProps:(0,u.Z)((0,u.Z)({},e.InputProps),{},{style:{height:"27px",fontSize:"14px"}}),label:"PN No."}))},sx:{flex:1,".MuiFormLabel-root":{fontSize:"14px"},".MuiInputBase-input":{width:"100% !important"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"},".MuiAutocomplete-input ":{position:"absolute"}},size:"small"}),(0,I.jsx)(v.Z,{fullWidth:!0,variant:"outlined",size:"small",label:"PN No.",name:"PNNo",value:M.PNNo,onChange:W,InputProps:{style:{height:"27px",fontSize:"14px"},readOnly:!0},sx:{width:"200px",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}}),(0,I.jsx)(v.Z,{fullWidth:!0,variant:"outlined",size:"small",label:"Name",name:"client",value:M.client,onChange:W,InputProps:{style:{height:"27px",fontSize:"14px"},readOnly:!0},sx:{flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}}),(0,I.jsx)(v.Z,{label:"Reason",value:M.reason,name:"reason",onChange:W,InputProps:{style:{height:"27px",fontSize:"14px"},readOnly:!0},sx:{flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-12px"}}}),(0,I.jsx)(N.Z,{sx:{height:"30px",fontSize:"11px"},disabled:M.RCPNo.length<=0,loading:"approved"===M.approvedMode&&K,onClick:function(){var e;D().fire({title:"Are you sure?",html:'<p>You want to <span style="color:green">Approved</span> <strong>'.concat(M.RCPNo,"</strong></p><p>Enter Code.</p>"),input:"text",inputAttributes:{autocapitalize:"off"},showCancelButton:!0,confirmButtonText:"Confirm",confirmButtonColor:"green",showLoaderOnConfirm:!0,preConfirm:function(t){return(e=e||(0,i.Z)((0,o.Z)().mark((function e(t){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n=JSON.stringify(T.current.getSelectedRows()),V((0,u.Z)((0,u.Z)({},M),{},{code:t,selected:n,approvedMode:"approved"})),L({type:"UPDATE_FIELD",field:"approvedMode",value:"approved"})}catch(o){D().showValidationMessage("\n            Request failed: ".concat(o,"\n          "))}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)},allowOutsideClick:function(){return!D().isLoading()}}).then((function(e){e.isDismissed||e.dismiss||e.isDenied}))},color:"success",variant:"contained",children:"Approved Request"}),(0,I.jsx)(N.Z,{sx:{height:"30px",fontSize:"11px"},disabled:M.RCPNo.length<=0,loading:"disapproved"===M.approvedMode&&K,onClick:function(){var e;D().fire({title:"Are you sure!",html:'<p>You want to <span style="color:red">Disaprroved</span> <strong>'.concat(M.RCPNo,"</strong></p><p>Enter Code.</p>"),input:"text",inputAttributes:{autocapitalize:"off"},showCancelButton:!0,confirmButtonText:"Confirm",confirmButtonColor:"red",showLoaderOnConfirm:!0,preConfirm:function(t){return(e=e||(0,i.Z)((0,o.Z)().mark((function e(t){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n=JSON.stringify(T.current.getSelectedRows()),V((0,u.Z)((0,u.Z)({},M),{},{code:t,selected:n,approvedMode:"disapproved"})),L({type:"UPDATE_FIELD",field:"approvedMode",value:"disapproved"})}catch(o){D().showValidationMessage("\n            Request failed: ".concat(o,"\n          "))}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)},allowOutsideClick:function(){return!D().isLoading()}}).then((function(e){e.isDismissed||e.dismiss||e.isDenied}))},color:"error",variant:"contained",children:"Disapproved Request"})]})}),(0,I.jsx)("div",{ref:f,style:{marginTop:"10px",width:"100%",position:"relative",flex:1},children:(0,I.jsx)(y.Z,{style:{height:"".concat(null===(a=f.current)||void 0===a?void 0:a.getBoundingClientRect().height,"px"),width:"100%",overflowX:"scroll",position:"absolute"},children:(0,I.jsx)(E.Z,{ref:T,rows:Z,column:F,width:G,height:H,dataReadOnly:!0,unSelectable:function(e){return!["PENDING","APPROVED","DISAPPROVED"].includes(e.Status)},isMultipleSelect:!0,isLoading:z})})})]})}function _(e,t){return e===t?"translateX(100%)":"translateX(0%)"}},25756:function(e,t,n){n.d(t,{Z:function(){return r}});var o=n(29439),i=n(72791);function r(e){var t=(0,i.useState)(0),n=(0,o.Z)(t,2),r=n[0],a=n[1];return{step:e[r],goTo:function(e){a(e)},back:function(){a((function(e){return e<=0?e:e+1}))},next:function(){a((function(t){return t>=e.length-1?t:t+1}))},isFirstStep:0!==r,isLastStep:r===e.length-1,currentStepIndex:r}}},42419:function(e,t,n){var o=n(64836);t.Z=void 0;var i=o(n(45649)),r=n(80184),a=(0,i.default)((0,r.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");t.Z=a},86753:function(e,t,n){var o=n(64836);t.Z=void 0;var i=o(n(45649)),r=n(80184),a=(0,i.default)((0,r.jsx)("path",{d:"M12 5V2L8 6l4 4V7c3.31 0 6 2.69 6 6 0 2.97-2.17 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93 0-4.42-3.58-8-8-8zm-6 8c0-1.65.67-3.15 1.76-4.24L6.34 7.34C4.9 8.79 4 10.79 4 13c0 4.08 3.05 7.44 7 7.93v-2.02c-2.83-.48-5-2.94-5-5.91z"}),"RestartAlt");t.Z=a}}]);
//# sourceMappingURL=4951.f6810cd0.chunk.js.map