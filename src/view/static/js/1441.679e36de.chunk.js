"use strict";(self.webpackChunkupward=self.webpackChunkupward||[]).push([[1441,3128],{70272:function(e,t,n){var o=n(54270),r=n(80184);t.Z=function(e){var t=e.title,n=void 0===t?"":t;return(0,r.jsxs)(o.q,{children:[(0,r.jsx)("title",{children:n}),(0,r.jsx)("link",{rel:"icon",type:"image/png",href:"".concat("/","/logo.png")})]})}},81582:function(e,t,n){n.d(t,{XT:function(){return p},ZP:function(){return f},rO:function(){return h}});n(72791);var o=n(88447),r=n(64554),i=n(20890),a=n(27391),u=n(13400),c=n(29823),l=n(89767),s=n(80184),d={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"80%",bgcolor:"background.paper",boxShadow:24,p:4,heigth:"auto"};function f(e){var t=e.height,n=e.isLoading,f=(e.queryKey,e.columns),v=e.onSelectionChange,x=(e.setRows,e.rows),y=e.id,g=e.onCloseModal,w=e.showModal,m=e.onClickCloseIcon,b=e.searchOnChange,C=e.title,S=void 0===C?"":C,D=e.searchRef,k=(e.onCellKeyDown,e.onSearchKeyEnter),N=void 0===k?function(){}:k,Z=e.isRowSelectable,j=e.getCellClassName,I=p();return(0,s.jsx)(o.Z,{open:w,onClose:g,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,s.jsxs)(r.Z,{sx:d,children:[(0,s.jsx)(i.Z,{id:"modal-modal-title",variant:"h6",component:"h2",mb:2,children:S}),(0,s.jsx)(a.Z,{size:"small",label:"Search",sx:{marginBottom:"10px"},fullWidth:!0,onChange:b,InputProps:{inputRef:D},onKeyDown:function(e){var t;"Enter"!==e.code&&"NumpadEnter"!==e.code||(e.preventDefault(),N(null===D||void 0===D||null===(t=D.current)||void 0===t?void 0:t.value));h(e,I,null===D||void 0===D?void 0:D.current)}}),(0,s.jsx)("div",{className:"".concat(I," main-table-selection-container"),style:{position:"relative",height:"".concat(t+20,"px")},children:(0,s.jsx)(l.Z,{isSingleSelection:!0,isRowFreeze:!1,columns:f,isLoading:n,dataSelection:function(e,t,n){v(e,t)},table_id:y,rows:x,isRowSelectable:Z,getCellClassName:j})}),(0,s.jsx)("div",{style:{position:"absolute",top:"10px",right:"10px"},children:(0,s.jsx)(u.Z,{"aria-label":"search-client",color:"secondary",onClick:m,children:(0,s.jsx)(c.Z,{})})})]})})}function p(){return"main-"+Math.floor(1e4*Math.random())}function h(e,t,n){var o=t;if("ArrowDown"===e.code){var r,i=document.querySelectorAll(".".concat(o," .MuiDataGrid-row"));e.preventDefault(),null===(r=i[0])||void 0===r||r.classList.add("hover-keyboard"),function(e,t){var n=document.querySelector(".".concat(e," .MuiDataGrid-row")),o=null===n||void 0===n?void 0:n.querySelector("input");null===o||void 0===o||o.focus();var r=new MouseEvent("mouseenter",{bubbles:!0,cancelable:!0,view:window});null===n||void 0===n||n.dispatchEvent(r),null===o||void 0===o||o.addEventListener("keydown",(function(e){"ArrowUp"===e.key&&(e.preventDefault(),t.focus()),"ArrowUp"===e.key&&(null===n||void 0===n||n.classList.remove("hover-keyboard"))}))}(t,n),i.forEach((function(e,t){e.addEventListener("keydown",(function(e){if("ArrowUp"===e.key){var n,o;if(t<=0)return;return e.preventDefault(),null===(n=i[t])||void 0===n||n.classList.remove("hover-keyboard"),void(null===(o=i[t-1])||void 0===o||o.classList.add("hover-keyboard"))}if("ArrowDown"===e.key){var r,a;if(e.preventDefault(),t>=i.length-1)return;null===(r=i[t])||void 0===r||r.classList.remove("hover-keyboard"),null===(a=i[t+1])||void 0===a||a.classList.add("hover-keyboard")}}))}))}}},89767:function(e,t,n){var o=n(93433),r=n(1413),i=n(29439),a=n(72791),u=n(57482),c=n(64554),l=n(70561),s=n(29961),d=n(54277),f=n(70169),p=n(5794),h=n(16088),v=n(80184),x=(0,a.createContext)({rows:[],rowSelectionModel:[],footerChildren:function(){return(0,v.jsx)("div",{})},footerPaginationPosition:"right-left",showFooterSelectedCount:!0}),y=(0,a.forwardRef)((function(e,t){var n=e.isLoading,c=e.columns,s=e.rows,d=e.table_id,f=e.isSingleSelection,p=e.isRowFreeze,h=e.dataSelection,y=e.CustomFooterComponent,g=void 0===y?m:y,w=e.isRowSelectable,b=e.getCellClassName,C=e.checkboxSelection,S=void 0===C||C,D=e.footerChildren,k=void 0===D?function(e,t){return(0,v.jsx)("div",{})}:D,N=e.footerPaginationPosition,Z=void 0===N?"right-left":N,j=e.showFooterSelectedCount,I=void 0===j||j,R=(0,a.useState)([]),M=(0,i.Z)(R,2),T=M[0],A=M[1];function E(e,t,n){h&&h(e,t,n)}(0,a.useImperativeHandle)(t,(function(){return{removeSelection:function(){A([])},getSelectedRows:function(){return s.filter((function(e){return null===T||void 0===T?void 0:T.includes(e[d])}))},setSelectedRows:function(e){A(e)}}}));var P=[];return(0,v.jsx)(x.Provider,{value:{showFooterSelectedCount:I,footerPaginationPosition:Z,rowSelectionModel:T,rows:s,footerChildren:k},children:(0,v.jsx)(l._$,{slots:{loadingOverlay:u.Z,footer:g},initialState:{pagination:{paginationModel:{pageSize:100}}},loading:n,getRowId:function(e){return e[d]},columns:c.filter((function(e){return!e.hide})),rows:s,showCellVerticalBorder:!0,showColumnVerticalBorder:!0,checkboxSelection:S,rowSelectionModel:T,rowHeight:25,columnHeaderHeight:35,pageSizeOptions:[10,20,35,50,75,100],sx:(0,r.Z)((0,r.Z)({"& .cash":{color:"#ec4899"},"& .check":{color:"#0891b2"},"& .approved":{color:"green"},"& .pending":{color:"orange"},"& .disapproved":{color:"red"},"& .normal":{color:"red"},"& .MuiDataGrid-row.Mui-selected:hover":{color:"black","& .MuiSvgIcon-root ":{fill:"#3b82f6"}},"& .hover-keyboard":{background:"#2563eb",color:"white","& .MuiSvgIcon-root ":{fill:"white"}},"& .MuiDataGrid-row:hover":{background:"#2563eb",color:"white","& .MuiSvgIcon-root ":{fill:"white"}},"& .MuiDataGrid-row.hover":{background:"#2563eb",color:"white","& .MuiSvgIcon-root ":{fill:"white"}},"& .MuiTablePagination-root p ":{padding:"0 !important"}},{"& .MuiDataGrid-columnHeaders":{background:"#64748b",color:"white",fontSize:"14px"},"& .MuiDataGrid-columnHeaderCheckbox .MuiDataGrid-columnHeaderTitleContainer .MuiSvgIcon-root ":{display:f||p?"none":"block",fill:"white"},"& .MuiDataGrid-columnHeaderCheckbox .MuiDataGrid-columnHeaderTitleContainer input ":{display:f||p?"none":"block"}}),{fontSize:13,fontWeight:500,"& .MuiDataGrid-checkboxInput":{height:"27px",width:"27px"},"& .MuiDataGrid-checkboxInput svg":{height:"20px",width:"20px"}}),onRowSelectionModelChange:function(e){if(p){if(e.length<=0)return;if(P=e,T.includes(P[P.length-1]))return;return A(e),void E([e[e.length-1]],s,null)}if(!p&&f)if(T&&(null===T||void 0===T?void 0:T.length)>0){var t=new Set(T);A(e.filter((function(e){return!t.has(e)})))}else A(e);else A(e);E([e[e.length-1]],s,null)},onCellKeyDown:function(e,t){if(["NumpadEnter","Enter","Delete","Backspace"].includes(t.code))return t.preventDefault(),"Enter"===t.code||"NumpadEnter"===t.code?f&&!p?A((function(n){return n&&n.length>0&&n[0]===e.rowNode.id?(E([],s,t.code),[]):(E([e.rowNode.id],s,t.code),[e.rowNode.id])})):void A((function(n){return n&&!p&&n.length>0&&n.includes(e.rowNode.id)?(n=n.filter((function(t){return t!==e.rowNode.id})),E([],s,t.code),n):n&&p&&n.length>0&&n.includes(e.rowNode.id)?n:(E([e.rowNode.id],s,t.code),[].concat((0,o.Z)(n),[e.rowNode.id]))})):"Delete"===t.code||"Backspace"===t.code?(A([e.rowNode.id]),E([e.rowNode.id],s,t.code)):void 0},disableVirtualization:!0,isRowSelectable:w,getCellClassName:b})})}));function g(e){var t=e.page,n=e.onPageChange,o=e.className,r=(0,s.l)(),i=(0,d.P)(r,f.UB);return(0,v.jsx)(h.Z,{variant:"outlined",color:"primary",className:o,count:i,page:t+1,onChange:function(e,t){n(e,t-1)}})}function w(e){return(0,v.jsx)(p.x,(0,r.Z)({ActionsComponent:g},e))}function m(e){var t=(0,a.useContext)(x),n=t.rowSelectionModel,o=t.showFooterSelectedCount,i=t.footerPaginationPosition,u=t.footerChildren,l=t.rows;return(0,v.jsxs)(c.Z,{sx:{columnGap:"50px",display:"flex",width:"100%",justifyContent:"space-between",px:3,alignItems:"center",flexDirection:"right-left"===i?"row-reverse":"row"},children:[(0,v.jsx)(w,(0,r.Z)({},e)),(0,v.jsxs)(c.Z,{sx:{display:"flex",justifyContent:"right-left"===i?"flex-start":"flex-end",flex:1,alignItems:"center"},children:[o&&(0,v.jsxs)("div",{children:["Selected:",null===n||void 0===n?void 0:n.length]}),(0,v.jsx)("div",{children:u(n,l)})]})]})}t.Z=y},1441:function(e,t,n){n.r(t),n.d(t,{Autocomplete:function(){return L},AutocompleteNumber:function(){return _},chartColumn:function(){return P},default:function(){return z},reducer:function(){return A}});var o=n(74165),r=n(15861),i=n(29439),a=n(4942),u=n(1413),c=n(72791),l=n(36151),s=n(39709),d=n(42419),f=n(53329),p=n(29823),h=n(21830),v=n.n(h),x=n(3380),y=n(86753),g=n(91933),w=n(93263),m=n(79018),b=n(64230),C=n(70272),S=n(37209),D=n(30948),k=n(16386),N=n(637),Z=n(11690),j=n(5403),I=n(65413),R=n(85172),M=n(54164),T=n(80184),A=function(e,t){return"UPDATE_FIELD"===t.type?(0,u.Z)((0,u.Z)({},e),{},(0,a.Z)({},t.field,t.value)):e},E=[{key:"purpose",label:"Purpose",width:400},{key:"amount",label:"Amount",width:140},{key:"usage",label:"Usage",width:450},{key:"accountID",label:"Account ID",width:400},{key:"sub_account",label:"Sub Account",width:120},{key:"clientID",label:"ID No",width:140},{key:"clientName",label:"Name",width:350},{key:"accountCode",label:"Accoount Code",width:130},{key:"accountShort",label:"Account Short",width:300},{key:"vatType",label:"Vat Type",width:100},{key:"invoice",label:"Invoice",width:200},{key:"TempID",label:"TempId",hide:!0}],P=[{field:"Acct_Code",headerName:"Code",flex:1},{field:"Acct_Title",headerName:"Title",flex:1},{field:"Short",headerName:"Short Name",flex:1}];function z(){var e,t,n,a,u,h=(0,c.useContext)(x.V),R=h.myAxios,M=h.user,A=(0,c.useState)(""),P=(0,i.Z)(A,2),z=P[0],_=P[1],K=(0,N.Z)().executeQueryToClient,B=(0,c.useRef)(null),F=(0,c.useRef)(null),q=(0,c.useRef)(""),G=(0,c.useRef)(null),W=(0,c.useRef)(null),O=(0,c.useRef)(null),V=(0,c.useRef)(null),U=(0,c.useRef)(null),H=(0,c.useRef)(null),Q=(0,c.useRef)(null),Y=(0,c.useRef)(null),$=(0,c.useRef)(null),J=(0,c.useRef)(null),X=(0,c.useRef)(""),ee=(0,c.useRef)(""),te=(0,c.useRef)(""),ne=(0,c.useRef)(""),oe=""===z,re=(0,g.useQuery)({queryKey:"petty-cash-id-generator",queryFn:function(){return(e=e||(0,r.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.get("/task/accounting/get-petty-cash-id",{headers:{Authorization:"Bearer ".concat(null===M||void 0===M?void 0:M.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},refetchOnWindowFocus:!1,onSuccess:function(e){var t=e;(0,m.D)(100).then((function(){q.current=t.data.pettyCashId[0].petty_cash_id,G.current&&(G.current.value=t.data.pettyCashId[0].petty_cash_id)}))}}),ie=re.isLoading,ae=re.refetch,ue=(0,g.useMutation)({mutationKey:"add-update-petty-cash",mutationFn:function(e){return(t=t||(0,r.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.post("/task/accounting/add-petty-cash",t,{headers:{Authorization:"Bearer ".concat(null===M||void 0===M?void 0:M.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t=e;return t.data.success?(je(),v().fire({position:"center",icon:"success",title:t.data.message,timer:1500})):v().fire({position:"center",icon:"warning",title:t.data.message,timer:1500})}}),ce=ue.isLoading,le=ue.mutate,se=(0,g.useMutation)({mutationKey:"load-selected-petty-cash",mutationFn:function(e){return(n=n||(0,r.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.post("/task/accounting/load-selected-petty-cash",t,{headers:{Authorization:"Bearer ".concat(null===M||void 0===M?void 0:M.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t=e.data.loadSelectedPettyCash;q.current=t[0].PC_No,G.current&&(G.current.value=t[0].PC_No),W.current&&(W.current.value=(0,k.Z)(new Date(t[0].PC_Date),"yyyy-MM-dd")),O.current&&(O.current.value=t[0].Payee),V.current&&(V.current.value=t[0].Explanation),B.current.setDataFormated(t)}}),de=se.isLoading,fe=se.mutate,pe=(0,g.useQuery)({queryKey:"load-transcation",queryFn:function(){return(a=a||(0,r.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.get("/task/accounting/load-transcation",{headers:{Authorization:"Bearer ".concat(null===M||void 0===M?void 0:M.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},refetchOnWindowFocus:!1}),he=pe.isLoading,ve=pe.data,xe=(0,w.Z)({link:{url:"/task/accounting/search-pdc-policy-id",queryUrlName:"searchPdcPolicyIds"},columns:[{field:"Type",headerName:"Type",width:130},{field:"IDNo",headerName:"ID No.",width:200},{field:"Name",headerName:"Name",flex:1},{field:"ID",headerName:"ID",flex:1,hide:!0}],queryKey:"collection-polidy-ids",uniqueId:"IDNo",responseDataKey:"clientsId",onSelected:function(e,t){me(),(0,m.D)(100).then((function(){te.current=e[0].IDNo,ne.current=e[0].Acronym,H.current&&(H.current.value=e[0].Name)})),(0,m.D)(200).then((function(){var e;Q.current&&(null===(e=Q.current)||void 0===e||e.focus(),Q.current.value="")}))},searchRef:J}),ye=xe.ModalComponent,ge=xe.openModal,we=xe.isLoading,me=xe.closeModal,be=(0,w.Z)({link:{url:"/task/accounting/search-petty-cash",queryUrlName:"searchPettyCash"},columns:[{field:"PC_Date",headerName:"Type",width:130},{field:"PC_No",headerName:"ID No.",width:200},{field:"Payee",headerName:"Name",flex:1},{field:"Explanation",headerName:"ID",flex:1},{field:"Explanation",headerName:"ID",flex:1,hide:!0}],queryKey:"petty-cash-search",uniqueId:"PC_No",responseDataKey:"searchPettyCash",onSelected:function(e){fe({PC_No:e[0].PC_No}),_("edit"),ke()},searchRef:J}),Ce=be.ModalComponent,Se=be.openModal,De=be.isLoading,ke=be.closeModal;function Ne(){return(u=u||(0,r.Z)((0,o.Z)().mark((function e(){var t,n,r,i,a,u,c,l,s,d;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!U.current||""!==U.current.value){e.next=2;break}return e.abrupt("return",v().fire({position:"center",icon:"warning",title:"Please provide transaction",timer:1500}).then((function(){(0,m.D)(300).then((function(){var e;null===(e=U.current)||void 0===e||e.focus()}))})));case 2:if(""!==te.current){e.next=4;break}return e.abrupt("return",v().fire({position:"center",icon:"warning",title:"Please provide usage",timer:1500}).then((function(){(0,m.D)(300).then((function(){ge()}))})));case 4:if(!Q.current||!(""===Q.current.value||parseFloat(Q.current.value.replace(/,/g,""))<1)){e.next=6;break}return e.abrupt("return",v().fire({position:"center",icon:"warning",title:"Please provide proper amount",timer:1500}).then((function(){(0,m.D)(300).then((function(){var e;null===(e=Q.current)||void 0===e||e.focus()}))})));case 6:return e.next=8,K("\n         SELECT DISTINCT\n              Chart_Account.Acct_Code,\n              Chart_Account.Acct_Title,\n              Chart_Account.Short\n          FROM\n              Petty_Log\n                  LEFT JOIN\n              Chart_Account ON Petty_Log.Acct_Code = Chart_Account.Acct_Code\n          WHERE\n              Petty_Log.Acct_Code = '".concat(X.current,"'\n      "));case 8:c=e.sent,l=B.current.getData(),s=0,l.length<=0?l[0]=[]:(d=B.current.getSelectedRow())?s=d:(s=l.length,l[l.length]=[]),l[s][0]=null===(t=U.current)||void 0===t?void 0:t.value,l[s][1]=null===(n=Q.current)||void 0===n?void 0:n.value,l[s][2]="".concat(null===(r=H.current)||void 0===r?void 0:r.value," > ").concat(te.current," > ").concat(ne.current),l[s][3]="".concat(c.data.data[0].Short," > ").concat(c.data.data[0].Acct_Code),l[s][4]=ne.current,l[s][5]=te.current,l[s][6]=null===(i=H.current)||void 0===i?void 0:i.value,l[s][7]=c.data.data[0].Acct_Code,l[s][8]=c.data.data[0].Short,l[s][9]=null===(a=Y.current)||void 0===a?void 0:a.value,l[s][10]=null===(u=$.current)||void 0===u?void 0:u.value,B.current.setData(l),B.current.setSelectedRow(null),Ze(),U.current&&U.current.focus();case 27:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ze(){setTimeout((function(){U.current&&(U.current.value=""),Q.current&&(Q.current.value=""),H.current&&(H.current.value=""),Y.current&&(Y.current.value="NON-VAT"),$.current&&($.current.value=""),ne.current="",te.current="",X.current="",ee.current=""}),100)}function je(){_(""),ae(),setTimeout((function(){ae(),W.current&&(W.current.value=(0,k.Z)(new Date,"yyyy-MM-dd")),O.current&&(O.current.value=""),V.current&&(V.current.value="")}),100),Ze(),B.current.setData([])}return(0,T.jsxs)(T.Fragment,{children:[(de||ce)&&(0,T.jsx)(I.g,{}),(0,T.jsx)(C.Z,{title:"Petty Cash"}),(0,T.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"100%",height:"100%",flex:1,padding:"5px",background:"#F1F1F1"},children:[(0,T.jsxs)("div",{style:{display:"flex",alignItems:"center",columnGap:"5px",marginBottom:"10px"},children:[De?(0,T.jsx)(s.Z,{loading:De}):(0,T.jsx)(S.oi,{label:{title:"Search: ",style:{fontSize:"12px",fontWeight:"bold",width:"50px"}},input:{className:"search-input-up-on-key-down",type:"search",onKeyDown:function(e){("Enter"!==e.key&&"NumpadEnter"!==e.key||(e.preventDefault(),Se(e.currentTarget.value)),"ArrowDown"===e.key)&&(e.preventDefault(),document.querySelector(".grid-container").focus())},style:{width:"500px"}},icon:(0,T.jsx)(j.Z,{sx:{fontSize:"18px"}}),onIconClick:function(e){e.preventDefault(),F.current&&Se(F.current.value)},inputRef:F}),""===z&&(0,T.jsx)(l.Z,{sx:{height:"30px",fontSize:"11px"},variant:"contained",startIcon:(0,T.jsx)(d.Z,{sx:{width:15,height:15}}),id:"entry-header-save-button",onClick:function(){_("add")},children:"New"}),(0,T.jsx)(s.Z,{sx:{height:"30px",fontSize:"11px"},id:"save-entry-header",color:"primary",variant:"contained",type:"submit",onClick:function(){if(O.current&&""===O.current.value)return v().fire({position:"center",icon:"warning",title:"Please provide payee!",timer:1500}).then((function(e){(0,m.D)(300).then((function(){var e;null===(e=O.current)||void 0===e||e.focus()}))}));if(V.current&&""===V.current.value)return v().fire({position:"center",icon:"warning",title:"Please provide explanation!",timer:1500}).then((function(e){(0,m.D)(300).then((function(){var e;null===(e=V.current)||void 0===e||e.focus()}))}));var e=B.current.getData().map((function(e){return{purpose:e[0],amount:e[1],usage:e[2],accountID:e[3],sub_account:e[4],clientID:e[5],clientName:e[6],accountCode:e[7],accountShort:e[8],vatType:e[9],invoice:e[10]}}));if(e.length<=0)return v().fire({position:"center",icon:"warning",title:"Please provide transaction entry!",timer:1500});"edit"===z?(0,b.s)({isUpdate:!0,cb:function(t){var n,o,r,i;le({refNo:null===(n=G.current)||void 0===n?void 0:n.value,datePetty:null===(o=W.current)||void 0===o?void 0:o.value,payee:null===(r=O.current)||void 0===r?void 0:r.value,explanation:null===(i=V.current)||void 0===i?void 0:i.value,hasSelected:"edit"===z,pettyCash:e,userCodeConfirmation:t})}}):(0,b.L)({isConfirm:function(){var t,n,o,r;le({refNo:null===(t=G.current)||void 0===t?void 0:t.value,datePetty:null===(n=W.current)||void 0===n?void 0:n.value,payee:null===(o=O.current)||void 0===o?void 0:o.value,explanation:null===(r=V.current)||void 0===r?void 0:r.value,hasSelected:"edit"===z,pettyCash:e})}})},disabled:""===z,startIcon:(0,T.jsx)(f.Z,{sx:{width:15,height:15}}),loading:ce,children:"edit"===z?"Update":"Save"}),""!==z&&(0,T.jsx)(l.Z,{sx:{height:"30px",fontSize:"11px"},variant:"contained",startIcon:(0,T.jsx)(p.Z,{sx:{width:15,height:15}}),color:"error",onClick:function(){v().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, cancel it!"}).then((function(e){e.isConfirmed&&je()}))},children:"Cancel"})]}),(0,T.jsxs)("div",{style:{display:"flex",flexDirection:"row",width:"100%",borderBottom:"1px dashed  #334155",paddingBottom:"20px",gap:"50px",marginTop:"5px"},children:[(0,T.jsxs)("div",{style:{display:"flex",flexDirection:"column",rowGap:"10px"},children:[ie?(0,T.jsx)(s.Z,{loading:ie}):(0,T.jsx)(S.oi,{label:{title:"Ref. No. : ",style:{fontSize:"12px",fontWeight:"bold",width:"80px"}},input:{disabled:oe,type:"text",style:{width:"200px"},readOnly:!0,onKeyDown:function(e){var t;"NumpadEnter"!==e.code&&"Enter"!==e.code||(null===(t=W.current)||void 0===t||t.focus())}},icon:(0,T.jsx)(y.Z,{sx:{fontSize:"18px"}}),onIconClick:function(e){e.preventDefault(),ae()},inputRef:G}),(0,T.jsx)(S.oi,{label:{title:"Deposit Date: ",style:{fontSize:"12px",fontWeight:"bold",width:"80px"}},input:{defaultValue:(0,k.Z)(new Date,"yyyy-MM-dd"),className:"search-input-up-on-key-down",type:"date",style:{width:"200px"},disabled:oe,onKeyDown:function(e){var t;"NumpadEnter"!==e.code&&"Enter"!==e.code||(null===(t=O.current)||void 0===t||t.focus())}},inputRef:W})]}),(0,T.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column",rowGap:"10px"},children:[(0,T.jsx)(S.oi,{label:{title:"Payee : ",style:{fontSize:"12px",fontWeight:"bold",width:"100px"}},input:{disabled:oe,type:"text",style:{width:"400px"},onKeyDown:function(e){var t;"NumpadEnter"!==e.code&&"Enter"!==e.code||(null===(t=V.current)||void 0===t||t.focus())}},inputRef:O}),(0,T.jsx)(S.oi,{label:{title:"Explanation : ",style:{fontSize:"12px",fontWeight:"bold",width:"100px"}},input:{disabled:oe,type:"text",style:{flex:1},onKeyDown:function(e){var t;"NumpadEnter"!==e.code&&"Enter"!==e.code||(null===(t=U.current)||void 0===t||t.focus())}},inputRef:V})]})]}),(0,T.jsx)("div",{style:{display:"flex",flexDirection:"row",width:"100%",paddingTop:"20px",gap:"50px",borderRadius:"3px"},children:(0,T.jsxs)("div",{style:{display:"flex",flexDirection:"column",rowGap:"10px"},children:[he?(0,T.jsx)(s.Z,{loading:he}):(0,T.jsx)(L,{containerStyle:{width:"100%"},label:{title:"Transaction : ",style:{fontSize:"12px",fontWeight:"bold",width:"80px"}},DisplayMember:"Purpose",DataSource:null===ve||void 0===ve?void 0:ve.data.laodTranscation,disableInput:oe,inputRef:U,input:{style:{width:"100%",flex:1}},onChange:function(e,t){U.current&&(U.current.value=e.Purpose),X.current=e.Acct_Code,ee.current=e.Short},onKeydown:function(e){var t;"Enter"!==e.key&&"NumpadEnter"!==e.key||(e.preventDefault(),null===(t=H.current)||void 0===t||t.focus())}}),(0,T.jsxs)("div",{style:{display:"flex",columnGap:"20px"},children:[we?(0,T.jsx)(s.Z,{loading:we}):(0,T.jsx)(S.oi,{label:{title:"Usage : ",style:{fontSize:"12px",fontWeight:"bold",width:"80px"}},input:{disabled:oe,type:"text",style:{width:"450px"},onKeyDown:function(e){"NumpadEnter"!==e.code&&"Enter"!==e.code||ge(e.currentTarget.value)}},icon:(0,T.jsx)(y.Z,{sx:{fontSize:"18px"}}),onIconClick:function(e){e.preventDefault(),H.current&&ge(H.current.value)},inputRef:H}),(0,T.jsxs)("div",{style:{display:"flex"},children:[(0,T.jsx)("label",{style:{fontSize:"12px",fontWeight:"bold",width:"70px"},children:"Amount :"}),(0,T.jsx)(D.h3,{disabled:oe,getInputRef:Q,decimalScale:2,fixedDecimalScale:!0,style:{width:"200px"},onKeyDown:function(e){var t;"Enter"!==e.code&&"NumpadEnter"!==e.code||(e.currentTarget.value=function(e){if(""!==e&&null!==e){var t=parseFloat(e.replace(/,/g,""));return isNaN(t)?"0.00":e}return"0.00"}(e.currentTarget.value),null===(t=Y.current)||void 0===t||t.focus())},onBlur:function(e){""===e.currentTarget.value&&(e.currentTarget.value="0.00")},allowNegative:!1,thousandSeparator:!0,valueIsNumericString:!0})]})]}),(0,T.jsxs)("div",{style:{display:"flex",columnGap:"20px"},children:[(0,T.jsx)(S.lq,{containerStyle:{fontSize:"12px",fontWeight:"bold"},label:{title:"VAT Type",style:{width:"80px"}},select:{defaultValue:"NON-VAT",disabled:oe,style:{width:"100% !important",flex:1,height:"100% !important",padding:0,margin:0,cursor:"pointer"},onKeyDown:function(e){var t;"Enter"!==e.code&&"NumpadEnter"!==e.code||(null===(t=$.current)||void 0===t||t.focus())}},datasource:[{key:"NON-VAT"},{key:"VAT"}],values:"key",display:"key",selectRef:Y}),(0,T.jsx)(S.oi,{label:{title:"Invoice : ",style:{fontSize:"12px",fontWeight:"bold",width:"80px"}},input:{disabled:oe,type:"text",style:{width:"270px"},onKeyDown:function(e){"NumpadEnter"!==e.code&&"Enter"!==e.code||(e.preventDefault(),Ne())}},inputRef:$}),(0,T.jsx)(l.Z,{disabled:oe,color:"success",variant:"contained",style:{gridArea:"button",height:"22px",fontSize:"12px",width:"270px"},startIcon:(0,T.jsx)(d.Z,{}),onClick:function(){Ne()},children:"Save Transaction"})]})]})}),(0,T.jsx)("br",{}),(0,T.jsx)(Z.BW,{ref:B,width:"100%",height:"350px",columns:E,getSelectedItem:function(e,t,n,o){e?(U.current&&(U.current.value=e[0]),Q.current&&(Q.current.value=e[1]),H.current&&(H.current.value=e[6]),Y.current&&(Y.current.value=e[9]),$.current&&($.current.value=e[10]),ne.current=e[4],te.current=e[5],X.current=e[7],ee.current=e[8]):Ze()}}),ye,Ce]})]})}var L=(0,c.forwardRef)((function(e,t){var n=e.DisplayMember,o=e.DataSource,r=e.inputRef,a=e.disableInput,l=void 0!==a&&a,s=e.onKeydown,d=e.onChange,f=e.label,p=void 0===f?{title:"Transaction : ",style:{fontSize:"12px",fontWeight:"bold",width:"100px"}}:f,h=e.input,v=void 0===h?{width:"740px"}:h,x=e.containerStyle,y=(0,c.useState)(o),g=(0,i.Z)(y,2),w=g[0],b=g[1],C=(0,c.useState)([]),D=(0,i.Z)(C,2),k=D[0],N=D[1],Z=(0,c.useState)(!1),j=(0,i.Z)(Z,2),I=j[0],A=j[1],E=(0,c.useState)(0),P=(0,i.Z)(E,2),z=P[0],L=P[1],_=(0,c.useRef)(null);(0,c.useEffect)((function(){var e,t=null===(e=_.current)||void 0===e?void 0:e.children[z];t&&t.scrollIntoView({behavior:"smooth",block:"nearest"})}),[z]);return(0,c.useImperativeHandle)(t,(function(){return{setDataSource:function(e){b(e)}}})),(0,T.jsxs)("div",{style:{flex:1},children:[(0,T.jsx)(S.oi,{containerStyle:x,label:p,input:(0,u.Z)((0,u.Z)({},v),{},{disabled:l,type:"text",onKeyDown:function(e){if("Tab"===e.key&&(0,M.flushSync)((function(){A(!1),N([])})),"ArrowDown"===e.key)e.preventDefault(),L((function(e){return Math.min(e+1,k.length-1)}));else if("ArrowUp"===e.key)e.preventDefault(),L((function(e){return Math.max(e-1,0)}));else if(("Enter"===e.key||"NumpadEnter"===e.key)&&(e.preventDefault(),k.length>0)){var t=k[z];d(t,e),A(!1)}setTimeout((function(){s&&s(e)}),150)},onChange:function(e){var t=e.target.value;if(t.trim()){var o=w.filter((function(e){return e[n].toLowerCase().includes(t.toLowerCase())}));N(o),A(!0)}else N([]),A(!1)},onFocus:function(e){var t;e.preventDefault(),null===(t=e.currentTarget)||void 0===t||t.focus(),A(!0),N(w),r.current&&r.current.focus()},onBlur:function(e){e.relatedTarget&&"LI"===e.relatedTarget.tagName?(0,m.D)(250).then((function(){A(!1),N([])})):(A(!1),N([]))}}),icon:(0,T.jsx)(R.Z,{sx:{fontSize:"18px"}}),onIconClick:function(e){r.current&&r.current.focus()},inputRef:r}),I&&k.length>0&&(0,T.jsx)("ul",{className:"suggestions",ref:_,children:k.map((function(e,t){return(0,T.jsx)("li",{tabIndex:0,onClick:function(t){A(!1),d(e,t)},className:t===z?"active":"",onMouseEnter:function(e){e.preventDefault(),L(Math.min(t,k.length-1))},children:e[n]},t)}))}),(0,T.jsx)("style",{children:"\n          .suggestions {\n            margin-top: 0;\n            padding: 0;\n            list-style: none;\n            max-height: 150px;\n            overflow-y: auto;\n            position:absolute;\n            z-index:100;\n            background:white;\n            width:350px;\n            border:1px solid #e5e7eb;\n            box-shadow: 0px 23px 32px -17px rgba(0,0,0,0.75);\n          }\n          .suggestions li {\n            padding:3px 10px;\n            cursor: pointer;\n            font-size:14px;\n          }\n          .suggestions li.active {\n            background-color: #e2e8f0;\n          }\n      \n        "})]})})),_=(0,c.forwardRef)((function(e,t){var n=e.DisplayMember,o=e.DataSource,r=e.inputRef,a=e.disableInput,l=void 0!==a&&a,s=e.onKeydown,d=e.onChange,f=e.label,p=void 0===f?{title:"Transaction : ",style:{fontSize:"12px",fontWeight:"bold",width:"100px"}}:f,h=e.input,v=void 0===h?{width:"740px"}:h,x=e.containerStyle,y=(0,c.useState)(o),g=(0,i.Z)(y,2),w=g[0],b=g[1],C=(0,c.useState)([]),D=(0,i.Z)(C,2),k=D[0],N=D[1],Z=(0,c.useState)(!1),j=(0,i.Z)(Z,2),I=j[0],A=j[1],E=(0,c.useState)(0),P=(0,i.Z)(E,2),z=P[0],L=P[1],_=(0,c.useRef)(null);(0,c.useEffect)((function(){var e,t=null===(e=_.current)||void 0===e?void 0:e.children[z];t&&t.scrollIntoView({behavior:"smooth",block:"nearest"})}),[z]);var K=function(e){if(!e)return e;var t=e.split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")},B=function(e){return e.replace(/,/g,"")},F=function(e){if(e.trim()){var t=w.filter((function(t){return t[n].toLowerCase().includes(e.toLowerCase())}));N(t),A(!0)}else N([]),A(!1)};return(0,c.useImperativeHandle)(t,(function(){return{setDataSource:function(e){b(e)}}})),(0,T.jsxs)("div",{style:{flex:1},children:[(0,T.jsx)(S.oi,{containerStyle:x,label:p,input:(0,u.Z)((0,u.Z)({},v),{},{disabled:l,type:"text",onKeyDown:function(e){if("Tab"===e.key&&(0,M.flushSync)((function(){A(!1),N([])})),"ArrowDown"===e.key)e.preventDefault(),L((function(e){return Math.min(e+1,k.length-1)}));else if("ArrowUp"===e.key)e.preventDefault(),L((function(e){return Math.max(e-1,0)}));else if(("Enter"===e.key||"NumpadEnter"===e.key)&&(e.preventDefault(),k.length>0)){var t=k[z];d(t,e),A(!1)}setTimeout((function(){s&&s(e)}),150)},onChange:function(e){var t=e.target.value;t=B(t);if(""===(t=B(t))||/^-?\d+(,\d{3})*(\.\d*)?$/.test(t))e.target.value=K(t);else{var n=t.match(/\d+/g);if(n){var o=n.join("");e.target.value=K(o)}else e.target.value="0"}F(e.target.value)},onFocus:function(e){var t;e.preventDefault(),null===(t=e.currentTarget)||void 0===t||t.focus(),A(!0),N(w),r.current&&r.current.focus()},onBlur:function(e){!function(e,t){var n=B(e);n=function(e){return e.includes(".")?1===e.split(".")[1].length?e+"0":e:""===e?"0.00":e+".00"}(n),t.target.value=K(n)}(e.currentTarget.value,e),e.relatedTarget&&"LI"===e.relatedTarget.tagName?(0,m.D)(250).then((function(){A(!1),N([])})):(A(!1),N([]))}}),icon:(0,T.jsx)(R.Z,{sx:{fontSize:"18px"}}),onIconClick:function(e){r.current&&r.current.focus()},inputRef:r}),I&&k.length>0&&(0,T.jsx)("ul",{className:"suggestions",ref:_,children:k.map((function(e,t){return(0,T.jsx)("li",{tabIndex:0,onClick:function(t){A(!1),d(e,t)},className:t===z?"active":"",onMouseEnter:function(e){e.preventDefault(),L(Math.min(t,k.length-1))},children:e[n]},t)}))}),(0,T.jsx)("style",{children:"\n          .suggestions {\n            margin-top: 0;\n            padding: 0;\n            list-style: none;\n            max-height: 150px;\n            overflow-y: auto;\n            position:absolute;\n            z-index:100;\n            background:white;\n            width:350px;\n            border:1px solid #e5e7eb;\n            box-shadow: 0px 23px 32px -17px rgba(0,0,0,0.75);\n          }\n          .suggestions li {\n            padding:3px 10px;\n            cursor: pointer;\n            font-size:14px;\n          }\n          .suggestions li.active {\n            background-color: #e2e8f0;\n          }\n      \n        "})]})}))},93263:function(e,t,n){var o,r=n(29439),i=n(74165),a=n(15861),u=n(72791),c=n(91933),l=n(3380),s=n(81582),d=n(54164),f=n(80184);function p(e,t,n){return(o=o||(0,a.Z)((0,i.Z)().mark((function e(t,n,o){var r,a=arguments;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>3&&void 0!==a[3]?a[3]:"",e.abrupt("return",t.get("".concat(null===o||void 0===o?void 0:o.url,"?").concat(null===o||void 0===o?void 0:o.queryUrlName,"=").concat(r),{headers:{Authorization:"Bearer ".concat(null===n||void 0===n?void 0:n.accessToken)}}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t.Z=function(e){var t,n,o=e.link,h=e.uniqueId,v=e.queryKey,x=e.responseDataKey,y=e.columns,g=e.onSelected,w=void 0===g?function(){}:g,m=e.onRemoveSelected,b=void 0===m?function(){}:m,C=e.onSuccess,S=void 0===C?function(){}:C,D=e.searchRef,k=e.onCellKeyDown,N=e.onCloseFunction,Z=void 0===N?function(){}:N,j=e.CustomizeAxios,I=void 0===j?p:j,R=e.isRowSelectable,M=e.getCellClassName,T=(0,u.useContext)(l.V),A=T.myAxios,E=T.user,P=(0,u.useState)(!1),z=(0,r.Z)(P,2),L=z[0],_=z[1],K=(0,u.useState)([]),B=(0,r.Z)(K,2),F=B[0],q=B[1];function G(){return(t=t||(0,a.Z)((0,i.Z)().mark((function e(){var t,n=arguments;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:"",e.next=3,I(A,E,o,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var W=(0,c.useQuery)({queryKey:v,queryFn:function(){return(n=n||(0,a.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t=e;q(t.data[x]),S(t)},refetchOnWindowFocus:!1}),O=W.isLoading,V=W.refetch;return{show:L,rows:F,isLoading:O,openModal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";(0,d.flushSync)((function(){_(!0)})),null!==D&&void 0!==D&&D.current&&(D.current.value=e,G(e).then((function(e){if(null===e||void 0===e||!e.data.success)return alert("Error : ".concat(null===e||void 0===e?void 0:e.data.message));q(e.data[x]),null!==D&&void 0!==D&&D.current&&D.current.focus()})))},closeModal:function(){var e;(_(!1),Z)&&Z(null===D||void 0===D||null===(e=D.current)||void 0===e?void 0:e.value)},ModalComponent:(0,f.jsx)(s.ZP,{getCellClassName:M,searchRef:D,showModal:L,onCloseModal:function(){var e;(_(!1),Z)&&Z(null===D||void 0===D||null===(e=D.current)||void 0===e?void 0:e.value)},onClickCloseIcon:function(){var e;(_(!1),Z)&&Z(null===D||void 0===D||null===(e=D.current)||void 0===e?void 0:e.value)},searchOnChange:function(e){},onSearchKeyEnter:function(e){G(e).then((function(e){if(null===e||void 0===e||!e.data.success)return alert("Error : ".concat(null===e||void 0===e?void 0:e.data.message));q(e.data[x])}))},onCellKeyDown:k,height:300,isLoading:O,queryKey:v,columns:y,onSelectionChange:function(e,t){if(e.length<=0)return b(t);var n=new Set(e),o=t.filter((function(e){return n.has(e[h].toString())}));o.length<=0||w(o,t)},id:h,rows:F,setRows:q,isRowSelectable:R}),refetch:V}}},64230:function(e,t,n){n.d(t,{L:function(){return c},s:function(){return u}});var o=n(74165),r=n(15861),i=n(21830),a=n.n(i);function u(e){var t;a().fire({title:"Are you sure!",html:null!==e&&void 0!==e&&e.text?null===e||void 0===e?void 0:e.text:e.isUpdate?"Are you sure you want to make this change?":"Are you sure you want to delete this?",icon:"warning",input:"text",inputAttributes:{autocapitalize:"off"},showCancelButton:!0,confirmButtonText:"Save",confirmButtonColor:"green",showLoaderOnConfirm:!0,preConfirm:function(n){return(t=t||(0,r.Z)((0,o.Z)().mark((function t(n){return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{e.cb(n)}catch(o){a().showValidationMessage("\n            Request failed: ".concat(o,"\n          "))}case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)},allowOutsideClick:function(){return!a().isLoading()}}).then((function(t){if(t.isConfirmed&&e.isConfirm)return e.isConfirm();e.isDeclined&&e.isDeclined()}))}function c(e){a().fire({title:"Are you sure?",text:null!==e&&void 0!==e&&e.text?null===e||void 0===e?void 0:e.text:"Do you want to proceed with saving?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, save it!"}).then((function(t){if(t.isConfirmed&&e.isConfirm)return e.isConfirm();e.isDeclined&&e.isDeclined()}))}}}]);
//# sourceMappingURL=1441.679e36de.chunk.js.map