"use strict";(self.webpackChunkupward=self.webpackChunkupward||[]).push([[2500,2074],{12964:function(e,t,n){n.r(t),n.d(t,{default:function(){return L},reducer:function(){return A}});var o=n(93433),i=n(74165),a=n(15861),r=n(29439),c=n(4942),l=n(1413),s=n(72791),u=n(27391),d=n(36151),p=n(16088),f=n(39709),h=n(42419),m=n(29823),y=n(21830),x=n.n(y),g=n(3380),v=n(91933),b=n(93263),k=n(79018),w=n(84669),D=n(95643),N=n(5519),S=n(37209),C=n(16386),Z=(n(71268),n(8185)),I=n(64230),j=n(54164),E=n(80184),T={sub_refNo:"",refNo:"",dateEntry:(0,C.Z)(new Date,"yyyy-MM-dd"),explanation:"",particulars:"",totalDebit:"",totalCredit:"",totalBalance:"",jobAutoExp:!1,jobTransactionDate:new Date,jobType:"",search:"",cashMode:""},A=function(e,t){return"UPDATE_FIELD"===t.type?(0,l.Z)((0,l.Z)({},e),{},(0,c.Z)({},t.field,t.value)):e},F=[{key:"code",label:"Code",width:150,type:"text"},{key:"acctName",label:"Account Name",width:400,type:"text"},{key:"subAcctName",label:"Sub Account",width:170,type:"text"},{key:"ClientName",label:"Name",width:400,type:"text"},{key:"debit",label:"Debit",width:120,type:"number"},{key:"credit",label:"Credit",width:120,type:"number"},{key:"checkNo",label:"Check No",width:120,type:"text"},{key:"checkDate",label:"Check Date",width:120,type:"date"},{key:"TC_Code",label:"TC",width:120,type:"text"},{key:"remarks",label:"Remarks",width:400,type:"text"},{key:"Payto",label:"Payto",width:400,type:"text"},{key:"vatType",label:"Vat Type",width:100,type:"select",options:[{key:"NON-VAT"},{key:"VAT"}]},{key:"invoice",label:"Invoice",width:200,type:"text"},{key:"TempID",label:"TempId",hide:!0},{key:"IDNo",label:"I.D.",width:300,hide:!0},{key:"BranchCode",headerName:"BranchCode",width:300,hide:!0},{key:"addres",headerName:"addres",hide:!0},{key:"subAcct",headerName:"subAcct",hide:!0}];function L(){var e,t,n,p,y,L=(0,s.useContext)(g.V),R=L.myAxios,M=L.user,U=(0,s.useReducer)(A,T),q=(0,r.Z)(U,2),O=q[0],z=q[1],B=(0,s.useRef)(null),K=(0,s.useRef)(null),V=(0,s.useRef)(null),W=(0,s.useRef)(null),Y=(0,s.useRef)(null),G=(0,s.useRef)(null),J=(0,s.useState)(!1),X=(0,r.Z)(J,2),H=X[0],Q=X[1],$=(0,s.useState)(""),ee=(0,r.Z)($,2),te=ee[0],ne=ee[1],oe=(0,s.useState)([]),ie=(0,r.Z)(oe,2),ae=ie[0],re=ie[1],ce=(0,s.useState)(null),le=(0,r.Z)(ce,2),se=le[0],ue=le[1],de=(0,s.useState)(null),pe=(0,r.Z)(de,2),fe=pe[0],he=pe[1],me=(0,v.useQuery)({queryKey:"general-journal-id-generator",queryFn:function(){return(e=e||(0,a.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.get("/task/accounting/cash-disbursement/generate-id",{headers:{Authorization:"Bearer ".concat(null===M||void 0===M?void 0:M.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},refetchOnWindowFocus:!1,onSuccess:function(e){var t=e;z({type:"UPDATE_FIELD",field:"refNo",value:t.data.generatedId[0].id}),z({type:"UPDATE_FIELD",field:"sub_refNo",value:t.data.generatedId[0].id})}}),ye=me.isLoading,xe=me.refetch,ge=(0,b.Z)({link:{url:"/task/accounting/general-journal/get-chart-account",queryUrlName:"chartAccountSearch"},columns:[{field:"Acct_Code",headerName:"Account Code",width:130},{field:"Acct_Title",headerName:"Account Title.",width:250},{field:"Short",headerName:"Short",flex:1}],queryKey:"get-chart-account",uniqueId:"Acct_Code",responseDataKey:"getChartOfAccount",onSelected:function(e,t){var n=Object.keys(se)[0];re((function(t){return t=t.map((function(t){return Object.keys(t).includes(n)&&(t=(0,c.Z)({},n,(0,l.Z)((0,l.Z)({},t[n]),{},{code:e[0].Acct_Code,acctName:e[0].Acct_Title}))),t}))})),ue((function(t){return(0,c.Z)({},n,(0,l.Z)((0,l.Z)({},t[n]),{},{code:e[0].Acct_Code,acctName:e[0].Acct_Title}))})),(0,k.D)(250).then((function(){var e=document.querySelector(".row-".concat(n,".col-3"));null===e||void 0===e||e.focus()})),we()},searchRef:G}),ve=ge.ModalComponent,be=ge.openModal,ke=ge.isLoading,we=ge.closeModal,De=(0,b.Z)({link:{url:"/task/accounting/search-pdc-policy-id",queryUrlName:"searchPdcPolicyIds"},columns:[{field:"Type",headerName:"Type",width:130},{field:"IDNo",headerName:"ID No.",width:200},{field:"Name",headerName:"Name",flex:1},{field:"ID",headerName:"ID",hide:!0}],queryKey:"get-policyId-ClientId-RefId",uniqueId:"IDNo",responseDataKey:"clientsId",onSelected:function(e){var t=Object.keys(se)[0];re((function(n){return n=n.map((function(n){return Object.keys(n).includes(t)&&(n=(0,c.Z)({},t,(0,l.Z)((0,l.Z)({},n[t]),{},{ClientName:e[0].Name,IDNo:e[0].IDNo,subAcct:e[0].sub_account,subAcctName:e[0].ShortName,address:e[0].address}))),n}))})),ue((function(n){return(0,c.Z)({},t,(0,l.Z)((0,l.Z)({},n[t]),{},{ClientName:e[0].Name,IDNo:e[0].IDNo,subAcct:e[0].sub_account,subAcctName:e[0].ShortName,address:e[0].address}))})),(0,k.D)(250).then((function(){var e=document.querySelector(".row-".concat(t,".col-4"));null===e||void 0===e||e.focus()})),Ze()},searchRef:Y}),Ne=De.ModalComponent,Se=De.openModal,Ce=De.isLoading,Ze=De.closeModal,Ie=(0,b.Z)({link:{url:"/task/accounting/general-journal/get-transaction-account",queryUrlName:"transactionCodeSearch"},columns:[{field:"Code",headerName:"Code",width:130},{field:"Description",headerName:"Description",flex:1}],queryKey:"get-transaction-account",uniqueId:"Code",responseDataKey:"getTransactionAccount",onSelected:function(e){var t=Object.keys(se)[0];re((function(n){return n=n.map((function(n){return Object.keys(n).includes(t)&&(n=(0,c.Z)({},t,(0,l.Z)((0,l.Z)({},n[t]),{},{TC_Code:e[0].Code,TC_Desc:e[0].Description}))),n}))})),ue((function(n){return(0,c.Z)({},t,(0,l.Z)((0,l.Z)({},n[t]),{},{TC_Code:e[0].Code,TC_Desc:e[0].Description}))})),(0,k.D)(250).then((function(){var e=document.querySelector(".row-".concat(t,".col-9"));null===e||void 0===e||e.focus()})),Ae()},searchRef:Y}),je=Ie.ModalComponent,Ee=Ie.openModal,Te=Ie.isLoading,Ae=Ie.closeModal,Fe=(0,b.Z)({link:{url:"/task/accounting/search-pdc-policy-id",queryUrlName:"searchPdcPolicyIds"},columns:[{field:"Type",headerName:"Type",width:130},{field:"IDNo",headerName:"ID No.",width:200},{field:"Name",headerName:"Name",flex:1},{field:"ID",headerName:"ID",hide:!0}],queryKey:"get-policyId-ClientId-RefId",uniqueId:"IDNo",responseDataKey:"clientsId",onSelected:function(e){var t=Object.keys(se)[0];re((function(n){return n=n.map((function(n){return Object.keys(n).includes(t)&&(n=(0,c.Z)({},t,(0,l.Z)((0,l.Z)({},n[t]),{},{Payto:e[0].Name}))),n}))})),ue((function(n){return(0,c.Z)({},t,(0,l.Z)((0,l.Z)({},n[t]),{},{Payto:e[0].Name}))})),(0,k.D)(250).then((function(){var e=document.querySelector(".row-".concat(t,".col-11"));null===e||void 0===e||e.focus()})),Re()},searchRef:Y}),Le=Fe.ModalComponent,_e=Fe.openModal,Pe=Fe.isLoading,Re=Fe.closeModal,Me=(0,v.useMutation)({mutationKey:"get-selected-search-general-journal",mutationFn:function(e){return(t=t||(0,a.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.post("/task/accounting/cash-disbursement/get-selected-search-cash-disbursement",t,{headers:{Authorization:"Bearer ".concat(null===M||void 0===M?void 0:M.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t=e.data.selectedCashDisbursement,n=t[0],o=n.explanation,i=n.dateEntry,a=n.refNo,r=n.particulars;z({type:"UPDATE_FIELD",field:"sub_refNo",value:a}),z({type:"UPDATE_FIELD",field:"refNo",value:a}),z({type:"UPDATE_FIELD",field:"dateEntry",value:i}),z({type:"UPDATE_FIELD",field:"explanation",value:o}),z({type:"UPDATE_FIELD",field:"particulars",value:r});var l=t.map((function(e,t){return e.credit=parseFloat(e.credit.replace(/,/g,"")).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),e.debit=parseFloat(e.debit.replace(/,/g,"")).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),"1.01.10"===e.code?e.checkDate=(0,C.Z)(new Date(e.checkDate),"yyyy-MM-dd"):e.checkDate="",(0,c.Z)({},t,e)}));re(l)}}),Ue=Me.mutate,qe=Me.isLoading,Oe=(0,b.Z)({link:{url:"/task/accounting/cash-disbursement/search-cash-disbursement",queryUrlName:"searchCashDisbursement"},columns:[{field:"Date_Entry",headerName:"Date",width:130},{field:"Source_No",headerName:"Ref No.",width:250},{field:"Explanation",headerName:"Explanation",flex:1}],queryKey:"search-cash-disbursement",uniqueId:"Source_No",responseDataKey:"search",onSelected:function(e,t){Ue({Source_No:e[0].Source_No}),ne("update"),Ve()},onCloseFunction:function(e){},searchRef:G}),ze=Oe.ModalComponent,Be=Oe.openModal,Ke=Oe.isLoading,Ve=Oe.closeModal,We=(0,v.useMutation)({mutationKey:"add-cash-disbursement",mutationFn:function(e){return(n=n||(0,a.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.post("/task/accounting/cash-disbursement/add-cash-disbursement",t,{headers:{Authorization:"Bearer ".concat(null===M||void 0===M?void 0:M.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t=e;if(t.data.success){(0,Z.setNewStateValue)(z,T),xe();var n=F.reduce((function(e,t){return e[t.key]="",e}),{});return re([(0,c.Z)({},"0",n)]),x().fire({position:"center",icon:"success",title:t.data.message,timer:1500})}return x().fire({position:"center",icon:"warning",title:t.data.message,timer:1500})}}),Ye=We.mutate,Ge=We.isLoading,Je=(0,v.useMutation)({mutationKey:"void-cash-disbursement",mutationFn:function(e){return(p=p||(0,a.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.post("/task/accounting/cash-disbursement/void-cash-disbursement",t,{headers:{Authorization:"Bearer ".concat(null===M||void 0===M?void 0:M.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t=e;if(t.data.success){(0,Z.setNewStateValue)(z,T),xe();var n=F.reduce((function(e,t){return e[t.key]="",e}),{});return re([(0,c.Z)({},"0",n)]),x().fire({position:"center",icon:"success",title:t.data.message,timer:1500})}return x().fire({position:"center",icon:"warning",title:t.data.message,timer:1500})}}),Xe=Je.mutate,He=Je.isLoading,Qe=(0,v.useMutation)({mutationKey:"get-selected-search-general-journal",mutationFn:function(e){return(y=y||(0,a.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.post("/task/accounting/cash-disbursement/print",t,{headers:{Authorization:"Bearer ".concat(null===M||void 0===M?void 0:M.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t=e;console.log(t),(0,j.flushSync)((function(){localStorage.removeItem("printString"),localStorage.setItem("dataString",JSON.stringify(t.data.print.PrintTable)),localStorage.setItem("paper-width","8.5in"),localStorage.setItem("paper-height","11in"),localStorage.setItem("module","cash-disbursement"),localStorage.setItem("state",JSON.stringify(t.data.print.PrintPayeeDetails)),localStorage.setItem("column",JSON.stringify([{datakey:"Account",header:"ACCOUNT",width:"200px"},{datakey:"Identity",header:"IDENTITY",width:"277px"},{datakey:"Debit",header:"DEBIT",width:"100px"},{datakey:"Credit",header:"CREDIT",width:"100px"}])),localStorage.setItem("title","UMIS"===(null===M||void 0===M?void 0:M.department)?"UPWARD MANAGEMENT INSURANCE SERVICES\n":"UPWARD CONSULTANCY SERVICES AND MANAGEMENT INC.\n")})),window.open("/dashboard/print","_blank")}}),$e=Qe.mutate,et=Qe.isLoading;(0,s.useEffect)((function(){if(ae.length>0){var e=null===ae||void 0===ae?void 0:ae.map((function(e){return Object.values(e)[0]})),t=e.reduce((function(e,t){var n=0;return isNaN(parseFloat(t.debit.replace(/,/g,"")))||(n=parseFloat(t.debit.replace(/,/g,""))),e+n}),0),n=e.reduce((function(e,t){var n=0;return isNaN(parseFloat(t.credit.replace(/,/g,"")))||(n=parseFloat(t.credit.replace(/,/g,""))),e+n}),0);z({type:"UPDATE_FIELD",field:"totalDebit",value:t.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}),z({type:"UPDATE_FIELD",field:"totalCredit",value:n.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}),z({type:"UPDATE_FIELD",field:"totalBalance",value:(t-n).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})})}else z({type:"UPDATE_FIELD",field:"totalDebit",value:"0.00"}),z({type:"UPDATE_FIELD",field:"totalCredit",value:"0.00"}),z({type:"UPDATE_FIELD",field:"totalBalance",value:"0.00"})}),[ae]);var tt=""===te;return qe||ye||Ce||ke||Pe||Te?(0,E.jsx)("div",{children:"Loading..."}):(0,E.jsxs)("div",{children:[H&&(0,E.jsx)(P,{title:"Add New Row?",onConfirmed:function(){!function(){var e=F.reduce((function(e,t){return e[t.key]="",e}),{}),t=Object.keys(ae),n=String(isNaN(parseInt(t[t.length-1])+1)?0:parseInt(t[t.length-1])+1),i=[].concat((0,o.Z)(ae),[(0,c.Z)({},n,e)]);re(i),(0,k.D)(250).then((function(){ue(i),he(n),setTimeout((function(){var e=document.querySelector(".row-".concat(n,".col-0"));e&&e.focus()}),100)}))}(),Q(!1)},onDeclined:function(){Q(!1)},onClose:function(){Q(!1)}}),(0,E.jsx)("div",{style:{display:"flex",alignItems:"center",columnGap:"5px"},children:(0,E.jsxs)("div",{style:{display:"flex",alignItems:"center",columnGap:"5px"},children:[Ke?(0,E.jsx)(f.Z,{loading:Ke}):(0,E.jsx)(u.Z,{label:"Search",size:"small",name:"search",onKeyDown:function(e){if("Enter"===e.code||"NumpadEnter"===e.code)return e.preventDefault(),Be(e.target.value)},InputProps:{style:{height:"27px",fontSize:"14px"}},sx:{width:"300px",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}}),""===te&&(0,E.jsx)(d.Z,{sx:{height:"30px",fontSize:"11px"},variant:"contained",startIcon:(0,E.jsx)(h.Z,{sx:{width:15,height:15}}),id:"entry-header-save-button",onClick:function(){ne("add")},color:"primary",children:"New"}),(0,E.jsx)(f.Z,{sx:{height:"30px",fontSize:"11px"},loading:Ge,disabled:""===te,onClick:function(){if(""===O.refNo)return x().fire({position:"center",icon:"warning",title:"Please provide reference number!",timer:1500});if(""===O.explanation)return x().fire({position:"center",icon:"warning",title:"Please provide explanation!",timer:1500}).then((function(){(0,k.D)(300).then((function(){var e;null===(e=V.current)||void 0===e||e.focus()}))}));if(""===O.totalDebit&&""===O.totalCredit||"0.00"===O.totalDebit&&"0.00"===O.totalCredit)return x().fire({position:"center",icon:"warning",title:"Total Debit and Credit amount must not be zero(0), please double check the entries",timer:1500}).then((function(){(0,k.D)(300).then((function(){}))}));if(O.totalDebit!==O.totalCredit)return x().fire({position:"center",icon:"warning",title:"Total Debit and Credit amount must be balance, please double check the entries",timer:1500}).then((function(){(0,k.D)(300).then((function(){}))}));var e=ae.map((function(e){return Object.values(e)[0]})).filter((function(e){return""!==e.code}));"update"===te?(0,I.s)({isUpdate:!0,cb:function(t){Ye({hasSelected:"update"===te,refNo:O.refNo,dateEntry:O.dateEntry,explanation:O.explanation,particulars:O.particulars,cashDisbursement:e,userCodeConfirmation:t})}}):(0,I.L)({isConfirm:function(){Ye({hasSelected:"update"===te,refNo:O.refNo,dateEntry:O.dateEntry,explanation:O.explanation,particulars:O.particulars,cashDisbursement:e})}})},color:"success",variant:"contained",children:"Save"}),""!==te&&(0,E.jsx)(f.Z,{sx:{height:"30px",fontSize:"11px"},variant:"contained",startIcon:(0,E.jsx)(m.Z,{sx:{width:15,height:15}}),color:"error",onClick:function(){x().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, cancel it!"}).then((function(e){if(e.isConfirmed){ne(""),(0,Z.setNewStateValue)(z,T),xe();var t=F.reduce((function(e,t){return e[t.key]="",e}),{});re([(0,c.Z)({},"0",t)])}}))},disabled:""===te,children:"Cancel"}),(0,E.jsx)(f.Z,{sx:{height:"30px",fontSize:"11px",background:D.Z[500],":hover":{background:D.Z[600]}},onClick:function(){(0,I.s)({isUpdate:!1,text:"Are you sure you want to void ".concat(O.refNo),cb:function(e){Xe({refNo:O.refNo,dateEntry:O.dateEntry,userCodeConfirmation:e})}})},loading:He,disabled:"update"!==te,variant:"contained",startIcon:(0,E.jsx)(w.Z,{sx:{width:20,height:20}}),children:"Void"}),(0,E.jsx)(f.Z,{loading:et,disabled:"update"!==te,id:"basic-button","aria-haspopup":"true",onClick:function(){$e({Source_No:O.refNo})},sx:{height:"30px",fontSize:"11px",color:"white",backgroundColor:N.Z[600],"&:hover":{backgroundColor:N.Z[700]}},children:"Print"})]})}),(0,E.jsxs)("div",{style:{display:"flex",marginBottom:"10px"},children:[(0,E.jsxs)("fieldset",{style:{border:"1px solid #cbd5e1",borderRadius:"5px",position:"relative",flex:1,height:"auto",display:"flex",marginTop:"10px",gap:"10px",padding:"15px",flexDirection:"column"},children:[ye?(0,E.jsx)(f.Z,{loading:ye}):(0,E.jsx)(S.oi,{label:{title:"Reference CV- : ",style:{fontSize:"12px",fontWeight:"bold",width:"100px"}},input:{disabled:tt,type:"text",style:{width:"190px"},readOnly:!0,value:O.refNo,name:"refNo",onKeyDown:function(e){var t;"NumpadEnter"!==e.code&&"Enter"!==e.code||(null===(t=K.current)||void 0===t||t.focus())}},inputRef:B}),(0,E.jsx)(S.oi,{label:{title:"Date : ",style:{fontSize:"12px",fontWeight:"bold",width:"100px"}},input:{disabled:tt,type:"date",name:"dateEntry",value:O.dateEntry,style:{width:"190px"},onKeyDown:function(e){var t;"NumpadEnter"!==e.code&&"Enter"!==e.code||(null===(t=V.current)||void 0===t||t.focus())},onChange:function(e){z({type:"UPDATE_FIELD",field:"dateEntry",value:e.target.value})}},inputRef:K}),(0,E.jsx)(S.oi,{label:{title:"Explanation : ",style:{fontSize:"12px",fontWeight:"bold",width:"100px"}},input:{disabled:tt,type:"text",style:{flex:1},name:"explanation",value:O.explanation,onChange:function(e){z({type:"UPDATE_FIELD",field:"explanation",value:e.target.value})},onKeyDown:function(e){var t;"NumpadEnter"!==e.code&&"Enter"!==e.code||(null===(t=W.current)||void 0===t||t.focus())}},inputRef:V}),(0,E.jsx)(S.Fz,{label:{title:"Particulars : ",style:{fontSize:"12px",fontWeight:"bold",width:"100px"}},textarea:{rows:4,disabled:tt,style:{flex:1},name:"particulars",value:O.particulars,onKeyDown:function(e){"NumpadEnter"===e.code||e.code},onChange:function(e){z({type:"UPDATE_FIELD",field:"particulars",value:e.target.value})}},_inputRef:W})]}),(0,E.jsxs)("fieldset",{style:{border:"1px solid #cbd5e1",borderRadius:"5px",position:"relative",width:"400px",height:"auto",display:"flex",marginTop:"10px",gap:"10px",padding:"15px"},children:[(0,E.jsx)("div",{style:{alignItems:"center",display:"flex",textAlign:"center",width:"100px"},children:(0,E.jsxs)("p",{style:{margin:0,padding:0,color:"black",display:"flex",flexDirection:"column"},children:[(0,E.jsx)("span",{style:{fontSize:"12px"},children:"Total Rows:"})," ",(0,E.jsx)("strong",{children:ae.length})]})}),(0,E.jsxs)("div",{style:{display:"flex",justifyContent:"space-around",flexDirection:"column",flex:1},children:[(0,E.jsxs)("p",{style:{margin:0,padding:0,color:"black"},children:[(0,E.jsx)("span",{style:{fontSize:"12px"},children:"Total Debit:"})," ",(0,E.jsx)("strong",{children:O.totalDebit})]}),(0,E.jsxs)("p",{style:{margin:0,padding:0,color:"black"},children:[(0,E.jsx)("span",{style:{fontSize:"12px"},children:"Total Credit:"})," ",(0,E.jsx)("strong",{children:O.totalCredit})]}),(0,E.jsxs)("p",{style:{margin:0,padding:0,color:"black"},children:[(0,E.jsx)("span",{style:{fontSize:"12px"},children:"Balance:"})," ",(0,E.jsx)("strong",{style:{color:parseFloat(O.totalBalance.replace(/,/g,""))>0?"red":"black"},children:O.totalBalance})]})]})]})]}),(0,E.jsx)(_,{isEdited:fe,setIsEdited:he,rowEdited:se,setRowEdited:ue,mode:"add",data:ae,setData:re,setShowDialog:Q,columns:F,openTransactionAccount:Ee,openPolicyIdPayTo:_e,openPolicyIdClientIdRefId:Se,openChartAccountSearch:be,handleRowSave:function(e){if(""===se[e].code){alert("Account Code is required");var t=document.querySelector(".row-".concat(e,".col-0"));return t&&t.focus(),!1}if(""===se[e].ClientName){alert("Name is required");var n=document.querySelector(".row-".concat(e,".col-3"));return n&&n.focus(),!1}if(se[e].credit===se[e].debit){alert("Credit and Debit cannot be the same. They must have a difference.");var i=document.querySelector(".row-".concat(e,".col-4"));return i&&i.focus(),!1}if(""===se[e].TC_Code){alert("TC is required");var a=document.querySelector(".row-".concat(e,".col-8"));return a&&a.focus(),!1}if("VAT"===se[e].vatType&&"1.06.02"!==se[e].code){var r=parseFloat(se[e].credit.replace(/,/g,"")),s=parseFloat(se[e].debit.replace(/,/g,"")),u=0,d=F.reduce((function(e,t){return e[t.key]="",e}),{});0!==s?(u=s/1.12,re((function(t){return t=t.map((function(t){return Object.keys(t).includes(e)&&(t=(0,c.Z)({},e,(0,l.Z)((0,l.Z)({},t[e]),{},{debit:u.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}))),t}))})),ue((function(t){return(0,c.Z)({},e,(0,l.Z)((0,l.Z)({},t[e]),{},{debit:u.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}))}))):(u=r/1.12,re((function(t){return t=t.map((function(t){return Object.keys(t).includes(e)&&(t=(0,c.Z)({},e,(0,l.Z)((0,l.Z)({},t[e]),{},{credit:u.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}))),t}))})),ue((function(t){return(0,c.Z)({},e,(0,l.Z)((0,l.Z)({},t[e]),{},{credit:u.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}))})));var p=.12*u;d.code="1.06.02",d.acctName="Input Tax",d.subAcctName=se[e].subAcctName,d.ClientName=se[e].ClientName,0!==parseFloat(d.debit.replace(/,/g,""))?(d.debit=p.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),d.credit=se[e].credit):(d.credit=p.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),d.debit=se[e].debit),d.checkNo=se[e].checkNo,d.checkDate=se[e].checkDate,d.TC_Code=se[e].TC_Code,d.remarks=se[e].remarks,d.Payto=se[e].Payto,d.vatType=se[e].vatType,d.invoice=se[e].invoice,d.TempID=se[e].TempID,d.IDNo=se[e].IDNo,d.BranchCode=se[e].BranchCode,d.addres=se[e].addres,d.subAcct=se[e].subAcct,re((function(t){return function(e,t,n){var i=[].concat((0,o.Z)(e.slice(0,t+1)),[(0,c.Z)({},t+1,n)],(0,o.Z)(e.slice(t+1)));return i.map((function(e,t){var n=Object.values(e)[0];return(0,c.Z)({},t,n)}))}(t,parseInt(e),d)}))}return!0}}),Ne,ve,Le,je,ze]})}var _=function(e){var t,n,u,f,h=e.isEdited,m=e.setIsEdited,y=e.rowEdited,g=e.setRowEdited,v=e.mode,b=e.data,k=e.setData,w=e.setShowDialog,D=e.columns,N=e.openTransactionAccount,Z=e.openPolicyIdPayTo,I=e.openPolicyIdClientIdRefId,j=e.openChartAccountSearch,T=e.handleRowSave,A=".search-input-up-on-key-down",F=(0,s.useState)(null),L=(0,r.Z)(F,2),_=L[0],P=L[1],R=(0,s.useState)(!1),M=(0,r.Z)(R,2),U=M[0],q=M[1],O=(0,s.useState)({x:0,y:0}),z=(0,r.Z)(O,2),B=z[0],K=z[1],V=(0,s.useState)([]),W=(0,r.Z)(V,2),Y=W[0],G=W[1],J=(0,s.useState)(0),X=(0,r.Z)(J,2),H=X[0],Q=X[1],$=(0,s.useState)(null),ee=(0,r.Z)($,2),te=ee[0],ne=ee[1],oe=(0,s.useState)([0]),ie=(0,r.Z)(oe,2),ae=ie[0],re=ie[1],ce=(0,s.useRef)(null),le=(0,s.useState)(D.filter((function(e){return!e.hide}))),se=(0,r.Z)(le,2),ue=se[0],de=se[1],pe=(0,s.useRef)(ue),fe=Object.keys(b),he=function(e,t,n){g((function(o){return(0,c.Z)({},e,(0,l.Z)((0,l.Z)({},o[e]),{},(0,c.Z)({},t.key,n.target.value)))}))},me=function(e){g(e)};function ye(e){return(t=t||(0,a.Z)((0,i.Z)().mark((function e(t){var n,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=parseInt(t)+1,(o=Object.entries(b).filter((function(e){return e[0]===n.toString()}))).length>0&&(g(o[0][1]),m(n.toString()),setTimeout((function(){var e=document.querySelector(".row-".concat(n,".col-0"));e&&e.focus()}),100));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xe(e,t){return(n=n||(0,a.Z)((0,i.Z)().mark((function e(t,n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!T(t)){e.next=7;break}if("add"!==v||t!==n){e.next=5;break}w(!0),e.next=7;break;case 5:return e.next=7,ye(t);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ge=(0,s.useCallback)((function(){var e=pe.current.reduce((function(e,t){return e[t.key]="",e}),{});k((function(t){var n=Object.keys(t),i=String(isNaN(parseInt(n[n.length-1])+1)?0:parseInt(n[n.length-1])+1);return[].concat((0,o.Z)(t),[(0,c.Z)({},i,e)])}))}),[k]),ve=function(e,t,n,o,r){return(u=u||(0,a.Z)((0,i.Z)().mark((function e(t,n,o,a,r){var s,u,d,p,f;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"!==r.code&&"NumpadEnter"!==r.code){e.next=40;break}if(r.preventDefault(),"debit"!==n.key&&"credit"!==n.key||isNaN(parseInt(r.target.value.replace(/,/g,"")))&&(r.target.value="0.00"),k((function(e){return e=e.map((function(e){return Object.keys(e).includes(o)&&(e=(0,c.Z)({},o,(0,l.Z)((0,l.Z)({},e[o]),{},(0,c.Z)({},n.key,r.target.value)))),e}))})),"code"!==n.key){e.next=8;break}j(r.target.value),e.next=39;break;case 8:if("ClientName"!==n.key){e.next=12;break}I(r.target.value),e.next=39;break;case 12:if("Payto"!==n.key){e.next=16;break}"1.01.10"===y[o].code&&Z(r.target.value),e.next=39;break;case 16:if("TC_Code"!==n.key){e.next=20;break}N(r.target.value),e.next=39;break;case 20:if("1.01.10"===y[o].code||"credit"!==n.key){e.next=25;break}(s=document.querySelector(".row-".concat(o,".col-").concat(a+3)))&&setTimeout((function(){s.focus()}),100),e.next=39;break;case 25:if("1.01.10"===y[o].code||"remarks"!==n.key){e.next=30;break}(u=document.querySelector(".row-".concat(o,".col-").concat(a+2)))&&setTimeout((function(){u.focus()}),100),e.next=39;break;case 30:if(!(d=document.querySelector(".row-".concat(o,".col-").concat(a+1)))){e.next=35;break}setTimeout((function(){d.focus()}),100),e.next=39;break;case 35:return p=Object.keys(b),f=p[p.length-1],e.next=39,xe(o,f);case 39:return e.abrupt("return");case 40:case"end":return e.stop()}}),e)})))).apply(this,arguments)};(0,s.useEffect)((function(){"add"===v&&ge()}),[v,ge]),(0,s.useEffect)((function(){console.log(b);var e=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=[],o=0;o<e.length;o+=t)n.push(e.slice(o,o+t));return n}(b,100);G(e)}),[b]);var be=window.innerWidth-40,ke=window.innerHeight-250;return(0,E.jsxs)("div",{onClick:function(){_&&(P(null),q(!1))},style:{display:"flex",justifyContent:"center"},onKeyDown:function(e){e.stopPropagation(),function(e){if("ArrowDown"===e.key)e.preventDefault(),re((function(e){var t;if(null===e[e.length-1])return[0];if(e[e.length-1]>=b.length-1)return[b.length-1];var n=e[e.length-1]+1,o=document.querySelector(".row-".concat(n));return null===o||void 0===o||null===(t=o.querySelector("input"))||void 0===t||t.focus(),null===o||void 0===o||o.scrollIntoView({block:"end",behavior:"smooth"}),[n]}));else if("ArrowUp"===e.key){if(e.preventDefault(),0===ae[ae.length-1]){var t=document.querySelector(A);if(t&&"INPUT"===t.tagName)null===t||void 0===t||t.focus();else if(t&&"DIV"===t.tagName){var n=document.querySelector("".concat(A," input"));null===n||void 0===n||n.focus()}}re((function(e){var t;if(0===e[e.length-1])return[0];var n=e[e.length-1]-1,o=document.querySelector(".row-".concat(n));return null===o||void 0===o||o.scrollIntoView({block:"end",behavior:"smooth"}),null===o||void 0===o||null===(t=o.querySelector("input"))||void 0===t||t.focus(),[n]}))}}(e)},children:[(0,E.jsxs)("div",{style:{position:"relative"},children:[(0,E.jsx)("div",{className:"table-frame-color",style:{position:"relative"},children:(0,E.jsx)("div",{style:{display:"flex",flexDirection:"column",width:"".concat(be-10,"px        "),height:"".concat(ke-135,"px"),minHeight:"270px"},className:"table-frame",children:(0,E.jsx)("div",{className:"table-panel",children:(0,E.jsxs)("div",{ref:ce,className:"grid-container ",tabIndex:-1,children:[(0,E.jsx)("div",{className:"grid-row grid-header",style:{position:"sticky",zIndex:"10",top:"-1px",background:"white"},children:ue.map((function(e,t){return(0,E.jsxs)("div",{className:"grid-cell header-cell ".concat(te===t?"highlight-column":""),style:{width:e.width,height:"20px"},children:[(0,E.jsx)("input",{style:{fontWeight:"bold"},defaultValue:e.label,readOnly:!0,onChange:function(e){}}),(0,E.jsx)("div",{className:"resize-handle",onMouseDown:function(e){return function(e,t){t.preventDefault(),t.stopPropagation();var n=t.clientX,i=ue[e].width,a=function(t){var a=i+(t.clientX-n),r=(0,o.Z)(ue);r[e].width=a>50?a:50,de(r)};document.addEventListener("mousemove",a),document.addEventListener("mouseup",(function e(){document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",e)}))}(t,e)},onMouseEnter:function(e){e.preventDefault(),function(e){ne(e)}(t)},onMouseLeave:function(e){e.preventDefault(),ne(null)}})]},t)}))}),null===(f=Y[H])||void 0===f?void 0:f.map((function(e,t){var n=fe[t];return(0,E.jsx)("div",{className:"grid-row row-".concat(t),style:{position:"relative"},children:ue.map((function(t,o){if(h===n)return"number"===t.type?(0,E.jsx)("div",{className:"grid-cell",id:"".concat(t.key,"_RowIndex"),style:{width:t.width,padding:"2px"},children:(0,E.jsx)(S.iA,{onChange:function(e){he(n,t,e)},label:{title:"",style:{width:"0px"}},input:{className:"row-".concat(n," col-").concat(o),type:"text",style:{width:t.width,height:"18px"},value:y[n][t.key],onKeyDown:function(i){"NumpadEnter"!==i.code&&"Enter"!==i.code||ve(e,t,n,o,i)},onBlur:function(t){me(e)}}})},o):"select"===t.type?(0,E.jsx)("div",{className:"grid-cell",id:"".concat(t.key,"_RowIndex"),style:{width:t.width,padding:"2px"},children:(0,E.jsx)(S.lq,{label:{title:"",style:{width:"0px"}},select:{value:y[n][t.key]||"",className:"row-".concat(n," col-").concat(o),style:{width:t.width,height:"18px"},onKeyDown:function(i){i.stopPropagation(),ve(e,t,n,o,i)},onBlur:function(t){me(e)},onChange:function(e){he(n,t,e)}},datasource:t.options,values:"key",display:"key"})},o):(0,E.jsx)("div",{className:"grid-cell",id:"".concat(t.key,"_RowIndex"),style:{width:t.width,padding:"2px"},children:(0,E.jsx)(S.oi,{label:{title:"",style:{width:"0px"}},input:{readOnly:"acctName"===t.key||"subAcctName"===t.key||"checkNo"===t.key&&"1.01.10"!==y[n].code||"checkDate"===t.key&&"1.01.10"!==y[n].code||"Payto"===t.key&&"1.01.10"!==y[n].code,className:"row-".concat(n," col-").concat(o),type:"checkDate"===t.key&&"1.01.10"===y[n].code?"date":"text",style:{width:t.width,height:"18px"},onKeyDown:function(i){ve(e,t,n,o,i)},onChange:function(e){he(n,t,e)},onBlur:function(t){me(e)},value:y[n][t.key]||""}})},o);var i="";return e[n]&&(i="checkDate"===t.key&&""!==e[n][t.key]?(0,C.Z)(new Date(e[n][t.key]),"MM/dd/yyyy"):e[n][t.key]),(0,E.jsx)("div",{className:"grid-cell",id:"".concat(t.key,"_RowIndex"),style:{width:t.width,padding:"2px"},children:(0,E.jsx)(S.oi,{label:{title:"",style:{width:"0px"}},input:{readOnly:!0,onDoubleClick:function(t){!function(e,t,n,o){console.log(t),g(t),m(e)}(n,e)},onContextMenu:function(t){return function(e,t,n){e.stopPropagation(),e.preventDefault(),P(n[t]),K({x:e.pageX,y:e.pageY}),q(!0)}(t,n,e)},defaultValue:i,style:{width:t.width,height:"18px"}}})},o)}))},t)}))]})})})}),(0,E.jsxs)("div",{className:"table-panel-footer",children:[(0,E.jsxs)("div",{children:["Records : ",b.length]}),(0,E.jsx)("div",{children:(0,E.jsx)(p.Z,{count:Y.length,onChange:function(e,t){Q(t-1)}})})]})]}),U&&(0,E.jsxs)("div",{style:{position:"absolute",top:B.y-20,left:B.x-20,backgroundColor:"white",padding:"10px",border:"1px solid black",borderRadius:"4px",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.2)",zIndex:1e3,display:"flex",flexDirection:"column",rowGap:"5px"},children:[(0,E.jsx)(d.Z,{sx:{height:"22px",fontSize:"11px"},variant:"contained",onClick:function(){_&&x().fire({title:"Are you sure you want to delete?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(e){e.isConfirmed&&P(null)}))},children:"Delete Row"}),_&&"1.01.10"===_.code&&(0,E.jsx)(d.Z,{variant:"contained",sx:{height:"22px",fontSize:"11px"},onClick:function(){_&&(localStorage.removeItem("printString"),localStorage.setItem("paper-width","8.27in"),localStorage.setItem("paper-height","11.69in"),localStorage.setItem("module","cash-disbursement-check"),localStorage.setItem("state",JSON.stringify(_)),localStorage.setItem("dataString",JSON.stringify([])),localStorage.setItem("column",JSON.stringify([])),localStorage.setItem("title","")),P(null),window.open("/dashboard/print","_blank")},children:"Print"})]})]})},P=function(e){var t=e.onConfirmed,n=e.onDeclined,o=e.onClose,i=e.title,a=(0,s.useRef)(null),r=(0,s.useRef)(null);return(0,s.useEffect)((function(){(0,k.D)(200).then((function(){var e;null===(e=a.current)||void 0===e||e.focus()}))}),[]),(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)("div",{style:{position:"absolute",top:"55%",left:"50%",transform:"translate(-50%,-50%)",width:"300px",height:"auto",border:"1px solid #94a3b8",padding:"10px",borderRadius:"5px",boxShadow:"-1px 0px 10px -1px rgba(0,0,0,0.75)",zIndex:"299",background:"white"},children:[(0,E.jsx)("button",{style:{background:"white",padding:"5px",margin:"0",position:"absolute",top:"5px",right:"5px"},onClick:function(e){e.preventDefault(),o()},children:(0,E.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16px",height:"16px",viewBox:"0 0 24 24",fill:"none",children:(0,E.jsx)("g",{id:"Menu / Close_LG",children:(0,E.jsx)("path",{id:"Vector",d:"M21 21L12 12M12 12L3 3M12 12L21.0001 3M12 12L3 21.0001",stroke:"red",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})}),(0,E.jsx)("h2",{style:{fontSize:"14px",textTransform:"uppercase",fontWeight:"bold"},children:i}),(0,E.jsxs)("div",{children:[(0,E.jsx)("button",{ref:a,style:{padding:"5px 15px",background:"white",border:"none",color:"black"},onKeyDown:function(e){var t;"ArrowRight"===e.code&&(null===(t=r.current)||void 0===t||t.focus())},onClick:function(e){e.preventDefault(),t()},children:"Ok"}),(0,E.jsx)("button",{ref:r,style:{padding:"5px 15px",background:"white",border:"none",color:"black"},onKeyDown:function(e){var t;"ArrowLeft"===e.code&&(null===(t=a.current)||void 0===t||t.focus())},onClick:function(e){e.preventDefault(),n()},children:"Cancel"})]})]}),(0,E.jsx)("div",{onClick:function(e){e.preventDefault(),o()},style:{position:"absolute",top:0,left:0,bottom:0,right:0,background:"trnsparent",zIndex:"1"}})]})}},84669:function(e,t,n){var o=n(64836);t.Z=void 0;var i=o(n(45649)),a=n(80184),r=(0,i.default)((0,a.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8 0-1.85.63-3.55 1.69-4.9L16.9 18.31C15.55 19.37 13.85 20 12 20zm6.31-3.1L7.1 5.69C8.45 4.63 10.15 4 12 4c4.42 0 8 3.58 8 8 0 1.85-.63 3.55-1.69 4.9z"}),"NotInterested");t.Z=r},95643:function(e,t){t.Z={50:"#fbe9e7",100:"#ffccbc",200:"#ffab91",300:"#ff8a65",400:"#ff7043",500:"#ff5722",600:"#f4511e",700:"#e64a19",800:"#d84315",900:"#bf360c",A100:"#ff9e80",A200:"#ff6e40",A400:"#ff3d00",A700:"#dd2c00"}}}]);
//# sourceMappingURL=2500.5528cf31.chunk.js.map