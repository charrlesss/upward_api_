"use strict";(self.webpackChunkupward=self.webpackChunkupward||[]).push([[640,2074],{44158:function(e,t,n){n.r(t),n.d(t,{default:function(){return L},reducer:function(){return F}});var r=n(93433),o=n(74165),a=n(15861),i=n(29439),c=n(4942),u=n(1413),l=n(72791),d=n(27391),s=n(36151),p=n(39709),f=n(42419),h=n(29823),m=n(21830),y=n.n(m),x=n(3380),g=n(91933),v=n(93263),w=n(79018),b=n(84669),D=n(95643),N=n(5519),S=n(37209),k=n(16386),I=n(8185),C=n(64230),E=n(54164),T=n(30948),j=n(70272),A=n(80184),R={sub_refNo:"",refNo:"",dateEntry:(0,k.Z)(new Date,"yyyy-MM-dd"),explanation:"",particulars:"",totalDebit:"",totalCredit:"",totalBalance:"",jobAutoExp:!1,jobTransactionDate:new Date,jobType:"",search:"",cashMode:""},F=function(e,t){return"UPDATE_FIELD"===t.type?(0,u.Z)((0,u.Z)({},e),{},(0,c.Z)({},t.field,t.value)):e},Z=[{key:"code",label:"Code",width:150,type:"text"},{key:"acctName",label:"Account Name",width:400,type:"text"},{key:"subAcctName",label:"Sub Account",width:170,type:"text",readonly:function(){return!0}},{key:"ClientName",label:"Name",width:400,type:"text"},{key:"debit",label:"Debit",width:120,type:"number"},{key:"credit",label:"Credit",width:120,type:"number"},{key:"checkNo",label:"Check No",width:120,type:"text",readonly:function(e,t,n,r){return"1.01.10"!==e[0]}},{key:"checkDate",label:"Check Date",width:120,type:"date",readonly:function(e,t,n,r){return"1.01.10"!==e[0]},typeLogic:function(e){return"1.01.10"!==e[0]?"text":"date"}},{key:"TC_Code",label:"TC",width:120,type:"text"},{key:"remarks",label:"Remarks",width:400,type:"text"},{key:"Payto",label:"Payto",width:400,type:"text",readonly:function(e,t,n,r){return"1.01.10"!==e[0]}},{key:"vatType",label:"Vat Type",width:100,type:"select",options:[{key:"NON-VAT"},{key:"VAT"}],setDefaultValue:function(){return"NON-VAT"}},{key:"invoice",label:"Invoice",width:200,type:"text"},{key:"TempID",label:"TempId",hide:!0},{key:"IDNo",label:"I.D.",width:300,hide:!0},{key:"BranchCode",headerName:"BranchCode",width:300,hide:!0},{key:"addres",headerName:"addres",hide:!0},{key:"subAcct",headerName:"subAcct",hide:!0},{key:"TC_Desc",headerName:"TC_Desc",hide:!0}];function L(){var e,t,n,r,c,u=(0,l.useRef)(null),m=(0,l.useContext)(x.V),k=m.myAxios,T=m.user,L=(0,l.useReducer)(F,R),U=(0,i.Z)(L,2),M=U[0],P=U[1],_=(0,l.useRef)(null),z=(0,l.useRef)(null),K=(0,l.useRef)(null),B=(0,l.useRef)(null),V=(0,l.useRef)(null),O=(0,l.useRef)(null),W=(0,l.useState)(""),G=(0,i.Z)(W,2),J=G[0],Y=G[1],X=(0,l.useState)(0),H=(0,i.Z)(X,2),Q=H[0],$=H[1],ee=(0,l.useState)(0),te=(0,i.Z)(ee,2),ne=te[0],re=te[1],oe=(0,l.useState)(0),ae=(0,i.Z)(oe,2),ie=ae[0],ce=ae[1],ue=""===J,le=(0,g.useQuery)({queryKey:"general-journal-id-generator",queryFn:function(){return(e=e||(0,a.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.get("/task/accounting/cash-disbursement/generate-id",{headers:{Authorization:"Bearer ".concat(null===T||void 0===T?void 0:T.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},refetchOnWindowFocus:!1,onSuccess:function(e){var t=e;P({type:"UPDATE_FIELD",field:"refNo",value:t.data.generatedId[0].id}),P({type:"UPDATE_FIELD",field:"sub_refNo",value:t.data.generatedId[0].id})}}),de=le.isLoading,se=le.refetch,pe=(0,v.Z)({link:{url:"/task/accounting/general-journal/get-chart-account",queryUrlName:"chartAccountSearch"},columns:[{field:"Acct_Code",headerName:"Account Code",width:130},{field:"Acct_Title",headerName:"Account Title.",width:250},{field:"Short",headerName:"Short",flex:1}],queryKey:"get-chart-account",uniqueId:"Acct_Code",responseDataKey:"getChartOfAccount",onSelected:function(e,t){var n=u.current.getSelectedIndex();u.current.updateData((function(t){return t[n][0]=e[0].Acct_Code,t[n][1]=e[0].Acct_Title,t})),(0,w.D)(250).then((function(){var e=document.querySelector(".input.row-".concat(n,".col-3"));null===e||void 0===e||e.focus()})),ye()},searchRef:O}),fe=pe.ModalComponent,he=pe.openModal,me=pe.isLoading,ye=pe.closeModal,xe=(0,v.Z)({link:{url:"/task/accounting/search-pdc-policy-id",queryUrlName:"searchPdcPolicyIds"},columns:[{field:"Type",headerName:"Type",width:130},{field:"IDNo",headerName:"ID No.",width:200},{field:"Name",headerName:"Name",flex:1},{field:"ID",headerName:"ID",hide:!0}],queryKey:"get-policyId-ClientId-RefId",uniqueId:"IDNo",responseDataKey:"clientsId",onSelected:function(e){var t=u.current.getSelectedIndex();u.current.updateData((function(n){return n[t][3]=e[0].Name,n[t][14]=e[0].IDNo,n[t][17]=e[0].sub_account,n[t][2]=e[0].ShortName,n[t][16]=e[0].address,n})),(0,w.D)(250).then((function(){var e=document.querySelector(".input.row-".concat(t,".col-4"));null===e||void 0===e||e.focus()})),be()},searchRef:V}),ge=xe.ModalComponent,ve=xe.openModal,we=xe.isLoading,be=xe.closeModal,De=(0,v.Z)({link:{url:"/task/accounting/general-journal/get-transaction-account",queryUrlName:"transactionCodeSearch"},columns:[{field:"Code",headerName:"Code",width:130},{field:"Description",headerName:"Description",flex:1}],queryKey:"get-transaction-account",uniqueId:"Code",responseDataKey:"getTransactionAccount",onSelected:function(e){var t=u.current.getSelectedIndex();u.current.updateData((function(n){return n[t][8]=e[0].Code,n[t][18]=e[0].Description,n})),(0,w.D)(250).then((function(){var e=document.querySelector(".input.row-".concat(t,".col-9"));null===e||void 0===e||e.focus()})),Ie()},searchRef:V}),Ne=De.ModalComponent,Se=De.openModal,ke=De.isLoading,Ie=De.closeModal,Ce=(0,v.Z)({link:{url:"/task/accounting/search-payto-clients-name",queryUrlName:"searchPdcPolicyIds"},columns:[{field:"Type",headerName:"Type",width:130},{field:"IDNo",headerName:"ID No.",width:200},{field:"Name",headerName:"Name",flex:1},{field:"ID",headerName:"ID",hide:!0}],queryKey:"get-policyId-ClientId-RefId",uniqueId:"IDNo",responseDataKey:"clientsId",onSelected:function(e){var t=u.current.getSelectedIndex();u.current.updateData((function(n){return n[t][10]=e[0].Name,n})),(0,w.D)(250).then((function(){var e=document.querySelector(".input.row-".concat(t,".col-11"));null===e||void 0===e||e.focus()})),Ae()},searchRef:V}),Ee=Ce.ModalComponent,Te=Ce.openModal,je=Ce.isLoading,Ae=Ce.closeModal,Re=(0,g.useMutation)({mutationKey:"get-selected-search-general-journal",mutationFn:function(e){return(t=t||(0,a.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.post("/task/accounting/cash-disbursement/get-selected-search-cash-disbursement",t,{headers:{Authorization:"Bearer ".concat(null===T||void 0===T?void 0:T.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t=e.data.selectedCashDisbursement,n=t[0],r=n.explanation,o=n.dateEntry,a=n.refNo,i=n.particulars;P({type:"UPDATE_FIELD",field:"sub_refNo",value:a}),P({type:"UPDATE_FIELD",field:"refNo",value:a}),P({type:"UPDATE_FIELD",field:"dateEntry",value:o}),P({type:"UPDATE_FIELD",field:"explanation",value:r}),P({type:"UPDATE_FIELD",field:"particulars",value:i});var c=t.map((function(e,t){return e.credit=parseFloat(e.credit.replace(/,/g,"")).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),e.debit=parseFloat(e.debit.replace(/,/g,"")).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),"1.01.10"===e.code?e.checkDate=new Date(e.checkDate).toISOString().split("T")[0]:e.checkDate="",[e.code,e.acctName,e.subAcctName,e.ClientName,e.debit,e.credit,e.checkNo,e.checkDate,e.TC_Code,e.remarks,e.Payto,e.vatType,e.invoice,e.TempID,e.IDNo,e.Branch_Code,e.refNo,e.address,e.subAcct]}));(0,w.D)(250).then((function(){var e;null===(e=u.current)||void 0===e||e.updateData(c),function(e){var t=(null===e||void 0===e?void 0:e.reduce((function(e,t){var n=0;return isNaN(parseFloat(t[5].replace(/,/g,"")))||(n=parseFloat(t[5].replace(/,/g,""))),e+n}),0))||0,n=(null===e||void 0===e?void 0:e.reduce((function(e,t){var n=0;return isNaN(parseFloat(t[4].replace(/,/g,"")))||(n=parseFloat(t[4].replace(/,/g,""))),e+n}),0))||0;ce(e.length),$(n),re(t)}(c),(0,w.D)(250).then((function(){var e=document.querySelector(".input.row-".concat(0,".col-0"));e&&e.focus()}))}))}}),Fe=Re.mutate,Ze=Re.isLoading,Le=(0,v.Z)({link:{url:"/task/accounting/cash-disbursement/search-cash-disbursement",queryUrlName:"searchCashDisbursement"},columns:[{field:"Date_Entry",headerName:"Date",width:130},{field:"Source_No",headerName:"Ref No.",width:250},{field:"Explanation",headerName:"Explanation",flex:1}],queryKey:"search-cash-disbursement",uniqueId:"Source_No",responseDataKey:"search",onSelected:function(e,t){Fe({Source_No:e[0].Source_No}),Y("update"),Pe()},onCloseFunction:function(e){},searchRef:O}),qe=Le.ModalComponent,Ue=Le.openModal,Me=Le.isLoading,Pe=Le.closeModal,_e=(0,g.useMutation)({mutationKey:"add-cash-disbursement",mutationFn:function(e){return(n=n||(0,a.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.post("/task/accounting/cash-disbursement/add-cash-disbursement",t,{headers:{Authorization:"Bearer ".concat(null===T||void 0===T?void 0:T.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t=e;return t.data.success?(Xe(),y().fire({position:"center",icon:"success",title:t.data.message,timer:1500})):y().fire({position:"center",icon:"warning",title:t.data.message,timer:1500})}}),ze=_e.mutate,Ke=_e.isLoading,Be=(0,g.useMutation)({mutationKey:"void-cash-disbursement",mutationFn:function(e){return(r=r||(0,a.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.post("/task/accounting/cash-disbursement/void-cash-disbursement",t,{headers:{Authorization:"Bearer ".concat(null===T||void 0===T?void 0:T.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t=e;return t.data.success?(Xe(),y().fire({position:"center",icon:"success",title:t.data.message,timer:1500})):y().fire({position:"center",icon:"warning",title:t.data.message,timer:1500})}}),Ve=Be.mutate,Oe=Be.isLoading,We=(0,g.useMutation)({mutationKey:"get-selected-search-general-journal",mutationFn:function(e){return(c=c||(0,a.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.post("/task/accounting/cash-disbursement/print",t,{headers:{Authorization:"Bearer ".concat(null===T||void 0===T?void 0:T.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t=e;(0,E.flushSync)((function(){localStorage.removeItem("printString"),localStorage.setItem("dataString",JSON.stringify(t.data.print.PrintTable)),localStorage.setItem("paper-width","8.5in"),localStorage.setItem("paper-height","11in"),localStorage.setItem("module","cash-disbursement"),localStorage.setItem("state",JSON.stringify(t.data.print.PrintPayeeDetails)),localStorage.setItem("column",JSON.stringify([{datakey:"Account",header:"ACCOUNT",width:"200px"},{datakey:"Identity",header:"IDENTITY",width:"277px"},{datakey:"Debit",header:"DEBIT",width:"100px"},{datakey:"Credit",header:"CREDIT",width:"100px"}])),localStorage.setItem("title","UMIS"===(null===T||void 0===T?void 0:T.department)?"UPWARD MANAGEMENT INSURANCE SERVICES\n":"UPWARD CONSULTANCY SERVICES AND MANAGEMENT INC.\n")})),window.open("/dashboard/print","_blank")}}),Ge=We.mutate,Je=We.isLoading,Ye=(0,l.useCallback)((function(){if(""===M.refNo)return y().fire({position:"center",icon:"warning",title:"Please provide reference number!",timer:1500});if(""===M.explanation)return y().fire({position:"center",icon:"warning",title:"Please provide explanation!",timer:1500}).then((function(){(0,w.D)(300).then((function(){var e;null===(e=K.current)||void 0===e||e.focus()}))}));if(Q<=0&&ne<=0)return y().fire({position:"center",icon:"warning",title:"Total Debit and Credit amount must not be zero(0), please double check the entries",timer:1500});if(Q!==ne)return y().fire({position:"center",icon:"warning",title:"Total Debit and Credit amount must be balance, please double check the entries",timer:1500});var e=u.current.getData().filter((function(e){return""!==e[0]})).map((function(e,t){return{code:e[0],acctName:e[1],subAcctName:e[2],ClientName:e[3],debit:e[4],credit:e[5],checkNo:e[6],checkDate:e[7],TC_Code:e[8],remarks:e[9],Payto:e[10],vatType:e[11],invoice:e[12],TempID:t,IDNo:e[14],BranchCode:e[15],addres:e[16],subAcct:e[17],TC_Desc:e[18]}}));"update"===J?(0,C.s)({isUpdate:!0,cb:function(t){ze({hasSelected:"update"===J,refNo:M.refNo,dateEntry:M.dateEntry,explanation:M.explanation,particulars:M.particulars,cashDisbursement:e,userCodeConfirmation:t})}}):(0,C.L)({isConfirm:function(){ze({hasSelected:"update"===J,refNo:M.refNo,dateEntry:M.dateEntry,explanation:M.explanation,particulars:M.particulars,cashDisbursement:e})}})}),[M,ze,J,ne,Q]);function Xe(){Y(""),(0,I.setNewStateValue)(P,R),se(),$(0),re(0),ce(0),(0,w.D)(100).then((function(){var e;null===(e=u.current)||void 0===e||e.resetTable()}))}function He(e){var t=parseFloat(e);return isNaN(t)?"0.00":e}return(0,l.useEffect)((function(){var e=function(e){(e.ctrlKey||e.metaKey)&&"s"===e.key&&(e.preventDefault(),Ye())};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[Ye]),Ze||de||we||me||je||ke?(0,A.jsx)("div",{children:"Loading..."}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(j.Z,{title:"Cash Disbursement"}),(0,A.jsxs)("div",{children:[(0,A.jsx)("div",{style:{display:"flex",alignItems:"center",columnGap:"5px"},children:(0,A.jsxs)("div",{style:{display:"flex",alignItems:"center",columnGap:"5px"},children:[Me?(0,A.jsx)(p.Z,{loading:Me}):(0,A.jsx)(d.Z,{label:"Search",size:"small",name:"search",onKeyDown:function(e){if("Enter"===e.code||"NumpadEnter"===e.code)return e.preventDefault(),Ue(e.target.value)},InputProps:{style:{height:"27px",fontSize:"14px"}},sx:{width:"300px",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}}),""===J&&(0,A.jsx)(s.Z,{sx:{height:"30px",fontSize:"11px"},variant:"contained",startIcon:(0,A.jsx)(f.Z,{sx:{width:15,height:15}}),id:"entry-header-save-button",onClick:function(){Y("add"),u.current.AddRow()},color:"primary",children:"New"}),(0,A.jsx)(p.Z,{sx:{height:"30px",fontSize:"11px"},loading:Ke,disabled:""===J,onClick:Ye,color:"success",variant:"contained",children:"Save"}),""!==J&&(0,A.jsx)(p.Z,{sx:{height:"30px",fontSize:"11px"},variant:"contained",startIcon:(0,A.jsx)(h.Z,{sx:{width:15,height:15}}),color:"error",onClick:function(){y().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, cancel it!"}).then((function(e){e.isConfirmed&&Xe()}))},disabled:""===J,children:"Cancel"}),(0,A.jsx)(p.Z,{sx:{height:"30px",fontSize:"11px",background:D.Z[500],":hover":{background:D.Z[600]}},onClick:function(){(0,C.s)({isUpdate:!1,text:"Are you sure you want to void ".concat(M.refNo),cb:function(e){Ve({refNo:M.refNo,dateEntry:M.dateEntry,userCodeConfirmation:e})}})},loading:Oe,disabled:"update"!==J,variant:"contained",startIcon:(0,A.jsx)(b.Z,{sx:{width:20,height:20}}),children:"Void"}),(0,A.jsx)(p.Z,{loading:Je,disabled:"update"!==J,id:"basic-button","aria-haspopup":"true",onClick:function(){Ge({Source_No:M.refNo})},sx:{height:"30px",fontSize:"11px",color:"white",backgroundColor:N.Z[600],"&:hover":{backgroundColor:N.Z[700]}},children:"Print"})]})}),(0,A.jsxs)("div",{style:{display:"flex",marginBottom:"10px"},children:[(0,A.jsxs)("fieldset",{style:{border:"1px solid #cbd5e1",borderRadius:"5px",position:"relative",flex:1,height:"auto",display:"flex",marginTop:"10px",gap:"10px",padding:"15px",flexDirection:"column"},children:[de?(0,A.jsx)(p.Z,{loading:de}):(0,A.jsx)(S.oi,{label:{title:"Reference CV- : ",style:{fontSize:"12px",fontWeight:"bold",width:"100px"}},input:{disabled:ue,type:"text",style:{width:"190px"},readOnly:!0,value:M.refNo,name:"refNo",onKeyDown:function(e){var t;"NumpadEnter"!==e.code&&"Enter"!==e.code||(null===(t=z.current)||void 0===t||t.focus())}},inputRef:_}),(0,A.jsx)(S.oi,{label:{title:"Date : ",style:{fontSize:"12px",fontWeight:"bold",width:"100px"}},input:{disabled:ue,type:"date",name:"dateEntry",value:M.dateEntry,style:{width:"190px"},onKeyDown:function(e){var t;"NumpadEnter"!==e.code&&"Enter"!==e.code||(null===(t=K.current)||void 0===t||t.focus())},onChange:function(e){P({type:"UPDATE_FIELD",field:"dateEntry",value:e.target.value})}},inputRef:z}),(0,A.jsx)(S.oi,{label:{title:"Explanation : ",style:{fontSize:"12px",fontWeight:"bold",width:"100px"}},input:{disabled:ue,type:"text",style:{flex:1},name:"explanation",value:M.explanation,onChange:function(e){P({type:"UPDATE_FIELD",field:"explanation",value:e.target.value})},onKeyDown:function(e){var t;"NumpadEnter"!==e.code&&"Enter"!==e.code||(null===(t=B.current)||void 0===t||t.focus())}},inputRef:K}),(0,A.jsx)(S.Fz,{label:{title:"Particulars : ",style:{fontSize:"12px",fontWeight:"bold",width:"100px"}},textarea:{rows:4,disabled:ue,style:{flex:1},name:"particulars",value:M.particulars,onKeyDown:function(e){"NumpadEnter"===e.code||e.code},onChange:function(e){P({type:"UPDATE_FIELD",field:"particulars",value:e.target.value})}},_inputRef:B})]}),(0,A.jsxs)("fieldset",{style:{border:"1px solid #cbd5e1",borderRadius:"5px",position:"relative",width:"400px",height:"auto",display:"flex",marginTop:"10px",gap:"10px",padding:"15px"},children:[(0,A.jsx)("div",{style:{alignItems:"center",display:"flex",textAlign:"center",width:"100px"},children:(0,A.jsxs)("p",{style:{margin:0,padding:0,color:"black",display:"flex",flexDirection:"column"},children:[(0,A.jsx)("span",{style:{fontSize:"12px"},children:"Total Rows:"})," ",(0,A.jsx)("strong",{children:ie})]})}),(0,A.jsxs)("div",{style:{display:"flex",justifyContent:"space-around",flexDirection:"column",flex:1},children:[(0,A.jsxs)("p",{style:{margin:0,padding:0,color:"black"},children:[(0,A.jsx)("span",{style:{fontSize:"12px"},children:"Total Debit:"})," ",(0,A.jsx)("strong",{children:Q.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})})]}),(0,A.jsxs)("p",{style:{margin:0,padding:0,color:"black"},children:[(0,A.jsx)("span",{style:{fontSize:"12px"},children:"Total Credit:"})," ",(0,A.jsx)("strong",{children:ne.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})})]}),(0,A.jsxs)("p",{style:{margin:0,padding:0,color:"black"},children:[(0,A.jsx)("span",{style:{fontSize:"12px"},children:"Balance:"})," ",(0,A.jsx)("strong",{style:{color:Q-ne>0?"red":"black"},children:(Q-ne).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})})]})]})]})]}),(0,A.jsx)(q,{disbaleTable:""===J,height:"300px",ref:u,rows:[],columns:Z.filter((function(e){return!e.hide})),onInputKeyDown:function(e,t,n){var r=u.current.getData();if(0===t)he(n);else if(3===t)ve(n);else if(8===t)Se(n);else if(10===t&&"1.01.10"===r[e][0])Te(n);else if(5===t){u.current.updateData((function(r){return r[e][t]=He(n),r}));var o=u.current.getData();(0,E.flushSync)((function(){re(null===o||void 0===o?void 0:o.reduce((function(e,t){return e+parseFloat(t[5].replace(/,/g,""))}),0))})),setTimeout((function(){if("1.01.10"!==o[e][0]){var n=document.querySelector(".input.row-".concat(e,".col-").concat(t+3));n&&n.focus()}else{var r=document.querySelector(".input.row-".concat(e,".col-").concat(t+1));r&&r.focus()}}),100)}else if(4===t){u.current.updateData((function(r){return r[e][t]=He(n),r}));var a=u.current.getData();(0,E.flushSync)((function(){$(null===a||void 0===a?void 0:a.reduce((function(e,t){return e+parseFloat(t[4].replace(/,/g,""))}),0))})),setTimeout((function(){var n=document.querySelector(".input.row-".concat(e,".col-").concat(t+1));n&&n.focus()}),100)}else if(9===t&&"1.01.10"!==r[e][0]){var i=document.querySelector(".input.row-".concat(e,".col-").concat(t+2));i&&i.focus()}else{u.current.updateData((function(r){return r[e][t]=n,r}));var c=document.querySelector(".input.row-".concat(e,".col-").concat(t+1));if(c)c.focus();else if(function(){var e=u.current.getSelectedIndex(),t=u.current.getData();if(""===t[e][0])return alert("Account Code is required"),(0,w.D)(500).then((function(){var t=document.querySelector(".input.row-".concat(e,".col-0"));t&&t.focus()})),!1;if(""!==t[e][0]&&"1.01.10"===t[e][0]&&""===t[e][6])return alert("Check No is required"),(0,w.D)(500).then((function(){var t=document.querySelector(".input.row-".concat(e,".col-6"));t&&t.focus()})),!1;if(""!==t[e][0]&&"1.01.10"===t[e][0]&&""===t[e][7])return alert("Check Date is required"),(0,w.D)(500).then((function(){var t=document.querySelector(".input.row-".concat(e,".col-7"));t&&t.focus()})),!1;if(""!==t[e][0]&&"1.01.10"===t[e][0]&&""===t[e][10])return alert("Pay To is required"),(0,w.D)(500).then((function(){var t=document.querySelector(".input.row-".concat(e,".col-10"));t&&t.focus()})),!1;if(""===t[e][3])return alert("Name is required"),(0,w.D)(500).then((function(){var t=document.querySelector(".input.row-".concat(e,".col-3"));t&&t.focus()})),!1;if(t[e][4]===t[e][5])return alert("Credit and Debit cannot be the same. They must have a difference."),(0,w.D)(500).then((function(){var t=document.querySelector(".input.row-".concat(e,".col-4"));t&&t.focus()})),!1;if(""===t[e][8])return alert("TC is required"),(0,w.D)(500).then((function(){var t=document.querySelector(".input.row-".concat(e,".col-8"));t&&t.focus()})),!1;if("VAT"===t[e][11]&&"1.06.02"!==t[e][0]){var n=parseFloat(t[e][5].replace(/,/g,"")),r=parseFloat(t[e][4].replace(/,/g,"")),o=0;0!==r?(o=r/1.12,t[e][4]=o.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})):(o=n/1.12,t[e][5]=o.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}));var a=Z.filter((function(e){return!e.hide})).map((function(e){return e.setDefaultValue?e.setDefaultValue():""})),i=.12*o;t.push(a),t[e+1][0]="1.06.02",t[e+1][1]="Input Tax",t[e+1][2]=t[e][2],t[e+1][3]=t[e][3],0!==parseFloat(t[e][4].replace(/,/g,""))?(t[e+1][4]=i.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),t[e+1][5]=t[e][5]):(t[e+1][5]=i.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),t[e+1][4]=t[e][4]),t[e+1][6]=t[e][6],t[e+1][7]=t[e][7],t[e+1][8]=t[e][8],t[e+1][9]=t[e][9],t[e+1][10]=t[e][10],t[e+1][11]=t[e][11],t[e+1][12]=t[e][12],t[e+1][13]=t[e][13],t[e+1][14]=t[e][14],t[e+1][15]=t[e][15],t[e+1][16]=t[e][16],t[e+1][17]=t[e][17],t[e+1][18]=t[e][18],u.current.updateData(t)}return!0}())if(window.confirm("Add New Row?")){u.current.AddRow();var l=u.current.getSelectedIndex();"vat"===r[l][11].toLowerCase()?(u.current.setNewRowIndex(l+2),(0,w.D)(250).then((function(){var e=document.querySelector(".input.row-".concat(l+2,".col-0"));e&&e.focus()}))):(u.current.setNewRowIndex(l+1),(0,w.D)(250).then((function(){var e=document.querySelector(".input.row-".concat(l+1,".col-0"));e&&e.focus()})))}}},RightClickComponent:function(e){var t=e.rowItm,n={padding:"5px 10px",margin:"0px",background:"transparent",color:"black",fontSize:"14px",width:"100%",borderRadius:"0px",textAlign:"left"};return(0,A.jsxs)("div",{children:[(0,A.jsx)("button",{className:"button-r",style:n,onClick:function(){!function(){var e,t=u.current.getData(),n=null===(e=u.current)||void 0===e?void 0:e.getSelectedIndex();y().fire({title:"Are you sure?",text:"Do you want Delete This Row",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(e){if(e.isConfirmed)if(1===t.length){var r,o,a;null===(r=u.current)||void 0===r||r.updateData([]),null===(o=u.current)||void 0===o||o.AddRow(),null===(a=u.current)||void 0===a||a.setNewRowIndex(0),(0,w.D)(250).then((function(){var e=document.querySelector(".input.row-".concat(0,".col-0"));e&&e.focus()}))}else{var i,c=n;c>-1&&c<t.length&&t.splice(c,1);var l=t;null===(i=u.current)||void 0===i||i.updatePages(l)}}))}()},children:"Delete"}),"1.01.10"===t[0]&&(0,A.jsx)("button",{className:"button-r",style:n,onClick:function(){!function(e){(0,E.flushSync)((function(){localStorage.removeItem("printString"),localStorage.setItem("dataString",JSON.stringify([])),localStorage.setItem("paper-width","8.5in"),localStorage.setItem("paper-height","11in"),localStorage.setItem("module","cash-disbursement-check"),localStorage.setItem("state",JSON.stringify({checkDate:e[7],Payto:e[10],credit:e[5]})),localStorage.setItem("column",JSON.stringify([])),localStorage.setItem("title","UMIS"===(null===T||void 0===T?void 0:T.department)?"UPWARD MANAGEMENT INSURANCE SERVICES\n":"UPWARD CONSULTANCY SERVICES AND MANAGEMENT INC.\n")})),window.open("/dashboard/print","_blank")}(t)},children:"Print"})]})}}),ge,fe,Ee,Ne,qe]})]})}var q=(0,l.forwardRef)((function(e,t){var n=e.rows,o=e.columns,a=e.onInputKeyDown,c=e.height,u=e.RightClickComponent,d=e.disbaleTable,s=void 0!==d&&d,p=(0,l.useRef)([]),f=(0,l.useRef)(null),h=(0,l.useState)([]),m=(0,i.Z)(h,2),y=m[0],x=m[1],g=(0,l.useState)([]),v=(0,i.Z)(g,2),b=v[0],D=v[1],N=(0,l.useState)(0),k=(0,i.Z)(N,2),I=k[0],C=k[1],E=b.reduce((function(e,t){return e+t.width}),0);function j(){x((function(e){var t=b.map((function(e){return""}));return[].concat((0,r.Z)(e),[t])}))}(0,l.useEffect)((function(){o.length>0&&D(o.filter((function(e){return!e.hide})))}),[o]),(0,l.useEffect)((function(){n.length>0&&x(n.map((function(e){return o.map((function(t){return e[t.key]}))})))}),[n,o]),(0,l.useImperativeHandle)(t,(function(){return{AddRow:j,updateData:x,getData:function(){return y},getSelectedIndex:function(){return I},setNewRowIndex:function(e){C(e)},resetTable:function(){x([]),C(0)}}})),(0,l.useEffect)((function(){p.current=y}),[y]);var R=function(){return(0,A.jsxs)("tr",{children:[(0,A.jsx)("th",{className:"header",style:{width:"30px",border:"1px solid black",position:"sticky",top:0,zIndex:1,background:"#f0f0f0"}}),b.map((function(e,t){return(0,A.jsxs)("th",{className:"header col-".concat(t," ").concat(e.key),style:{width:e.width,border:"1px solid black",position:"sticky",top:0,zIndex:1,background:"white"},children:[(0,A.jsx)("div",{className:"resize-handle",onMouseDown:function(e){e.preventDefault(),function(e,t){t.preventDefault(),t.stopPropagation();var n=t.clientX,a=o[e].width,i=function(t){var i=a+(t.clientX-n),c=(0,r.Z)(o);c[e].width=i>50?i:50,D(c)};document.addEventListener("mousemove",i),document.addEventListener("mouseup",(function e(){document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",e)}))}(t,e)}}),e.label]},t)}))]})},F=(0,l.forwardRef)((function(e,t){var n=e.rowIdx,r=e.colIdx,o=e.colItm,i=e.rowItm,c=I===n?"#082f49":"black";return I===n?"select"===o.type?(0,A.jsx)(S.lq,{label:{title:"",style:{width:"0px",display:"none"}},select:{readOnly:o.readonly&&(null===o||void 0===o?void 0:o.readonly(i,o,n,r)),className:"input row-".concat(n," col-").concat(r," ").concat(o.key),defaultValue:i[r],style:{width:"100%",height:"22px",background:I===n?"transparent":"white",padding:0,margin:0,border:"none",cursor:"pointer",color:c},onKeyDown:function(e){"Enter"!==e.code&&"NumpadEnter"!==e.code||a(n,r,e.currentTarget.value)},onBlur:function(e){e.currentTarget.value=p.current[n][r]}},datasource:o.options,values:"key",display:"key"}):"number"===o.type?(0,A.jsx)(T.h3,{readOnly:o.readonly&&(null===o||void 0===o?void 0:o.readonly(i,o,n,r)),className:"input row-".concat(n," col-").concat(r," ").concat(o.key),getInputRef:t,decimalScale:2,fixedDecimalScale:!0,style:{width:"100%",height:"100%",background:I===n?"transparent":"white",margin:0,border:"none",cursor:"pointer",color:c},onKeyDown:function(e){"Enter"!==e.code&&"NumpadEnter"!==e.code||a(n,r,e.currentTarget.value)},onBlur:function(e){e.currentTarget.value=p.current[n][r]},defaultValue:i[r],allowNegative:!1,thousandSeparator:!0,valueIsNumericString:!0}):"date"===o.type?(0,A.jsx)("input",{type:o.typeLogic&&o.typeLogic(i),readOnly:o.readonly&&(null===o||void 0===o?void 0:o.readonly(i,o,n,r)),className:"input row-".concat(n," col-").concat(r," ").concat(o.key),style:{width:"100%",height:"100%",background:I===n?"transparent":"white",margin:0,border:"none",cursor:"pointer",color:c},defaultValue:i[r],onKeyDown:function(e){"Enter"!==e.code&&"NumpadEnter"!==e.code||a(n,r,e.currentTarget.value)},onBlur:function(e){e.currentTarget.value=p.current[n][r]}}):(0,A.jsx)("input",{readOnly:o.readonly&&(null===o||void 0===o?void 0:o.readonly(i,o,n,r)),className:"input row-".concat(n," col-").concat(r," ").concat(o.key),style:{width:"100%",height:"100%",background:I===n?"transparent":"white",margin:0,border:"none",cursor:"pointer",color:c},onBlur:function(e){e.currentTarget.value=p.current[n][r]},defaultValue:i[r],onKeyDown:function(e){"Enter"!==e.code&&"NumpadEnter"!==e.code||a(n,r,e.currentTarget.value)}}):(0,A.jsx)("input",{readOnly:I!==n,className:"input row-".concat(n," col-").concat(r," ").concat(o.key),style:{width:"100%",height:"100%",border:"none",cursor:"pointer",color:c},defaultValue:i[r],onDoubleClick:function(e){C(n)}})})),Z=(0,l.forwardRef)((function(e,t){var n=e.rowItm,r=e.rowIdx,o=e.parentRef,a=(0,l.useRef)(null),c=(0,l.useState)(!1),d=(0,i.Z)(c,2),s=d[0],p=d[1];return(0,l.useEffect)((function(){var e=function(e){a.current&&!a.current.contains(e.target)&&p(!1)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[]),(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("td",{style:{position:"relative",borderBottom:"1px solid black",borderLeft:"1px solid black",borderTop:"none",borderRight:"1px solid black",cursor:"pointer",background:I===r?"#bae6fd":""},children:[(0,A.jsx)("input",{style:{cursor:"pointer"},readOnly:!0,type:"checkbox",checked:I===r,onClick:function(){C(r),(0,w.D)(150).then((function(){var e=document.querySelector(".input.row-".concat(r,".col-0"));e&&e.focus()}))},onContextMenu:function(e){e.preventDefault(),r===I&&(p(!0),setTimeout((function(){a.current&&a.current.scrollIntoView({behavior:"smooth"})}),100))}}),s&&(0,A.jsx)("div",{ref:a,style:{position:"absolute",top:"110%",left:"0px",background:"#e2e8f0",width:"80px",height:"auto",padding:"7px 0",boxShadow:"-3px -1px 13px -8px rgba(0,0,0,0.75)",border:"1px solid #cbd5e1",zIndex:"99999"},children:(0,A.jsx)(u,{rowItm:n,colItm:null,rowIdx:r,colIdx:null})})]}),b.map((function(e,t){return(0,A.jsx)("td",{className:"td row-".concat(r," col-").concat(t," ").concat(e.key),style:{width:e.width,padding:"0 important",margin:0,background:I===r?"#bae6fd":"",position:"relative",height:"22px",borderBottom:"1px solid black",borderLeft:"1px solid black",borderTop:"none",borderRight:"1px solid black",cursor:"pointer"},children:(0,A.jsx)(F,{rowIdx:r,colIdx:t,colItm:e,rowItm:n,parentRef:o})},t)}))]})})),L=(0,l.forwardRef)((function(e,t){var n=e.parentRef;return(0,A.jsx)("tbody",{children:null===y||void 0===y?void 0:y.map((function(e,t){return(0,A.jsx)("tr",{className:"tr row-".concat(t),children:(0,A.jsx)(Z,{parentRef:n,rowItm:e,rowIdx:t})},t)}))})}));return(0,A.jsxs)(l.Fragment,{children:[(0,A.jsx)("div",{ref:f,style:{height:c,overflow:"auto",position:"relative",width:"100%",pointerEvents:s?"none":"auto",border:s?"2px solid #8c8f8e":"2px solid #c0c0c0",boxShadow:"inset -2px -2px 0 #ffffff, \n                    inset 2px 2px 0 #808080"},children:(0,A.jsx)("div",{style:{position:"absolute",width:"".concat(E,"px"),height:"auto"},children:(0,A.jsxs)("table",{style:{borderCollapse:"collapse",width:"100%",position:"relative"},children:[(0,A.jsx)("thead",{children:(0,A.jsx)(R,{})}),(0,A.jsx)(L,{})]})})}),(0,A.jsx)("div",{style:{width:"calc(100vw - 40px)",display:"flex",height:"40px"},children:(0,A.jsx)("div",{style:{width:"50%",display:"flex",alignItems:"center"},children:(0,A.jsxs)("span",{style:{fontSize:"14px"},children:["Records : ",y.length]})})})]})}))},84669:function(e,t,n){var r=n(64836);t.Z=void 0;var o=r(n(45649)),a=n(80184),i=(0,o.default)((0,a.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8 0-1.85.63-3.55 1.69-4.9L16.9 18.31C15.55 19.37 13.85 20 12 20zm6.31-3.1L7.1 5.69C8.45 4.63 10.15 4 12 4c4.42 0 8 3.58 8 8 0 1.85-.63 3.55-1.69 4.9z"}),"NotInterested");t.Z=i},95643:function(e,t){t.Z={50:"#fbe9e7",100:"#ffccbc",200:"#ffab91",300:"#ff8a65",400:"#ff7043",500:"#ff5722",600:"#f4511e",700:"#e64a19",800:"#d84315",900:"#bf360c",A100:"#ff9e80",A200:"#ff6e40",A400:"#ff3d00",A700:"#dd2c00"}}}]);
//# sourceMappingURL=640.c631b25b.chunk.js.map