"use strict";(self.webpackChunkupward=self.webpackChunkupward||[]).push([[6813],{93346:function(e,n,t){t.d(n,{r:function(){return c}});var i=t(93433),r=t(29439),o=t(72791),u=t(16088),l=t(80184),c=(0,o.forwardRef)((function(e,n){var t,c=e.rows,a=e.column,s=e.width,d=e.height,f=e.dataReadOnly,h=e.onSelectionChange,v=void 0===h?function(){}:h,m=e.isMultipleSelect,p=void 0!==m&&m,x=e.freeze,g=void 0!==x&&x,w=e.onKeyDown,y=e.inputsearchselector,N=void 0===y?".search-input-up-on-key-down":y,j=e.isRowSelectable,S=void 0===j||j,b=e.unSelectable,C=void 0===b?function(){return!1}:b,k=e.isLoading,A=(0,o.useState)([]),D=(0,r.Z)(A,2),Z=D[0],I=D[1],R=(0,o.useState)(0),L=(0,r.Z)(R,2),E=L[0],T=L[1],M=(0,o.useRef)(v),O=(0,o.useRef)(w),P=(0,o.useState)(a.filter((function(e){return!e.hide}))),q=(0,r.Z)(P,2),K=q[0],V=q[1],U=(0,o.useState)(null),z=(0,r.Z)(U,2),B=z[0],F=z[1],G=(0,o.useState)([0]),W=(0,r.Z)(G,2),H=W[0],X=W[1],_=(0,o.useState)(0),Q=(0,r.Z)(_,2),J=Q[0],Y=Q[1],$=(0,o.useState)([]),ee=(0,r.Z)($,2),ne=ee[0],te=ee[1],ie=(0,o.useRef)(null),re=(0,o.useState)(null),oe=(0,r.Z)(re,2),ue=oe[0],le=oe[1];(0,o.useEffect)((function(){var e=function(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,t=[],i=0;i<e.length;i+=n)t.push(e.slice(i,i+n));return t}(c,100);I(e)}),[c]);var ce=function(e,n){n.preventDefault(),n.stopPropagation();var t=n.clientX,r=K[e].width,o=function(n){var o=r+(n.clientX-t),u=(0,i.Z)(K);u[e].width=o>50?o:50,V(u)};document.addEventListener("mousemove",o),document.addEventListener("mouseup",(function e(){document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",e)}))},ae=function(e){F(e)},se=function(){F(null)};return(0,o.useImperativeHandle)(n,(function(){return{resetTableSelected:function(){if(X([0]),Y(0),te([]),c.length>0){var e=document.querySelector(".row-".concat(0));null===e||void 0===e||e.scrollIntoView({block:"end",behavior:"smooth"})}},getSelectedRows:function(){return c.filter((function(e,n){return ne.includes(n)}))},setSelectRows:function(e){te(e)}}})),(0,l.jsx)("div",{style:{display:"flex",justifyContent:"center"},onKeyDown:function(e){if("ArrowDown"===e.key)e.preventDefault(),X((function(e){var n;if(null===e[e.length-1])return[0];if(e[e.length-1]>=c.length-1)return[c.length-1];var t=e[e.length-1]+1,i=document.querySelector(".row-".concat(t));return null===i||void 0===i||null===(n=i.querySelector("input"))||void 0===n||n.focus(),null===i||void 0===i||i.scrollIntoView({block:"end",behavior:"smooth"}),[t]}));else if("ArrowUp"===e.key){if(e.preventDefault(),0===H[H.length-1]){var n=document.querySelector(N);if(n&&"INPUT"===n.tagName)null===n||void 0===n||n.focus();else if(n&&"DIV"===n.tagName){var t=document.querySelector("".concat(N," input"));null===t||void 0===t||t.focus()}}X((function(e){var n;if(0===e[e.length-1])return[0];var t=e[e.length-1]-1,i=document.querySelector(".row-".concat(t));return null===i||void 0===i||i.scrollIntoView({block:"end",behavior:"smooth"}),null===i||void 0===i||null===(n=i.querySelector("input"))||void 0===n||n.focus(),[t]}))}},children:(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"table-frame-color",children:[(0,l.jsx)("div",{style:{display:"flex",flexDirection:"column",width:"".concat(s-10,"px        "),height:"".concat(d-135,"px"),minHeight:"270px"},className:"table-frame",children:(0,l.jsx)("div",{className:"table-panel",children:(0,l.jsxs)("div",{ref:ie,className:"grid-container ",tabIndex:-1,children:[(0,l.jsx)("div",{className:"grid-row grid-header",style:{position:"sticky",zIndex:"10",top:"-1px",background:"white"},children:K.map((function(e,n){return(0,l.jsxs)("div",{className:"grid-cell header-cell ".concat(B===n?"highlight-column":""),style:{width:e.width,height:"20px"},children:[(0,l.jsx)("input",{style:{fontWeight:"bold"},defaultValue:e.headerName,readOnly:!0,onChange:function(e){}}),(0,l.jsx)("div",{className:"resize-handle",onMouseDown:function(e){return ce(n,e)},onMouseEnter:function(e){e.preventDefault(),ae(n)},onMouseLeave:function(e){e.preventDefault(),se()}})]},n)}))}),null===(t=Z[E])||void 0===t?void 0:t.map((function(e,n){return(0,l.jsx)("div",{className:"grid-row row-".concat(n),onClick:function(e){return function(e,n){if(p)if(n.shiftKey&&null!==J){for(var t=Math.min(J,e),r=Math.max(J,e),o=[],u=t;u<=r;u++)H.includes(u)||o.push(u);var l=[].concat((0,i.Z)(ne),o);X([].concat((0,i.Z)(H),o));var a=function(e){var n=e.map((function(e,n){return C(e)?null:{idx:n,data:e}})).filter((function(e){return null!==e})),t=n.map((function(e){return e.data}));return{newSelectedRowsFiltered:n.map((function(e){return e.idx})),data:t}}(c.filter((function(e,n){return l.includes(n)}))),s=a.newSelectedRowsFiltered;a.data,te(s)}else if(n.ctrlKey||n.metaKey)if(H.includes(e)&&!g){X(H.filter((function(n){return n!==e}))),te((function(n){return n=n.filter((function(n){return n!==e})),n}));var d=ne.filter((function(n){return n!==e}));c.filter((function(e,n){return d.includes(n)})),te(d)}else{X([].concat((0,i.Z)(H),[e])),te((function(n){return n.push(e),n}));var f=[].concat((0,i.Z)(ne),[e]);c.filter((function(e,n){return f.includes(n)})),te(f)}else X([e]);else X([e]);Y(e)}(n,e)},onDoubleClick:function(e){ue&&(clearTimeout(ue),le(null));var t=setTimeout((function(){!function(e,n){var t=c[e];if(!C(t)&&S){var r=[];if(r=p?[].concat((0,i.Z)(ne),(0,i.Z)(H)):[e],ne.includes(e)&&!g)return r=ne.filter((function(n){return n!==e})),te(r),void M.current([],e);te(r),M.current([t],e)}}(n)}),200);le(t)},onKeyDown:function(e){ue&&(clearTimeout(ue),le(null));var n=setTimeout((function(){!function(e){if(e.stopPropagation(),"Enter"===e.key||"NumpadEnter"===e.key){if(e.preventDefault(),!S)return;var n=[],t=H[H.length-1];n=p?[].concat((0,i.Z)(ne),(0,i.Z)(H)):[t];var r=c[n[n.length-1]];if(C(r))return;if(ne.includes(t)&&!g)return n=ne.filter((function(e){return e!==t})),te(n),void M.current([],t);te(n),M.current([r],t)}else if("Delete"===e.key||"Backspace"===e.key){if(!S)return;var o=H[H.length-1],u=c.filter((function(e,n){return H.includes(n)}));null!==O&&void 0!==O&&O.current&&(null===O||void 0===O||O.current(u,e.key,o))}}(e)}),200);le(n)},children:K.map((function(t,i){return(0,l.jsxs)("div",{style:{width:t.width},className:"grid-cell ".concat(B===i?"highlight-column":""),children:[(0,l.jsx)("input",{value:e[t.field],onChange:function(e){},readOnly:f,className:"".concat(H.includes(n)?"selected-row":""," ").concat(ne.includes(n)?"selected-items":"","\n                          ").concat("number"===t.type?"number":"text","\n                          ")}),(0,l.jsx)("div",{className:"resize-handle",onMouseDown:function(e){e.preventDefault(),ce(i,e)},onMouseEnter:function(e){e.preventDefault(),ae(i)},onMouseLeave:function(e){e.preventDefault(),se()}})]},i)}))},n)}))]})})}),k&&(0,l.jsx)("div",{className:"table-loading",children:(0,l.jsx)("div",{className:"loader"})})]}),(0,l.jsxs)("div",{className:"table-panel-footer",children:[(0,l.jsxs)("div",{children:["Records : ",c.length]}),(0,l.jsx)("div",{children:(0,l.jsx)(u.Z,{count:Z.length,onChange:function(e,n){T(n-1)}})})]})]})})}))},66813:function(e,n,t){t.r(n),t.d(n,{default:function(){return x}});var i=t(74165),r=t(15861),o=t(29439),u=t(72791),l=t(91933),c=t(24035),a=t(3380),s=t(25756),d=t(54164),f=t(93346),h=t(80184);var v=[{field:"AssuredName",headerName:"Assured Name",width:300},{field:"PolicyNo",headerName:"Policy No.",width:200},{field:"InsuredValue",headerName:"Insured Value",width:120,type:"number"},{field:"unit",headerName:"Unit",width:270},{field:"ChassisNo",headerName:"Chassis No.",width:160},{field:"DateExpired",headerName:"Date Expired",width:100}],m=[{field:"claims_id",headerName:"Claims ID.",width:300},{field:"AssuredName",headerName:"Assured Name",width:200},{field:"PolicyNo",headerName:"Policy No.",width:120,type:"number"},{field:"dateAccident",headerName:"Date Accident",width:270},{field:"dateReported",headerName:"Date Reported",width:160},{field:"status",headerName:"Status",width:100}],p=[{text:"TPL"},{text:"COM"},{text:"CGL"},{text:"FIRE"},{text:"MAR"},{text:"PA"}];function x(){var e,n=(0,u.useState)(0),t=(0,o.Z)(n,2),x=t[0],y=t[1],N=(0,u.useState)(!1),j=(0,o.Z)(N,2),S=j[0],b=j[1],C=(0,u.useState)(0),k=(0,o.Z)(C,2),A=k[0],D=k[1],Z=(0,s.Z)([(0,h.jsx)(w,{policy:"TPL",column:v}),(0,h.jsx)(w,{policy:"COM",column:v}),(0,h.jsx)(w,{policy:"CGL",column:v}),(0,h.jsx)(w,{policy:"FIRE",column:v}),(0,h.jsx)(w,{policy:"MAR",column:v}),(0,h.jsx)(w,{policy:"PA",column:v})]),I=Z.step,R=Z.goTo,L=(0,u.useContext)(a.V).user,E=(0,l.useQuery)({queryKey:"claims-notice",queryFn:function(){return(e=e||(0,r.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.G.get("/get-claims-notice",{headers:{Authorization:"Bearer ".concat(null===L||void 0===L?void 0:L.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}),T=E.data,M=E.isLoading,O=function(e,n){(0,d.flushSync)((function(){b(!0)})),D(e),R(e),y(n.target.getBoundingClientRect().left)},P=window.innerWidth-50,q=window.innerHeight-145;return(0,h.jsxs)("div",{id:"main",children:[("PRODUCTION"===(null===L||void 0===L?void 0:L.userAccess)||"ACCOUNTING"===(null===L||void 0===L?void 0:L.userAccess)||"PRODUCTION_ACCOUNTING"===(null===L||void 0===L?void 0:L.userAccess)||"ADMIN"===(null===L||void 0===L?void 0:L.userAccess))&&(0,h.jsxs)("div",{style:{position:"relative",width:"100%",height:"auto"},children:[(0,h.jsx)("h3",{style:{padding:0,margin:0,fontWeight:"bold",position:"absolute"},children:"RENEWAL NOTICE"}),(0,h.jsxs)("div",{style:{position:"relative",textAlign:"center",width:"100%",marginBottom:"10px"},children:[p.map((function(e,n){return(0,h.jsx)(g,{text:e.text,index:n,handleIncrement:O,curr:A},n)})),(0,h.jsx)("span",{onTransitionEnd:function(e){b(!1)},style:{position:"absolute",background:"rgba(0, 0, 0, 0.524)",top:0,left:"".concat(x,"px"),width:"60px",height:"40px",transition:"all 200ms",display:S?"block":"none"}})]}),(0,h.jsx)("div",{style:{width:"100%",height:"360px"},children:I})]}),("CLAIMS"===(null===L||void 0===L?void 0:L.userAccess)||"ADMIN"===(null===L||void 0===L?void 0:L.userAccess))&&(0,h.jsxs)("div",{children:[(0,h.jsx)("h3",{style:{padding:0,fontWeight:"bold"},children:"CLAIMS"}),M?(0,h.jsx)("div",{children:"Loading..."}):(0,h.jsx)(f.r,{isLoading:M,ref:null,rows:null===T||void 0===T?void 0:T.data.claims,column:m,width:P,height:q,dataReadOnly:!0,onSelectionChange:function(){},onKeyDown:function(){},inputsearchselector:".manok"})]})]})}var g=function(e){var n=e.text,t=void 0===n?"unknown":n,i=e.index,r=void 0===i?0:i,o=e.handleIncrement,u=e.curr;return(0,h.jsx)("button",{disabled:u===r,style:{border:"none",borderRadius:"0",cursor:"pointer",color:"white",background:u===r?"":"#008CBA",width:"80px",height:"40px",padding:0},onClick:function(e){o(r,e)},children:t})},w=function(e){var n=e.policy,t=e.column,i=(0,u.useRef)(),r=(0,u.useState)(!1),l=(0,o.Z)(r,2),s=l[0],d=l[1],v=(0,u.useState)([]),m=(0,o.Z)(v,2),p=m[0],x=m[1],g=(0,u.useContext)(a.V).user;(0,u.useEffect)((function(){d(!0),c.G.get("/get-renewal-this-month?policy=".concat(n),{headers:{Authorization:"Bearer ".concat(null===g||void 0===g?void 0:g.accessToken)}}).then((function(e){d(!1),x(null===e||void 0===e?void 0:e.data.renewal)}))}),[n]);var w=window.innerWidth-50,y=window.innerHeight-145;return s?(0,h.jsx)("div",{style:{textAlign:"center"},children:"Loading..."}):(0,h.jsx)("div",{children:(0,h.jsx)(f.r,{isLoading:s,ref:i,rows:p,column:t,width:w,height:y,dataReadOnly:!0,onSelectionChange:function(){},onKeyDown:function(){},inputsearchselector:".manok"})})}},25756:function(e,n,t){t.d(n,{Z:function(){return o}});var i=t(29439),r=t(72791);function o(e){var n=(0,r.useState)(0),t=(0,i.Z)(n,2),o=t[0],u=t[1];return{step:e[o],goTo:function(e){u(e)},back:function(){u((function(e){return e<=0?e:e+1}))},next:function(){u((function(n){return n>=e.length-1?n:n+1}))},isFirstStep:0!==o,isLastStep:o===e.length-1,currentStepIndex:o}}}}]);
//# sourceMappingURL=6813.94a66342.chunk.js.map