"use strict";(self.webpackChunkupward=self.webpackChunkupward||[]).push([[3911],{83911:function(e,s,n){n.r(s),n.d(s,{default:function(){return x}});var a,r=n(1413),t=n(29439),o=n(74165),i=n(15861),u=n(72791),c=n(57689),d=n(3380),l=n(91933),m=n(79018),p=n(31243),h=n(21830),g=n.n(h),w=(n(59491),n(80184));function f(e,s,n){return(a=a||(0,i.Z)((0,o.Z)().mark((function e(s,n,a){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.post("/login",{username:n,password:a},{withCredentials:!0});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){var e,s,n=(0,c.s0)(),a=(0,u.useState)({username:!1,password:!1,success:!1,message:""}),h=(0,t.Z)(a,2),x=h[0],v=h[1],j=(0,u.useContext)(d.V),N=j.setUser,S=j.myAxios,Z=(0,l.useMutation)({mutationKey:"login",mutationFn:function(s){return(e=e||(0,i.Z)((0,o.Z)().mark((function e(s){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.D)(1200).then((0,i.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(S,s.username,s.password);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){return e.data.username?v({username:!0,password:!1,success:!1,message:e.data.message}):e.data.password?v({username:!1,password:!0,success:!1,message:e.data.message}):(v({username:!1,password:!1,success:!0,message:e.data.message}),void g().fire({position:"center",icon:"success",title:e.data.message,showConfirmButton:!1,timer:800}).then((function(){var s,a,t,o,i,u;N(e.data.user),S.post("/get-user-details",(0,r.Z)({department:null===(s=e.data.user)||void 0===s?void 0:s.department,userAccess:null===(a=e.data.user)||void 0===a?void 0:a.userAccess,is_admin:null===(t=e.data.user)||void 0===t?void 0:t.is_master_admin,ACCESS_TOKEN:null===(o=e.data.user)||void 0===o?void 0:o.accessToken,REFRESH_TOKEN:null===(i=e.data.user)||void 0===i?void 0:i.refreshToken},null===(u=e.data)||void 0===u?void 0:u.cokie)).then((function(e){console.log(e),window.location.href="myreport://run"})),e.data.user.is_master_admin?n("/master-admin-dashboard"):(p.Z.get("http://localhost:7624/open-report",{withCredentials:!0}).then((function(e){e.data.success||alert(e.data.message)})).catch(console.log),n("/dashboard"))})))}}),k=Z.mutate,y=Z.isLoading,b=(0,u.useState)(!1),T=(0,t.Z)(b,2),C=T[0],A=T[1];return(0,w.jsxs)("div",{className:"main-landing-page",children:[(0,w.jsxs)("form",{className:"content",onSubmit:function(e){return(s=s||(0,i.Z)((0,o.Z)().mark((function e(s){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.preventDefault(),n=new FormData(s.currentTarget),k({username:n.get("username"),password:n.get("password")});case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},children:[(0,w.jsx)("img",{alt:"Upward Insurance",src:"/logo.png",style:{width:"120px",height:"auto",background:"white"}}),(0,w.jsx)("h3",{style:{fontWeight:"400",marginBottom:"30px"},children:"LOGIN TO UPWARD INSURANCE"}),(0,w.jsx)("div",{className:"content-field",children:(0,w.jsxs)("div",{children:[(0,w.jsx)("label",{htmlFor:"username",children:" USERNAME"}),(0,w.jsx)("input",{name:"username",id:"username",className:x.username?"error":"",onFocus:function(){return v({username:!1,password:!1,success:!1,message:""})}}),x.username&&(0,w.jsx)("p",{className:"warning-text",children:x.username&&x.message})]})}),(0,w.jsx)("div",{className:"content-field",style:{marginTop:"15px"},children:(0,w.jsxs)("div",{children:[(0,w.jsx)("label",{htmlFor:"password",children:" PASSWORD"}),(0,w.jsx)("input",{name:"password",id:"password",type:C?"text":"password",className:x.password?"error":"",onFocus:function(){return v({username:!1,password:!1,success:!1,message:""})}}),x.password&&(0,w.jsx)("p",{className:"warning-text",children:x.message})]})}),(0,w.jsxs)("div",{style:{display:"flex",alignItems:"center",columnGap:"10px",marginTop:"10px"},children:[(0,w.jsx)("input",{name:"showpass",id:"showpass",type:"checkbox",style:{padding:"0",margin:0},onChange:function(e){var s;console.log(e.currentTarget.checked),A(null===(s=e.currentTarget)||void 0===s?void 0:s.checked)}}),(0,w.jsx)("label",{htmlFor:"showpass",style:{fontSize:"10px",cursor:"pointer",padding:"0",margin:0},children:"SHOW PASSWORD"})]}),(0,w.jsx)("button",{children:"SUBMIT"})]}),y&&(0,w.jsx)("div",{className:"loading-component",children:(0,w.jsx)("div",{className:"loader"})})]})}}}]);
//# sourceMappingURL=3911.909e282b.chunk.js.map