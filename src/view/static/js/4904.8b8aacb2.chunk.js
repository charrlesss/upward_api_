"use strict";(self.webpackChunkupward=self.webpackChunkupward||[]).push([[4904,7899],{70272:function(e,n,t){var r=t(54270),o=t(80184);n.Z=function(e){var n=e.title,t=void 0===n?"":n;return(0,o.jsxs)(r.q,{children:[(0,o.jsx)("title",{children:t}),(0,o.jsx)("link",{rel:"icon",type:"image/png",href:"".concat("/","/logo.png")})]})}},65413:function(e,n,t){t.d(n,{g:function(){return a}});var r=t(13239),o=t(80184),a=function(){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{style:{position:"fixed",top:0,bottom:0,left:0,right:0,background:"red",zIndex:"88",backgroundColor:"rgba(0, 0, 0, 0.4)"}}),(0,o.jsxs)("div",{style:{position:"absolute",zIndex:"100",background:"white",width:"auto",height:"auto",top:"50%",left:"50%",transform:"translate(-50%,-50%)",boxShadow:"3px 6px 32px -7px rgba(0,0,0,0.75)",display:"flex",columnGap:"20px",alignItems:"center",justifyContent:"center",padding:"10px 15px"},children:[(0,o.jsx)(r.Z,{color:"primary"}),(0,o.jsx)("span",{children:"Loading..."})]})]})}},81582:function(e,n,t){t.d(n,{XT:function(){return p},ZP:function(){return f},rO:function(){return h}});t(72791);var r=t(88447),o=t(64554),a=t(20890),i=t(27391),l=t(13400),c=t(29823),u=t(89767),d=t(80184),s={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"80%",bgcolor:"background.paper",boxShadow:24,p:4,heigth:"auto"};function f(e){var n=e.height,t=e.isLoading,f=(e.queryKey,e.columns),v=e.onSelectionChange,x=(e.setRows,e.rows),y=e.id,m=e.onCloseModal,g=e.showModal,b=e.onClickCloseIcon,w=e.searchOnChange,C=e.title,S=void 0===C?"":C,D=e.searchRef,N=(e.onCellKeyDown,e.onSearchKeyEnter),j=void 0===N?function(){}:N,k=e.isRowSelectable,I=e.getCellClassName,T=p();return(0,d.jsx)(r.Z,{open:g,onClose:m,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,d.jsxs)(o.Z,{sx:s,children:[(0,d.jsx)(a.Z,{id:"modal-modal-title",variant:"h6",component:"h2",mb:2,children:S}),(0,d.jsx)(i.Z,{size:"small",label:"Search",sx:{marginBottom:"10px"},fullWidth:!0,onChange:w,InputProps:{inputRef:D},onKeyDown:function(e){var n;"Enter"!==e.code&&"NumpadEnter"!==e.code||(e.preventDefault(),j(null===D||void 0===D||null===(n=D.current)||void 0===n?void 0:n.value));h(e,T,null===D||void 0===D?void 0:D.current)}}),(0,d.jsx)("div",{className:"".concat(T," main-table-selection-container"),style:{position:"relative",height:"".concat(n+20,"px")},children:(0,d.jsx)(u.Z,{isSingleSelection:!0,isRowFreeze:!1,columns:f,isLoading:t,dataSelection:function(e,n,t){v(e,n)},table_id:y,rows:x,isRowSelectable:k,getCellClassName:I})}),(0,d.jsx)("div",{style:{position:"absolute",top:"10px",right:"10px"},children:(0,d.jsx)(l.Z,{"aria-label":"search-client",color:"secondary",onClick:b,children:(0,d.jsx)(c.Z,{})})})]})})}function p(){return"main-"+Math.floor(1e4*Math.random())}function h(e,n,t){var r=n;if("ArrowDown"===e.code){var o,a=document.querySelectorAll(".".concat(r," .MuiDataGrid-row"));e.preventDefault(),null===(o=a[0])||void 0===o||o.classList.add("hover-keyboard"),function(e,n){var t=document.querySelector(".".concat(e," .MuiDataGrid-row")),r=null===t||void 0===t?void 0:t.querySelector("input");null===r||void 0===r||r.focus();var o=new MouseEvent("mouseenter",{bubbles:!0,cancelable:!0,view:window});null===t||void 0===t||t.dispatchEvent(o),null===r||void 0===r||r.addEventListener("keydown",(function(e){"ArrowUp"===e.key&&(e.preventDefault(),n.focus()),"ArrowUp"===e.key&&(null===t||void 0===t||t.classList.remove("hover-keyboard"))}))}(n,t),a.forEach((function(e,n){e.addEventListener("keydown",(function(e){if("ArrowUp"===e.key){var t,r;if(n<=0)return;return e.preventDefault(),null===(t=a[n])||void 0===t||t.classList.remove("hover-keyboard"),void(null===(r=a[n-1])||void 0===r||r.classList.add("hover-keyboard"))}if("ArrowDown"===e.key){var o,i;if(e.preventDefault(),n>=a.length-1)return;null===(o=a[n])||void 0===o||o.classList.remove("hover-keyboard"),null===(i=a[n+1])||void 0===i||i.classList.add("hover-keyboard")}}))}))}}},89767:function(e,n,t){var r=t(93433),o=t(1413),a=t(29439),i=t(72791),l=t(57482),c=t(64554),u=t(70561),d=t(29961),s=t(54277),f=t(70169),p=t(5794),h=t(16088),v=t(80184),x=(0,i.createContext)({rows:[],rowSelectionModel:[],footerChildren:function(){return(0,v.jsx)("div",{})},footerPaginationPosition:"right-left",showFooterSelectedCount:!0}),y=(0,i.forwardRef)((function(e,n){var t=e.isLoading,c=e.columns,d=e.rows,s=e.table_id,f=e.isSingleSelection,p=e.isRowFreeze,h=e.dataSelection,y=e.CustomFooterComponent,m=void 0===y?b:y,g=e.isRowSelectable,w=e.getCellClassName,C=e.checkboxSelection,S=void 0===C||C,D=e.footerChildren,N=void 0===D?function(e,n){return(0,v.jsx)("div",{})}:D,j=e.footerPaginationPosition,k=void 0===j?"right-left":j,I=e.showFooterSelectedCount,T=void 0===I||I,Z=(0,i.useState)([]),A=(0,a.Z)(Z,2),E=A[0],R=A[1];function M(e,n,t){h&&h(e,n,t)}(0,i.useImperativeHandle)(n,(function(){return{removeSelection:function(){R([])},getSelectedRows:function(){return d.filter((function(e){return null===E||void 0===E?void 0:E.includes(e[s])}))},setSelectedRows:function(e){R(e)}}}));var L=[];return(0,v.jsx)(x.Provider,{value:{showFooterSelectedCount:T,footerPaginationPosition:k,rowSelectionModel:E,rows:d,footerChildren:N},children:(0,v.jsx)(u._$,{slots:{loadingOverlay:l.Z,footer:m},initialState:{pagination:{paginationModel:{pageSize:100}}},loading:t,getRowId:function(e){return e[s]},columns:c.filter((function(e){return!e.hide})),rows:d,showCellVerticalBorder:!0,showColumnVerticalBorder:!0,checkboxSelection:S,rowSelectionModel:E,rowHeight:25,columnHeaderHeight:35,pageSizeOptions:[10,20,35,50,75,100],sx:(0,o.Z)((0,o.Z)({"& .cash":{color:"#ec4899"},"& .check":{color:"#0891b2"},"& .approved":{color:"green"},"& .pending":{color:"orange"},"& .disapproved":{color:"red"},"& .normal":{color:"red"},"& .MuiDataGrid-row.Mui-selected:hover":{color:"black","& .MuiSvgIcon-root ":{fill:"#3b82f6"}},"& .hover-keyboard":{background:"#2563eb",color:"white","& .MuiSvgIcon-root ":{fill:"white"}},"& .MuiDataGrid-row:hover":{background:"#2563eb",color:"white","& .MuiSvgIcon-root ":{fill:"white"}},"& .MuiDataGrid-row.hover":{background:"#2563eb",color:"white","& .MuiSvgIcon-root ":{fill:"white"}},"& .MuiTablePagination-root p ":{padding:"0 !important"}},{"& .MuiDataGrid-columnHeaders":{background:"#64748b",color:"white",fontSize:"14px"},"& .MuiDataGrid-columnHeaderCheckbox .MuiDataGrid-columnHeaderTitleContainer .MuiSvgIcon-root ":{display:f||p?"none":"block",fill:"white"},"& .MuiDataGrid-columnHeaderCheckbox .MuiDataGrid-columnHeaderTitleContainer input ":{display:f||p?"none":"block"}}),{fontSize:13,fontWeight:500,"& .MuiDataGrid-checkboxInput":{height:"27px",width:"27px"},"& .MuiDataGrid-checkboxInput svg":{height:"20px",width:"20px"}}),onRowSelectionModelChange:function(e){if(p){if(e.length<=0)return;if(L=e,E.includes(L[L.length-1]))return;return R(e),void M([e[e.length-1]],d,null)}if(!p&&f)if(E&&(null===E||void 0===E?void 0:E.length)>0){var n=new Set(E);R(e.filter((function(e){return!n.has(e)})))}else R(e);else R(e);M([e[e.length-1]],d,null)},onCellKeyDown:function(e,n){if(["NumpadEnter","Enter","Delete","Backspace"].includes(n.code))return n.preventDefault(),"Enter"===n.code||"NumpadEnter"===n.code?f&&!p?R((function(t){return t&&t.length>0&&t[0]===e.rowNode.id?(M([],d,n.code),[]):(M([e.rowNode.id],d,n.code),[e.rowNode.id])})):void R((function(t){return t&&!p&&t.length>0&&t.includes(e.rowNode.id)?(t=t.filter((function(n){return n!==e.rowNode.id})),M([],d,n.code),t):t&&p&&t.length>0&&t.includes(e.rowNode.id)?t:(M([e.rowNode.id],d,n.code),[].concat((0,r.Z)(t),[e.rowNode.id]))})):"Delete"===n.code||"Backspace"===n.code?(R([e.rowNode.id]),M([e.rowNode.id],d,n.code)):void 0},disableVirtualization:!0,isRowSelectable:g,getCellClassName:w})})}));function m(e){var n=e.page,t=e.onPageChange,r=e.className,o=(0,d.l)(),a=(0,s.P)(o,f.UB);return(0,v.jsx)(h.Z,{variant:"outlined",color:"primary",className:r,count:a,page:n+1,onChange:function(e,n){t(e,n-1)}})}function g(e){return(0,v.jsx)(p.x,(0,o.Z)({ActionsComponent:m},e))}function b(e){var n=(0,i.useContext)(x),t=n.rowSelectionModel,r=n.showFooterSelectedCount,a=n.footerPaginationPosition,l=n.footerChildren,u=n.rows;return(0,v.jsxs)(c.Z,{sx:{columnGap:"50px",display:"flex",width:"100%",justifyContent:"space-between",px:3,alignItems:"center",flexDirection:"right-left"===a?"row-reverse":"row"},children:[(0,v.jsx)(g,(0,o.Z)({},e)),(0,v.jsxs)(c.Z,{sx:{display:"flex",justifyContent:"right-left"===a?"flex-start":"flex-end",flex:1,alignItems:"center"},children:[r&&(0,v.jsxs)("div",{children:["Selected:",null===t||void 0===t?void 0:t.length]}),(0,v.jsx)("div",{children:l(t,u)})]})]})}n.Z=y},80878:function(e,n,t){t.r(n),t.d(n,{default:function(){return ne},reducer:function(){return $}});var r=t(37762),o=t(74165),a=t(15861),i=t(29439),l=t(4942),c=t(1413),u=t(72791),d=t(36151),s=t(88447),f=t(64554),p=t(13400),h=t(20890),v=t(85523),x=t(94454),y=t(68096),m=t(94925),g=t(58406),b=t(23786),w=t(67442),C=t(39709),S=t(42419),D=t(29823),N=t(21830),j=t.n(N),k=t(3380),I=t(91933),T=t(93263),Z=t(79018),A=t(84669),E=t(71652),R=t(48193),M=t(93777),L=t(95643),_={50:"#efebe9",100:"#d7ccc8",200:"#bcaaa4",300:"#a1887f",400:"#8d6e63",500:"#795548",600:"#6d4c41",700:"#5d4037",800:"#4e342e",900:"#3e2723",A100:"#d7ccc8",A200:"#bcaaa4",A400:"#8d6e63",A700:"#5d4037"},z=t(5519),F=t(64230),P=t(54164),O=t(53329),B=t(37209),K=t(42249),V=t(85545),U=t(84072),q=t(16386),G=t(8604),H=t(70272),W=t(11690),J=t(65413),Y=t(637),Q=t(80184),X={totalDebit:"",totalCredit:"",totalBalance:"",jobAutoExp:!1,jobTransactionDate:new Date,jobType:"",search:""},$=function(e,n){return"UPDATE_FIELD"===n.type?(0,c.Z)((0,c.Z)({},e),{},(0,l.Z)({},n.field,n.value)):e},ee=[{key:"code",label:"Code",width:150},{key:"acctName",label:"Account Name",width:300},{key:"subAcctName",label:"Sub Account",width:170},{key:"ClientName",label:"Name",width:300},{key:"debit",label:"Debit",width:120,type:"number"},{key:"credit",label:"Credit",width:120,type:"number"},{key:"TC_Code",label:"TC",width:120},{key:"remarks",label:"Remarks",flex:1,width:300},{key:"vatType",label:"Vat Type",width:120},{key:"invoice",label:"Invoice",width:200},{key:"TempID",label:"TempId",hide:!0},{key:"IDNo",label:"I.D.",width:300,hide:!0},{key:"BranchCode",label:"BranchCode",width:300,hide:!0}];function ne(){var e,n,t,l,c,N=(0,Y.Z)().executeQueryToClient,ne=(0,u.useState)(""),re=(0,i.Z)(ne,2),oe=re[0],ae=re[1],ie=(0,u.useState)({totalRow:"0",totalDebit:"0.00",totalCredit:"0.00",balance:"0.00"}),le=(0,i.Z)(ie,2),ce=le[0],ue=le[1],de=(0,u.useState)(!1),se=(0,i.Z)(de,2),fe=se[0],pe=se[1],he=(0,u.useRef)(null),ve=(0,u.useRef)(null),xe=(0,u.useRef)(null),ye=(0,u.useRef)(null),me=(0,u.useRef)(null),ge=(0,u.useRef)(null),be=(0,u.useRef)(null),we=(0,u.useRef)(null),Ce=(0,u.useRef)(null),Se=(0,u.useRef)(null),De=(0,u.useRef)(null),Ne=(0,u.useRef)(null),je=(0,u.useRef)(null),ke=(0,u.useRef)(null),Ie=(0,u.useRef)(null),Te=(0,u.useRef)(""),Ze=(0,u.useRef)(""),Ae=(0,u.useRef)(""),Ee=(0,u.useContext)(k.V),Re=Ee.myAxios,Me=Ee.user,Le=(0,u.useReducer)($,X),_e=(0,i.Z)(Le,2),ze=_e[0],Fe=_e[1],Pe=(0,u.useState)(!1),Oe=(0,i.Z)(Pe,2),Be=Oe[0],Ke=Oe[1],Ve=(0,u.useRef)(null),Ue=(0,u.useRef)(null),qe=(0,u.useRef)(null),Ge="add"===oe,He="update"===oe,We=""===oe,Je=(0,I.useQuery)({queryKey:"general-journal-id-generator",queryFn:function(){return(e=e||(0,a.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Re.get("/task/accounting/general-journal/get-general-journal-id",{headers:{Authorization:"Bearer ".concat(null===Me||void 0===Me?void 0:Me.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},refetchOnWindowFocus:!1,onSuccess:function(e){var n,t=e;He?Fe({type:"UPDATE_FIELD",field:"refNo",value:null!==(n=ze.sub_refNo)&&void 0!==n?n:""}):(0,Z.D)(100).then((function(){ve.current&&(ve.current.value=t.data.generateGeneralJournalID[0].general_journal_id),xe.current&&(xe.current.value=t.data.generateGeneralJournalID[0].general_journal_id),ke.current&&(ke.current.value="Non-VAT")}))}}),Ye=Je.isLoading,Qe=Je.refetch,Xe=(0,I.useMutation)({mutationKey:"add-journal-voucher",mutationFn:function(e){return(n=n||(0,a.Z)((0,o.Z)().mark((function e(n){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Re.post("/task/accounting/general-journal/add-general-journal",n,{headers:{Authorization:"Bearer ".concat(null===Me||void 0===Me?void 0:Me.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var n=e;return n.data.success?j().fire({position:"center",icon:"success",title:n.data.message,timer:1500}).then((function(){j().fire({text:"Do you want to print it?",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, save it!"}).then((function(e){e.isConfirmed&&An(),(0,Z.D)(100).then((function(){Rn(),Mn(),Ln(),_n(),ae("")}))}))})):j().fire({position:"center",icon:"warning",title:n.data.message,timer:1500})}}),$e=Xe.mutate,en=Xe.isLoading,nn=(0,I.useMutation)({mutationKey:"void-journal-voucher",mutationFn:function(e){return(t=t||(0,a.Z)((0,o.Z)().mark((function e(n){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Re.post("/task/accounting/general-journal/void-general-journal",n,{headers:{Authorization:"Bearer ".concat(null===Me||void 0===Me?void 0:Me.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var n=e;return n.data.success?(Rn(),Mn(),Ln(),_n(),ae(""),j().fire({position:"center",icon:"success",title:n.data.message,timer:1500})):j().fire({position:"center",icon:"warning",title:n.data.message,timer:1500})}}),tn=nn.mutate,rn=nn.isLoading,on=(0,I.useMutation)({mutationKey:"get-selected-search-general-journal",mutationFn:function(e){return(l=l||(0,a.Z)((0,o.Z)().mark((function e(n){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Re.post("/task/accounting/general-journal/get-selected-search-general-journal",n,{headers:{Authorization:"Bearer ".concat(null===Me||void 0===Me?void 0:Me.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var n=e.data.getSelectedSearchGeneralJournal,t=n[0],r=t.explanation,o=t.dateEntry,a=t.refNo;ve.current&&(ve.current.value=a),ye.current&&(ye.current.value=(0,q.Z)(new Date(o),"yyyy-MM-dd")),me.current&&(me.current.value=r),qe.current.setDataFormated(n),En()}}),an=on.mutate,ln=on.isLoading,cn=(0,T.Z)({link:{url:"/task/accounting/general-journal/search-general-journal",queryUrlName:"searchGeneralJournal"},columns:[{field:"Date_Entry",headerName:"Date",width:130},{field:"Source_No",headerName:"Ref No.",width:250},{field:"Explanation",headerName:"Explanation",flex:1}],queryKey:"search-general-journal",uniqueId:"Source_No",responseDataKey:"searchGeneralJournal",onSelected:function(e,n){an({Source_No:e[0].Source_No}),ae("update"),qe.current.resetTable(),fn(),Tn()},onCloseFunction:function(e){Fe({type:"UPDATE_FIELD",field:"search",value:e})},searchRef:Ve}),un=cn.ModalComponent,dn=cn.openModal,sn=cn.isLoading,fn=cn.closeModal,pn=(0,T.Z)({link:{url:"/task/accounting/general-journal/get-chart-account",queryUrlName:"chartAccountSearch"},columns:[{field:"Acct_Code",headerName:"Account Code",width:130},{field:"Acct_Title",headerName:"Account Title.",width:250},{field:"Short",headerName:"Short",flex:1}],queryKey:"get-chart-account",uniqueId:"Acct_Code",responseDataKey:"getChartOfAccount",onSelected:function(e,n){ge.current&&(ge.current.value=e[0].Acct_Code),be.current&&(be.current.value=e[0].Acct_Title),yn(),setTimeout((function(){var e;null===(e=Ce.current)||void 0===e||e.focus()}),250)},searchRef:Ve}),hn=pn.ModalComponent,vn=pn.openModal,xn=pn.isLoading,yn=pn.closeModal,mn=(0,T.Z)({link:{url:"/task/accounting/search-pdc-policy-id",queryUrlName:"searchPdcPolicyIds"},columns:[{field:"Type",headerName:"Type",width:130},{field:"IDNo",headerName:"ID No.",width:200},{field:"Name",headerName:"Name",flex:1},{field:"ID",headerName:"ID",hide:!0}],queryKey:"get-policyId-ClientId-RefId",uniqueId:"IDNo",responseDataKey:"clientsId",onSelected:function(e){var n,t;Ce.current&&(Ce.current.value=null!==(n=e[0].Name)&&void 0!==n?n:"");we.current&&(we.current.value=null!==(t=e[0].ShortName)&&void 0!==t?t:"");Te.current=e[0].IDNo,Ze.current=e[0].sub_account,Cn(),setTimeout((function(){var e;null===(e=Se.current)||void 0===e||e.focus()}),200)},searchRef:Ue}),gn=mn.ModalComponent,bn=mn.openModal,wn=mn.isLoading,Cn=mn.closeModal,Sn=(0,T.Z)({link:{url:"/task/accounting/general-journal/get-transaction-account",queryUrlName:"transactionCodeSearch"},columns:[{field:"Code",headerName:"Code",width:130},{field:"Description",headerName:"Description",flex:1}],queryKey:"get-transaction-account",uniqueId:"Code",responseDataKey:"getTransactionAccount",onSelected:function(e){Ne.current&&(Ne.current.value=e[0].Code),Ae.current=e[0].Description,kn(),setTimeout((function(){var e;null===(e=je.current)||void 0===e||e.focus()}),200)},searchRef:Ue}),Dn=Sn.ModalComponent,Nn=Sn.openModal,jn=Sn.isLoading,kn=Sn.closeModal,In=(0,u.useCallback)((function(){var e,n;if(""===(null===(e=ve.current)||void 0===e?void 0:e.value))return j().fire({position:"center",icon:"warning",title:"Please provide reference number!",timer:1500});if(""===(null===(n=me.current)||void 0===n?void 0:n.value))return j().fire({position:"center",icon:"warning",title:"Please provide explanation!",timer:1500}).then((function(){(0,Z.D)(300).then((function(){var e;null===(e=me.current)||void 0===e||e.focus()}))}));if(parseFloat(ce.totalDebit.replace(/,/g,""))<=0||parseFloat(ce.totalCredit.replace(/,/g,""))<=0)return j().fire({position:"center",icon:"warning",title:"Total Debit and Credit amount must not be zero(0), please double check the entries",timer:1500}).then((function(){(0,Z.D)(300).then((function(){}))}));if(ce.totalDebit!==ce.totalCredit)return j().fire({position:"center",icon:"warning",title:"Total Debit and Credit amount must be balance, please double check the entries",timer:1500}).then((function(){(0,Z.D)(300).then((function(){}))}));var t=qe.current.getData().map((function(e){return{code:e[0],acctName:e[1],subAcctName:e[2],ClientName:e[3],debit:e[4],credit:e[5],TC_Code:e[6],remarks:e[7],vatType:e[8],invoice:e[9],TempID:e[10],IDNo:e[11],BranchCode:e[12]}}));He?(0,F.s)({isUpdate:!0,cb:function(e){var n,r,o;$e({hasSelected:!0,refNo:null===(n=ve.current)||void 0===n?void 0:n.value,dateEntry:null===(r=ye.current)||void 0===r?void 0:r.value,explanation:null===(o=me.current)||void 0===o?void 0:o.value,generalJournal:t,userCodeConfirmation:e})}}):(0,F.L)({isConfirm:function(){var e,n,r;$e({hasSelected:!1,refNo:null===(e=ve.current)||void 0===e?void 0:e.value,dateEntry:null===(n=ye.current)||void 0===n?void 0:n.value,explanation:null===(r=me.current)||void 0===r?void 0:r.value,generalJournal:t})}})}),[ce,$e,He]);function Tn(){ge.current&&(ge.current.value=""),be.current&&(be.current.value=""),Ce.current&&(Ce.current.value=""),we.current&&(we.current.value=""),Ne.current&&(Ne.current.value=""),Se.current&&(Se.current.value=""),De.current&&(De.current.value=""),je.current&&(je.current.value=""),ke.current&&(ke.current.value="Non-VAT"),Ie.current&&(Ie.current.value=""),Ae.current="",Te.current="",Ze.current=""}function Zn(){var e,n,t,r,o,a,i;if(ge.current&&""===ge.current.value)return j().fire({position:"center",icon:"warning",title:"Code is required!",timer:1500}).then((function(){(0,Z.D)(300).then((function(){return vn(ze.code)}))}));if(Ce.current&&""===Ce.current.value)return j().fire({position:"center",icon:"warning",title:"ID is required!",timer:1500}).then((function(){(0,Z.D)(300).then((function(){var e;return bn(null===(e=Ce.current)||void 0===e?void 0:e.value)}))}));if(Se.current&&isNaN(parseFloat(null===(e=Se.current)||void 0===e?void 0:e.value.replace(/,/g,""))))return j().fire({position:"center",icon:"warning",title:"Debit is required!",timer:1500}).then((function(){(0,Z.D)(300).then((function(){var e;null===(e=Se.current)||void 0===e||e.focus()}))}));if(De.current&&isNaN(parseFloat(null===(n=De.current)||void 0===n?void 0:n.value.replace(/,/g,""))))return j().fire({position:"center",icon:"warning",title:"Credit is required!",timer:1500}).then((function(){(0,Z.D)(300).then((function(){var e;null===(e=De.current)||void 0===e||e.focus()}))}));if(Se.current&&De.current&&0===parseFloat(null===(t=De.current)||void 0===t?void 0:t.value.replace(/,/g,""))&&0===parseFloat(null===(r=Se.current)||void 0===r?void 0:r.value.replace(/,/g,"")))return j().fire({position:"center",icon:"warning",title:"Credit and Debit must be different!",timer:1500}).then((function(){(0,Z.D)(300).then((function(){var e;null===(e=De.current)||void 0===e||e.focus()}))}));if(Ne.current&&""===(null===(o=Ne.current)||void 0===o?void 0:o.value))return j().fire({position:"center",icon:"warning",title:"TC is required!",timer:1500}).then((function(){(0,Z.D)(300).then((function(){Nn(ze.TC_Code)}))}));if(ge.current&&(null===(a=ge.current)||void 0===a?void 0:a.value.length)>=200)return j().fire({position:"center",icon:"warning",title:"Code is too long!",timer:1500}).then((function(){(0,Z.D)(300).then((function(){var e;null===(e=ge.current)||void 0===e||e.focus()}))}));if(Ce.current&&(null===(i=Ce.current)||void 0===i?void 0:i.value.length)>=200)return j().fire({position:"center",icon:"warning",title:"Client name is too long!",timer:1500}).then((function(){(0,Z.D)(300).then((function(){var e;null===(e=Ce.current)||void 0===e||e.focus()}))}));if(Ne.current&&Ne.current.value.length>=200)return j().fire({position:"center",icon:"warning",title:"TC is too long!",timer:1500}).then((function(){(0,Z.D)(300).then((function(){var e;null===(e=Ne.current)||void 0===e||e.focus()}))}));if(Ie.current&&Ie.current.value.length>=200)return j().fire({position:"center",icon:"warning",title:"Invoice is too long!",timer:1500}).then((function(){(0,Z.D)(300).then((function(){var e;null===(e=Ie.current)||void 0===e||e.focus()}))}));var l=qe.current.getSelectedRow(),c=null!==l;j().fire({title:c?"Are you sure you want to update row?":"Are you sure you want to add new row?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:c?"Yes, update it!":"Yes Add it"}).then((function(e){if(e.isConfirmed&&ge.current&&be.current&&we.current&&Ce.current&&Se.current&&De.current&&Ne.current&&je.current&&ke.current&&Ie.current){var n=qe.current.getData(),t=[ge.current.value,be.current.value,we.current.value,Ce.current.value,Se.current.value,De.current.value,Ne.current.value,je.current.value,ke.current.value,Ie.current.value,Te.current,Ze.current,"HO"],r=[],o=0;if("VAT"===t[8]&&"1.06.02"!==t[0]){var a=parseFloat(t[4].replace(/,/g,"")),i=parseFloat(t[5].replace(/,/g,""));a>0?(o=a/1.12,t[4]=zn(o)):(o=i/1.12,t[5]=zn(o));var u=.12*o,d="",s="";a>0?(d=zn(u),s=t[5]):(s=zn(u),d=t[4]),r=["1.06.02","Input Tax",we.current.value,Ce.current.value,d,s,Ne.current.value,je.current.value,ke.current.value,Ie.current.value,Te.current,Ze.current]}c?(n[l]=t,qe.current.setSelectedRow(null)):n[n.length]=t,qe.current.setData(n),setTimeout((function(){if("VAT"===t[8]&&"1.06.02"!==t[0]){var e=qe.current.getData();c?e.splice(l+1,0,r):e[e.length]=r,qe.current.setData(e)}Tn()}),100),setTimeout((function(){ge.current&&ge.current.focus()}),350),En()}}))}function An(){(0,P.flushSync)((function(){var e,n,t,r=qe.current.getData(),o=r.map((function(e){return{code:e[0],acctName:e[1],subAcctName:e[2],ClientName:e[3],debit:e[4],credit:e[5],TC_Code:e[6],remarks:e[7],vatType:e[8],invoice:e[9],TempID:e[10],IDNo:e[11],BranchCode:e[12]}}));console.log(r),localStorage.removeItem("printString"),localStorage.setItem("dataString",JSON.stringify(o)),localStorage.setItem("paper-width","8.5in"),localStorage.setItem("paper-height","11in"),localStorage.setItem("module","general-journal"),localStorage.setItem("state",JSON.stringify({JVNo:null===(e=ve.current)||void 0===e?void 0:e.value,JVDate:null===(n=ye.current)||void 0===n?void 0:n.value,JVExp:null===(t=me.current)||void 0===t?void 0:t.value})),localStorage.setItem("column",JSON.stringify([{datakey:"code",header:"ACCT #",width:"70px"},{datakey:"acctName",header:"ACCOUNT TITLE",width:"130px"},{datakey:"IDNo",header:"ID NO.",width:"120px"},{datakey:"ClientName",header:"IDENTITY",width:"200px"},{datakey:"debit",header:"DEBIT",width:"65px"},{datakey:"credit",header:"CREDIT",width:"65px"}])),localStorage.setItem("title","UMIS"===(null===Me||void 0===Me?void 0:Me.department)?"UPWARD MANAGEMENT INSURANCE SERVICES\n":"UPWARD CONSULTANCY SERVICES AND MANAGEMENT INC.\n")})),window.open("/dashboard/print","_blank")}function En(){setTimeout((function(){var e=qe.current.getData(),n=e.reduce((function(e,n){return e+parseFloat(n[4].replace(/,/g,""))}),0),t=e.reduce((function(e,n){return e+parseFloat(n[5].replace(/,/g,""))}),0);ue({totalRow:"".concat(e.length),totalCredit:zn(n),totalDebit:zn(t),balance:zn(n-t)})}),200)}function Rn(){Qe(),ye.current&&(ye.current.value=(0,q.Z)(new Date,"yyyy-MM-dd")),me.current&&(me.current.value="")}function Mn(){ge.current&&(ge.current.value=""),be.current&&(be.current.value=""),we.current&&(we.current.value=""),Ce.current&&(Ce.current.value=""),Se.current&&(Se.current.value=""),De.current&&(De.current.value=""),Ne.current&&(Ne.current.value=""),je.current&&(je.current.value=""),ke.current&&(ke.current.value="Non-VAT"),Ie.current&&(Ie.current.value="")}function Ln(){qe.current.resetTable()}function _n(){ue({totalRow:"0",totalDebit:"0.00",totalCredit:"0.00",balance:"0.00"})}function zn(e){return e.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}return(0,u.useEffect)((function(){var e=function(e){(e.ctrlKey||e.metaKey)&&"s"===e.key&&(e.preventDefault(),In())};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[In]),(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(H.Z,{title:"General Journal"}),(ln||fe||en||rn)&&(0,Q.jsx)(J.g,{}),(0,Q.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"100%",height:"100%",flex:1,padding:"10px",background:"#F1F1F1"},children:[(0,Q.jsxs)("div",{style:{display:"flex",alignItems:"center",columnGap:"5px"},children:[(0,Q.jsxs)("div",{style:{display:"flex",alignItems:"center",columnGap:"5px"},children:[sn?(0,Q.jsx)(C.Z,{loading:sn}):(0,Q.jsx)(B.oi,{label:{title:"Search: ",style:{fontSize:"12px",fontWeight:"bold",width:"50px"}},input:{className:"search-input-up-on-key-down",type:"search",onKeyDown:function(e){("Enter"!==e.key&&"NumpadEnter"!==e.key||(e.preventDefault(),dn(e.currentTarget.value)),"ArrowDown"===e.key)&&(e.preventDefault(),document.querySelector(".grid-container").focus())},style:{width:"500px"}},inputRef:he}),We&&(0,Q.jsx)(d.Z,{sx:{height:"30px",fontSize:"11px"},variant:"contained",startIcon:(0,Q.jsx)(S.Z,{sx:{width:15,height:15}}),id:"entry-header-save-button",onClick:function(){ae("add")},color:"primary",children:"New"}),(0,Q.jsx)(C.Z,{sx:{height:"30px",fontSize:"11px"},loading:en,disabled:We,onClick:In,color:"success",variant:"contained",children:"Save"}),(Ge||He)&&(0,Q.jsx)(C.Z,{sx:{height:"30px",fontSize:"11px"},variant:"contained",startIcon:(0,Q.jsx)(D.Z,{sx:{width:15,height:15}}),color:"error",onClick:function(){j().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, cancel it!"}).then((function(e){e.isConfirmed&&(Rn(),Mn(),Ln(),_n(),ae(""))}))},disabled:We,children:"Cancel"}),(0,Q.jsx)(C.Z,{sx:{height:"30px",fontSize:"11px",background:L.Z[500],":hover":{background:L.Z[600]}},onClick:function(){(0,F.s)({isUpdate:!1,text:"Are you sure you want to void ".concat(ze.refNo),cb:function(e){tn({refNo:ze.refNo,dateEntry:ze.dateEntry,userCodeConfirmation:e})}})},loading:rn,disabled:We,variant:"contained",startIcon:(0,Q.jsx)(A.Z,{sx:{width:20,height:20}}),children:"Void"}),(0,Q.jsx)(C.Z,{sx:{height:"30px",fontSize:"11px",background:_[500],":hover":{background:_[600]}},onClick:function(){Ke((function(e){return!e}))},variant:"contained",startIcon:(0,Q.jsx)(w.Z,{sx:{width:20,height:20}}),children:"Jobs"}),(0,Q.jsx)(d.Z,{disabled:We,id:"basic-button","aria-haspopup":"true",onClick:An,sx:{height:"30px",fontSize:"11px",color:"white",backgroundColor:z.Z[600],"&:hover":{backgroundColor:z.Z[700]}},children:"Print"})]}),(0,Q.jsxs)("div",{style:{fontSize:"13px",border:"1px solid #d4d4d8",width:"100%",display:"flex",columnGap:"50px",height:"30px",alignItems:"center",justifyContent:"center"},children:[(0,Q.jsxs)("p",{style:{margin:0,padding:0,color:"black"},children:[(0,Q.jsx)("span",{style:{fontSize:"12px"},children:"Total Rows:"})," ",(0,Q.jsx)("strong",{children:ce.totalRow})]}),(0,Q.jsxs)("p",{style:{margin:0,padding:0,color:"black"},children:[(0,Q.jsx)("span",{style:{fontSize:"12px"},children:"Total Debit:"})," ",(0,Q.jsx)("strong",{children:ce.totalDebit})]}),(0,Q.jsxs)("p",{style:{margin:0,padding:0,color:"black"},children:[(0,Q.jsx)("span",{style:{fontSize:"12px"},children:"Total Credit:"})," ",(0,Q.jsx)("strong",{children:ce.totalCredit})]}),(0,Q.jsxs)("p",{style:{margin:0,padding:0,color:"black"},children:[(0,Q.jsx)("span",{style:{fontSize:"12px"},children:"Balance:"})," ",(0,Q.jsx)("strong",{style:{color:0!==parseInt(ce.balance.replace(/,/g,""))?"red":"black"},children:ce.balance})]})]})]}),(0,Q.jsxs)("div",{style:{position:"relative",width:"100%",height:"auto",display:"flex",marginTop:"10px",gap:"10px",padding:"5px"},children:[Ye?(0,Q.jsx)(C.Z,{loading:Ye}):(0,Q.jsx)(B.oi,{label:{title:"Ref. No. : ",style:{fontSize:"12px",fontWeight:"bold",width:"70px"}},input:{disabled:We||He,type:"text",style:{width:"190px"},onKeyDown:function(e){var n;"NumpadEnter"!==e.code&&"Enter"!==e.code||(null===(n=ye.current)||void 0===n||n.focus())}},inputRef:ve}),(0,Q.jsx)(B.oi,{label:{title:"Date : ",style:{fontSize:"12px",fontWeight:"bold",width:"50px"}},input:{defaultValue:(0,q.Z)(new Date,"yyyy-MM-dd"),disabled:We,type:"date",style:{width:"190px"},onKeyDown:function(e){var n;"NumpadEnter"!==e.code&&"Enter"!==e.code||(null===(n=me.current)||void 0===n||n.focus())}},inputRef:ye}),(0,Q.jsx)(B.oi,{label:{title:"Explanation : ",style:{fontSize:"12px",fontWeight:"bold",width:"90px"}},input:{disabled:We,type:"text",style:{width:"600px"},onKeyDown:function(e){var n;"NumpadEnter"!==e.code&&"Enter"!==e.code||(null===(n=ge.current)||void 0===n||n.focus())}},inputRef:me})]}),(0,Q.jsxs)("fieldset",{style:{border:"1px solid #cbd5e1",borderRadius:"5px",position:"relative",width:"100%",height:"auto",marginTop:"10px",padding:"15px"},children:[(0,Q.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[xn?(0,Q.jsx)(C.Z,{loading:xn}):(0,Q.jsx)(B.oi,{label:{title:"Code : ",style:{fontSize:"12px",fontWeight:"bold",width:"70px"}},input:{disabled:We,type:"text",style:{width:"190px"},onKeyDown:function(e){"Enter"!==e.key&&"NumpadEnter"!==e.key||(e.preventDefault(),ge.current&&vn(ge.current.value))}},inputRef:ge,icon:(0,Q.jsx)(K.Z,{sx:{fontSize:"18px",color:We?"gray":"black"}}),onIconClick:function(e){e.preventDefault(),ge.current&&vn(ge.current.value)},disableIcon:We}),(0,Q.jsx)(B.oi,{label:{title:"Account Name : ",style:{fontSize:"12px",fontWeight:"bold",width:"100px"}},input:{disabled:We,type:"text",style:{width:"190px"},readOnly:!0,onKeyDown:function(e){var n;"NumpadEnter"!==e.code&&"Enter"!==e.code||(null===(n=we.current)||void 0===n||n.focus())}},inputRef:be}),(0,Q.jsx)(B.oi,{label:{title:"Sub Account : ",style:{fontSize:"12px",fontWeight:"bold",width:"100px"}},input:{disabled:We,type:"text",style:{width:"190px"},readOnly:!0,onKeyDown:function(e){var n;"NumpadEnter"!==e.code&&"Enter"!==e.code||(null===(n=Ce.current)||void 0===n||n.focus())}},inputRef:we}),wn?(0,Q.jsx)(C.Z,{loading:wn}):(0,Q.jsx)(B.oi,{label:{title:"I.D : ",style:{fontSize:"12px",fontWeight:"bold",width:"70px"}},input:{disabled:We,type:"text",style:{width:"300px"},onKeyDown:function(e){"Enter"!==e.key&&"NumpadEnter"!==e.key||(e.preventDefault(),Ce.current&&bn(Ce.current.value))}},inputRef:Ce,icon:(0,Q.jsx)(V.Z,{sx:{fontSize:"18px",color:We?"gray":"black"}}),onIconClick:function(e){e.preventDefault(),Ce.current&&bn(Ce.current.value)},disableIcon:We})]}),(0,Q.jsxs)("div",{style:{display:"flex",gap:"10px",marginTop:"10px"},children:[(0,Q.jsx)(B.iA,{label:{title:"Debit : ",style:{fontSize:"12px",fontWeight:"bold",width:"70px"}},input:{disabled:We,type:"text",style:{width:"190px"},onKeyDown:function(e){var n;"NumpadEnter"!==e.code&&"Enter"!==e.code||(null===(n=De.current)||void 0===n||n.focus())}},inputRef:Se}),(0,Q.jsx)(B.iA,{label:{title:"Credit : ",style:{fontSize:"12px",fontWeight:"bold",width:"100px"}},input:{disabled:We,type:"text",style:{width:"190px"},onKeyDown:function(e){var n;"NumpadEnter"!==e.code&&"Enter"!==e.code||(null===(n=Ne.current)||void 0===n||n.focus())}},inputRef:De}),jn?(0,Q.jsx)(C.Z,{loading:jn}):(0,Q.jsx)(B.oi,{label:{title:"TC : ",style:{fontSize:"12px",fontWeight:"bold",width:"100px"}},input:{disabled:We,type:"text",style:{width:"190px"},onKeyDown:function(e){"Enter"!==e.key&&"NumpadEnter"!==e.key||(e.preventDefault(),Ne.current&&Nn(Ne.current.value))}},inputRef:Ne,icon:(0,Q.jsx)(U.Z,{sx:{fontSize:"18px",color:We?"gray":"black"}}),onIconClick:function(e){e.preventDefault(),Ne.current&&Nn(Ne.current.value)},disableIcon:We}),(0,Q.jsx)(B.oi,{label:{title:"Remarks : ",style:{fontSize:"12px",fontWeight:"bold",width:"70px"}},input:{disabled:We,type:"text",style:{width:"300px"},onKeyDown:function(e){var n;"NumpadEnter"!==e.code&&"Enter"!==e.code||(null===(n=ke.current)||void 0===n||n.focus())}},inputRef:je})]}),(0,Q.jsxs)("div",{style:{display:"flex",gap:"10px",marginTop:"10px"},children:[(0,Q.jsx)(B.lq,{label:{title:"Vat Type : ",style:{fontSize:"12px",fontWeight:"bold",width:"70px"}},selectRef:ke,select:{disabled:We,style:{width:"190px",height:"22px"},defaultValue:"Non-VAT",onKeyDown:function(e){var n;"NumpadEnter"!==e.code&&"Enter"!==e.code||(e.preventDefault(),null===(n=Ie.current)||void 0===n||n.focus())}},datasource:[{key:"VAT"},{key:"Non-VAT"}],values:"key",display:"key"}),(0,Q.jsx)(B.oi,{label:{title:"OR/Invoice No. : ",style:{fontSize:"12px",fontWeight:"bold",width:"100px"}},input:{disabled:We,type:"text",style:{width:"300px"},onKeyDown:function(e){"NumpadEnter"!==e.code&&"Enter"!==e.code||(e.preventDefault(),Zn())}},inputRef:Ie}),(0,Q.jsx)(d.Z,{disabled:We,sx:{height:"22px",fontSize:"11px"},variant:"contained",startIcon:(0,Q.jsx)(O.Z,{sx:{fontSize:"12px"}}),onClick:function(){Zn()},color:"success",children:"Save Row"})]})]}),(0,Q.jsx)(W.BW,{ref:qe,columns:ee,height:"380px",getSelectedItem:function(e){e?(Te.current=e[11],Ze.current=e[12],ge.current&&(ge.current.value=e[0]),be.current&&(be.current.value=e[1]),we.current&&(we.current.value=e[2]),Ce.current&&(Ce.current.value=e[3]),Se.current&&(Se.current.value=e[4]),De.current&&(De.current.value=e[5]),Ne.current&&(Ne.current.value=e[6]),je.current&&(je.current.value=e[7]),ke.current&&(ke.current.value=e[8]),Ie.current&&(Ie.current.value=e[9])):Tn()},onKeyDown:function(e,n,t){if(("Delete"===t.code||"Backspace"===t.code)&&window.confirm("Are you sure you want to delete?")){var r=qe.current.getData();return r.splice(n,1),qe.current.setData(r),void setTimeout((function(){qe.current.getData();En()}),200)}}}),(0,Q.jsx)(s.Z,{open:Be,onClose:function(){return Ke(!1)},children:(0,Q.jsxs)(f.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:470,bgcolor:"background.paper",p:4},children:[(0,Q.jsx)(p.Z,{style:{position:"absolute",top:"10px",right:"10px"},"aria-label":"search-client",onClick:function(){return Ke(!1)},children:(0,Q.jsx)(D.Z,{})}),(0,Q.jsx)(h.Z,{id:"modal-modal-title",variant:"h6",component:"h2",sx:{marginBottom:"20px"},children:"Jobs"}),(0,Q.jsxs)("div",{style:{width:"400px"},children:[(0,Q.jsxs)("div",{style:{width:"100%",display:"flex",marginBottom:"10px",justifyContent:"space-between",alignItems:"center"},children:[(0,Q.jsx)(E._,{dateAdapter:R.H,children:(0,Q.jsx)(M.M,{sx:{width:"200px",".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},slotProps:{textField:{size:"small",name:"",InputLabelProps:{style:{fontSize:"14px"}},InputProps:{style:{height:"27px",fontSize:"14px"}}}},label:"Transaction Date: ",views:["month","year"],value:ze.jobTransactionDate,onChange:function(e){Fe({type:"UPDATE_FIELD",field:"jobTransactionDate",value:e})}})}),(0,Q.jsx)(v.Z,{sx:{height:"30px","& .MuiTypography-root":{fontSize:"14px"}},control:(0,Q.jsx)(x.Z,{size:"small",checked:ze.jobAutoExp,onChange:function(e){Fe({type:"UPDATE_FIELD",field:"jobAutoExp",value:!ze.jobAutoExp})}}),label:"Auto Explanation"})]}),(0,Q.jsxs)(y.Z,{fullWidth:!0,size:"small",variant:"outlined",sx:{".MuiFormLabel-root":{fontSize:"14px",background:"white",zIndex:99,padding:"0 3px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},children:[(0,Q.jsx)(m.Z,{id:"label-selection-job-type",children:"Type of Job"}),(0,Q.jsxs)(g.Z,{labelId:"label-selection-job-type",value:ze.jobType,name:"jobType",onChange:function(e){var n=e.target,t=n.name,r=n.value;Fe({type:"UPDATE_FIELD",field:t,value:r})},autoWidth:!0,sx:{height:"27px",fontSize:"14px"},children:[(0,Q.jsx)(b.Z,{value:"",children:" "}),(0,Q.jsx)(b.Z,{value:"0",children:"Reversal of Accrued Interest "}),(0,Q.jsxs)(b.Z,{value:"1",children:[" ","Income Recognition & Accrual of Interest"]}),(0,Q.jsx)(b.Z,{value:"2",children:"Penalty Charges"}),(0,Q.jsx)(b.Z,{value:"3",children:"Penalty Income"}),(0,Q.jsx)(b.Z,{value:"4",children:"RPT Transaction (NIL-HN)"}),(0,Q.jsx)(b.Z,{value:"5",children:"RPT Transaction (AMIFIN)"}),(0,Q.jsx)(b.Z,{value:"6",children:"RPT Income"}),(0,Q.jsx)(b.Z,{value:"7",children:"Monthly Accrual Expenses"}),(0,Q.jsx)(b.Z,{value:"8",children:"Monthly Accrual Income"}),(0,Q.jsx)(b.Z,{value:"9",children:"Production (Milestone Guarantee)"}),(0,Q.jsx)(b.Z,{value:"10",children:"Production (Liberty Insurance Co.)"}),(0,Q.jsx)(b.Z,{value:"11",children:"Production (Federal Phoenix)"})]})]})]}),(0,Q.jsxs)("div",{style:{display:"flex",columnGap:"30px",alignItems:"flex-end",marginTop:"20px"},children:[(0,Q.jsx)(C.Z,{color:"success",variant:"contained",onClick:function(){"4"===ze.jobType&&function(){(c=c||(0,a.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:pe(!0),Ke(!1),setTimeout((0,a.Z)((0,o.Z)().mark((function e(){var n,t,a,i,l,c,u,d,s,f,p,h,v,x,y,m,g,b,w,C,S,D,j,k,I;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Date(ze.jobTransactionDate),t=(0,q.Z)(n,"yyyy-MM-01-"),a=(0,q.Z)((0,G.Z)(n),"yyyy-MM-dd"),i=0,l="\n    select \n      a.PolicyNo,\n      a.IDNo,\n      (TotalDue - ifnull(b.TotalPaid,0)) as 'Amount',\n      c.Mortgagee \n    from Policy a \n      left join (\n        select \n          IDNo,\n          sum(Debit) as 'TotalPaid' \n        from collection \n        group by IDNo\n      ) b on b.IDNo = a.PolicyNo \n      inner join VPolicy c on c.PolicyNo = a.PolicyNo \n      where\n      (TotalDue - ifnull(b.TotalPaid,0)) <> 0 and \n      a.PolicyType = 'TPL' and \n      c.Mortgagee = 'N I L - HN' and \n      (\n        a.DateIssued >= '".concat(t,"' and \n        a.DateIssued <= '").concat(a,"'\n      ) \n      order by a.DateIssued\n      "),c=[],e.next=8,N(l);case 8:if(u=e.sent,d=u.data,!((s=d.data).length>0)){e.next=47;break}v=0,x=0,y=(0,r.Z)(s),e.prev=15,y.s();case 17:if((m=y.n()).done){e.next=31;break}return C=m.value,0==x?i=0:i+=1,S=C.IDNo,e.next=24,N("SELECT Shortname ,Sub_ShortName, Sub_Acct FROM (".concat(te,") id_entry WHERE IDNo = '").concat(S,"'"));case 24:D=e.sent,j=D.data,c[i]=["1.03.01","Premium Receivables",null===(g=j.data[0])||void 0===g?void 0:g.Sub_ShortName,null===(b=j.data[0])||void 0===b?void 0:b.Shortname,"0.00",zn(C.Amount),"RPT","","Non-VAT","",C.PolicyNo,C.PolicyNo,null===(w=j.data[0])||void 0===w?void 0:w.Sub_Acct],v+=parseFloat(C.Amount.toString().replace(/,/g,"")),x+=1;case 29:e.next=17;break;case 31:e.next=36;break;case 33:e.prev=33,e.t0=e.catch(15),y.e(e.t0);case 36:return e.prev=36,y.f(),e.finish(36);case 39:return e.next=41,N("SELECT Shortname ,Sub_ShortName, Sub_Acct FROM (".concat(te,") id_entry WHERE IDNo = 'O-1024-00011'"));case 41:k=e.sent,I=k.data,c[i+1]=["1.03.01","Premium Receivables",null===(f=I.data[0])||void 0===f?void 0:f.Sub_ShortName,null===(p=I.data[0])||void 0===p?void 0:p.Shortname,zn(v),"0.00","RPT","","Non-VAT","","1.05.02","1.05.02",null===(h=I.data[0])||void 0===h?void 0:h.Sub_Acct],qe.current.setData(c),ae("update"),Ke(!1);case 47:pe(!1);case 48:case"end":return e.stop()}}),e,null,[[15,33,36,39]])}))),300);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}()},children:"Create Job"}),(0,Q.jsx)(d.Z,{color:"error",variant:"contained",onClick:function(){return Ke(!1)},children:"Cancel"})]})]})}),hn,gn,Dn,un]})]})}var te="\nSELECT \n       id_entry.IDNo,\n       id_entry.ShortName as Shortname,\n       IDType,\n       b.Acronym as Sub_Acct,\n       b.ShortName as Sub_ShortName\n   FROM\n       (SELECT \n           IF(aa.option = 'individual', CONCAT(IF(aa.lastname IS NOT NULL\n                   AND TRIM(aa.lastname) <> '', CONCAT(aa.lastname, ', '), ''), aa.firstname), aa.company) AS ShortName,\n               aa.entry_client_id AS IDNo,\n               aa.sub_account,\n               'Client' as IDType\n       FROM\n           entry_client aa UNION ALL SELECT \n           CONCAT(IF(aa.lastname IS NOT NULL\n                   AND TRIM(aa.lastname) <> '', CONCAT(aa.lastname, ', '), ''), aa.firstname) AS ShortName,\n               aa.entry_agent_id AS IDNo,\n               aa.sub_account,\n               'Agent' as IDType\n       FROM\n           entry_agent aa UNION ALL SELECT \n           CONCAT(IF(aa.lastname IS NOT NULL\n                   AND TRIM(aa.lastname) <> '', CONCAT(aa.lastname, ', '), ''), aa.firstname) AS ShortName,\n               aa.entry_employee_id AS IDNo,\n               aa.sub_account,\n               'Employee' as IDType\n       FROM\n           entry_employee aa UNION ALL SELECT \n           aa.fullname AS ShortName,\n               aa.entry_fixed_assets_id AS IDNo,\n               sub_account,\n                'Fixed Assets' as IDType\n       FROM\n           entry_fixed_assets aa UNION ALL SELECT \n           aa.description AS ShortName,\n               aa.entry_others_id AS IDNo,\n               aa.sub_account,\n               'Others' as IDType\n       FROM\n           entry_others aa UNION ALL SELECT \n           IF(aa.option = 'individual', CONCAT(IF(aa.lastname IS NOT NULL\n                   AND TRIM(aa.lastname) <> '', CONCAT(aa.lastname, ', '), ''), aa.firstname), aa.company) AS ShortName,\n               aa.entry_supplier_id AS IDNo,\n               aa.sub_account,\n                'Supplier' as IDType\n       FROM\n           entry_supplier aa) id_entry\n      left join sub_account b ON id_entry.sub_account = b.Sub_Acct\n "},93263:function(e,n,t){var r,o=t(29439),a=t(74165),i=t(15861),l=t(72791),c=t(91933),u=t(3380),d=t(81582),s=t(54164),f=t(80184);function p(e,n,t){return(r=r||(0,i.Z)((0,a.Z)().mark((function e(n,t,r){var o,i=arguments;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=i.length>3&&void 0!==i[3]?i[3]:"",e.abrupt("return",n.get("".concat(null===r||void 0===r?void 0:r.url,"?").concat(null===r||void 0===r?void 0:r.queryUrlName,"=").concat(o),{headers:{Authorization:"Bearer ".concat(null===t||void 0===t?void 0:t.accessToken)}}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n.Z=function(e){var n,t,r=e.link,h=e.uniqueId,v=e.queryKey,x=e.responseDataKey,y=e.columns,m=e.onSelected,g=void 0===m?function(){}:m,b=e.onRemoveSelected,w=void 0===b?function(){}:b,C=e.onSuccess,S=void 0===C?function(){}:C,D=e.searchRef,N=e.onCellKeyDown,j=e.onCloseFunction,k=void 0===j?function(){}:j,I=e.CustomizeAxios,T=void 0===I?p:I,Z=e.isRowSelectable,A=e.getCellClassName,E=(0,l.useContext)(u.V),R=E.myAxios,M=E.user,L=(0,l.useState)(!1),_=(0,o.Z)(L,2),z=_[0],F=_[1],P=(0,l.useState)([]),O=(0,o.Z)(P,2),B=O[0],K=O[1];function V(){return(n=n||(0,i.Z)((0,a.Z)().mark((function e(){var n,t=arguments;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.length>0&&void 0!==t[0]?t[0]:"",e.next=3,T(R,M,r,n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var U=(0,c.useQuery)({queryKey:v,queryFn:function(){return(t=t||(0,i.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var n=e;K(n.data[x]),S(n)},refetchOnWindowFocus:!1}),q=U.isLoading,G=U.refetch;return{show:z,rows:B,isLoading:q,openModal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";(0,s.flushSync)((function(){F(!0)})),null!==D&&void 0!==D&&D.current&&(D.current.value=e,V(e).then((function(e){if(null===e||void 0===e||!e.data.success)return alert("Error : ".concat(null===e||void 0===e?void 0:e.data.message));K(e.data[x]),null!==D&&void 0!==D&&D.current&&D.current.focus()})))},closeModal:function(){var e;(F(!1),k)&&k(null===D||void 0===D||null===(e=D.current)||void 0===e?void 0:e.value)},ModalComponent:(0,f.jsx)(d.ZP,{getCellClassName:A,searchRef:D,showModal:z,onCloseModal:function(){var e;(F(!1),k)&&k(null===D||void 0===D||null===(e=D.current)||void 0===e?void 0:e.value)},onClickCloseIcon:function(){var e;(F(!1),k)&&k(null===D||void 0===D||null===(e=D.current)||void 0===e?void 0:e.value)},searchOnChange:function(e){},onSearchKeyEnter:function(e){V(e).then((function(e){if(null===e||void 0===e||!e.data.success)return alert("Error : ".concat(null===e||void 0===e?void 0:e.data.message));K(e.data[x])}))},onCellKeyDown:N,height:300,isLoading:q,queryKey:v,columns:y,onSelectionChange:function(e,n){if(e.length<=0)return w(n);var t=new Set(e),r=n.filter((function(e){return t.has(e[h].toString())}));r.length<=0||g(r,n)},id:h,rows:B,setRows:K,isRowSelectable:Z}),refetch:G}}},64230:function(e,n,t){t.d(n,{L:function(){return c},s:function(){return l}});var r=t(74165),o=t(15861),a=t(21830),i=t.n(a);function l(e){var n;i().fire({title:"Are you sure!",html:null!==e&&void 0!==e&&e.text?null===e||void 0===e?void 0:e.text:e.isUpdate?"Are you sure you want to make this change?":"Are you sure you want to delete this?",icon:"warning",input:"text",inputAttributes:{autocapitalize:"off"},showCancelButton:!0,confirmButtonText:"Save",confirmButtonColor:"green",showLoaderOnConfirm:!0,preConfirm:function(t){return(n=n||(0,o.Z)((0,r.Z)().mark((function n(t){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:try{e.cb(t)}catch(r){i().showValidationMessage("\n            Request failed: ".concat(r,"\n          "))}case 1:case"end":return n.stop()}}),n)})))).apply(this,arguments)},allowOutsideClick:function(){return!i().isLoading()}}).then((function(n){if(n.isConfirmed&&e.isConfirm)return e.isConfirm();e.isDeclined&&e.isDeclined()}))}function c(e){i().fire({title:"Are you sure?",text:null!==e&&void 0!==e&&e.text?null===e||void 0===e?void 0:e.text:"Do you want to proceed with saving?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, save it!"}).then((function(n){if(n.isConfirmed&&e.isConfirm)return e.isConfirm();e.isDeclined&&e.isDeclined()}))}},84072:function(e,n,t){var r=t(64836);n.Z=void 0;var o=r(t(45649)),a=t(80184),i=(0,o.default)((0,a.jsx)("path",{d:"M21 18v1c0 1.1-.9 2-2 2H5c-1.11 0-2-.9-2-2V5c0-1.1.89-2 2-2h14c1.1 0 2 .9 2 2v1h-9c-1.11 0-2 .9-2 2v8c0 1.1.89 2 2 2h9zm-9-2h10V8H12v8zm4-2.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"}),"AccountBalanceWallet");n.Z=i},42419:function(e,n,t){var r=t(64836);n.Z=void 0;var o=r(t(45649)),a=t(80184),i=(0,o.default)((0,a.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");n.Z=i},67442:function(e,n,t){var r=t(64836);n.Z=void 0;var o=r(t(45649)),a=t(80184),i=(0,o.default)((0,a.jsx)("path",{d:"M20 6h-3V4c0-1.11-.89-2-2-2H9c-1.11 0-2 .89-2 2v2H4c-1.11 0-2 .89-2 2v11c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zM9 4h6v2H9V4zm11 15H4v-2h16v2zm0-5H4V8h3v2h2V8h6v2h2V8h3v6z"}),"CardTravel");n.Z=i},84669:function(e,n,t){var r=t(64836);n.Z=void 0;var o=r(t(45649)),a=t(80184),i=(0,o.default)((0,a.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8 0-1.85.63-3.55 1.69-4.9L16.9 18.31C15.55 19.37 13.85 20 12 20zm6.31-3.1L7.1 5.69C8.45 4.63 10.15 4 12 4c4.42 0 8 3.58 8 8 0 1.85-.63 3.55-1.69 4.9z"}),"NotInterested");n.Z=i},53329:function(e,n,t){var r=t(64836);n.Z=void 0;var o=r(t(45649)),a=t(80184),i=(0,o.default)((0,a.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"}),"Save");n.Z=i},5403:function(e,n,t){var r=t(64836);n.Z=void 0;var o=r(t(45649)),a=t(80184),i=(0,o.default)((0,a.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"Search");n.Z=i},95643:function(e,n){n.Z={50:"#fbe9e7",100:"#ffccbc",200:"#ffab91",300:"#ff8a65",400:"#ff7043",500:"#ff5722",600:"#f4511e",700:"#e64a19",800:"#d84315",900:"#bf360c",A100:"#ff9e80",A200:"#ff6e40",A400:"#ff3d00",A700:"#dd2c00"}},8604:function(e,n,t){t.d(n,{Z:function(){return a}});var r=t(38527),o=t(4522);function a(e){(0,o.Z)(1,arguments);var n=(0,r.Z)(e),t=n.getMonth();return n.setFullYear(n.getFullYear(),t+1,0),n.setHours(0,0,0,0),n}}}]);
//# sourceMappingURL=4904.8b8aacb2.chunk.js.map