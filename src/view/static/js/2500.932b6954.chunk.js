"use strict";(self.webpackChunkupward=self.webpackChunkupward||[]).push([[2500,2074,7899],{12964:function(e,t,n){n.r(t),n.d(t,{default:function(){return F},reducer:function(){return R}});var o=n(93433),r=n(74165),a=n(15861),i=n(29439),c=n(4942),u=n(1413),l=n(72791),d=n(36151),s=n(39709),p=n(42419),f=n(29823),h=n(21830),m=n.n(h),y=n(3380),x=n(91933),g=n(93263),v=n(79018),w=n(84669),b=n(95643),D=n(5519),S=n(37209),N=n(16386),k=n(8185),I=n(64230),C=n(54164),E=n(30948),T=n(70272),j=n(80184),A={sub_refNo:"",refNo:"",dateEntry:(0,N.Z)(new Date,"yyyy-MM-dd"),explanation:"",particulars:"",totalDebit:"",totalCredit:"",totalBalance:"",jobAutoExp:!1,jobTransactionDate:new Date,jobType:"",search:"",cashMode:""},R=function(e,t){return"UPDATE_FIELD"===t.type?(0,u.Z)((0,u.Z)({},e),{},(0,c.Z)({},t.field,t.value)):e},Z=[{key:"code",label:"Code",width:150,type:"text"},{key:"acctName",label:"Account Name",width:400,type:"text",readonly:function(){return!0}},{key:"subAcctName",label:"Sub Account",width:170,type:"text",readonly:function(){return!0}},{key:"ClientName",label:"Name",width:400,type:"text"},{key:"debit",label:"Debit",width:120,type:"number"},{key:"credit",label:"Credit",width:120,type:"number"},{key:"checkNo",label:"Check No",width:120,type:"text",readonly:function(e,t,n,o){return"1.01.10"!==e[0]}},{key:"checkDate",label:"Check Date",width:120,type:"date",readonly:function(e,t,n,o){return"1.01.10"!==e[0]},typeLogic:function(e){return"1.01.10"!==e[0]?"text":"date"}},{key:"TC_Code",label:"TC",width:120,type:"text"},{key:"remarks",label:"Remarks",width:400,type:"text"},{key:"Payto",label:"Payto",width:400,type:"text",readonly:function(e,t,n,o){return"1.01.10"!==e[0]}},{key:"vatType",label:"Vat Type",width:100,type:"select",options:[{key:"NON-VAT"},{key:"VAT"}],setDefaultValue:function(){return"NON-VAT"}},{key:"invoice",label:"Invoice",width:200,type:"text"},{key:"TempID",label:"TempId",hide:!0},{key:"IDNo",label:"I.D.",width:300,hide:!0},{key:"BranchCode",headerName:"BranchCode",width:300,hide:!0},{key:"addres",headerName:"addres",hide:!0},{key:"subAcct",headerName:"subAcct",hide:!0},{key:"TC_Desc",headerName:"TC_Desc",hide:!0}];function F(){var e,t,n,o,c,u=(0,l.useRef)(null),h=(0,l.useContext)(y.V),N=h.myAxios,E=h.user,F=(0,l.useReducer)(R,A),L=(0,i.Z)(F,2),U=L[0],_=L[1],M=(0,l.useRef)(null),P=(0,l.useRef)(null),z=(0,l.useRef)(null),K=(0,l.useRef)(null),B=(0,l.useRef)(null),V=(0,l.useRef)(null),O=(0,l.useRef)(null),W=(0,l.useState)(""),G=(0,i.Z)(W,2),J=G[0],Y=G[1],X=(0,l.useState)(0),H=(0,i.Z)(X,2),Q=H[0],$=H[1],ee=(0,l.useState)(0),te=(0,i.Z)(ee,2),ne=te[0],oe=te[1],re=(0,l.useState)(0),ae=(0,i.Z)(re,2),ie=ae[0],ce=ae[1],ue=""===J,le=(0,x.useQuery)({queryKey:"general-journal-id-generator",queryFn:function(){return(e=e||(0,a.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.get("/task/accounting/cash-disbursement/generate-id",{headers:{Authorization:"Bearer ".concat(null===E||void 0===E?void 0:E.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},refetchOnWindowFocus:!1,onSuccess:function(e){var t=e;_({type:"UPDATE_FIELD",field:"refNo",value:t.data.generatedId[0].id}),_({type:"UPDATE_FIELD",field:"sub_refNo",value:t.data.generatedId[0].id})}}),de=le.isLoading,se=le.refetch,pe=(0,g.Z)({link:{url:"/task/accounting/general-journal/get-chart-account",queryUrlName:"chartAccountSearch"},columns:[{field:"Acct_Code",headerName:"Account Code",width:130},{field:"Acct_Title",headerName:"Account Title.",width:250},{field:"Short",headerName:"Short",flex:1}],queryKey:"get-chart-account",uniqueId:"Acct_Code",responseDataKey:"getChartOfAccount",onSelected:function(e,t){var n=u.current.getSelectedIndex();u.current.updateData((function(t){return t[n][0]=e[0].Acct_Code,t[n][1]=e[0].Acct_Title,t})),(0,v.D)(250).then((function(){var e=document.querySelector(".input.row-".concat(n,".col-3"));null===e||void 0===e||e.focus()})),ye()},searchRef:O}),fe=pe.ModalComponent,he=pe.openModal,me=pe.isLoading,ye=pe.closeModal,xe=(0,g.Z)({link:{url:"/task/accounting/search-pdc-policy-id",queryUrlName:"searchPdcPolicyIds"},columns:[{field:"Type",headerName:"Type",width:130},{field:"IDNo",headerName:"ID No.",width:200},{field:"Name",headerName:"Name",flex:1},{field:"ID",headerName:"ID",hide:!0}],queryKey:"get-policyId-ClientId-RefId",uniqueId:"IDNo",responseDataKey:"clientsId",onSelected:function(e){var t=u.current.getSelectedIndex();u.current.updateData((function(n){return n[t][3]=e[0].Name,n[t][14]=e[0].IDNo,n[t][17]=e[0].sub_account,n[t][2]=e[0].ShortName,n[t][16]=e[0].address,n})),(0,v.D)(250).then((function(){var e=document.querySelector(".input.row-".concat(t,".col-4"));null===e||void 0===e||e.focus()})),be()},searchRef:V}),ge=xe.ModalComponent,ve=xe.openModal,we=xe.isLoading,be=xe.closeModal,De=(0,g.Z)({link:{url:"/task/accounting/general-journal/get-transaction-account",queryUrlName:"transactionCodeSearch"},columns:[{field:"Code",headerName:"Code",width:130},{field:"Description",headerName:"Description",flex:1}],queryKey:"get-transaction-account",uniqueId:"Code",responseDataKey:"getTransactionAccount",onSelected:function(e){var t=u.current.getSelectedIndex();u.current.updateData((function(n){return n[t][8]=e[0].Code,n[t][18]=e[0].Description,n})),(0,v.D)(250).then((function(){var e=document.querySelector(".input.row-".concat(t,".col-9"));null===e||void 0===e||e.focus()})),Ie()},searchRef:V}),Se=De.ModalComponent,Ne=De.openModal,ke=De.isLoading,Ie=De.closeModal,Ce=(0,g.Z)({link:{url:"/task/accounting/search-payto-clients-name",queryUrlName:"searchPdcPolicyIds"},columns:[{field:"Type",headerName:"Type",width:130},{field:"IDNo",headerName:"ID No.",width:200},{field:"Name",headerName:"Name",flex:1},{field:"ID",headerName:"ID",hide:!0}],queryKey:"get-policyId-ClientId-RefId",uniqueId:"IDNo",responseDataKey:"clientsId",onSelected:function(e){var t=u.current.getSelectedIndex();u.current.updateData((function(n){return n[t][10]=e[0].Name,n})),(0,v.D)(250).then((function(){var e=document.querySelector(".input.row-".concat(t,".col-11"));null===e||void 0===e||e.focus()})),Ae()},searchRef:V}),Ee=Ce.ModalComponent,Te=Ce.openModal,je=Ce.isLoading,Ae=Ce.closeModal,Re=(0,x.useMutation)({mutationKey:"get-selected-search-general-journal",mutationFn:function(e){return(t=t||(0,a.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.post("/task/accounting/cash-disbursement/get-selected-search-cash-disbursement",t,{headers:{Authorization:"Bearer ".concat(null===E||void 0===E?void 0:E.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t=e.data.selectedCashDisbursement,n=t[0],o=n.explanation,r=n.dateEntry,a=n.refNo,i=n.particulars;_({type:"UPDATE_FIELD",field:"sub_refNo",value:a}),_({type:"UPDATE_FIELD",field:"refNo",value:a}),_({type:"UPDATE_FIELD",field:"dateEntry",value:r}),_({type:"UPDATE_FIELD",field:"explanation",value:o}),_({type:"UPDATE_FIELD",field:"particulars",value:i});var c=t.map((function(e,t){return e.credit=parseFloat(e.credit.replace(/,/g,"")).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),e.debit=parseFloat(e.debit.replace(/,/g,"")).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),"1.01.10"===e.code?e.checkDate=new Date(e.checkDate).toISOString().split("T")[0]:e.checkDate="",[e.code,e.acctName,e.subAcctName,e.ClientName,e.debit,e.credit,e.checkNo,e.checkDate,e.TC_Code,e.remarks,e.Payto,e.vatType,e.invoice,e.TempID,e.IDNo,e.Branch_Code,e.refNo,e.address,e.subAcct]}));(0,v.D)(250).then((function(){var e;null===(e=u.current)||void 0===e||e.updateData(c),function(e){var t=(null===e||void 0===e?void 0:e.reduce((function(e,t){var n=0;return isNaN(parseFloat(t[5].replace(/,/g,"")))||(n=parseFloat(t[5].replace(/,/g,""))),e+n}),0))||0,n=(null===e||void 0===e?void 0:e.reduce((function(e,t){var n=0;return isNaN(parseFloat(t[4].replace(/,/g,"")))||(n=parseFloat(t[4].replace(/,/g,""))),e+n}),0))||0;ce(e.length),$(n),oe(t)}(c),(0,v.D)(250).then((function(){var e=document.querySelector(".input.row-".concat(0,".col-0"));e&&e.focus()}))}))}}),Ze=Re.mutate,Fe=Re.isLoading,qe=(0,g.Z)({link:{url:"/task/accounting/cash-disbursement/search-cash-disbursement",queryUrlName:"searchCashDisbursement"},columns:[{field:"Date_Entry",headerName:"Date",width:130},{field:"Source_No",headerName:"Ref No.",width:250},{field:"Explanation",headerName:"Explanation",flex:1}],queryKey:"search-cash-disbursement",uniqueId:"Source_No",responseDataKey:"search",onSelected:function(e,t){Ze({Source_No:e[0].Source_No}),Y("update"),Me()},onCloseFunction:function(e){},searchRef:O}),Le=qe.ModalComponent,Ue=qe.openModal,_e=qe.isLoading,Me=qe.closeModal,Pe=(0,x.useMutation)({mutationKey:"add-cash-disbursement",mutationFn:function(e){return(n=n||(0,a.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.post("/task/accounting/cash-disbursement/add-cash-disbursement",t,{headers:{Authorization:"Bearer ".concat(null===E||void 0===E?void 0:E.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t=e;return t.data.success?(Ye(),m().fire({position:"center",icon:"success",title:t.data.message,timer:1500})):m().fire({position:"center",icon:"warning",title:t.data.message,timer:1500})}}),ze=Pe.mutate,Ke=Pe.isLoading,Be=(0,x.useMutation)({mutationKey:"void-cash-disbursement",mutationFn:function(e){return(o=o||(0,a.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.post("/task/accounting/cash-disbursement/void-cash-disbursement",t,{headers:{Authorization:"Bearer ".concat(null===E||void 0===E?void 0:E.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t=e;return t.data.success?(Ye(),m().fire({position:"center",icon:"success",title:t.data.message,timer:1500})):m().fire({position:"center",icon:"warning",title:t.data.message,timer:1500})}}),Ve=Be.mutate,Oe=Be.isLoading,We=(0,x.useMutation)({mutationKey:"get-selected-search-general-journal",mutationFn:function(e){return(c=c||(0,a.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.post("/task/accounting/cash-disbursement/print",t,{headers:{Authorization:"Bearer ".concat(null===E||void 0===E?void 0:E.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t=e;(0,C.flushSync)((function(){localStorage.removeItem("printString"),localStorage.setItem("dataString",JSON.stringify(t.data.print.PrintTable)),localStorage.setItem("paper-width","8.5in"),localStorage.setItem("paper-height","11in"),localStorage.setItem("module","cash-disbursement"),localStorage.setItem("state",JSON.stringify(t.data.print.PrintPayeeDetails)),localStorage.setItem("column",JSON.stringify([{datakey:"Account",header:"ACCOUNT",width:"200px"},{datakey:"Identity",header:"IDENTITY",width:"277px"},{datakey:"Debit",header:"DEBIT",width:"100px"},{datakey:"Credit",header:"CREDIT",width:"100px"}])),localStorage.setItem("title","UMIS"===(null===E||void 0===E?void 0:E.department)?"UPWARD MANAGEMENT INSURANCE SERVICES\n":"UPWARD CONSULTANCY SERVICES AND MANAGEMENT INC.\n")})),window.open("/dashboard/print","_blank")}}),Ge=We.mutate,Je=We.isLoading;function Ye(){Y(""),(0,k.setNewStateValue)(_,A),se(),$(0),oe(0),ce(0),(0,v.D)(100).then((function(){var e;null===(e=u.current)||void 0===e||e.resetTable()}))}function Xe(e){var t=parseFloat(e);return isNaN(t)?"0.00":e}var He=(0,l.useCallback)((function(){if(""===U.refNo)return m().fire({position:"center",icon:"warning",title:"Please provide reference number!",timer:1500});if(""===U.explanation)return m().fire({position:"center",icon:"warning",title:"Please provide explanation!",timer:1500}).then((function(){(0,v.D)(300).then((function(){var e;null===(e=K.current)||void 0===e||e.focus()}))}));if(Q<=0&&ne<=0)return m().fire({position:"center",icon:"warning",title:"Total Debit and Credit amount must not be zero(0), please double check the entries",timer:1500});if(Q!==ne)return m().fire({position:"center",icon:"warning",title:"Total Debit and Credit amount must be balance, please double check the entries",timer:1500});var e=u.current.getData().filter((function(e){return""!==e[0]})).map((function(e,t){return{code:e[0],acctName:e[1],subAcctName:e[2],ClientName:e[3],debit:e[4],credit:e[5],checkNo:e[6],checkDate:e[7],TC_Code:e[8],remarks:e[9],Payto:e[10],vatType:e[11],invoice:e[12],TempID:t,IDNo:e[14],BranchCode:e[15],addres:e[16],subAcct:e[17],TC_Desc:e[18]}}));"update"===J?(0,I.s)({isUpdate:!0,cb:function(t){ze({hasSelected:"update"===J,refNo:U.refNo,dateEntry:U.dateEntry,explanation:U.explanation,particulars:U.particulars,cashDisbursement:e,userCodeConfirmation:t})}}):(0,I.L)({isConfirm:function(){ze({hasSelected:"update"===J,refNo:U.refNo,dateEntry:U.dateEntry,explanation:U.explanation,particulars:U.particulars,cashDisbursement:e})}})}),[U,ze,J,ne,Q]);return(0,l.useEffect)((function(){var e=function(e){(e.ctrlKey||e.metaKey)&&"s"===e.key&&(e.preventDefault(),He())};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[He]),Fe||de||we||me||je||ke?(0,j.jsx)("div",{children:"Loading..."}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(T.Z,{title:"Cash Disbursement"}),(0,j.jsxs)("div",{style:{background:"#F1F1F1",padding:"5px",flex:1},children:[(0,j.jsx)("div",{style:{display:"flex",alignItems:"center",columnGap:"5px"},children:(0,j.jsxs)("div",{style:{display:"flex",alignItems:"center",columnGap:"5px"},children:[_e?(0,j.jsx)(s.Z,{loading:_e}):(0,j.jsx)(S.oi,{label:{title:"Search: ",style:{fontSize:"12px",fontWeight:"bold",width:"50px"}},input:{className:"search-input-up-on-key-down",type:"search",onKeyDown:function(e){("Enter"!==e.key&&"NumpadEnter"!==e.key||(e.preventDefault(),Ue(e.currentTarget.value)),"ArrowDown"===e.key)&&(e.preventDefault(),document.querySelector(".grid-container").focus())},style:{width:"500px"}},inputRef:M}),""===J&&(0,j.jsx)(d.Z,{sx:{height:"30px",fontSize:"11px"},variant:"contained",startIcon:(0,j.jsx)(p.Z,{sx:{width:15,height:15}}),id:"entry-header-save-button",onClick:function(){Y("add"),u.current.AddRow()},color:"primary",children:"New"}),(0,j.jsx)(s.Z,{sx:{height:"30px",fontSize:"11px"},loading:Ke,disabled:""===J,onClick:He,color:"success",variant:"contained",children:"Save"}),""!==J&&(0,j.jsx)(s.Z,{sx:{height:"30px",fontSize:"11px"},variant:"contained",startIcon:(0,j.jsx)(f.Z,{sx:{width:15,height:15}}),color:"error",onClick:function(){m().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, cancel it!"}).then((function(e){e.isConfirmed&&Ye()}))},disabled:""===J,children:"Cancel"}),(0,j.jsx)(s.Z,{sx:{height:"30px",fontSize:"11px",background:b.Z[500],":hover":{background:b.Z[600]}},onClick:function(){(0,I.s)({isUpdate:!1,text:"Are you sure you want to void ".concat(U.refNo),cb:function(e){Ve({refNo:U.refNo,dateEntry:U.dateEntry,userCodeConfirmation:e})}})},loading:Oe,disabled:"update"!==J,variant:"contained",startIcon:(0,j.jsx)(w.Z,{sx:{width:20,height:20}}),children:"Void"}),(0,j.jsx)(s.Z,{loading:Je,disabled:"update"!==J,id:"basic-button","aria-haspopup":"true",onClick:function(){Ge({Source_No:U.refNo})},sx:{height:"30px",fontSize:"11px",color:"white",backgroundColor:D.Z[600],"&:hover":{backgroundColor:D.Z[700]}},children:"Print"})]})}),(0,j.jsxs)("div",{style:{display:"flex",marginBottom:"10px"},children:[(0,j.jsxs)("fieldset",{style:{border:"1px solid black",borderRadius:"5px",position:"relative",flex:1,height:"auto",display:"flex",marginTop:"10px",gap:"10px",padding:"15px",flexDirection:"column"},children:[de?(0,j.jsx)(s.Z,{loading:de}):(0,j.jsx)(S.oi,{label:{title:"Reference CV- : ",style:{fontSize:"12px",fontWeight:"bold",width:"100px"}},input:{disabled:ue,type:"text",style:{width:"190px"},readOnly:!0,value:U.refNo,name:"refNo",onKeyDown:function(e){var t;"NumpadEnter"!==e.code&&"Enter"!==e.code||(null===(t=z.current)||void 0===t||t.focus())}},inputRef:P}),(0,j.jsx)(S.oi,{label:{title:"Date : ",style:{fontSize:"12px",fontWeight:"bold",width:"100px"}},input:{disabled:ue,type:"date",name:"dateEntry",value:U.dateEntry,style:{width:"190px"},onKeyDown:function(e){var t;"NumpadEnter"!==e.code&&"Enter"!==e.code||(null===(t=K.current)||void 0===t||t.focus())},onChange:function(e){_({type:"UPDATE_FIELD",field:"dateEntry",value:e.target.value})}},inputRef:z}),(0,j.jsx)(S.oi,{label:{title:"Explanation : ",style:{fontSize:"12px",fontWeight:"bold",width:"100px"}},input:{disabled:ue,type:"text",style:{flex:1},name:"explanation",value:U.explanation,onChange:function(e){_({type:"UPDATE_FIELD",field:"explanation",value:e.target.value})},onKeyDown:function(e){var t;"NumpadEnter"!==e.code&&"Enter"!==e.code||(null===(t=B.current)||void 0===t||t.focus())}},inputRef:K}),(0,j.jsx)(S.Fz,{label:{title:"Particulars : ",style:{fontSize:"12px",fontWeight:"bold",width:"100px"}},textarea:{rows:4,disabled:ue,style:{flex:1},name:"particulars",value:U.particulars,onKeyDown:function(e){"NumpadEnter"===e.code||e.code},onChange:function(e){_({type:"UPDATE_FIELD",field:"particulars",value:e.target.value})}},_inputRef:B})]}),(0,j.jsxs)("fieldset",{style:{border:"1px solid black",borderRadius:"5px",position:"relative",width:"400px",height:"auto",display:"flex",marginTop:"10px",gap:"10px",padding:"15px"},children:[(0,j.jsx)("div",{style:{alignItems:"center",display:"flex",textAlign:"center",width:"100px"},children:(0,j.jsxs)("p",{style:{margin:0,padding:0,color:"black",display:"flex",flexDirection:"column"},children:[(0,j.jsx)("span",{style:{fontSize:"12px"},children:"Total Rows:"})," ",(0,j.jsx)("strong",{children:ie})]})}),(0,j.jsxs)("div",{style:{display:"flex",justifyContent:"space-around",flexDirection:"column",flex:1},children:[(0,j.jsxs)("p",{style:{margin:0,padding:0,color:"black"},children:[(0,j.jsx)("span",{style:{fontSize:"12px"},children:"Total Debit:"})," ",(0,j.jsx)("strong",{children:Q.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})})]}),(0,j.jsxs)("p",{style:{margin:0,padding:0,color:"black"},children:[(0,j.jsx)("span",{style:{fontSize:"12px"},children:"Total Credit:"})," ",(0,j.jsx)("strong",{children:ne.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})})]}),(0,j.jsxs)("p",{style:{margin:0,padding:0,color:"black"},children:[(0,j.jsx)("span",{style:{fontSize:"12px"},children:"Balance:"})," ",(0,j.jsx)("strong",{style:{color:Q-ne>0?"red":"black"},children:(Q-ne).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})})]})]})]})]}),(0,j.jsx)(q,{disbaleTable:""===J,height:"300px",ref:u,rows:[],columns:Z.filter((function(e){return!e.hide})),onInputKeyDown:function(e,t,n){var o=u.current.getData();if(0===t)he(n);else if(3===t)ve(n);else if(8===t)Ne(n);else if(10===t&&"1.01.10"===o[e][0]){Te(n);var r=u.current.getSelectedIndex();u.current.updateData((function(e){return e[r][10]=n,e}))}else if(5===t){u.current.updateData((function(o){return o[e][t]=Xe(n),o}));var a=u.current.getData();(0,C.flushSync)((function(){oe(null===a||void 0===a?void 0:a.reduce((function(e,t){return e+parseFloat(t[5].replace(/,/g,""))}),0))})),setTimeout((function(){if("1.01.10"!==a[e][0]){var n=document.querySelector(".input.row-".concat(e,".col-").concat(t+3));n&&n.focus()}else{var o=document.querySelector(".input.row-".concat(e,".col-").concat(t+1));o&&o.focus()}}),100)}else if(4===t){u.current.updateData((function(o){return o[e][t]=Xe(n),o}));var i=u.current.getData();(0,C.flushSync)((function(){$(null===i||void 0===i?void 0:i.reduce((function(e,t){return e+parseFloat(t[4].replace(/,/g,""))}),0))})),setTimeout((function(){var n=document.querySelector(".input.row-".concat(e,".col-").concat(t+1));n&&n.focus()}),100)}else if(9===t&&"1.01.10"!==o[e][0]){var c=document.querySelector(".input.row-".concat(e,".col-").concat(t+2));c&&c.focus()}else{u.current.updateData((function(o){return o[e][t]=n,o}));var l=document.querySelector(".input.row-".concat(e,".col-").concat(t+1));if(l)l.focus();else if(function(){var e=u.current.getSelectedIndex(),t=u.current.getData();if(""===t[e][0])return alert("Account Code is required"),(0,v.D)(500).then((function(){var t=document.querySelector(".input.row-".concat(e,".col-0"));t&&t.focus()})),!1;if(""!==t[e][0]&&"1.01.10"===t[e][0]&&""===t[e][6])return alert("Check No is required"),(0,v.D)(500).then((function(){var t=document.querySelector(".input.row-".concat(e,".col-6"));t&&t.focus()})),!1;if(""!==t[e][0]&&"1.01.10"===t[e][0]&&""===t[e][7])return alert("Check Date is required"),(0,v.D)(500).then((function(){var t=document.querySelector(".input.row-".concat(e,".col-7"));t&&t.focus()})),!1;if(""!==t[e][0]&&"1.01.10"===t[e][0]&&""===t[e][10])return alert("Pay To is required"),(0,v.D)(500).then((function(){var t=document.querySelector(".input.row-".concat(e,".col-10"));t&&t.focus()})),!1;if(""===t[e][3])return alert("Name is required"),(0,v.D)(500).then((function(){var t=document.querySelector(".input.row-".concat(e,".col-3"));t&&t.focus()})),!1;if(t[e][4]===t[e][5])return alert("Credit and Debit cannot be the same. They must have a difference."),(0,v.D)(500).then((function(){var t=document.querySelector(".input.row-".concat(e,".col-4"));t&&t.focus()})),!1;if(""===t[e][8])return alert("TC is required"),(0,v.D)(500).then((function(){var t=document.querySelector(".input.row-".concat(e,".col-8"));t&&t.focus()})),!1;if("VAT"===t[e][11]&&"1.06.02"!==t[e][0]){var n=parseFloat(t[e][5].replace(/,/g,"")),o=parseFloat(t[e][4].replace(/,/g,"")),r=0;0!==o?(r=o/1.12,t[e][4]=r.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})):(r=n/1.12,t[e][5]=r.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}));var a=Z.filter((function(e){return!e.hide})).map((function(e){return e.setDefaultValue?e.setDefaultValue():""})),i=.12*r;t.push(a),t[e+1][0]="1.06.02",t[e+1][1]="Input Tax",t[e+1][2]=t[e][2],t[e+1][3]=t[e][3],0!==parseFloat(t[e][4].replace(/,/g,""))?(t[e+1][4]=i.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),t[e+1][5]=t[e][5]):(t[e+1][5]=i.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),t[e+1][4]=t[e][4]),t[e+1][6]=t[e][6],t[e+1][7]=t[e][7],t[e+1][8]=t[e][8],t[e+1][9]=t[e][9],t[e+1][10]=t[e][10],t[e+1][11]=t[e][11],t[e+1][12]=t[e][12],t[e+1][13]=t[e][13],t[e+1][14]=t[e][14],t[e+1][15]=t[e][15],t[e+1][16]=t[e][16],t[e+1][17]=t[e][17],t[e+1][18]=t[e][18],u.current.updateData(t)}return!0}())if(window.confirm("Add New Row?")){u.current.AddRow();var d=u.current.getSelectedIndex();"vat"===o[d][11].toLowerCase()?(u.current.setNewRowIndex(d+2),(0,v.D)(250).then((function(){var e=document.querySelector(".input.row-".concat(d+2,".col-0"));e&&e.focus()}))):(u.current.setNewRowIndex(d+1),(0,v.D)(250).then((function(){var e=document.querySelector(".input.row-".concat(d+1,".col-0"));e&&e.focus()})))}}},RightClickComponent:function(e){var t=e.rowItm,n={padding:"5px 10px",margin:"0px",background:"transparent",color:"black",fontSize:"14px",width:"100%",borderRadius:"0px",textAlign:"left"};return(0,j.jsxs)("div",{children:[(0,j.jsx)("button",{className:"button-r",style:n,onClick:function(){!function(){var e,t=u.current.getData(),n=null===(e=u.current)||void 0===e?void 0:e.getSelectedIndex();m().fire({title:"Are you sure?",text:"Do you want Delete This Row",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(e){if(e.isConfirmed){var o,r,a;if(1===t.length)return t.splice(0,1),null===(r=u.current)||void 0===r||r.updateData(t),void(null===(a=u.current)||void 0===a||a.AddRow());var i=n;i>-1&&i<t.length&&t.splice(i,1),null===(o=u.current)||void 0===o||o.updateData(t),(0,v.D)(100).then((function(){var e=document.querySelector(".tr.row-".concat(i-1," td input"));e&&e.click()}))}}))}()},children:"Delete"}),"1.01.10"===t[0]&&(0,j.jsx)("button",{className:"button-r",style:n,onClick:function(){!function(e){(0,C.flushSync)((function(){localStorage.removeItem("printString"),localStorage.setItem("dataString",JSON.stringify([])),localStorage.setItem("paper-width","8.5in"),localStorage.setItem("paper-height","11in"),localStorage.setItem("module","cash-disbursement-check"),localStorage.setItem("state",JSON.stringify({checkDate:e[7],Payto:e[10],credit:e[5]})),localStorage.setItem("column",JSON.stringify([])),localStorage.setItem("title","UMIS"===(null===E||void 0===E?void 0:E.department)?"UPWARD MANAGEMENT INSURANCE SERVICES\n":"UPWARD CONSULTANCY SERVICES AND MANAGEMENT INC.\n")})),window.open("/dashboard/print","_blank")}(t)},children:"Print"})]})}}),ge,fe,Ee,Se,Le]})]})}var q=(0,l.forwardRef)((function(e,t){var n=e.rows,r=e.columns,a=e.onInputKeyDown,c=e.height,d=e.RightClickComponent,s=e.disbaleTable,p=void 0!==s&&s,f=(0,l.useRef)([]),h=(0,l.useRef)(null),m=(0,l.useState)([]),y=(0,i.Z)(m,2),x=y[0],g=y[1],w=(0,l.useState)([]),b=(0,i.Z)(w,2),D=b[0],N=b[1],k=(0,l.useState)(0),I=(0,i.Z)(k,2),C=I[0],T=I[1],A=(0,l.useState)(0),R=(0,i.Z)(A,2),Z=R[0],F=R[1],q=D.reduce((function(e,t){return e+t.width}),0);function L(){g((function(e){var t=D.map((function(e){return""}));return[].concat((0,o.Z)(e),[t])}))}function U(e,t,n){"ArrowDown"===n.code&&T((function(n){return e>=x.length-1?n:((0,v.D)(150).then((function(){var n=document.querySelector(".input.row-".concat(e+1,".col-").concat(t));n&&n.focus()})),e+1)})),"ArrowUp"===n.code&&T((function(n){return e<=0?n:((0,v.D)(150).then((function(){var n=document.querySelector(".input.row-".concat(e-1,".col-").concat(t));n&&n.focus()})),e-1)}))}(0,l.useEffect)((function(){r.length>0&&N(r.filter((function(e){return!e.hide})))}),[r]),(0,l.useEffect)((function(){n.length>0&&g(n.map((function(e){return r.map((function(t){return e[t.key]}))})))}),[n,r]),(0,l.useEffect)((function(){f.current=x}),[x]),(0,l.useImperativeHandle)(t,(function(){return{AddRow:L,updateData:g,getData:function(){return(0,o.Z)(x)},getSelectedIndex:function(){return C},setNewRowIndex:function(e){T(e)},resetTable:function(){g([]),T(0)}}}));var _=function(){return(0,j.jsxs)("tr",{children:[(0,j.jsx)("th",{style:{width:"30px",border:"none",position:"sticky",top:0,zIndex:1,background:"#f0f0f0"}}),D.map((function(e,t){return(0,j.jsxs)("th",{className:"header col-".concat(t," ").concat(e.key),style:{width:e.width,borderRight:"1px solid #e2e8f0",position:"sticky",top:0,zIndex:1,background:"#f0f0f0",fontSize:"12px",padding:"0px 5px",textAlign:"number"===e.type?"center":"left"},children:[(0,j.jsx)("div",{className:"resize-handle",onMouseDown:function(e){e.preventDefault(),function(e,t){t.preventDefault(),t.stopPropagation();var n=t.clientX,a=r[e].width,i=function(t){var i=a+(t.clientX-n),c=(0,o.Z)(r);c[e].width=i>50?i:50,N(c)};document.addEventListener("mousemove",i),document.addEventListener("mouseup",(function e(){document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",e)}))}(t,e)}}),e.label]},t)}))]})},M=(0,l.forwardRef)((function(e,t){var n=e.rowIdx,o=e.colIdx,r=e.colItm,i=e.rowItm,c="black";return C===n?"select"===r.type?(0,j.jsx)(S.lq,{containerStyle:{width:"100%"},label:{title:"",style:{width:"0px",display:"none"}},select:{readOnly:r.readonly&&(null===r||void 0===r?void 0:r.readonly(i,r,n,o)),className:"input row-".concat(n," col-").concat(o," ").concat(r.key),defaultValue:i[o],style:{width:"100% !important",flex:1,height:"100% !important",background:"transparent",padding:0,margin:0,border:"none",cursor:"pointer",color:c},onKeyDown:function(e){"Enter"!==e.code&&"NumpadEnter"!==e.code||a(n,o,e.currentTarget.value),U(n,o,e)},onClick:function(){F(n)},onBlur:function(e){e.currentTarget.value=f.current[n][o]}},datasource:r.options,values:"key",display:"key"}):"number"===r.type?(0,j.jsx)(E.h3,{readOnly:r.readonly&&(null===r||void 0===r?void 0:r.readonly(i,r,n,o)),className:"input row-".concat(n," col-").concat(o," ").concat(r.key),getInputRef:t,decimalScale:2,fixedDecimalScale:!0,style:{width:"100%",height:"100%",background:"transparent",margin:0,border:"none",cursor:"pointer",color:c},onKeyDown:function(e){"Enter"!==e.code&&"NumpadEnter"!==e.code||a(n,o,e.currentTarget.value),U(n,o,e)},onClick:function(){F(n)},onBlur:function(e){e.currentTarget.value=f.current[n][o]},defaultValue:i[o],allowNegative:!1,thousandSeparator:!0,valueIsNumericString:!0}):"date"===r.type?(0,j.jsx)("input",{type:r.typeLogic&&r.typeLogic(i),readOnly:r.readonly&&(null===r||void 0===r?void 0:r.readonly(i,r,n,o)),className:"input row-".concat(n," col-").concat(o," ").concat(r.key),style:{width:"100%",height:"100%",background:"transparent",margin:0,border:"none",cursor:"pointer",color:c},defaultValue:i[o],onKeyDown:function(e){"Enter"!==e.code&&"NumpadEnter"!==e.code||a(n,o,e.currentTarget.value),U(n,o,e)},onBlur:function(e){e.currentTarget.value=f.current[n][o]},onClick:function(){F(n)}}):(0,j.jsx)("input",{readOnly:r.readonly&&(null===r||void 0===r?void 0:r.readonly(i,r,n,o)),className:"input row-".concat(n," col-").concat(o," ").concat(r.key),style:{width:"100%",height:"100%",background:"transparent",margin:0,border:"none",cursor:"pointer",color:c},onBlur:function(e){e.currentTarget.value=f.current[n][o]},defaultValue:i[o],onKeyDown:function(e){"Enter"!==e.code&&"NumpadEnter"!==e.code||a(n,o,e.currentTarget.value),U(n,o,e)},onClick:function(){F(n)}}):(0,j.jsx)("input",{readOnly:C!==n,className:"input row-".concat(n," col-").concat(o," ").concat(r.key),style:{width:"100%",height:"100%",border:"none",cursor:"pointer",color:c,fontSize:"12px"},defaultValue:i[o],onDoubleClick:function(e){T(n),(0,v.D)(100).then((function(){var e=document.querySelector(".input.row-".concat(n,".col-").concat(o));e&&e.focus()}))},onClick:function(){F(n)},onKeyDown:function(e){U(n,o,e)}})})),P=(0,l.forwardRef)((function(e,t){var n=e.rowItm,o=e.rowIdx,r=e.parentRef,a=(0,l.useRef)(null),c=(0,l.useState)(!1),s=(0,i.Z)(c,2),p=s[0],f=s[1];(0,l.useEffect)((function(){var e=function(e){a.current&&!a.current.contains(e.target)&&f(!1)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[]);var h={position:"relative",borderBottom:"1px solid #808080",borderLeft:"1px solid #808080",borderTop:"none",borderRight:"1px solid #808080",cursor:"pointer",background:C===o?"#f1f5f9":"",height:"18px important"};return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("td",{style:h,className:"",children:[(0,j.jsx)("div",{style:{height:"15px",width:"100%",position:"relative",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,j.jsx)("input",{style:{cursor:"pointer"},readOnly:!0,type:"checkbox",checked:C===o,onClick:function(){T(o),(0,v.D)(150).then((function(){var e=document.querySelector(".input.row-".concat(o,".col-0"));e&&e.focus()}))},onContextMenu:function(e){e.preventDefault(),o===C&&(f(!0),setTimeout((function(){a.current&&a.current.scrollIntoView({behavior:"smooth"})}),100))}})}),p&&(0,j.jsx)("div",{ref:a,style:{position:"absolute",top:"110%",left:"0px",background:"#e2e8f0",width:"80px",height:"auto",padding:"7px 0",boxShadow:"-3px -1px 13px -8px rgba(0,0,0,0.75)",border:"1px solid #cbd5e1",zIndex:"99999"},children:(0,j.jsx)(d,{rowItm:n,colItm:null,rowIdx:o,colIdx:null})})]}),D.map((function(e,t){return(0,j.jsx)("td",{className:"td row-".concat(o," col-").concat(t," ").concat(e.key),style:(0,u.Z)({width:e.width},h),children:(0,j.jsx)("div",{style:{height:"15px",width:"100%",position:"relative",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,j.jsx)(M,{rowIdx:o,colIdx:t,colItm:e,rowItm:n,parentRef:r})})},t)}))]})})),z=(0,l.forwardRef)((function(e,t){var n=e.parentRef;return(0,j.jsx)("tbody",{children:null===x||void 0===x?void 0:x.map((function(e,t){return(0,j.jsx)("tr",{className:"tr row-".concat(t,"  \n                ").concat(Z===t&&C===t?"selected":Z===t?"selected-row-index":C===t?"selected-row":""),children:(0,j.jsx)(P,{parentRef:n,rowItm:e,rowIdx:t})},t)}))})}));return(0,j.jsxs)(l.Fragment,{children:[(0,j.jsx)("div",{ref:h,style:{width:"100%",height:c,overflow:"auto",position:"relative",pointerEvents:p?"none":"auto",border:p?"2px solid #8c8f8e":"2px solid #c0c0c0",boxShadow:"inset -2px -2px 0 #ffffff, \n                  inset 2px 2px 0 #808080",background:"#dcdcdc"},children:(0,j.jsx)("div",{style:{position:"absolute",width:"".concat(q,"px"),height:"auto"},children:(0,j.jsxs)("table",{id:"upward-cutom-table",style:{borderCollapse:"collapse",width:"100%",position:"relative",background:"#dcdcdc"},children:[(0,j.jsx)("thead",{children:(0,j.jsx)(_,{})}),(0,j.jsx)(z,{})]})})}),(0,j.jsx)("div",{style:{width:"calc(100vw - 40px)",display:"flex",height:"40px"},children:(0,j.jsx)("div",{style:{width:"50%",display:"flex",alignItems:"center"},children:(0,j.jsxs)("span",{style:{fontSize:"14px"},children:["Records : ",x.length]})})}),(0,j.jsx)("style",{children:"\n          #upward-cutom-table tr td{\n          border-right:1px solid #f1f5f9 !important;\n          }\n\n          #upward-cutom-table tr:nth-child(odd) td {\n          background-color: #ffffff !important;\n          }\n          #upward-cutom-table tr:nth-child(even) td {\n          background-color: #f5f5f5 !important;\n          }\n\n          #upward-cutom-table tr.selected td {\n          background-color: #0076d7 !important;\n          border-right:1px solid white !important;\n          border-bottom:1px solid white !important;\n\n          }\n         #upward-cutom-table tr.selected td input{\n          color: black !important;\n          background-color: white !important;\n          }\n\n          #upward-cutom-table tr.selected-row-index td{\n           background-color: #0076d7 !important;\n            border-right:1px solid white !important;\n            border-bottom:1px solid white !important;\n          }\n          #upward-cutom-table tr.selected-row-index td input{\n            color: #ffffff !important;\n               background-color: #0076d7 !important;\n            }\n\n\n          #upward-cutom-table tr.selected-row td{\n           background-color: #dbeafe !important;\n            border-right:1px solid white !important;\n            border-bottom:1px solid white !important;\n          }\n          #upward-cutom-table tr.selected-row td input{\n            color: black !important;\n             background-color: #dbeafe !important;\n            }\n          "})]})}))},84669:function(e,t,n){var o=n(64836);t.Z=void 0;var r=o(n(45649)),a=n(80184),i=(0,r.default)((0,a.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8 0-1.85.63-3.55 1.69-4.9L16.9 18.31C15.55 19.37 13.85 20 12 20zm6.31-3.1L7.1 5.69C8.45 4.63 10.15 4 12 4c4.42 0 8 3.58 8 8 0 1.85-.63 3.55-1.69 4.9z"}),"NotInterested");t.Z=i},95643:function(e,t){t.Z={50:"#fbe9e7",100:"#ffccbc",200:"#ffab91",300:"#ff8a65",400:"#ff7043",500:"#ff5722",600:"#f4511e",700:"#e64a19",800:"#d84315",900:"#bf360c",A100:"#ff9e80",A200:"#ff6e40",A400:"#ff3d00",A700:"#dd2c00"}}}]);
//# sourceMappingURL=2500.932b6954.chunk.js.map