"use strict";(self.webpackChunkupward=self.webpackChunkupward||[]).push([[3911],{83911:function(e,s,a){a.r(s),a.d(s,{default:function(){return g}});var n,r=a(29439),t=a(74165),o=a(15861),c=a(72791),i=a(57689),u=a(3380),d=a(91933),p=a(79018),m=a(21830),l=a.n(m),h=(a(59491),a(80184));function w(e,s,a){return(n=n||(0,o.Z)((0,t.Z)().mark((function e(s,a,n){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.post("/login",{username:a,password:n},{withCredentials:!0});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){var e,s,a=(0,i.s0)(),n=(0,c.useState)(!1),m=(0,r.Z)(n,2),g=m[0],x=m[1],f=(0,c.useState)({username:!1,password:!1,success:!1,message:""}),j=(0,r.Z)(f,2),v=j[0],y=j[1],S=(0,c.useContext)(u.V),_=S.setUser,b=S.myAxios,N=(0,d.useMutation)({mutationKey:"login",mutationFn:function(s){return(e=e||(0,o.Z)((0,t.Z)().mark((function e(s){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,p.D)(1200).then((0,o.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(b,s.username,s.password);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){return e.data.username?y({username:!0,password:!1,success:!1,message:e.data.message}):e.data.password?y({username:!1,password:!0,success:!1,message:e.data.message}):(y({username:!1,password:!1,success:!0,message:e.data.message}),void l().fire({position:"center",icon:"success",title:e.data.message,showConfirmButton:!1,timer:800}).then((function(){_(e.data.user),e.data.user.is_master_admin?a("/master-admin-dashboard"):(window.localStorage.setItem("__policy__","COM"),"UCSMI"===e.data.user.department&&window.localStorage.setItem("__policy_type__","TEMP"),"UMIS"===e.data.user.department&&window.localStorage.setItem("__policy_type__","REG"),a("/dashboard"))})))}}),Z=N.mutate,k=N.isLoading;return(0,h.jsxs)("div",{className:"main-landing-page",children:[(0,h.jsxs)("form",{className:"content",onSubmit:function(e){return(s=s||(0,o.Z)((0,t.Z)().mark((function e(s){var a;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.preventDefault(),a=new FormData(s.currentTarget),Z({username:a.get("username"),password:a.get("password")});case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},children:[(0,h.jsx)("img",{alt:"Upward Insurance",src:"http://localhost:4400/logo.png",style:{width:"120px",height:"auto",background:"white"}}),(0,h.jsx)("h3",{style:{fontWeight:"400",marginBottom:"30px"},children:"LOGIN TO UPWARD INSURANCE"}),(0,h.jsx)("div",{className:"content-field",children:(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{htmlFor:"username",children:" USERNAME"}),(0,h.jsx)("input",{name:"username",id:"username",className:v.username?"error":"",onFocus:function(){return y({username:!1,password:!1,success:!1,message:""})}}),v.username&&(0,h.jsx)("p",{className:"warning-text",children:v.username&&v.message})]})}),(0,h.jsx)("div",{className:"content-field",style:{marginTop:"15px"},children:(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{htmlFor:"password",children:" PASSWORD"}),(0,h.jsx)("input",{name:"password",id:"password",type:g?"text":"password",className:v.password?"error":"",onFocus:function(){return y({username:!1,password:!1,success:!1,message:""})}}),v.password&&(0,h.jsx)("p",{className:"warning-text",children:v.message})]})}),(0,h.jsxs)("div",{style:{display:"flex",alignItems:"center",columnGap:"10px",marginTop:"10px"},children:[(0,h.jsx)("input",{name:"showpass",id:"showpass",type:"checkbox",style:{padding:"0",margin:0},onChange:function(e){var s;console.log(e.currentTarget.checked),x(null===(s=e.currentTarget)||void 0===s?void 0:s.checked)}}),(0,h.jsx)("label",{htmlFor:"showpass",style:{fontSize:"10px",cursor:"pointer",padding:"0",margin:0},children:"SHOW PASSWORD"})]}),(0,h.jsx)("button",{children:"SUBMIT"})]}),k&&(0,h.jsx)("div",{className:"loading-component",children:(0,h.jsx)("div",{className:"loader"})})]})}}}]);
//# sourceMappingURL=3911.e93dc751.chunk.js.map