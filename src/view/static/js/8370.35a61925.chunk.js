"use strict";(self.webpackChunkupward=self.webpackChunkupward||[]).push([[8370],{70272:function(e,t,n){var o=n(54270),i=n(80184);t.Z=function(e){var t=e.title,n=void 0===t?"":t;return(0,i.jsxs)(o.q,{children:[(0,i.jsx)("title",{children:n}),(0,i.jsx)("link",{rel:"icon",type:"image/png",href:"".concat("/","/logo.png")})]})}},81582:function(e,t,n){n.d(t,{XT:function(){return h},ZP:function(){return f},rO:function(){return p}});n(72791);var o=n(88447),i=n(64554),r=n(20890),l=n(27391),a=n(13400),c=n(29823),u=n(89767),s=n(80184),d={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"80%",bgcolor:"background.paper",boxShadow:24,p:4,heigth:"auto"};function f(e){var t=e.height,n=e.isLoading,f=(e.queryKey,e.columns),v=e.onSelectionChange,x=(e.setRows,e.rows),g=e.id,b=e.onCloseModal,m=e.showModal,y=e.onClickCloseIcon,w=e.searchOnChange,k=e.title,C=void 0===k?"":k,S=e.searchRef,j=(e.onCellKeyDown,e.onSearchKeyEnter),D=void 0===j?function(){}:j,R=e.isRowSelectable,Z=e.getCellClassName,N=h();return(0,s.jsx)(o.Z,{open:m,onClose:b,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,s.jsxs)(i.Z,{sx:d,children:[(0,s.jsx)(r.Z,{id:"modal-modal-title",variant:"h6",component:"h2",mb:2,children:C}),(0,s.jsx)(l.Z,{size:"small",label:"Search",sx:{marginBottom:"10px"},fullWidth:!0,onChange:w,InputProps:{inputRef:S},onKeyDown:function(e){var t;"Enter"!==e.code&&"NumpadEnter"!==e.code||(e.preventDefault(),D(null===S||void 0===S||null===(t=S.current)||void 0===t?void 0:t.value));p(e,N,null===S||void 0===S?void 0:S.current)}}),(0,s.jsx)("div",{className:"".concat(N," main-table-selection-container"),style:{position:"relative",height:"".concat(t+20,"px")},children:(0,s.jsx)(u.Z,{isSingleSelection:!0,isRowFreeze:!1,columns:f,isLoading:n,dataSelection:function(e,t,n){v(e,t)},table_id:g,rows:x,isRowSelectable:R,getCellClassName:Z})}),(0,s.jsx)("div",{style:{position:"absolute",top:"10px",right:"10px"},children:(0,s.jsx)(a.Z,{"aria-label":"search-client",color:"secondary",onClick:y,children:(0,s.jsx)(c.Z,{})})})]})})}function h(){return"main-"+Math.floor(1e4*Math.random())}function p(e,t,n){var o=t;if("ArrowDown"===e.code){var i,r=document.querySelectorAll(".".concat(o," .MuiDataGrid-row"));e.preventDefault(),null===(i=r[0])||void 0===i||i.classList.add("hover-keyboard"),function(e,t){var n=document.querySelector(".".concat(e," .MuiDataGrid-row")),o=null===n||void 0===n?void 0:n.querySelector("input");null===o||void 0===o||o.focus();var i=new MouseEvent("mouseenter",{bubbles:!0,cancelable:!0,view:window});null===n||void 0===n||n.dispatchEvent(i),null===o||void 0===o||o.addEventListener("keydown",(function(e){"ArrowUp"===e.key&&(e.preventDefault(),t.focus()),"ArrowUp"===e.key&&(null===n||void 0===n||n.classList.remove("hover-keyboard"))}))}(t,n),r.forEach((function(e,t){e.addEventListener("keydown",(function(e){if("ArrowUp"===e.key){var n,o;if(t<=0)return;return e.preventDefault(),null===(n=r[t])||void 0===n||n.classList.remove("hover-keyboard"),void(null===(o=r[t-1])||void 0===o||o.classList.add("hover-keyboard"))}if("ArrowDown"===e.key){var i,l;if(e.preventDefault(),t>=r.length-1)return;null===(i=r[t])||void 0===i||i.classList.remove("hover-keyboard"),null===(l=r[t+1])||void 0===l||l.classList.add("hover-keyboard")}}))}))}}},89767:function(e,t,n){var o=n(93433),i=n(1413),r=n(29439),l=n(72791),a=n(57482),c=n(64554),u=n(70561),s=n(29961),d=n(54277),f=n(70169),h=n(5794),p=n(16088),v=n(80184),x=(0,l.createContext)({rows:[],rowSelectionModel:[],footerChildren:function(){return(0,v.jsx)("div",{})},footerPaginationPosition:"right-left",showFooterSelectedCount:!0}),g=(0,l.forwardRef)((function(e,t){var n=e.isLoading,c=e.columns,s=e.rows,d=e.table_id,f=e.isSingleSelection,h=e.isRowFreeze,p=e.dataSelection,g=e.CustomFooterComponent,b=void 0===g?y:g,m=e.isRowSelectable,w=e.getCellClassName,k=e.checkboxSelection,C=void 0===k||k,S=e.footerChildren,j=void 0===S?function(e,t){return(0,v.jsx)("div",{})}:S,D=e.footerPaginationPosition,R=void 0===D?"right-left":D,Z=e.showFooterSelectedCount,N=void 0===Z||Z,I=(0,l.useState)([]),T=(0,r.Z)(I,2),A=T[0],B=T[1];function F(e,t,n){p&&p(e,t,n)}(0,l.useImperativeHandle)(t,(function(){return{removeSelection:function(){B([])},getSelectedRows:function(){return s.filter((function(e){return null===A||void 0===A?void 0:A.includes(e[d])}))},setSelectedRows:function(e){B(e)}}}));var z=[];return(0,v.jsx)(x.Provider,{value:{showFooterSelectedCount:N,footerPaginationPosition:R,rowSelectionModel:A,rows:s,footerChildren:j},children:(0,v.jsx)(u._$,{slots:{loadingOverlay:a.Z,footer:b},initialState:{pagination:{paginationModel:{pageSize:100}}},loading:n,getRowId:function(e){return e[d]},columns:c.filter((function(e){return!e.hide})),rows:s,showCellVerticalBorder:!0,showColumnVerticalBorder:!0,checkboxSelection:C,rowSelectionModel:A,rowHeight:25,columnHeaderHeight:35,pageSizeOptions:[10,20,35,50,75,100],sx:(0,i.Z)((0,i.Z)({"& .cash":{color:"#ec4899"},"& .check":{color:"#0891b2"},"& .approved":{color:"green"},"& .pending":{color:"orange"},"& .disapproved":{color:"red"},"& .normal":{color:"red"},"& .MuiDataGrid-row.Mui-selected:hover":{color:"black","& .MuiSvgIcon-root ":{fill:"#3b82f6"}},"& .hover-keyboard":{background:"#2563eb",color:"white","& .MuiSvgIcon-root ":{fill:"white"}},"& .MuiDataGrid-row:hover":{background:"#2563eb",color:"white","& .MuiSvgIcon-root ":{fill:"white"}},"& .MuiDataGrid-row.hover":{background:"#2563eb",color:"white","& .MuiSvgIcon-root ":{fill:"white"}},"& .MuiTablePagination-root p ":{padding:"0 !important"}},{"& .MuiDataGrid-columnHeaders":{background:"#64748b",color:"white",fontSize:"14px"},"& .MuiDataGrid-columnHeaderCheckbox .MuiDataGrid-columnHeaderTitleContainer .MuiSvgIcon-root ":{display:f||h?"none":"block",fill:"white"},"& .MuiDataGrid-columnHeaderCheckbox .MuiDataGrid-columnHeaderTitleContainer input ":{display:f||h?"none":"block"}}),{fontSize:13,fontWeight:500,"& .MuiDataGrid-checkboxInput":{height:"27px",width:"27px"},"& .MuiDataGrid-checkboxInput svg":{height:"20px",width:"20px"}}),onRowSelectionModelChange:function(e){if(h){if(e.length<=0)return;if(z=e,A.includes(z[z.length-1]))return;return B(e),void F([e[e.length-1]],s,null)}if(!h&&f)if(A&&(null===A||void 0===A?void 0:A.length)>0){var t=new Set(A);B(e.filter((function(e){return!t.has(e)})))}else B(e);else B(e);F([e[e.length-1]],s,null)},onCellKeyDown:function(e,t){if(["NumpadEnter","Enter","Delete","Backspace"].includes(t.code))return t.preventDefault(),"Enter"===t.code||"NumpadEnter"===t.code?f&&!h?B((function(n){return n&&n.length>0&&n[0]===e.rowNode.id?(F([],s,t.code),[]):(F([e.rowNode.id],s,t.code),[e.rowNode.id])})):void B((function(n){return n&&!h&&n.length>0&&n.includes(e.rowNode.id)?(n=n.filter((function(t){return t!==e.rowNode.id})),F([],s,t.code),n):n&&h&&n.length>0&&n.includes(e.rowNode.id)?n:(F([e.rowNode.id],s,t.code),[].concat((0,o.Z)(n),[e.rowNode.id]))})):"Delete"===t.code||"Backspace"===t.code?(B([e.rowNode.id]),F([e.rowNode.id],s,t.code)):void 0},disableVirtualization:!0,isRowSelectable:m,getCellClassName:w})})}));function b(e){var t=e.page,n=e.onPageChange,o=e.className,i=(0,s.l)(),r=(0,d.P)(i,f.UB);return(0,v.jsx)(p.Z,{variant:"outlined",color:"primary",className:o,count:r,page:t+1,onChange:function(e,t){n(e,t-1)}})}function m(e){return(0,v.jsx)(h.x,(0,i.Z)({ActionsComponent:b},e))}function y(e){var t=(0,l.useContext)(x),n=t.rowSelectionModel,o=t.showFooterSelectedCount,r=t.footerPaginationPosition,a=t.footerChildren,u=t.rows;return(0,v.jsxs)(c.Z,{sx:{columnGap:"50px",display:"flex",width:"100%",justifyContent:"space-between",px:3,alignItems:"center",flexDirection:"right-left"===r?"row-reverse":"row"},children:[(0,v.jsx)(m,(0,i.Z)({},e)),(0,v.jsxs)(c.Z,{sx:{display:"flex",justifyContent:"right-left"===r?"flex-start":"flex-end",flex:1,alignItems:"center"},children:[o&&(0,v.jsxs)("div",{children:["Selected:",null===n||void 0===n?void 0:n.length]}),(0,v.jsx)("div",{children:a(n,u)})]})]})}t.Z=g},37209:function(e,t,n){n.d(t,{sT:function(){return s},lq:function(){return u},Fz:function(){return c},iA:function(){return l},oi:function(){return a}});var o=n(1413),i=n(72791),r=n(80184);function l(e){var t=e.input,n=e.label,l=e.inputRef,a=e.icon,c=e.iconPosition,u=void 0===c?"end":c,s=e.disableIcon,d=void 0!==s&&s,f=e.onIconClick,h=void 0===f?function(e){}:f,p=e.onChange,v=void 0===p?function(e){}:p,x=(0,i.useId)(),g=function(e){if(!e)return e;var t=e.split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")},b=function(e){return e.replace(/,/g,"")};return(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",position:"relative"},children:[(0,r.jsx)("label",(0,o.Z)((0,o.Z)({},n),{},{htmlFor:x,children:n.title})),a&&"start"===u&&(0,r.jsx)("div",{style:{position:"absolute",left:"8px",zIndex:1},children:a}),(0,r.jsx)("input",(0,o.Z)((0,o.Z)({ref:l,id:x},t),{},{type:"text",style:(0,o.Z)({height:"100%"},t.style),onChange:function(e){!function(e){var t=e.target.value;t=b(t),(""===(t=b(t))||/^-?\d+(,\d{3})*(\.\d*)?$/.test(t))&&(e.target.value=g(t))}(e),v(e)},onBlur:function(e){!function(e){var t=b(e.target.value);t=function(e){return e.includes(".")?1===e.split(".")[1].length?e+"0":e:""===e?"0.00":e+".00"}(t),e.target.value=g(t)}(e)}})),a&&"end"===u&&(0,r.jsx)("div",{onClick:h,style:{position:"absolute",right:"2px",top:"50%",transform:"translateY(-50%)",zIndex:1,cursor:d?"none":"pointer",display:"flex",alignItems:"center",justifyContent:"center",background:"white",pointerEvents:d?"none":"auto"},children:a})]})}function a(e){var t=e.input,n=e.label,l=e.inputRef,a=e.icon,c=e.iconPosition,u=void 0===c?"end":c,s=e.disableIcon,d=void 0!==s&&s,f=e.onIconClick,h=void 0===f?function(e){}:f,p=(0,i.useId)();return(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",position:"relative"},children:[(0,r.jsx)("label",(0,o.Z)((0,o.Z)({},n),{},{htmlFor:p,children:n.title})),a&&"start"===u&&(0,r.jsx)("div",{style:{position:"absolute",left:"8px",zIndex:1},children:a}),(0,r.jsx)("input",(0,o.Z)((0,o.Z)({ref:l,id:p},t),{},{style:(0,o.Z)({height:"100%"},t.style)})),a&&"end"===u&&(0,r.jsx)("div",{onClick:h,style:{position:"absolute",right:"2px",top:"50%",transform:"translateY(-50%)",zIndex:1,cursor:d?"none":"pointer",display:"flex",alignItems:"center",justifyContent:"center",background:"white",pointerEvents:d?"none":"auto"},children:a})]})}function c(e){var t=e.textarea,n=e.label,l=e._inputRef,a=e.icon,c=e.iconPosition,u=void 0===c?"end":c,s=e.disableIcon,d=void 0!==s&&s,f=e.onIconClick,h=void 0===f?function(e){}:f,p=(0,i.useId)();return(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",position:"relative"},children:[(0,r.jsx)("label",(0,o.Z)((0,o.Z)({},n),{},{htmlFor:p,children:n.title})),a&&"start"===u&&(0,r.jsx)("div",{style:{position:"absolute",left:"8px",zIndex:1},children:a}),(0,r.jsx)("textarea",(0,o.Z)((0,o.Z)({ref:l,id:p},t),{},{style:(0,o.Z)({height:"100%"},t.style)})),a&&"end"===u&&(0,r.jsx)("div",{onClick:h,style:{position:"absolute",right:"2px",top:"50%",transform:"translateY(-50%)",zIndex:1,cursor:d?"none":"pointer",display:"flex",alignItems:"center",justifyContent:"center",background:"white",pointerEvents:d?"none":"auto"},children:a})]})}function u(e){var t=e.select,n=e.label,l=e.selectRef,a=e.datasource,c=void 0===a?[]:a,u=e.values,s=void 0===u?"":u,d=e.display,f=void 0===d?"":d,h=(0,i.useId)();return(0,r.jsxs)("div",{style:{display:"flex",height:"18px",alignItems:"center"},children:[(0,r.jsx)("label",(0,o.Z)((0,o.Z)({},n),{},{htmlFor:h,children:n.title})),(0,r.jsx)("select",(0,o.Z)((0,o.Z)({},t),{},{ref:l,className:"select ".concat(t.className),style:(0,o.Z)({height:"18px"},t.style),children:c.map((function(e,t){return(0,r.jsx)("option",{value:e[s],children:e[f]},t)}))}))]})}function s(e){var t=e.buttonRetRef,n=e.button,i=e.tooltipText,l=void 0===i?"":i,a=e.children,c=e.disabled,u=void 0!==c&&c;return(0,r.jsxs)("div",{className:"tooltip",children:[(0,r.jsx)("button",(0,o.Z)((0,o.Z)({disabled:u},n),{},{ref:t,style:(0,o.Z)((0,o.Z)({},n.style),{},{background:u?"#f1f1f1":"transparent"}),className:"tooltip-button",children:a})),!u&&(0,r.jsx)("span",{className:"tooltip-text",children:l})]})}},26929:function(e,t,n){n.r(t),n.d(t,{default:function(){return B},reducer:function(){return T}});var o=n(93433),i=n(74165),r=n(15861),l=n(29439),a=n(4942),c=n(1413),u=n(72791),s=n(91933),d=n(3380),f=n(36151),h=n(93263),p=n(39709),v=n(42419),x=n(53329),g=n(29823),b=n(21830),m=n.n(b),y=n(16395),w=n(64230),k=n(37209),C=n(16386),S=n(76633),j=n(78946),D=(n(59491),n(70272)),R=n(80184),Z=[{value1:"1,000.00",value2:"",value3:"0.00"},{value1:"500.00",value2:"",value3:"0.00"},{value1:"200.00",value2:"",value3:"0.00"},{value1:"100.00",value2:"",value3:"0.00"},{value1:"50.00",value2:"",value3:"0.00"},{value1:"20.00",value2:"",value3:"0.00"},{value1:"10.00",value2:"",value3:"0.00"},{value1:"5.00",value2:"",value3:"0.00"},{value1:"2.00",value2:"",value3:"0.00"},{value1:"1.00",value2:"",value3:"0.00"},{value1:".50",value2:"",value3:"0.00"},{value1:".25",value2:"",value3:"0.00"},{value1:".10",value2:"",value3:"0.00"},{value1:".05",value2:"",value3:"0.00"},{value1:".01",value2:"",value3:"0.00"}],N=[{title:"Cash Collection",index:0},{title:"Check Collection",index:1},{title:"Selected Collection",index:2},{title:"Collection for Deposit",index:3}],I=[{key:"OR_No",label:"OR No.",width:270},{key:"OR_Date",label:"OR Date",width:270},{key:"Amount",label:"Amount",width:200,type:"number",cellClassName:"super-app-theme--cell"},{key:"Client_Name",label:"Client Name",flex:1,width:540},{key:"DRCode",label:"DRCode",hide:!0},{key:"ID_No",label:"ID_No",hide:!0},{key:"Short",label:"Short",hide:!0},{key:"Temp_OR",label:"Temp_OR",hide:!0}],T=function(e,t){return"UPDATE_FIELD"===t.type?(0,c.Z)((0,c.Z)({},e),{},(0,a.Z)({},t.field,t.value)):e},A=(0,u.createContext)({cashCollection:[],setCashCollection:function(){},checkCollection:[],setCheckCollection:function(){},selectedCollection:[],setSelectedCollection:function(){},collectionForDeposit:[],setCollectionForDeposit:function(){},tableRows:[],updateTableRowsInput:function(){},LoadingCashTable:!1,LoadingCheckTable:!1,setTotal:function(){},total:"0.00",TotalCashForDeposit:"0.00",loadingSearchByDepositSlip:!1});function B(){var e,t,n,a,b,I,T=(0,u.useRef)(null),B=(0,u.useRef)(null),E=(0,u.useRef)(null),L=(0,u.useRef)(null),q=(0,u.useRef)(null),K=(0,u.useRef)(null),P=(0,u.useRef)(null),H=(0,u.useRef)(null),G=(0,u.useRef)(null),W=(0,u.useRef)(null),U=(0,u.useRef)(null),V=(0,u.useRef)(""),Y=(0,u.useRef)(""),Q=(0,u.useRef)(""),J=(0,u.useRef)(""),X=(0,u.useRef)(""),$=(0,u.useRef)(""),ee=(0,u.useRef)(""),te=(0,u.useRef)(""),ne=(0,u.useContext)(d.V),oe=ne.myAxios,ie=ne.user,re=function(e){var t=(0,u.useState)(0),n=(0,l.Z)(t,2),o=n[0],i=n[1];function r(t){t>=0&&t<e.length&&i(t)}return{goTo:r,currentStepIndex:o}}([0,1,2,3]),le=re.currentStepIndex,ae=re.goTo,ce=(0,u.useState)([]),ue=(0,l.Z)(ce,2),se=ue[0],de=ue[1],fe=(0,u.useState)([]),he=(0,l.Z)(fe,2),pe=he[0],ve=he[1],xe=(0,u.useState)([]),ge=(0,l.Z)(xe,2),be=ge[0],me=ge[1],ye=(0,u.useState)([]),we=(0,l.Z)(ye,2),ke=we[0],Ce=we[1],Se=(0,u.useState)(Z),je=(0,l.Z)(Se,2),De=je[0],Re=je[1],Ze=(0,u.useState)([]),Ne=(0,l.Z)(Ze,2),Ie=Ne[0],Te=Ne[1],Ae=(0,u.useState)([]),Be=(0,l.Z)(Ae,2),Fe=Be[0],ze=Be[1],Oe=(0,u.useState)(""),Me=(0,l.Z)(Oe,2),_e=Me[0],Ee=Me[1],Le=(0,u.useState)("0.00"),qe=(0,l.Z)(Le,2),Ke=qe[0],Pe=qe[1],He=""===_e,Ge=be.reduce((function(e,t){return e+(t.Check_No||""!==t.Check_No?0:parseFloat(t.Amount.replace(/,/g,"")))}),0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),We=(0,s.useQuery)({queryKey:"deposit-slipcode",queryFn:function(){return(e=e||(0,r.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe.get("/task/accounting/get-deposit-slipcode",{headers:{Authorization:"Bearer ".concat(null===ie||void 0===ie?void 0:ie.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},refetchOnWindowFocus:!1,onSuccess:function(e){var t=e;(0,y.wait)(100).then((function(){P.current&&(P.current.value=t.data.slipcode[0].collectionID,V.current=t.data.slipcode[0].collectionID),H.current&&(H.current.value=(0,C.Z)(new Date,"yyyy-MM-dd"))}))}}),Ue=We.isLoading,Ve=We.refetch,Ye=(0,h.Z)({link:{url:"/task/accounting/getBanks",queryUrlName:"bankDepositSearch"},columns:[{field:"Account_Type",headerName:"Account_Type",width:200},{field:"Account_No",headerName:"Account_No",width:170},{field:"Account_Name",headerName:"Account_Name",flex:1}],queryKey:"bank-deposit",uniqueId:"Account_No",responseDataKey:"banks",onSelected:function(e){var t,n,o,i,r,l,a;e.length>0&&(G.current&&(G.current.value=e[0].Account_No),W.current&&(W.current.value=e[0].Account_Name),Y.current=null===(t=e[0])||void 0===t?void 0:t.IDNo,Q.current=null===(n=e[0])||void 0===n?void 0:n.Desc,J.current=null===(o=e[0])||void 0===o?void 0:o.Account_ID,X.current=null===(i=e[0])||void 0===i?void 0:i.Short,te.current=null===(r=e[0])||void 0===r?void 0:r.client_name,$.current=null===(l=e[0])||void 0===l?void 0:l.Sub_Acct,ee.current=null===(a=e[0])||void 0===a?void 0:a.ShortName,$e())},searchRef:U}),Qe=Ye.ModalComponent,Je=Ye.openModal,Xe=Ye.isLoading,$e=Ye.closeModal,et=(0,s.useMutation)({mutationKey:"add-deposit",mutationFn:function(e){return(t=t||(0,r.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe.post("/task/accounting/add-deposit",t,{headers:{Authorization:"Bearer ".concat(null===ie||void 0===ie?void 0:ie.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t=e;return t.data.success?((0,y.wait)(100).then((function(){wt(),yt(),Re(Z),me([]),Ce([]),Te([]),ze([]),xt(),mt(),Ve(),Ee(""),ae(0)})),m().fire({position:"center",icon:"success",title:t.data.message,timer:1500})):m().fire({position:"center",icon:"warning",title:t.data.message,timer:1500})}}),tt=et.mutate,nt=et.isLoading,ot=(0,s.useMutation)({mutationKey:"update-deposit",mutationFn:function(e){return(n=n||(0,r.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe.post("/task/accounting/update-deposit",t,{headers:{Authorization:"Bearer ".concat(null===ie||void 0===ie?void 0:ie.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t=e;return t.data.success?((0,y.wait)(100).then((function(){wt(),yt(),Re(Z),me([]),Ce([]),Te([]),ze([]),xt(),mt(),Ve(),Ee(""),ae(0)})),m().fire({position:"center",icon:"success",title:t.data.message,timer:1500})):m().fire({position:"center",icon:"warning",title:t.data.message,timer:1500})}}),it=ot.mutate,rt=ot.isLoading,lt=(0,s.useMutation)({mutationKey:"search-deposit-cash-check",mutationFn:function(e){return(a=a||(0,r.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe.post("/task/accounting/search-cash-check",t,{headers:{Authorization:"Bearer ".concat(null===ie||void 0===ie?void 0:ie.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t=e.data.data.obj,n=e.data.data.cash,o=e.data.data.checks,i=e.data.data.cash_breakdown;de([]),ve([]),me([]),Ce([]),Re([]),(0,y.wait)(100).then((function(){L.current.resetTable(),E.current.resetTable(),T.current.resetTable(),B.current.resetTable(),G.current&&(G.current.value=t.refBankAcctCode),W.current&&(W.current.value=t.refBankAcctName),H.current&&(H.current.value=(0,C.Z)(new Date(t.refDate),"yyyy-MM-dd")),Y.current=null===t||void 0===t?void 0:t.refBankAcctCodeTag,Q.current=null===t||void 0===t?void 0:t.refBankAcctNameTag,J.current=null===t||void 0===t?void 0:t.refAcctID,X.current=null===t||void 0===t?void 0:t.refAcctName,te.current=null===t||void 0===t?void 0:t.client_name,$.current=null===t||void 0===t?void 0:t.refClassification,ee.current=null===t||void 0===t?void 0:t.refSubAccount,T.current.setDataFormated(n),B.current.setDataFormated(o),de(n),ve(o),Re(i),setTimeout((function(){n.forEach((function(e,t){if(P.current&&e.SlipCode===P.current.value){var n=T.current.parentElement().querySelector(".tr-row-".concat(t)).querySelectorAll("td")[0].querySelector("input");n&&n.click()}})),o.forEach((function(e,t){if(P.current&&e.SlipCode===P.current.value){var n=B.current.parentElement().querySelector(".tr-row-".concat(t)).querySelectorAll("td")[0].querySelector("input");n&&n.click()}}))}),200)})),Ee("edit")}}),at=lt.mutate,ct=lt.isLoading,ut=(0,h.Z)({link:{url:"/task/accounting/search-deposit",queryUrlName:"searchDeposit"},columns:[{field:"Date",headerName:"Date",width:150},{field:"SlipCode",headerName:"Slip Code",width:170},{field:"BankAccount",headerName:"Bank Account",width:170},{field:"AccountName",headerName:"Account Name",flex:1}],queryKey:"deposit-search",uniqueId:"SlipCode",responseDataKey:"deposit",onSelected:function(e){var t=e[0].SlipCode;at({SlipCode:t}),(0,y.wait)(100).then((function(){P.current&&(P.current.value=t)})),ht()},onCloseFunction:function(e){K.current&&(K.current.value="")},searchRef:q}),st=ut.ModalComponent,dt=ut.openModal,ft=ut.isLoading,ht=ut.closeModal,pt=(0,s.useQuery)({queryKey:"get-cash-collection",queryFn:function(){return(b=b||(0,r.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe.get("/task/accounting/get-cash-collection",{headers:{Authorization:"Bearer ".concat(null===ie||void 0===ie?void 0:ie.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t=e;"edit"===_e?de((function(e){var n=e.filter((function(e){return P.current&&e.SlipCode===P.current.value}));return[].concat((0,o.Z)(t.data.cash),(0,o.Z)(n))})):(de(t.data.cash),(0,y.wait)(100).then((function(){T.current.setDataFormated(t.data.cash)})))}}),vt=pt.isLoading,xt=pt.refetch,gt=(0,s.useQuery)({queryKey:"get-check-collection",queryFn:function(){return(I=I||(0,r.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe.get("/task/accounting/get-check-collection",{headers:{Authorization:"Bearer ".concat(null===ie||void 0===ie?void 0:ie.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t=e;"edit"===_e?de((function(e){var n=e.filter((function(e){return P.current&&e.SlipCode===P.current.value}));return[].concat((0,o.Z)(t.data.check),(0,o.Z)(n))})):(ve(t.data.check),(0,y.wait)(100).then((function(){B.current.setDataFormated(t.data.check)})))}}),bt=gt.isLoading,mt=gt.refetch;function yt(){G.current&&(G.current.value=""),W.current&&(W.current.value=""),U.current&&(U.current.value=""),Y.current="",Q.current="",J.current="",X.current="",$.current="",ee.current="",te.current=""}function wt(){T.current.resetTable(),B.current.resetTable(),E.current.resetTable(),L.current.resetTable()}return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(D.Z,{title:"Deposit"}),(0,R.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"100%",height:"100%",flex:1},children:[(0,R.jsxs)("div",{style:{display:"flex",alignItems:"center",columnGap:"5px"},children:[ft?(0,R.jsx)(p.Z,{loading:ft}):(0,R.jsx)(k.oi,{label:{title:"Search: ",style:{fontSize:"12px",fontWeight:"bold",width:"50px"}},input:{className:"search-input-up-on-key-down",type:"search",onKeyDown:function(e){var t;"Enter"!==e.key&&"NumpadEnter"!==e.key||(e.preventDefault(),dt(null===(t=K.current)||void 0===t?void 0:t.value));"ArrowDown"===e.key&&(e.preventDefault(),document.querySelector(".grid-container").focus())},style:{width:"500px"}},inputRef:K}),He&&(0,R.jsx)(f.Z,{sx:{height:"30px",fontSize:"11px"},variant:"contained",startIcon:(0,R.jsx)(v.Z,{sx:{width:15,height:15}}),id:"entry-header-save-button",onClick:function(){Ee("add")},children:"New"}),(0,R.jsx)(p.Z,{sx:{height:"30px",fontSize:"11px"},id:"save-entry-header",color:"primary",variant:"contained",type:"submit",onClick:function(e){var t,n,o,i,r,l;if(e.preventDefault(),G.current&&(null===(t=G.current)||void 0===t?void 0:t.value.length)>=200)return m().fire({position:"center",icon:"warning",title:"Bank Account is too long!",timer:1500});if(G.current&&""===(null===(n=G.current)||void 0===n?void 0:n.value))return m().fire({position:"center",icon:"warning",title:"Please provide bank account",timer:1500}).then((function(e){(0,y.wait)(350).then((function(){Je()}))}));if(be.length<=0)return m().fire({position:"center",icon:"warning",title:"No selected collection to be deposit",timer:1500});if(Ge.trim()!==Ke.trim())return m().fire({position:"center",icon:"warning",title:"Cash breakdown is not balance",timer:1500});var a={depositSlip:null===(o=P.current)||void 0===o?void 0:o.value,depositdate:null===(i=H.current)||void 0===i?void 0:i.value,BankAcctCode:null===(r=G.current)||void 0===r?void 0:r.value,BankAcctName:null===(l=W.current)||void 0===l?void 0:l.value,BankAcctCodeTag:Y.current,BankAcctNameTag:Q.current,AcctID:J.current,AcctName:X.current,Classification:$.current,SubAccount:ee.current,ShortName:te.current};"edit"===_e?(0,w.s)({isUpdate:!0,cb:function(e){it((0,c.Z)((0,c.Z)({},a),{},{userCodeConfirmation:e,selectedCollection:JSON.stringify(be),tableRowsInputValue:JSON.stringify(De)}))}}):(0,w.L)({isConfirm:function(){tt((0,c.Z)((0,c.Z)({},a),{},{selectedCollection:JSON.stringify(be),tableRowsInputValue:JSON.stringify(De)}))}})},disabled:He,startIcon:(0,R.jsx)(x.Z,{sx:{width:15,height:15}}),loading:rt||nt,children:"Save"}),!He&&(0,R.jsx)(f.Z,{sx:{height:"30px",fontSize:"11px"},variant:"contained",startIcon:(0,R.jsx)(g.Z,{sx:{width:15,height:15}}),color:"error",onClick:function(){m().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, cancel it!"}).then((function(e){e.isConfirmed&&(0,y.wait)(100).then((function(){wt(),yt(),Re(Z),me([]),Ce([]),Te([]),ze([]),xt(),mt(),Ve(),Ee(""),ae(0)}))}))},children:"Cancel"})]}),(0,R.jsx)("br",{}),(0,R.jsxs)("form",{onKeyDown:function(e){"Enter"!==e.code&&"NumpadEnter"!==e.code||e.preventDefault()},style:{display:"flex",gap:"10px"},children:[Ue?"Loading...":(0,R.jsx)(k.oi,{label:{title:"Slip Code: ",style:{fontSize:"12px",fontWeight:"bold",width:"70px"}},input:{disabled:He,className:"search-input-up-on-key-down",type:"text",style:{width:"200px"}},inputRef:P,icon:(0,R.jsx)(S.Z,{sx:{fontSize:"18px"}}),onIconClick:function(e){e.preventDefault(),Ve()}}),(0,R.jsx)(k.oi,{label:{title:"Deposit Date: ",style:{fontSize:"12px",fontWeight:"bold",width:"80px"}},input:{className:"search-input-up-on-key-down",type:"date",style:{width:"200px"},disabled:He},inputRef:H}),Xe?"Loading...":(0,R.jsx)(k.oi,{label:{title:"Bank Account: ",style:{fontSize:"12px",fontWeight:"bold",width:"100px"}},input:{className:"search-input-up-on-key-down",type:"text",style:{width:"200px"},onKeyDown:function(e){var t;"Enter"!==e.key&&"NumpadEnter"!==e.key||(e.preventDefault(),Je(null===(t=G.current)||void 0===t?void 0:t.value))},disabled:He},inputRef:G,icon:(0,R.jsx)(j.Z,{sx:{fontSize:"18px",color:He?"gray":"black"}}),onIconClick:function(e){var t;e.preventDefault(),Je(null===(t=G.current)||void 0===t?void 0:t.value)},disableIcon:He}),(0,R.jsx)(k.oi,{label:{title:"Account Name: ",style:{fontSize:"12px",fontWeight:"bold",width:"100px"}},input:{className:"search-input-up-on-key-down",type:"text",style:{width:"200px"},readOnly:!0,disabled:He},inputRef:W}),(0,R.jsx)("button",{style:{display:"none"},type:"submit"})]}),(0,R.jsx)("br",{}),(0,R.jsx)("div",{children:(0,R.jsx)("div",{style:{display:"flex"},children:N.map((function(e,t){return(0,R.jsxs)("button",{disabled:He,style:{border:"1px solid #c0c0c0",outline:"none",backgroundColor:le===t?"#c0c0c0":"rgba(51, 51, 51, 0.05)",borderWidth:"0",color:"black",cursor:"pointer",display:"inline-block",fontFamily:'"Haas Grot Text R Web", "Helvetica Neue", Helvetica, Arial, sans-serif',fontSize:"14px",fontWeight:"500",lineHeight:"20px",listStyle:"none",margin:"0",padding:"10px 12px",textAlign:"center",verticalAlign:"baseline",whiteSpace:"nowrap",userSelect:"none",touchAction:"manipulation",position:"relative",overflow:"hidden",borderRadius:"0px"},onClick:function(){0===t?xt():1===t&&mt(),ae(t)},children:[(0,R.jsx)("span",{style:{position:"absolute",top:0,bottom:0,left:0,right:0,background:"rgba(206, 214, 211, 0.18)",transition:"all 200ms",transform:F(le,t)}}),e.title]},t)}))})}),(0,R.jsx)(A.Provider,{value:{cashCollection:se,setCashCollection:de,checkCollection:pe,setCheckCollection:ve,selectedRows:be,setSelectedRows:me,collectionForDeposit:ke,setCollectionForDeposit:Ce,total:Ke,setTotal:Pe,TotalCashForDeposit:Ge,tableRows:De,setTableRowsInputValue:Re,updateTableRowsInput:function(e,t){Re((function(n){return n.map((function(n,o){return t===o&&(n=(0,c.Z)((0,c.Z)({},n),e)),n}))}))},loadingCheckCollection:bt,loadingCashCollection:vt,selectedRowsCashIndex:Ie,setSelectedRowsCashIndex:Te,selectedRowsCheckedIndex:Fe,setSelectedRowsCheckedIndex:ze,cashTable:T,checkTable:B,selectedTable:E,collectionCheckTable:L,refetchCheckCollection:mt,refetchCashCollection:xt,disabledFields:He},children:(0,R.jsxs)("div",{style:{display:"flex",flexDirection:"column",flex:1},id:"concatiner",children:[(0,R.jsx)("div",{style:{display:0===le?"block":"none"},children:(0,R.jsx)(z,{})}),(0,R.jsx)("div",{style:{display:1===le?"block":"none"},children:(0,R.jsx)(O,{})}),(0,R.jsx)("div",{style:{display:2===le?"block":"none"},children:(0,R.jsx)(M,{})}),(0,R.jsx)("div",{style:{display:3===le?"block":"none"},children:(0,R.jsx)(_,{})})]})}),Qe,st,(ct||rt||nt)&&(0,R.jsx)("div",{className:"loading-component",children:(0,R.jsx)("div",{className:"loader"})})]})]})}function F(e,t){return e===t?"translateX(100%)":"translateX(0%)"}function z(){var e=(0,u.useContext)(A),t=e.cashCollection,n=e.setSelectedRows,i=e.cashTable,r=e.disabledFields;return(0,R.jsx)("div",{style:{flex:1,marginTop:"10px",width:"100%",position:"relative"},children:(0,R.jsx)(L,{disbaleTable:r,ref:i,columns:I,rows:t,getSelectedItem:function(e,t,i,r){var l=e;n((function(e){var t={Deposit:"Cash",Check_No:"",Check_Date:"",Bank:"",Amount:l[2],Name:l[3],RowIndex:e.length+1,DRCode:l[4],ORNo:l[0],DRRemarks:"",IDNo:l[5],TempOR:l[7],Short:l[6]};return e=[].concat((0,o.Z)(e),[t])}))}})})}function O(){var e=(0,u.useContext)(A),t=e.checkCollection,n=e.setSelectedRows,i=e.checkTable,r=e.setCollectionForDeposit,l=e.disabledFields;return(0,R.jsx)("div",{style:{marginTop:"10px",width:"100%",position:"relative",flex:1},children:(0,R.jsx)(L,{disbaleTable:l,ref:i,columns:[{key:"OR_No",label:"OR No.",width:170},{key:"OR_Date",label:"OR Date",width:170},{key:"Check_No",label:"Check No",width:170},{key:"Check_Date",label:"Check Date",width:170},{key:"Amount",label:"Amount",width:160,align:"right"},{key:"Bank_Branch",label:"Bank/Branch",width:300},{key:"Client_Name",label:"Client Name",width:300},{key:"Temp_OR",hide:!0},{key:"DRCode",hide:!0},{key:"DRRemarks",hide:!0},{key:"ID_No",hide:!0},{key:"Short",hide:!0},{key:"SlipCode",hide:!0}],rows:t,getSelectedItem:function(e,t,i,l){var a=e;n((function(e){var t={Deposit:"Check",Check_No:a[2],Check_Date:a[3],Bank:a[5],Amount:a[4],Name:a[6],DRCode:a[8],ORNo:a[0],DRRemarks:a[9],IDNo:a[10],TempOR:a[7],Short:a[11]};return e=[].concat((0,o.Z)(e),[t])})),r((function(e){var t={Bank:a[5],Check_No:a[2],Amount:a[4],TempOR:a[7]};return e=[].concat((0,o.Z)(e),[t])}))}})})}function M(){var e=(0,u.useContext)(A),t=e.setSelectedRows,n=e.selectedRows,o=e.selectedTable,i=e.cashTable,r=e.checkTable,l=e.setCollectionForDeposit,a=e.collectionForDeposit,c=e.collectionCheckTable;return(0,R.jsx)("div",{style:{marginTop:"10px",width:"100%",position:"relative",flex:1},children:(0,R.jsx)(q,{ref:o,columns:[{key:"Deposit",label:"Deposit",width:170},{key:"Check_No",label:"Check No",width:170},{key:"Check_Date",label:"Check Date",width:170},{key:"Bank",label:"Bank/Branch",width:200},{key:"Amount",label:"Amount",width:170},{key:"Name",label:"Client Name",width:400},{key:"DRCode",label:"DRCode",hide:!0},{key:"ORNo",label:"ORNo",hide:!0},{key:"DRRemarks",label:"DRRemarks",hide:!0},{key:"IDNo",label:"IDNo",hide:!0},{key:"TempOR",label:"TempOR",hide:!0},{key:"Short",label:"Short",hide:!0}],rows:n,getSelectedItem:function(e,n,u,s){var d,f,h=e,p=o.current.getData();if("Cash"===h[0]){var v=i.current.getData(),x=i.current.getSelectedRow(),g=v.findIndex((function(e){return e[7]===h[10]})),b=x.indexOf(g);-1!==b&&x.splice(b,1),i.current.setSelectedRow(x)}else{var m=r.current.getData(),y=r.current.getSelectedRow(),w=m.findIndex((function(e){return e[7]===h[10]})),k=y.indexOf(w);-1!==k&&y.splice(k,1),r.current.setSelectedRow(y)}t((function(e){return 1===e.length&&e[0].TempOR===h[10]?[]:e.filter((function(e){return e.TempOR!==h[10]}))}));var C,S=1===(C=a).length&&C[0].TempOR===h[10]?[]:C.filter((function(e){return e.TempOR!==h[10]}));l(S);var j=null===(d=c.current)||void 0===d?void 0:d.getColumns();if(null===(f=c.current)||void 0===f||f.setData(S.map((function(e){return j.map((function(t){return e[t.key]}))}))),1===p.length&&p[0][10]===h[10])return o.current.setData([]);var D=p.filter((function(e){return e[10]!==h[10]}));o.current.setData(D)}})})}function _(){var e=(0,u.useContext)(A),t=e.collectionForDeposit,n=e.tableRows,o=e.total,i=e.setTotal,r=e.TotalCashForDeposit,l=e.collectionCheckTable;return(0,u.useEffect)((function(){i(null===n||void 0===n?void 0:n.reduce((function(e,t){return e+parseFloat(t.value3.replace(/,/g,""))}),0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}))}),[n,i]),(0,R.jsxs)("div",{style:{display:"flex",gap:"10px",height:"auto "},children:[(0,R.jsxs)("fieldset",{style:{flexDirection:"column",gap:"10px",border:"1px solid #cbd5e1",borderRadius:"5px",width:"70%",position:"relative"},children:[(0,R.jsx)("legend",{children:"Checks"}),(0,R.jsx)(q,{isTableSelectable:!1,ref:l,width:"100%",columns:[{key:"Bank",label:"Bank/Branch",width:170},{key:"Check_No",label:"Check No",width:170},{key:"Amount",label:"Amount",width:300}],rows:t,getSelectedItem:function(e,t,n,o){}})]}),(0,R.jsxs)("fieldset",{style:{flexDirection:"column",gap:"10px",border:"1px solid #cbd5e1",borderRadius:"5px",alignSelf:"flex-end",display:"flex",width:"30%"},children:[(0,R.jsxs)("legend",{style:{color:o===r?"green":"#ec4899"},children:["Cash ( ",r," )"]}),(0,R.jsxs)("table",{style:{border:"2px solid black",borderCollapse:"collapse",width:"100%"},children:[(0,R.jsx)("thead",{children:(0,R.jsxs)("tr",{style:{borderBottom:"2px solid black",fontSize:"14px"},children:[(0,R.jsx)("th",{style:{borderRight:"2px solid black"},children:"Denominations"}),(0,R.jsx)("th",{style:{borderRight:"2px solid black"},children:"QTY"}),(0,R.jsx)("th",{style:{borderRight:"2px solid black"},children:"Amount"})]})}),(0,R.jsx)("tbody",{children:null===n||void 0===n?void 0:n.map((function(e,t){return(0,R.jsx)(E,{value1:e.value1,value2:e.value2,value3:e.value3,idx:t},t)}))}),(0,R.jsx)("tfoot",{children:(0,R.jsx)("tr",{style:{borderTop:"2px solid black",height:"50px"},children:(0,R.jsx)("td",{colSpan:3,children:(0,R.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",padding:"0 10px  "},children:(0,R.jsxs)("div",{style:{display:"flex",alignItems:"center",width:"250px",textAlign:"right"},children:[(0,R.jsx)("span",{style:{fontSize:"12px",marginRight:"5px",fontWeight:"bold"},children:"Total Cash Deposit:"}),(0,R.jsx)("input",{style:{fontWeight:"bold",border:"1px solid black",textAlign:"right",fontSize:"13px",width:"117px"},value:o,onChange:function(e){i(e.target.value)},readOnly:!0})]})})})})})]})]})]})}function E(e){var t=e.value1,n=e.value2,o=e.value3,i=e.idx,r=(0,u.useContext)(A).updateTableRowsInput,a=(0,u.useState)(t),c=(0,l.Z)(a,2),s=c[0],d=c[1],f=(0,u.useState)(n),h=(0,l.Z)(f,2),p=h[0],v=h[1],x=(0,u.useState)(o),g=(0,l.Z)(x,2),b=g[0],m=g[1],y={textAlign:"right",height:"18px",borderRight:"none",borderLeft:"none",borderTop:"none",outline:"none",borderBottom:"1px solid #cbd5e1",padding:"0 8px",width:"100%",fontSize:"11px",margin:"0"};return(0,R.jsxs)("tr",{style:{margin:"0",padding:"0 !important"},children:[(0,R.jsx)("td",{style:{borderRight:"2px solid black",margin:"0",padding:"0"},children:(0,R.jsx)("input",{type:"text",style:y,value:s,onChange:function(e){return d(e.target.value)},readOnly:!0})}),(0,R.jsx)("td",{style:{borderRight:"2px solid black",overflow:"hidden",margin:0,padding:"0 !important"},children:(0,R.jsx)("input",{style:y,value:p,onChange:function(e){var n=s;v(e.target.value),s.includes(",")&&(n=s.replace(/,/g,"").toString());var o=(parseFloat(n)*(isNaN(parseInt(e.target.value))?0:parseInt(e.target.value))).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});m(o),r({value1:t,value2:e.target.value,value3:o},i)}})}),(0,R.jsx)("td",{style:{borderRight:"2px solid black",margin:"0",padding:"0 !important"},children:(0,R.jsx)("input",{type:"text",style:y,value:b,onChange:function(e){return m(e.target.value)},readOnly:!0})})]})}var L=(0,u.forwardRef)((function(e,t){var n=e.columns,i=e.rows,r=e.height,a=void 0===r?"400px":r,c=e.width,s=void 0===c?"calc(100vw - 40px)":c,d=e.getSelectedItem,f=e.disbaleTable,h=void 0!==f&&f,p=(0,u.useRef)(null),v=(0,u.useState)([]),x=(0,l.Z)(v,2),g=x[0],b=x[1],m=(0,u.useState)([]),y=(0,l.Z)(m,2),w=y[0],k=y[1],C=(0,u.useState)([]),S=(0,l.Z)(C,2),j=S[0],D=S[1],Z=w.reduce((function(e,t){return e+t.width}),0);return(0,u.useEffect)((function(){n.length>0&&k(n.filter((function(e){return!e.hide})))}),[n]),(0,u.useEffect)((function(){i.length>0&&b(i.map((function(e){return n.map((function(t){return e[t.key]}))})))}),[i,n]),(0,u.useImperativeHandle)(t,(function(){return{getData:function(){return g},setData:function(e){b(e)},setSelectedRow:function(e){D(e)},getSelectedRow:function(e){return j},getColumns:function(){return n},resetTable:function(){b([]),D([])},setDataFormated:function(e){b(e.map((function(e){return n.map((function(t){return e[t.key]}))})))},parentElement:function(){return p.current}}})),(0,R.jsx)(u.Fragment,{children:(0,R.jsx)("div",{ref:p,style:{width:s,height:a,overflow:"auto",position:"relative",pointerEvents:h?"none":"auto",border:h?"2px solid #8c8f8e":"2px solid #c0c0c0",boxShadow:"inset -2px -2px 0 #ffffff, \n                        inset 2px 2px 0 #808080"},children:(0,R.jsx)("div",{style:{position:"absolute",width:"".concat(Z,"px"),height:"auto"},children:(0,R.jsxs)("table",{style:{borderCollapse:"collapse",width:"100%",position:"relative"},children:[(0,R.jsx)("thead",{children:(0,R.jsxs)("tr",{children:[(0,R.jsx)("th",{style:{width:"30px",border:"1px solid black",position:"sticky",top:0,zIndex:1,background:"#f0f0f0"}}),w.map((function(e,t){return(0,R.jsx)("th",{style:{width:e.width,border:"1px solid black",position:"sticky",top:0,zIndex:1,background:"#f0f0f0",fontSize:"12px",textAlign:"left",padding:"0px 5px"},children:e.label},t)}))]})}),(0,R.jsx)("tbody",{children:null===g||void 0===g?void 0:g.map((function(e,t){return(0,R.jsxs)("tr",{className:"tr-row-".concat(t," "),children:[(0,R.jsx)("td",{style:{position:"relative",borderBottom:"1px solid black",borderLeft:"1px solid black",borderTop:"none",borderRight:"1px solid black",cursor:"pointer",background:j.includes(t)?"#bae6fd":""},children:(0,R.jsx)("input",{className:"check-input",style:{cursor:"pointer",height:"10px",background:"transparent"},readOnly:!0,type:"checkbox",checked:j.includes(t),onClick:function(){j.includes(t)||(D((function(e){return[].concat((0,o.Z)(e),[t])})),d&&d(e,null,t,null))}})}),w.map((function(n,i){return(0,R.jsx)("td",{onDoubleClick:function(){j.includes(t)||(D((function(e){return[].concat((0,o.Z)(e),[t])})),d&&d(e,n,t,i))},style:{border:"1px solid black",background:j.includes(t)?"#cbd5e1":"transparent",fontSize:"12px",padding:"0px 5px",cursor:"pointer"},children:(0,R.jsx)("input",{readOnly:!0,value:e[i],style:{width:n.width,pointerEvents:"none",border:"none",background:"transparent",userSelect:"none"}})},i)}))]},t)}))})]})})})})})),q=(0,u.forwardRef)((function(e,t){var n=e.columns,o=e.rows,i=e.height,r=void 0===i?"400px":i,a=e.getSelectedItem,c=e.disbaleTable,s=void 0!==c&&c,d=e.isTableSelectable,f=void 0===d||d,h=(0,u.useRef)(null),p=(0,u.useState)([]),v=(0,l.Z)(p,2),x=v[0],g=v[1],b=(0,u.useState)([]),m=(0,l.Z)(b,2),y=m[0],w=m[1],k=(0,u.useState)(0),C=(0,l.Z)(k,2),S=C[0],j=C[1],D=y.reduce((function(e,t){return e+t.width}),0);return(0,u.useEffect)((function(){n.length>0&&w(n.filter((function(e){return!e.hide})))}),[n]),(0,u.useEffect)((function(){o.length>0&&g(o.map((function(e){return n.map((function(t){return e[t.key]}))})))}),[o,n]),(0,u.useImperativeHandle)(t,(function(){return{getData:function(){return x},setData:function(e){g(e)},getColumns:function(){return n},resetTable:function(){g([]),j(0)},setDataFormated:function(e){g(e.map((function(e){return n.map((function(t){return e[t.key]}))})))}}})),(0,R.jsx)(u.Fragment,{children:(0,R.jsx)("div",{ref:h,style:{width:"100%",height:r,overflow:"auto",position:"relative",pointerEvents:s?"none":"auto",border:s?"2px solid #8c8f8e":"2px solid #c0c0c0",boxShadow:"inset -2px -2px 0 #ffffff, \n                      inset 2px 2px 0 #808080"},children:(0,R.jsx)("div",{style:{position:"absolute",width:"".concat(D,"px"),height:"auto"},children:(0,R.jsxs)("table",{style:{borderCollapse:"collapse",width:"100%",position:"relative"},children:[(0,R.jsx)("thead",{children:(0,R.jsxs)("tr",{children:[(0,R.jsx)("th",{style:{width:"30px",border:"1px solid black",position:"sticky",top:0,zIndex:1,background:"#f0f0f0"}}),y.map((function(e,t){return(0,R.jsx)("th",{style:{width:e.width,border:"1px solid black",position:"sticky",top:0,zIndex:1,background:"#f0f0f0",fontSize:"12px",textAlign:"left",padding:"0px 5px"},children:e.label},t)}))]})}),(0,R.jsx)("tbody",{children:null===x||void 0===x?void 0:x.map((function(e,t){return(0,R.jsxs)("tr",{children:[(0,R.jsx)("td",{style:{position:"relative",borderBottom:"1px solid black",borderLeft:"1px solid black",borderTop:"none",borderRight:"1px solid black",cursor:"pointer",background:S===t?"#bae6fd":"#f0f0f0"},children:(0,R.jsx)("input",{style:{cursor:"pointer",height:"10px"},readOnly:!0,checked:!1,type:"checkbox",onClick:function(){f&&(a&&a(e,null,t,null),j(null))}})}),y.map((function(n,o){return(0,R.jsx)("td",{onDoubleClick:function(){f&&(a&&a(e,null,t,null),j(null))},onClick:function(){j(t)},style:{border:"1px solid black",background:S===t?"#cbd5e1":"transparent",fontSize:"12px",padding:"0px 5px",cursor:"pointer"},children:(0,R.jsx)("input",{readOnly:!0,value:e[o],style:{width:n.width,pointerEvents:"none",border:"none",background:"transparent",userSelect:"none"}})},o)}))]},t)}))})]})})})})}))},93263:function(e,t,n){var o,i=n(29439),r=n(74165),l=n(15861),a=n(72791),c=n(91933),u=n(3380),s=n(81582),d=n(54164),f=n(80184);function h(e,t,n){return(o=o||(0,l.Z)((0,r.Z)().mark((function e(t,n,o){var i,l=arguments;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=l.length>3&&void 0!==l[3]?l[3]:"",e.abrupt("return",t.get("".concat(null===o||void 0===o?void 0:o.url,"?").concat(null===o||void 0===o?void 0:o.queryUrlName,"=").concat(i),{headers:{Authorization:"Bearer ".concat(null===n||void 0===n?void 0:n.accessToken)}}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t.Z=function(e){var t,n,o=e.link,p=e.uniqueId,v=e.queryKey,x=e.responseDataKey,g=e.columns,b=e.onSelected,m=void 0===b?function(){}:b,y=e.onRemoveSelected,w=void 0===y?function(){}:y,k=e.onSuccess,C=void 0===k?function(){}:k,S=e.searchRef,j=e.onCellKeyDown,D=e.onCloseFunction,R=void 0===D?function(){}:D,Z=e.CustomizeAxios,N=void 0===Z?h:Z,I=e.isRowSelectable,T=e.getCellClassName,A=(0,a.useContext)(u.V),B=A.myAxios,F=A.user,z=(0,a.useState)(!1),O=(0,i.Z)(z,2),M=O[0],_=O[1],E=(0,a.useState)([]),L=(0,i.Z)(E,2),q=L[0],K=L[1];function P(){return(t=t||(0,l.Z)((0,r.Z)().mark((function e(){var t,n=arguments;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:"",e.next=3,N(B,F,o,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var H=(0,c.useQuery)({queryKey:v,queryFn:function(){return(n=n||(0,l.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t=e;K(t.data[x]),C(t)},refetchOnWindowFocus:!1}),G=H.isLoading,W=H.refetch;return{show:M,rows:q,isLoading:G,openModal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";(0,d.flushSync)((function(){_(!0)})),null!==S&&void 0!==S&&S.current&&(S.current.value=e,P(e).then((function(e){if(null===e||void 0===e||!e.data.success)return alert("Error : ".concat(null===e||void 0===e?void 0:e.data.message));K(e.data[x]),null!==S&&void 0!==S&&S.current&&S.current.focus()})))},closeModal:function(){var e;(_(!1),R)&&R(null===S||void 0===S||null===(e=S.current)||void 0===e?void 0:e.value)},ModalComponent:(0,f.jsx)(s.ZP,{getCellClassName:T,searchRef:S,showModal:M,onCloseModal:function(){var e;(_(!1),R)&&R(null===S||void 0===S||null===(e=S.current)||void 0===e?void 0:e.value)},onClickCloseIcon:function(){var e;(_(!1),R)&&R(null===S||void 0===S||null===(e=S.current)||void 0===e?void 0:e.value)},searchOnChange:function(e){},onSearchKeyEnter:function(e){P(e).then((function(e){if(null===e||void 0===e||!e.data.success)return alert("Error : ".concat(null===e||void 0===e?void 0:e.data.message));K(e.data[x])}))},onCellKeyDown:j,height:300,isLoading:G,queryKey:v,columns:g,onSelectionChange:function(e,t){if(e.length<=0)return w(t);var n=new Set(e),o=t.filter((function(e){return n.has(e[p].toString())}));o.length<=0||m(o,t)},id:p,rows:q,setRows:K,isRowSelectable:I}),refetch:W}}},64230:function(e,t,n){n.d(t,{L:function(){return c},s:function(){return a}});var o=n(74165),i=n(15861),r=n(21830),l=n.n(r);function a(e){var t;l().fire({title:"Are you sure!",html:null!==e&&void 0!==e&&e.text?null===e||void 0===e?void 0:e.text:e.isUpdate?"Are you sure you want to make this change?":"Are you sure you want to delete this?",icon:"warning",input:"text",inputAttributes:{autocapitalize:"off"},showCancelButton:!0,confirmButtonText:"Save",confirmButtonColor:"green",showLoaderOnConfirm:!0,preConfirm:function(n){return(t=t||(0,i.Z)((0,o.Z)().mark((function t(n){return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{e.cb(n)}catch(o){l().showValidationMessage("\n            Request failed: ".concat(o,"\n          "))}case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)},allowOutsideClick:function(){return!l().isLoading()}}).then((function(t){if(t.isConfirmed&&e.isConfirm)return e.isConfirm();e.isDeclined&&e.isDeclined()}))}function c(e){l().fire({title:"Are you sure?",text:null!==e&&void 0!==e&&e.text?null===e||void 0===e?void 0:e.text:"Do you want to proceed with saving?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, save it!"}).then((function(t){if(t.isConfirmed&&e.isConfirm)return e.isConfirm();e.isDeclined&&e.isDeclined()}))}},42419:function(e,t,n){var o=n(64836);t.Z=void 0;var i=o(n(45649)),r=n(80184),l=(0,i.default)((0,r.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");t.Z=l},76633:function(e,t,n){var o=n(64836);t.Z=void 0;var i=o(n(45649)),r=n(80184),l=(0,i.default)((0,r.jsx)("path",{d:"M12 6v3l4-4-4-4v3c-4.42 0-8 3.58-8 8 0 1.57.46 3.03 1.24 4.26L6.7 14.8c-.45-.83-.7-1.79-.7-2.8 0-3.31 2.69-6 6-6zm6.76 1.74L17.3 9.2c.44.84.7 1.79.7 2.8 0 3.31-2.69 6-6 6v-3l-4 4 4 4v-3c4.42 0 8-3.58 8-8 0-1.57-.46-3.03-1.24-4.26z"}),"Autorenew");t.Z=l},53329:function(e,t,n){var o=n(64836);t.Z=void 0;var i=o(n(45649)),r=n(80184),l=(0,i.default)((0,r.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"}),"Save");t.Z=l},45987:function(e,t,n){n.d(t,{Z:function(){return i}});var o=n(63366);function i(e,t){if(null==e)return{};var n,i,r=(0,o.Z)(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(i=0;i<l.length;i++)n=l[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}}}]);
//# sourceMappingURL=8370.35a61925.chunk.js.map