"use strict";(self.webpackChunkupward=self.webpackChunkupward||[]).push([[1441],{70272:function(e,t,n){var o=n(54270),r=n(80184);t.Z=function(e){var t=e.title,n=void 0===t?"":t;return(0,r.jsxs)(o.q,{children:[(0,r.jsx)("title",{children:n}),(0,r.jsx)("link",{rel:"icon",type:"image/png",href:"".concat("/","/logo.png")})]})}},65413:function(e,t,n){n.d(t,{g:function(){return i}});var o=n(13239),r=n(80184),i=function(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{style:{position:"fixed",top:0,bottom:0,left:0,right:0,background:"red",zIndex:"88",backgroundColor:"rgba(0, 0, 0, 0.4)"}}),(0,r.jsxs)("div",{style:{position:"absolute",zIndex:"100",background:"white",width:"auto",height:"auto",top:"50%",left:"50%",transform:"translate(-50%,-50%)",boxShadow:"3px 6px 32px -7px rgba(0,0,0,0.75)",display:"flex",columnGap:"20px",alignItems:"center",justifyContent:"center",padding:"10px 15px"},children:[(0,r.jsx)(o.Z,{color:"primary"}),(0,r.jsx)("span",{children:"Loading..."})]})]})}},81582:function(e,t,n){n.d(t,{XT:function(){return p},ZP:function(){return f},rO:function(){return h}});n(72791);var o=n(88447),r=n(64554),i=n(20890),a=n(27391),u=n(13400),c=n(29823),l=n(89767),d=n(80184),s={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"80%",bgcolor:"background.paper",boxShadow:24,p:4,heigth:"auto"};function f(e){var t=e.height,n=e.isLoading,f=(e.queryKey,e.columns),v=e.onSelectionChange,x=(e.setRows,e.rows),y=e.id,g=e.onCloseModal,w=e.showModal,m=e.onClickCloseIcon,b=e.searchOnChange,C=e.title,S=void 0===C?"":C,D=e.searchRef,k=(e.onCellKeyDown,e.onSearchKeyEnter),Z=void 0===k?function(){}:k,N=e.isRowSelectable,j=e.getCellClassName,I=p();return(0,d.jsx)(o.Z,{open:w,onClose:g,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,d.jsxs)(r.Z,{sx:s,children:[(0,d.jsx)(i.Z,{id:"modal-modal-title",variant:"h6",component:"h2",mb:2,children:S}),(0,d.jsx)(a.Z,{size:"small",label:"Search",sx:{marginBottom:"10px"},fullWidth:!0,onChange:b,InputProps:{inputRef:D},onKeyDown:function(e){var t;"Enter"!==e.code&&"NumpadEnter"!==e.code||(e.preventDefault(),Z(null===D||void 0===D||null===(t=D.current)||void 0===t?void 0:t.value));h(e,I,null===D||void 0===D?void 0:D.current)}}),(0,d.jsx)("div",{className:"".concat(I," main-table-selection-container"),style:{position:"relative",height:"".concat(t+20,"px")},children:(0,d.jsx)(l.Z,{isSingleSelection:!0,isRowFreeze:!1,columns:f,isLoading:n,dataSelection:function(e,t,n){v(e,t)},table_id:y,rows:x,isRowSelectable:N,getCellClassName:j})}),(0,d.jsx)("div",{style:{position:"absolute",top:"10px",right:"10px"},children:(0,d.jsx)(u.Z,{"aria-label":"search-client",color:"secondary",onClick:m,children:(0,d.jsx)(c.Z,{})})})]})})}function p(){return"main-"+Math.floor(1e4*Math.random())}function h(e,t,n){var o=t;if("ArrowDown"===e.code){var r,i=document.querySelectorAll(".".concat(o," .MuiDataGrid-row"));e.preventDefault(),null===(r=i[0])||void 0===r||r.classList.add("hover-keyboard"),function(e,t){var n=document.querySelector(".".concat(e," .MuiDataGrid-row")),o=null===n||void 0===n?void 0:n.querySelector("input");null===o||void 0===o||o.focus();var r=new MouseEvent("mouseenter",{bubbles:!0,cancelable:!0,view:window});null===n||void 0===n||n.dispatchEvent(r),null===o||void 0===o||o.addEventListener("keydown",(function(e){"ArrowUp"===e.key&&(e.preventDefault(),t.focus()),"ArrowUp"===e.key&&(null===n||void 0===n||n.classList.remove("hover-keyboard"))}))}(t,n),i.forEach((function(e,t){e.addEventListener("keydown",(function(e){if("ArrowUp"===e.key){var n,o;if(t<=0)return;return e.preventDefault(),null===(n=i[t])||void 0===n||n.classList.remove("hover-keyboard"),void(null===(o=i[t-1])||void 0===o||o.classList.add("hover-keyboard"))}if("ArrowDown"===e.key){var r,a;if(e.preventDefault(),t>=i.length-1)return;null===(r=i[t])||void 0===r||r.classList.remove("hover-keyboard"),null===(a=i[t+1])||void 0===a||a.classList.add("hover-keyboard")}}))}))}}},89767:function(e,t,n){var o=n(93433),r=n(1413),i=n(29439),a=n(72791),u=n(57482),c=n(64554),l=n(70561),d=n(29961),s=n(54277),f=n(70169),p=n(5794),h=n(16088),v=n(80184),x=(0,a.createContext)({rows:[],rowSelectionModel:[],footerChildren:function(){return(0,v.jsx)("div",{})},footerPaginationPosition:"right-left",showFooterSelectedCount:!0}),y=(0,a.forwardRef)((function(e,t){var n=e.isLoading,c=e.columns,d=e.rows,s=e.table_id,f=e.isSingleSelection,p=e.isRowFreeze,h=e.dataSelection,y=e.CustomFooterComponent,g=void 0===y?m:y,w=e.isRowSelectable,b=e.getCellClassName,C=e.checkboxSelection,S=void 0===C||C,D=e.footerChildren,k=void 0===D?function(e,t){return(0,v.jsx)("div",{})}:D,Z=e.footerPaginationPosition,N=void 0===Z?"right-left":Z,j=e.showFooterSelectedCount,I=void 0===j||j,M=(0,a.useState)([]),R=(0,i.Z)(M,2),A=R[0],E=R[1];function T(e,t,n){h&&h(e,t,n)}(0,a.useImperativeHandle)(t,(function(){return{removeSelection:function(){E([])},getSelectedRows:function(){return d.filter((function(e){return null===A||void 0===A?void 0:A.includes(e[s])}))},setSelectedRows:function(e){E(e)}}}));var P=[];return(0,v.jsx)(x.Provider,{value:{showFooterSelectedCount:I,footerPaginationPosition:N,rowSelectionModel:A,rows:d,footerChildren:k},children:(0,v.jsx)(l._$,{slots:{loadingOverlay:u.Z,footer:g},initialState:{pagination:{paginationModel:{pageSize:100}}},loading:n,getRowId:function(e){return e[s]},columns:c.filter((function(e){return!e.hide})),rows:d,showCellVerticalBorder:!0,showColumnVerticalBorder:!0,checkboxSelection:S,rowSelectionModel:A,rowHeight:25,columnHeaderHeight:35,pageSizeOptions:[10,20,35,50,75,100],sx:(0,r.Z)((0,r.Z)({"& .cash":{color:"#ec4899"},"& .check":{color:"#0891b2"},"& .approved":{color:"green"},"& .pending":{color:"orange"},"& .disapproved":{color:"red"},"& .normal":{color:"red"},"& .MuiDataGrid-row.Mui-selected:hover":{color:"black","& .MuiSvgIcon-root ":{fill:"#3b82f6"}},"& .hover-keyboard":{background:"#2563eb",color:"white","& .MuiSvgIcon-root ":{fill:"white"}},"& .MuiDataGrid-row:hover":{background:"#2563eb",color:"white","& .MuiSvgIcon-root ":{fill:"white"}},"& .MuiDataGrid-row.hover":{background:"#2563eb",color:"white","& .MuiSvgIcon-root ":{fill:"white"}},"& .MuiTablePagination-root p ":{padding:"0 !important"}},{"& .MuiDataGrid-columnHeaders":{background:"#64748b",color:"white",fontSize:"14px"},"& .MuiDataGrid-columnHeaderCheckbox .MuiDataGrid-columnHeaderTitleContainer .MuiSvgIcon-root ":{display:f||p?"none":"block",fill:"white"},"& .MuiDataGrid-columnHeaderCheckbox .MuiDataGrid-columnHeaderTitleContainer input ":{display:f||p?"none":"block"}}),{fontSize:13,fontWeight:500,"& .MuiDataGrid-checkboxInput":{height:"27px",width:"27px"},"& .MuiDataGrid-checkboxInput svg":{height:"20px",width:"20px"}}),onRowSelectionModelChange:function(e){if(p){if(e.length<=0)return;if(P=e,A.includes(P[P.length-1]))return;return E(e),void T([e[e.length-1]],d,null)}if(!p&&f)if(A&&(null===A||void 0===A?void 0:A.length)>0){var t=new Set(A);E(e.filter((function(e){return!t.has(e)})))}else E(e);else E(e);T([e[e.length-1]],d,null)},onCellKeyDown:function(e,t){if(["NumpadEnter","Enter","Delete","Backspace"].includes(t.code))return t.preventDefault(),"Enter"===t.code||"NumpadEnter"===t.code?f&&!p?E((function(n){return n&&n.length>0&&n[0]===e.rowNode.id?(T([],d,t.code),[]):(T([e.rowNode.id],d,t.code),[e.rowNode.id])})):void E((function(n){return n&&!p&&n.length>0&&n.includes(e.rowNode.id)?(n=n.filter((function(t){return t!==e.rowNode.id})),T([],d,t.code),n):n&&p&&n.length>0&&n.includes(e.rowNode.id)?n:(T([e.rowNode.id],d,t.code),[].concat((0,o.Z)(n),[e.rowNode.id]))})):"Delete"===t.code||"Backspace"===t.code?(E([e.rowNode.id]),T([e.rowNode.id],d,t.code)):void 0},disableVirtualization:!0,isRowSelectable:w,getCellClassName:b})})}));function g(e){var t=e.page,n=e.onPageChange,o=e.className,r=(0,d.l)(),i=(0,s.P)(r,f.UB);return(0,v.jsx)(h.Z,{variant:"outlined",color:"primary",className:o,count:i,page:t+1,onChange:function(e,t){n(e,t-1)}})}function w(e){return(0,v.jsx)(p.x,(0,r.Z)({ActionsComponent:g},e))}function m(e){var t=(0,a.useContext)(x),n=t.rowSelectionModel,o=t.showFooterSelectedCount,i=t.footerPaginationPosition,u=t.footerChildren,l=t.rows;return(0,v.jsxs)(c.Z,{sx:{columnGap:"50px",display:"flex",width:"100%",justifyContent:"space-between",px:3,alignItems:"center",flexDirection:"right-left"===i?"row-reverse":"row"},children:[(0,v.jsx)(w,(0,r.Z)({},e)),(0,v.jsxs)(c.Z,{sx:{display:"flex",justifyContent:"right-left"===i?"flex-start":"flex-end",flex:1,alignItems:"center"},children:[o&&(0,v.jsxs)("div",{children:["Selected:",null===n||void 0===n?void 0:n.length]}),(0,v.jsx)("div",{children:u(n,l)})]})]})}t.Z=y},1441:function(e,t,n){n.r(t),n.d(t,{Autocomplete:function(){return P},chartColumn:function(){return E},default:function(){return T},reducer:function(){return R}});var o=n(74165),r=n(15861),i=n(29439),a=n(4942),u=n(1413),c=n(72791),l=n(36151),d=n(39709),s=n(42419),f=n(53329),p=n(29823),h=n(21830),v=n.n(h),x=n(3380),y=n(86753),g=n(91933),w=n(93263),m=n(79018),b=n(64230),C=n(70272),S=n(37209),D=n(30948),k=n(16386),Z=n(637),N=n(11690),j=n(5403),I=n(65413),M=n(80184),R=function(e,t){return"UPDATE_FIELD"===t.type?(0,u.Z)((0,u.Z)({},e),{},(0,a.Z)({},t.field,t.value)):e},A=[{key:"purpose",label:"Purpose",width:400},{key:"amount",label:"Amount",width:140},{key:"usage",label:"Usage",width:450},{key:"accountID",label:"Account ID",width:400},{key:"sub_account",label:"Sub Account",width:120},{key:"clientID",label:"ID No",width:140},{key:"clientName",label:"Name",width:350},{key:"accountCode",label:"Accoount Code",width:130},{key:"accountShort",label:"Account Short",width:300},{key:"vatType",label:"Vat Type",width:100},{key:"invoice",label:"Invoice",width:200},{key:"TempID",label:"TempId",hide:!0}],E=[{field:"Acct_Code",headerName:"Code",flex:1},{field:"Acct_Title",headerName:"Title",flex:1},{field:"Short",headerName:"Short Name",flex:1}];function T(){var e,t,n,a,u,h=(0,c.useContext)(x.V),R=h.myAxios,E=h.user,T=(0,c.useState)(""),z=(0,i.Z)(T,2),L=z[0],_=z[1],K=(0,Z.Z)().executeQueryToClient,B=(0,c.useRef)(null),F=(0,c.useRef)(null),q=(0,c.useRef)(""),G=(0,c.useRef)(null),V=(0,c.useRef)(null),W=(0,c.useRef)(null),O=(0,c.useRef)(null),H=(0,c.useRef)(null),U=(0,c.useRef)(null),Q=(0,c.useRef)(null),Y=(0,c.useRef)(null),J=(0,c.useRef)(null),X=(0,c.useRef)(null),$=(0,c.useRef)(""),ee=(0,c.useRef)(""),te=(0,c.useRef)(""),ne=(0,c.useRef)(""),oe=""===L,re=(0,g.useQuery)({queryKey:"petty-cash-id-generator",queryFn:function(){return(e=e||(0,r.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.get("/task/accounting/get-petty-cash-id",{headers:{Authorization:"Bearer ".concat(null===E||void 0===E?void 0:E.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},refetchOnWindowFocus:!1,onSuccess:function(e){var t=e;(0,m.D)(100).then((function(){q.current=t.data.pettyCashId[0].petty_cash_id,G.current&&(G.current.value=t.data.pettyCashId[0].petty_cash_id)}))}}),ie=re.isLoading,ae=re.refetch,ue=(0,g.useMutation)({mutationKey:"add-update-petty-cash",mutationFn:function(e){return(t=t||(0,r.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.post("/task/accounting/add-petty-cash",t,{headers:{Authorization:"Bearer ".concat(null===E||void 0===E?void 0:E.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t=e;return t.data.success?(je(),v().fire({position:"center",icon:"success",title:t.data.message,timer:1500})):v().fire({position:"center",icon:"warning",title:t.data.message,timer:1500})}}),ce=ue.isLoading,le=ue.mutate,de=(0,g.useMutation)({mutationKey:"load-selected-petty-cash",mutationFn:function(e){return(n=n||(0,r.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.post("/task/accounting/load-selected-petty-cash",t,{headers:{Authorization:"Bearer ".concat(null===E||void 0===E?void 0:E.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t=e.data.loadSelectedPettyCash;q.current=t[0].PC_No,G.current&&(G.current.value=t[0].PC_No),V.current&&(V.current.value=(0,k.Z)(new Date(t[0].PC_Date),"yyyy-MM-dd")),W.current&&(W.current.value=t[0].Payee),O.current&&(O.current.value=t[0].Explanation),B.current.setDataFormated(t)}}),se=de.isLoading,fe=de.mutate,pe=(0,g.useQuery)({queryKey:"load-transcation",queryFn:function(){return(a=a||(0,r.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.get("/task/accounting/load-transcation",{headers:{Authorization:"Bearer ".concat(null===E||void 0===E?void 0:E.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},refetchOnWindowFocus:!1}),he=pe.isLoading,ve=pe.data,xe=(0,w.Z)({link:{url:"/task/accounting/search-pdc-policy-id",queryUrlName:"searchPdcPolicyIds"},columns:[{field:"Type",headerName:"Type",width:130},{field:"IDNo",headerName:"ID No.",width:200},{field:"Name",headerName:"Name",flex:1},{field:"ID",headerName:"ID",flex:1,hide:!0}],queryKey:"collection-polidy-ids",uniqueId:"IDNo",responseDataKey:"clientsId",onSelected:function(e,t){me(),(0,m.D)(100).then((function(){te.current=e[0].IDNo,ne.current=e[0].Acronym,U.current&&(U.current.value=e[0].Name)})),(0,m.D)(200).then((function(){var e;Q.current&&(null===(e=Q.current)||void 0===e||e.focus(),Q.current.value="")}))},searchRef:X}),ye=xe.ModalComponent,ge=xe.openModal,we=xe.isLoading,me=xe.closeModal,be=(0,w.Z)({link:{url:"/task/accounting/search-petty-cash",queryUrlName:"searchPettyCash"},columns:[{field:"PC_Date",headerName:"Type",width:130},{field:"PC_No",headerName:"ID No.",width:200},{field:"Payee",headerName:"Name",flex:1},{field:"Explanation",headerName:"ID",flex:1},{field:"Explanation",headerName:"ID",flex:1,hide:!0}],queryKey:"petty-cash-search",uniqueId:"PC_No",responseDataKey:"searchPettyCash",onSelected:function(e){fe({PC_No:e[0].PC_No}),_("edit"),ke()},searchRef:X}),Ce=be.ModalComponent,Se=be.openModal,De=be.isLoading,ke=be.closeModal;function Ze(){return(u=u||(0,r.Z)((0,o.Z)().mark((function e(){var t,n,r,i,a,u,c,l,d,s;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!H.current||""!==H.current.value){e.next=2;break}return e.abrupt("return",v().fire({position:"center",icon:"warning",title:"Please provide transaction",timer:1500}).then((function(){(0,m.D)(300).then((function(){var e;null===(e=H.current)||void 0===e||e.focus()}))})));case 2:if(""!==te.current){e.next=4;break}return e.abrupt("return",v().fire({position:"center",icon:"warning",title:"Please provide usage",timer:1500}).then((function(){(0,m.D)(300).then((function(){ge()}))})));case 4:if(!Q.current||!(""===Q.current.value||parseFloat(Q.current.value.replace(/,/g,""))<1)){e.next=6;break}return e.abrupt("return",v().fire({position:"center",icon:"warning",title:"Please provide proper amount",timer:1500}).then((function(){(0,m.D)(300).then((function(){var e;null===(e=Q.current)||void 0===e||e.focus()}))})));case 6:return e.next=8,K("\n         SELECT DISTINCT\n              Chart_Account.Acct_Code,\n              Chart_Account.Acct_Title,\n              Chart_Account.Short\n          FROM\n              Petty_Log\n                  LEFT JOIN\n              Chart_Account ON Petty_Log.Acct_Code = Chart_Account.Acct_Code\n          WHERE\n              Petty_Log.Acct_Code = '".concat($.current,"'\n      "));case 8:c=e.sent,l=B.current.getData(),d=0,l.length<=0?l[0]=[]:(s=B.current.getSelectedRow())?d=s:(d=l.length,l[l.length]=[]),l[d][0]=null===(t=H.current)||void 0===t?void 0:t.value,l[d][1]=null===(n=Q.current)||void 0===n?void 0:n.value,l[d][2]="".concat(null===(r=U.current)||void 0===r?void 0:r.value," > ").concat(te.current," > ").concat(ne.current),l[d][3]="".concat(c.data.data[0].Short," > ").concat(c.data.data[0].Acct_Code),l[d][4]=ne.current,l[d][5]=te.current,l[d][6]=null===(i=U.current)||void 0===i?void 0:i.value,l[d][7]=c.data.data[0].Acct_Code,l[d][8]=c.data.data[0].Short,l[d][9]=null===(a=Y.current)||void 0===a?void 0:a.value,l[d][10]=null===(u=J.current)||void 0===u?void 0:u.value,B.current.setData(l),B.current.setSelectedRow(null),Ne(),H.current&&H.current.focus();case 27:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ne(){setTimeout((function(){H.current&&(H.current.value=""),Q.current&&(Q.current.value=""),U.current&&(U.current.value=""),Y.current&&(Y.current.value="NON-VAT"),J.current&&(J.current.value=""),ne.current="",te.current="",$.current="",ee.current=""}),100)}function je(){_(""),ae(),setTimeout((function(){ae(),V.current&&(V.current.value=(0,k.Z)(new Date,"yyyy-MM-dd")),W.current&&(W.current.value=""),O.current&&(O.current.value="")}),100),Ne(),B.current.setData([])}return(0,M.jsxs)(M.Fragment,{children:[(se||ce)&&(0,M.jsx)(I.g,{}),(0,M.jsx)(C.Z,{title:"Petty Cash"}),(0,M.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"100%",height:"100%",flex:1,padding:"5px",background:"#F1F1F1"},children:[(0,M.jsxs)("div",{style:{display:"flex",alignItems:"center",columnGap:"5px",marginBottom:"10px"},children:[De?(0,M.jsx)(d.Z,{loading:De}):(0,M.jsx)(S.oi,{label:{title:"Search: ",style:{fontSize:"12px",fontWeight:"bold",width:"50px"}},input:{className:"search-input-up-on-key-down",type:"search",onKeyDown:function(e){("Enter"!==e.key&&"NumpadEnter"!==e.key||(e.preventDefault(),Se(e.currentTarget.value)),"ArrowDown"===e.key)&&(e.preventDefault(),document.querySelector(".grid-container").focus())},style:{width:"500px"}},icon:(0,M.jsx)(j.Z,{sx:{fontSize:"18px"}}),onIconClick:function(e){e.preventDefault(),F.current&&Se(F.current.value)},inputRef:F}),""===L&&(0,M.jsx)(l.Z,{sx:{height:"30px",fontSize:"11px"},variant:"contained",startIcon:(0,M.jsx)(s.Z,{sx:{width:15,height:15}}),id:"entry-header-save-button",onClick:function(){_("add")},children:"New"}),(0,M.jsx)(d.Z,{sx:{height:"30px",fontSize:"11px"},id:"save-entry-header",color:"primary",variant:"contained",type:"submit",onClick:function(){if(W.current&&""===W.current.value)return v().fire({position:"center",icon:"warning",title:"Please provide payee!",timer:1500}).then((function(e){(0,m.D)(300).then((function(){var e;null===(e=W.current)||void 0===e||e.focus()}))}));if(O.current&&""===O.current.value)return v().fire({position:"center",icon:"warning",title:"Please provide explanation!",timer:1500}).then((function(e){(0,m.D)(300).then((function(){var e;null===(e=O.current)||void 0===e||e.focus()}))}));var e=B.current.getData().map((function(e){return{purpose:e[0],amount:e[1],usage:e[2],accountID:e[3],sub_account:e[4],clientID:e[5],clientName:e[6],accountCode:e[7],accountShort:e[8],vatType:e[9],invoice:e[10]}}));if(e.length<=0)return v().fire({position:"center",icon:"warning",title:"Please provide transaction entry!",timer:1500});"edit"===L?(0,b.s)({isUpdate:!0,cb:function(t){var n,o,r,i;le({refNo:null===(n=G.current)||void 0===n?void 0:n.value,datePetty:null===(o=V.current)||void 0===o?void 0:o.value,payee:null===(r=W.current)||void 0===r?void 0:r.value,explanation:null===(i=O.current)||void 0===i?void 0:i.value,hasSelected:"edit"===L,pettyCash:e,userCodeConfirmation:t})}}):(0,b.L)({isConfirm:function(){var t,n,o,r;le({refNo:null===(t=G.current)||void 0===t?void 0:t.value,datePetty:null===(n=V.current)||void 0===n?void 0:n.value,payee:null===(o=W.current)||void 0===o?void 0:o.value,explanation:null===(r=O.current)||void 0===r?void 0:r.value,hasSelected:"edit"===L,pettyCash:e})}})},disabled:""===L,startIcon:(0,M.jsx)(f.Z,{sx:{width:15,height:15}}),loading:ce,children:"edit"===L?"Update":"Save"}),""!==L&&(0,M.jsx)(l.Z,{sx:{height:"30px",fontSize:"11px"},variant:"contained",startIcon:(0,M.jsx)(p.Z,{sx:{width:15,height:15}}),color:"error",onClick:function(){v().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, cancel it!"}).then((function(e){e.isConfirmed&&je()}))},children:"Cancel"})]}),(0,M.jsxs)("div",{style:{display:"flex",flexDirection:"row",width:"100%",borderBottom:"1px dashed  #334155",paddingBottom:"20px",gap:"50px",marginTop:"5px"},children:[(0,M.jsxs)("div",{style:{display:"flex",flexDirection:"column",rowGap:"10px"},children:[ie?(0,M.jsx)(d.Z,{loading:ie}):(0,M.jsx)(S.oi,{label:{title:"Ref. No. : ",style:{fontSize:"12px",fontWeight:"bold",width:"80px"}},input:{disabled:oe,type:"text",style:{width:"200px"},readOnly:!0,onKeyDown:function(e){var t;"NumpadEnter"!==e.code&&"Enter"!==e.code||(null===(t=V.current)||void 0===t||t.focus())}},icon:(0,M.jsx)(y.Z,{sx:{fontSize:"18px"}}),onIconClick:function(e){e.preventDefault(),ae()},inputRef:G}),(0,M.jsx)(S.oi,{label:{title:"Deposit Date: ",style:{fontSize:"12px",fontWeight:"bold",width:"80px"}},input:{defaultValue:(0,k.Z)(new Date,"yyyy-MM-dd"),className:"search-input-up-on-key-down",type:"date",style:{width:"200px"},disabled:oe,onKeyDown:function(e){var t;"NumpadEnter"!==e.code&&"Enter"!==e.code||(null===(t=W.current)||void 0===t||t.focus())}},inputRef:V})]}),(0,M.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column",rowGap:"10px"},children:[(0,M.jsx)(S.oi,{label:{title:"Payee : ",style:{fontSize:"12px",fontWeight:"bold",width:"100px"}},input:{disabled:oe,type:"text",style:{width:"400px"},onKeyDown:function(e){var t;"NumpadEnter"!==e.code&&"Enter"!==e.code||(null===(t=O.current)||void 0===t||t.focus())}},inputRef:W}),(0,M.jsx)(S.oi,{label:{title:"Explanation : ",style:{fontSize:"12px",fontWeight:"bold",width:"100px"}},input:{disabled:oe,type:"text",style:{flex:1},onKeyDown:function(e){var t;"NumpadEnter"!==e.code&&"Enter"!==e.code||(null===(t=H.current)||void 0===t||t.focus())}},inputRef:O})]})]}),(0,M.jsx)("div",{style:{display:"flex",flexDirection:"row",width:"100%",paddingTop:"20px",gap:"50px",borderRadius:"3px"},children:(0,M.jsxs)("div",{style:{display:"flex",flexDirection:"column",rowGap:"10px"},children:[he?(0,M.jsx)(d.Z,{loading:he}):(0,M.jsx)(P,{containerStyle:{width:"100%"},label:{title:"Transaction : ",style:{fontSize:"12px",fontWeight:"bold",width:"80px"}},DisplayMember:"Purpose",DataSource:null===ve||void 0===ve?void 0:ve.data.laodTranscation,disableInput:oe,inputRef:H,input:{style:{width:"100%",flex:1}},onChange:function(e,t){console.log(e),H.current&&(H.current.value=e.Purpose),$.current=e.Acct_Code,ee.current=e.Short},onKeydown:function(e){var t;"Enter"!==e.key&&"NumpadEnter"!==e.key||(e.preventDefault(),null===(t=U.current)||void 0===t||t.focus())}}),(0,M.jsxs)("div",{style:{display:"flex",columnGap:"20px"},children:[we?(0,M.jsx)(d.Z,{loading:we}):(0,M.jsx)(S.oi,{label:{title:"Usage : ",style:{fontSize:"12px",fontWeight:"bold",width:"80px"}},input:{disabled:oe,type:"text",style:{width:"450px"},onKeyDown:function(e){"NumpadEnter"!==e.code&&"Enter"!==e.code||ge(e.currentTarget.value)}},icon:(0,M.jsx)(y.Z,{sx:{fontSize:"18px"}}),onIconClick:function(e){e.preventDefault(),U.current&&ge(U.current.value)},inputRef:U}),(0,M.jsxs)("div",{style:{display:"flex"},children:[(0,M.jsx)("label",{style:{fontSize:"12px",fontWeight:"bold",width:"70px"},children:"Amount :"}),(0,M.jsx)(D.h3,{disabled:oe,getInputRef:Q,decimalScale:2,fixedDecimalScale:!0,style:{width:"200px"},onKeyDown:function(e){var t;"Enter"!==e.code&&"NumpadEnter"!==e.code||(e.currentTarget.value=function(e){if(""!==e&&null!==e){var t=parseFloat(e.replace(/,/g,""));return isNaN(t)?"0.00":e}return"0.00"}(e.currentTarget.value),null===(t=Y.current)||void 0===t||t.focus())},onBlur:function(e){""===e.currentTarget.value&&(e.currentTarget.value="0.00")},allowNegative:!1,thousandSeparator:!0,valueIsNumericString:!0})]})]}),(0,M.jsxs)("div",{style:{display:"flex",columnGap:"20px"},children:[(0,M.jsx)(S.lq,{containerStyle:{fontSize:"12px",fontWeight:"bold"},label:{title:"VAT Type",style:{width:"80px"}},select:{defaultValue:"NON-VAT",disabled:oe,style:{width:"100% !important",flex:1,height:"100% !important",padding:0,margin:0,cursor:"pointer"},onKeyDown:function(e){var t;"Enter"!==e.code&&"NumpadEnter"!==e.code||(null===(t=J.current)||void 0===t||t.focus())}},datasource:[{key:"NON-VAT"},{key:"VAT"}],values:"key",display:"key",selectRef:Y}),(0,M.jsx)(S.oi,{label:{title:"Invoice : ",style:{fontSize:"12px",fontWeight:"bold",width:"80px"}},input:{disabled:oe,type:"text",style:{width:"270px"},onKeyDown:function(e){"NumpadEnter"!==e.code&&"Enter"!==e.code||(e.preventDefault(),Ze())}},inputRef:J}),(0,M.jsx)(l.Z,{disabled:oe,color:"success",variant:"contained",style:{gridArea:"button",height:"22px",fontSize:"12px",width:"270px"},startIcon:(0,M.jsx)(s.Z,{}),onClick:function(){Ze()},children:"Save Transaction"})]})]})}),(0,M.jsx)("br",{}),(0,M.jsx)(N.BW,{ref:B,width:"100%",height:"350px",columns:A,getSelectedItem:function(e,t,n,o){e?(H.current&&(H.current.value=e[0]),Q.current&&(Q.current.value=e[1]),U.current&&(U.current.value=e[6]),Y.current&&(Y.current.value=e[9]),J.current&&(J.current.value=e[10]),ne.current=e[4],te.current=e[5],$.current=e[7],ee.current=e[8]):Ne()}}),ye,Ce]})]})}var P=(0,c.forwardRef)((function(e,t){var n=e.DisplayMember,o=e.DataSource,r=e.inputRef,a=e.disableInput,l=void 0!==a&&a,d=e.onKeydown,s=e.onChange,f=e.label,p=void 0===f?{title:"Transaction : ",style:{fontSize:"12px",fontWeight:"bold",width:"100px"}}:f,h=e.input,v=void 0===h?{width:"740px"}:h,x=e.containerStyle,y=(0,c.useState)("aa"),g=(0,i.Z)(y,2),w=(g[0],g[1]),m=(0,c.useState)([]),b=(0,i.Z)(m,2),C=b[0],D=b[1],k=(0,c.useState)(!1),Z=(0,i.Z)(k,2),N=Z[0],j=Z[1],I=(0,c.useState)(0),R=(0,i.Z)(I,2),A=R[0],E=R[1],T=(0,c.useRef)(null);(0,c.useEffect)((function(){var e,t=null===(e=T.current)||void 0===e?void 0:e.children[A];t&&t.scrollIntoView({behavior:"smooth",block:"nearest"})}),[A]);return(0,c.useImperativeHandle)(t,(function(){return{setDataSource:function(e){}}})),(0,M.jsxs)("div",{style:{flex:1},children:[(0,M.jsx)(S.oi,{containerStyle:x,label:p,input:(0,u.Z)((0,u.Z)({},v),{},{disabled:l,type:"text",onKeyDown:function(e){if("ArrowDown"===e.key)e.preventDefault(),E((function(e){return Math.min(e+1,C.length-1)}));else if("ArrowUp"===e.key)e.preventDefault(),E((function(e){return Math.max(e-1,0)}));else if(("Enter"===e.key||"NumpadEnter"===e.key)&&(e.preventDefault(),C.length>0)){var t=C[A];s(t,e),w(t[n]),j(!1)}setTimeout((function(){d&&d(e)}),150)},onChange:function(e){var t=e.target.value;if(t.trim()){var r=o.filter((function(e){return e[n].toLowerCase().includes(t.toLowerCase())}));D(r),j(!0)}else D([]),j(!1)}}),inputRef:r}),N&&C.length>0&&(0,M.jsx)("ul",{className:"suggestions",ref:T,children:C.map((function(e,t){return(0,M.jsx)("li",{onClick:function(t){!function(e){w(e[n]),j(!1)}(e),s(e,t)},className:t===A?"active":"",onMouseEnter:function(e){e.preventDefault(),E(Math.min(t,C.length-1))},children:e[n]},t)}))}),(0,M.jsx)("style",{children:"\n          .suggestions {\n            margin-top: 0;\n            padding: 0;\n            list-style: none;\n            max-height: 150px;\n            overflow-y: auto;\n            position:absolute;\n            z-index:100;\n            background:white;\n            width:350px;\n            border:1px solid #e5e7eb;\n            box-shadow: 0px 23px 32px -17px rgba(0,0,0,0.75);\n          }\n          .suggestions li {\n            padding:3px 10px;\n            cursor: pointer;\n            font-size:14px;\n          }\n          .suggestions li.active {\n            background-color: #e2e8f0;\n          }\n      \n        "})]})}))},93263:function(e,t,n){var o,r=n(29439),i=n(74165),a=n(15861),u=n(72791),c=n(91933),l=n(3380),d=n(81582),s=n(54164),f=n(80184);function p(e,t,n){return(o=o||(0,a.Z)((0,i.Z)().mark((function e(t,n,o){var r,a=arguments;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>3&&void 0!==a[3]?a[3]:"",e.abrupt("return",t.get("".concat(null===o||void 0===o?void 0:o.url,"?").concat(null===o||void 0===o?void 0:o.queryUrlName,"=").concat(r),{headers:{Authorization:"Bearer ".concat(null===n||void 0===n?void 0:n.accessToken)}}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t.Z=function(e){var t,n,o=e.link,h=e.uniqueId,v=e.queryKey,x=e.responseDataKey,y=e.columns,g=e.onSelected,w=void 0===g?function(){}:g,m=e.onRemoveSelected,b=void 0===m?function(){}:m,C=e.onSuccess,S=void 0===C?function(){}:C,D=e.searchRef,k=e.onCellKeyDown,Z=e.onCloseFunction,N=void 0===Z?function(){}:Z,j=e.CustomizeAxios,I=void 0===j?p:j,M=e.isRowSelectable,R=e.getCellClassName,A=(0,u.useContext)(l.V),E=A.myAxios,T=A.user,P=(0,u.useState)(!1),z=(0,r.Z)(P,2),L=z[0],_=z[1],K=(0,u.useState)([]),B=(0,r.Z)(K,2),F=B[0],q=B[1];function G(){return(t=t||(0,a.Z)((0,i.Z)().mark((function e(){var t,n=arguments;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:"",e.next=3,I(E,T,o,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var V=(0,c.useQuery)({queryKey:v,queryFn:function(){return(n=n||(0,a.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t=e;q(t.data[x]),S(t)},refetchOnWindowFocus:!1}),W=V.isLoading,O=V.refetch;return{show:L,rows:F,isLoading:W,openModal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";(0,s.flushSync)((function(){_(!0)})),null!==D&&void 0!==D&&D.current&&(D.current.value=e,G(e).then((function(e){if(null===e||void 0===e||!e.data.success)return alert("Error : ".concat(null===e||void 0===e?void 0:e.data.message));q(e.data[x]),null!==D&&void 0!==D&&D.current&&D.current.focus()})))},closeModal:function(){var e;(_(!1),N)&&N(null===D||void 0===D||null===(e=D.current)||void 0===e?void 0:e.value)},ModalComponent:(0,f.jsx)(d.ZP,{getCellClassName:R,searchRef:D,showModal:L,onCloseModal:function(){var e;(_(!1),N)&&N(null===D||void 0===D||null===(e=D.current)||void 0===e?void 0:e.value)},onClickCloseIcon:function(){var e;(_(!1),N)&&N(null===D||void 0===D||null===(e=D.current)||void 0===e?void 0:e.value)},searchOnChange:function(e){},onSearchKeyEnter:function(e){G(e).then((function(e){if(null===e||void 0===e||!e.data.success)return alert("Error : ".concat(null===e||void 0===e?void 0:e.data.message));q(e.data[x])}))},onCellKeyDown:k,height:300,isLoading:W,queryKey:v,columns:y,onSelectionChange:function(e,t){if(e.length<=0)return b(t);var n=new Set(e),o=t.filter((function(e){return n.has(e[h].toString())}));o.length<=0||w(o,t)},id:h,rows:F,setRows:q,isRowSelectable:M}),refetch:O}}},64230:function(e,t,n){n.d(t,{L:function(){return c},s:function(){return u}});var o=n(74165),r=n(15861),i=n(21830),a=n.n(i);function u(e){var t;a().fire({title:"Are you sure!",html:null!==e&&void 0!==e&&e.text?null===e||void 0===e?void 0:e.text:e.isUpdate?"Are you sure you want to make this change?":"Are you sure you want to delete this?",icon:"warning",input:"text",inputAttributes:{autocapitalize:"off"},showCancelButton:!0,confirmButtonText:"Save",confirmButtonColor:"green",showLoaderOnConfirm:!0,preConfirm:function(n){return(t=t||(0,r.Z)((0,o.Z)().mark((function t(n){return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{e.cb(n)}catch(o){a().showValidationMessage("\n            Request failed: ".concat(o,"\n          "))}case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)},allowOutsideClick:function(){return!a().isLoading()}}).then((function(t){if(t.isConfirmed&&e.isConfirm)return e.isConfirm();e.isDeclined&&e.isDeclined()}))}function c(e){a().fire({title:"Are you sure?",text:null!==e&&void 0!==e&&e.text?null===e||void 0===e?void 0:e.text:"Do you want to proceed with saving?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, save it!"}).then((function(t){if(t.isConfirmed&&e.isConfirm)return e.isConfirm();e.isDeclined&&e.isDeclined()}))}},42419:function(e,t,n){var o=n(64836);t.Z=void 0;var r=o(n(45649)),i=n(80184),a=(0,r.default)((0,i.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");t.Z=a},86753:function(e,t,n){var o=n(64836);t.Z=void 0;var r=o(n(45649)),i=n(80184),a=(0,r.default)((0,i.jsx)("path",{d:"M12 5V2L8 6l4 4V7c3.31 0 6 2.69 6 6 0 2.97-2.17 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93 0-4.42-3.58-8-8-8zm-6 8c0-1.65.67-3.15 1.76-4.24L6.34 7.34C4.9 8.79 4 10.79 4 13c0 4.08 3.05 7.44 7 7.93v-2.02c-2.83-.48-5-2.94-5-5.91z"}),"RestartAlt");t.Z=a},53329:function(e,t,n){var o=n(64836);t.Z=void 0;var r=o(n(45649)),i=n(80184),a=(0,r.default)((0,i.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"}),"Save");t.Z=a},5403:function(e,t,n){var o=n(64836);t.Z=void 0;var r=o(n(45649)),i=n(80184),a=(0,r.default)((0,i.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"Search");t.Z=a}}]);
//# sourceMappingURL=1441.64af775b.chunk.js.map