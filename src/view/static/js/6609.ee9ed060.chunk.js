"use strict";(self.webpackChunkupward=self.webpackChunkupward||[]).push([[6609],{70272:function(e,t,n){var o=n(54270),r=n(80184);t.Z=function(e){var t=e.title,n=void 0===t?"":t;return(0,r.jsxs)(o.q,{children:[(0,r.jsx)("title",{children:n}),(0,r.jsx)("link",{rel:"icon",type:"image/png",href:"".concat("/","/logo.png")})]})}},36609:function(e,t,n){n.r(t),n.d(t,{chartColumn:function(){return B},default:function(){return q},pettyCashtransactionColumn:function(){return N},reducer:function(){return T},setNewStateValue:function(){return K}});var o=n(74165),r=n(15861),i=n(29439),a=n(4942),c=n(1413),s=n(72791),u=n(64554),l=n(27391),d=n(36151),f=n(68096),h=n(94925),p=n(77196),x=n(63466),m=n(13400),v=n(85523),g=n(94454),y=n(74865),Z=n(42419),C=n(27247),b=n(4378),j=n(3380),w=n(91933),S=n(21830),A=n.n(S),k=n(79018),D=n(29823),z=n(53329),I=n(75761),L=n(39709),P=n(89767),M=n(64230),_=n(70272),E=n(80184),F={Purpose:"",Short:"",Acct_Code:"",mode:"",search:"",Inactive:!1},T=function(e,t){return"UPDATE_FIELD"===t.type?(0,c.Z)((0,c.Z)({},e),{},(0,a.Z)({},t.field,t.value)):e},N=[{field:"Petty_Log",headerName:"ID#",hide:!0},{field:"Purpose",headerName:"Description",flex:1},{field:"Acct_Code",headerName:"Code",flex:1},{field:"Short",headerName:"Account Name",flex:1},{field:"Inactive",headerName:"Inactive",flex:1}],B=[{field:"Acct_Code",headerName:"Code",flex:1},{field:"Acct_Title",headerName:"Title",flex:1},{field:"Short",headerName:"Short Name",flex:1}],U="petty-cash-transaction";function q(){var e,t,n,S,q,V=(0,s.useRef)(null),R=(0,s.useReducer)(T,F),G=(0,i.Z)(R,2),H=G[0],Q=G[1],O=(0,s.useContext)(j.V),W=O.myAxios,Y=O.user,X=(0,s.useState)([]),J=(0,i.Z)(X,2),$=J[0],ee=J[1],te=(0,s.useRef)(null),ne=(0,s.useRef)(null),oe=(0,w.useQueryClient)(),re=(0,w.useQuery)({queryKey:U,queryFn:function(){return(e=e||(0,r.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.get("/reference/get-petty-cash-transaction?pettyCashtTransactionSearch=".concat(H.search),{headers:{Authorization:"Bearer ".concat(null===Y||void 0===Y?void 0:Y.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){ee(null===e||void 0===e?void 0:e.data.pettyCashTransaction)}}),ie=re.isLoading,ae=re.refetch,ce=(0,w.useMutation)({mutationKey:U,mutationFn:function(e){return(t=t||(0,r.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.post("/reference/add-petty-cash-transaction",t,{headers:{Authorization:"Bearer ".concat(null===Y||void 0===Y?void 0:Y.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:je}),se=ce.mutate,ue=ce.isLoading,le=(0,w.useMutation)({mutationKey:U,mutationFn:function(e){return(n=n||(0,r.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.post("/reference/update-petty-cash-transaction",t,{headers:{Authorization:"Bearer ".concat(null===Y||void 0===Y?void 0:Y.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:je}),de=le.mutate,fe=le.isLoading,he=(0,w.useMutation)({mutationKey:U,mutationFn:function(e){return(S=S||(0,r.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.post("/reference/delete-petty-cash-transaction",t,{headers:{Authorization:"Bearer ".concat(null===Y||void 0===Y?void 0:Y.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:je}),pe=he.mutate,xe=he.isLoading,me=(0,I.Z)({link:{url:"/reference/get-chart-accounts",queryUrlName:"chartAccountSearch"},columns:B,queryKey:"get-chart-accounts",uniqueId:"Acct_Code",responseDataKey:"chartAccount",onSelected:function(e){Q({type:"UPDATE_FIELD",field:"Short",value:e[0].Acct_Title}),Q({type:"UPDATE_FIELD",field:"Acct_Code",value:e[0].Acct_Code}),Ze()},searchRef:ne}),ve=me.ModalComponent,ge=me.openModal,ye=me.isLoading,Ze=me.closeModal,Ce=function(e){var t=e.target,n=t.name,o=t.value;Q({type:"UPDATE_FIELD",field:n,value:o})};function be(e){return""===H.Purpose?A().fire({position:"center",icon:"warning",title:"Purpose is required!",showConfirmButton:!1,timer:1500}):""===H.Short?A().fire({position:"center",icon:"warning",title:"Short is required!",showConfirmButton:!1,timer:1500}):H.Purpose.length>=200?A().fire({position:"center",icon:"success",title:"Purpose is too long!",showConfirmButton:!1,timer:1500}):(e.preventDefault(),void("edit"===H.mode?(0,M.s)({isUpdate:!0,cb:function(e){de((0,c.Z)((0,c.Z)({},H),{},{userCodeConfirmation:e}))}}):(0,M.L)({isConfirm:function(){se(H)}})))}function je(e){if(e.data.success)return oe.invalidateQueries(U),we(),A().fire({position:"center",icon:"success",title:e.data.message,showConfirmButton:!1,timer:1500});A().fire({position:"center",icon:"error",title:e.data.message,showConfirmButton:!1,timer:1500})}function we(){var e;K(Q,F),null===(e=te.current)||void 0===e||e.removeSelection(),(0,k.D)(500).then((function(){ae()}))}return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(_.Z,{title:"Petty Cash Transaction"}),(0,E.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"100%",height:"100%",flex:1,padding:"5px"},children:[(0,E.jsxs)(u.Z,{sx:function(e){return(0,a.Z)({display:"flex",alignItems:"center",columnGap:"20px"},e.breakpoints.down("sm"),{flexDirection:"column",alignItems:"flex-start",flex:1,marginBottom:"15px"})},children:[(0,E.jsx)("div",{style:{marginTop:"10px",marginBottom:"12px",width:"100%"},children:(0,E.jsx)(l.Z,{label:"Search",fullWidth:!0,size:"small",type:"text",name:"search",value:H.search,onChange:Ce,InputProps:{style:{height:"27px",fontSize:"14px"}},sx:{width:"500px",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},onKeyDown:function(e){if("Enter"===e.code||"NumpadEnter"===e.code)return e.preventDefault(),ae()}})}),(0,E.jsx)("div",{style:{display:"flex",alignItems:"center",columnGap:"20px"},children:(0,E.jsxs)("div",{style:{display:"flex",alignItems:"center",columnGap:"5px"},children:[""===H.mode&&(0,E.jsx)(d.Z,{variant:"contained",startIcon:(0,E.jsx)(Z.Z,{}),id:"entry-header-save-button",onClick:function(){Ce({target:{value:"add",name:"mode"}})},sx:{height:"30px",fontSize:"11px"},children:"New"}),(0,E.jsx)(L.Z,{id:"save-entry-header",color:"primary",variant:"contained",type:"submit",onClick:be,disabled:""===H.mode,startIcon:(0,E.jsx)(z.Z,{}),loading:ue||fe,sx:{height:"30px",fontSize:"11px"},children:"Save"}),""!==H.mode&&(0,E.jsx)(d.Z,{variant:"contained",startIcon:(0,E.jsx)(D.Z,{}),color:"error",sx:{height:"30px",fontSize:"11px"},onClick:function(){A().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, cancel it!"}).then((function(e){e.isConfirmed&&we()}))},children:"Cancel"}),(0,E.jsx)(L.Z,{id:"save-entry-header",variant:"contained",sx:{height:"30px",fontSize:"11px",backgroundColor:b.Z[500],"&:hover":{backgroundColor:b.Z[600]}},loading:xe,disabled:"edit"!==H.mode,startIcon:(0,E.jsx)(C.Z,{}),onClick:function(){(0,M.s)({isUpdate:!1,cb:function(e){pe({Petty_Log:H.Petty_Log,userCodeConfirmation:e})}})},children:"Delete"})]})})]}),(0,E.jsx)("form",{onSubmit:be,onKeyDown:function(e){if(!["Short"].includes(e.target.name))return"Enter"===e.code||"NumpadEnter"===e.code?(e.preventDefault(),void be(e)):void 0;"Enter"!==e.code&&"NumpadEnter"!==e.code||e.preventDefault()},children:(0,E.jsx)(u.Z,{sx:function(e){return(0,a.Z)({display:"flex",columnGap:"15px",flexDirection:"row",alignItems:"center"},e.breakpoints.down("md"),{flexDirection:"column",rowGap:"10px"})},children:!ie&&(0,E.jsxs)(s.Fragment,{children:[(0,E.jsx)(l.Z,{required:!0,variant:"outlined",size:"small",label:"Purpose",name:"Purpose",value:H.Purpose,onChange:Ce,disabled:""===H.mode,InputProps:{style:{height:"27px",fontSize:"14px"}},sx:{flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}}),ye?(0,E.jsx)(L.Z,{loading:ye}):(0,E.jsxs)(f.Z,{variant:"outlined",size:"small",disabled:""===H.mode,sx:{width:"350px",".MuiFormLabel-root":{fontSize:"14px",background:"white",zIndex:99,padding:"0 3px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},children:[(0,E.jsx)(h.Z,{htmlFor:"chart-account-id",children:"Account"}),(0,E.jsx)(p.Z,{sx:{height:"27px",fontSize:"14px"},disabled:""===H.mode,fullWidth:!0,label:"Account",name:"Short",value:H.Short,onChange:Ce,onKeyDown:function(e){if("Enter"===e.code||"NumpadEnter"===e.code)return e.preventDefault(),ge(H.Short)},id:"chart-account-id",endAdornment:(0,E.jsx)(x.Z,{position:"end",children:(0,E.jsx)(m.Z,{disabled:""===H.mode,"aria-label":"search-client",color:"secondary",edge:"end",onClick:function(){ge(H.Short)},children:(0,E.jsx)(y.Z,{})})})})]}),(0,E.jsx)(v.Z,{sx:{".MuiTypography-root":{fontSize:"14px"}},control:(0,E.jsx)(g.Z,{disabled:""===H.mode,size:"small",name:"Inactive",checked:H.Inactive,onChange:function(e){Q({type:"UPDATE_FIELD",field:"Inactive",value:e.target.checked})}}),label:"Mark as Inactive"})]})})}),(0,E.jsx)("div",{ref:V,style:{marginTop:"10px",width:"100%",position:"relative",flex:1},children:(0,E.jsx)(u.Z,{style:{height:"".concat(null===(q=V.current)||void 0===q?void 0:q.getBoundingClientRect().height,"px"),width:"100%",overflowX:"scroll",position:"absolute"},children:(0,E.jsx)(P.Z,{ref:te,isLoading:ie||ue||fe||xe,columns:N,rows:$,table_id:"Petty_Log",isSingleSelection:!0,isRowFreeze:!1,dataSelection:function(e,t,n){var o=t.filter((function(t){return t.Petty_Log===e[0]}))[0];if(void 0===o||o.length<=0)return K(Q,F),void Ce({target:{value:"",name:"mode"}});if(Ce({target:{value:"edit",name:"mode"}}),"Delete"!==n&&"Backspace"!==n){var r=(0,c.Z)((0,c.Z)({},o),{},{Inactive:"NO"!==o.Inactive});K(Q,r)}else(0,M.s)({isUpdate:!1,cb:function(e){pe({Petty_Log:o.Petty_Log,userCodeConfirmation:e})}})}})})}),ve]})]})}function K(e,t){Object.entries(t).forEach((function(t){var n=(0,i.Z)(t,2),o=n[0],r=n[1];e({type:"UPDATE_FIELD",field:o,value:r})}))}},42419:function(e,t,n){var o=n(64836);t.Z=void 0;var r=o(n(45649)),i=n(80184),a=(0,r.default)((0,i.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");t.Z=a},27247:function(e,t,n){var o=n(64836);t.Z=void 0;var r=o(n(45649)),i=n(80184),a=(0,r.default)((0,i.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");t.Z=a},74865:function(e,t,n){var o=n(64836);t.Z=void 0;var r=o(n(45649)),i=n(80184),a=(0,r.default)([(0,i.jsx)("circle",{cx:"10",cy:"8",r:"4"},"0"),(0,i.jsx)("path",{d:"M10.67 13.02c-.22-.01-.44-.02-.67-.02-2.42 0-4.68.67-6.61 1.82-.88.52-1.39 1.5-1.39 2.53V20h9.26c-.79-1.13-1.26-2.51-1.26-4 0-1.07.25-2.07.67-2.98zM20.75 16c0-.22-.03-.42-.06-.63l1.14-1.01-1-1.73-1.45.49c-.32-.27-.68-.48-1.08-.63L18 11h-2l-.3 1.49c-.4.15-.76.36-1.08.63l-1.45-.49-1 1.73 1.14 1.01c-.03.21-.06.41-.06.63s.03.42.06.63l-1.14 1.01 1 1.73 1.45-.49c.32.27.68.48 1.08.63L16 21h2l.3-1.49c.4-.15.76-.36 1.08-.63l1.45.49 1-1.73-1.14-1.01c.03-.21.06-.41.06-.63zM17 18c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"},"1")],"ManageAccounts");t.Z=a},53329:function(e,t,n){var o=n(64836);t.Z=void 0;var r=o(n(45649)),i=n(80184),a=(0,r.default)((0,i.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"}),"Save");t.Z=a},4378:function(e,t){t.Z={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162"}}}]);
//# sourceMappingURL=6609.ee9ed060.chunk.js.map