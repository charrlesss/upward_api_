"use strict";(self.webpackChunkupward=self.webpackChunkupward||[]).push([[3911],{83911:function(e,s,a){a.r(s),a.d(s,{default:function(){return f}});var n,r=a(1413),t=a(29439),o=a(74165),i=a(15861),u=a(72791),c=a(57689),d=a(3380),l=a(91933),p=a(79018),m=a(31243),h=a(21830),g=a.n(h),w=(a(59491),a(80184));function x(e,s,a){return(n=n||(0,i.Z)((0,o.Z)().mark((function e(s,a,n){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.post("/login",{username:a,password:n},{withCredentials:!0});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(){var e,s,a=(0,c.s0)(),n=(0,u.useState)({username:!1,password:!1,success:!1,message:""}),h=(0,t.Z)(n,2),f=h[0],v=h[1],j=(0,u.useContext)(d.V),N=j.setUser,S=j.myAxios,Z=(0,l.useMutation)({mutationKey:"login",mutationFn:function(s){return(e=e||(0,i.Z)((0,o.Z)().mark((function e(s){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,p.D)(1200).then((0,i.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(S,s.username,s.password);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){return e.data.username?v({username:!0,password:!1,success:!1,message:e.data.message}):e.data.password?v({username:!1,password:!0,success:!1,message:e.data.message}):(v({username:!1,password:!1,success:!0,message:e.data.message}),void g().fire({position:"center",icon:"success",title:e.data.message,showConfirmButton:!1,timer:800}).then((function(){var s,n,t,o,i,u;N(e.data.user),S.post("/get-user-details",(0,r.Z)({department:null===(s=e.data.user)||void 0===s?void 0:s.department,userAccess:null===(n=e.data.user)||void 0===n?void 0:n.userAccess,is_admin:null===(t=e.data.user)||void 0===t?void 0:t.is_master_admin,ACCESS_TOKEN:null===(o=e.data.user)||void 0===o?void 0:o.accessToken,REFRESH_TOKEN:null===(i=e.data.user)||void 0===i?void 0:i.refreshToken},null===(u=e.data)||void 0===u?void 0:u.cokie)).then((function(e){console.log(e)})),e.data.user.is_master_admin?a("/master-admin-dashboard"):(m.Z.get("http://localhost:7624/open-report",{withCredentials:!0}).then((function(e){e.data.success||alert(e.data.message)})).catch(console.log),a("/dashboard"))})))}}),k=Z.mutate,b=Z.isLoading,y=(0,u.useState)(!1),T=(0,t.Z)(y,2),C=T[0],A=T[1];return(0,w.jsxs)("div",{className:"main-landing-page",children:[(0,w.jsxs)("form",{className:"content",onSubmit:function(e){return(s=s||(0,i.Z)((0,o.Z)().mark((function e(s){var a;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.preventDefault(),a=new FormData(s.currentTarget),k({username:a.get("username"),password:a.get("password")});case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},children:[(0,w.jsx)("img",{alt:"Upward Insurance",src:"http://localhost:4400/logo.png",style:{width:"120px",height:"auto",background:"white"}}),(0,w.jsx)("h3",{style:{fontWeight:"400",marginBottom:"30px"},children:"LOGIN TO UPWARD INSURANCE"}),(0,w.jsx)("div",{className:"content-field",children:(0,w.jsxs)("div",{children:[(0,w.jsx)("label",{htmlFor:"username",children:" USERNAME"}),(0,w.jsx)("input",{name:"username",id:"username",className:f.username?"error":"",onFocus:function(){return v({username:!1,password:!1,success:!1,message:""})}}),f.username&&(0,w.jsx)("p",{className:"warning-text",children:f.username&&f.message})]})}),(0,w.jsx)("div",{className:"content-field",style:{marginTop:"15px"},children:(0,w.jsxs)("div",{children:[(0,w.jsx)("label",{htmlFor:"password",children:" PASSWORD"}),(0,w.jsx)("input",{name:"password",id:"password",type:C?"text":"password",className:f.password?"error":"",onFocus:function(){return v({username:!1,password:!1,success:!1,message:""})}}),f.password&&(0,w.jsx)("p",{className:"warning-text",children:f.message})]})}),(0,w.jsxs)("div",{style:{display:"flex",alignItems:"center",columnGap:"10px",marginTop:"10px"},children:[(0,w.jsx)("input",{name:"showpass",id:"showpass",type:"checkbox",style:{padding:"0",margin:0},onChange:function(e){var s;console.log(e.currentTarget.checked),A(null===(s=e.currentTarget)||void 0===s?void 0:s.checked)}}),(0,w.jsx)("label",{htmlFor:"showpass",style:{fontSize:"10px",cursor:"pointer",padding:"0",margin:0},children:"SHOW PASSWORD"})]}),(0,w.jsx)("button",{children:"SUBMIT"})]}),b&&(0,w.jsx)("div",{className:"loading-component",children:(0,w.jsx)("div",{className:"loader"})})]})}}}]);
//# sourceMappingURL=3911.12d6a819.chunk.js.map