"use strict";(self.webpackChunkupward=self.webpackChunkupward||[]).push([[6975],{13784:function(e,t,n){n.d(t,{Z:function(){return c}});var o=n(1413),a=n(45987),i=n(71652),l=n(91339),r=n(93777),s=n(80184),d=["label","name","onChange","value","onKeyDown","inputRef","datePickerRef","fullWidth","textField","minWidth"];function c(e){var t=e.label,n=e.name,c=e.onChange,u=e.value,p=e.onKeyDown,x=e.inputRef,f=e.datePickerRef,m=e.fullWidth,h=e.textField,y=e.minWidth,v=void 0===y?"200px":y,g=(0,a.Z)(e,d);return(0,s.jsx)(i._,{dateAdapter:l.H,children:(0,s.jsx)(r.M,(0,o.Z)({floatingLabelStyle:{color:"black"},value:u,onChange:c,ref:f,slotProps:{textField:(0,o.Z)({size:"small",label:t,name:n,onKeyDown:p,inputRef:x,fullWidth:m},h)},InputLabelProps:{sx:{color:"black"}},sx:{minWidth:v,fieldset:{borderColor:"black"},".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}},g))})}},70272:function(e,t,n){var o=n(54270),a=n(80184);t.Z=function(e){var t=e.title,n=void 0===t?"":t;return(0,a.jsxs)(o.q,{children:[(0,a.jsx)("title",{children:n}),(0,a.jsx)("link",{rel:"icon",type:"image/png",href:"".concat("/","/logo.png")})]})}},56580:function(e,t,n){n.d(t,{a:function(){return d}});var o=n(1413),a=n(45987),i=n(72791),l=n(30948),r=n(80184),s=["onChange"],d=i.forwardRef((function(e,t){var n=e.onChange,i=(0,a.Z)(e,s);return(0,r.jsx)(l.h3,(0,o.Z)((0,o.Z)({},i),{},{getInputRef:t,onValueChange:function(t){n({target:{name:e.name,value:t.value}})},allowNegative:!1,thousandSeparator:!0,valueIsNumericString:!0}))}))},66975:function(e,t,n){n.r(t),n.d(t,{PAContext:function(){return K},default:function(){return V}});var o=n(74165),a=n(15861),i=n(29439),l=n(4942),r=n(1413),s=n(72791),d=n(64554),c=n(36151),u=n(27391),p=n(4378),x=n(42419),f=n(3380),m=n(91933),h=n(29823),y=n(53329),v=n(21830),g=n.n(v),b=n(27247),D=n(68096),Z=n(94925),F=n(58406),w=n(23786),P=n(77196),j=n(63466),_=n(13400),I=n(94721),S=n(91421),z=n(13784),A=n(56580),C=n(39709),k=n(75761),M=n(75105),L=n(80184);function T(){var e,t=(0,s.useContext)(K),n=t.state,i=t.handleInputChange,l=t.customInputchange,r=t.myAxios,d=t.user,p=t.isAddOrEditMode,x=t.computation,f=t.dispatch,h=(0,s.useRef)(null),y=(0,s.useRef)(null),v=(0,s.useRef)(null),g=(0,s.useRef)(null),b=(0,s.useRef)(null),T=(0,k.Z)({link:{url:"/task/production/get-clients",queryUrlName:"clientSearch"},columns:[{field:"entry_client_id",headerName:"ID",width:130},{field:"fullname",headerName:"First Name",flex:1},{field:"entry_type",headerName:"ID Type",width:150}],queryKey:"get-clients",uniqueId:"entry_client_id",responseDataKey:"clients",onSelected:function(e){l(e[0].entry_client_id,"client_id"),l(e[0].fullname,"client_name"),l(e[0].address,"client_address"),l(e[0].sale_officer,"sale_officer"),R()},onCellKeyDown:function(e,t){"Enter"!==t.code&&"NumpadEnter"!==t.code||(l(e.row.entry_client_id,"client_id"),l(e.row.fullname,"client_name"),l(e.row.address,"client_address"),l(e.row[0].sale_officer,"sale_officer"),R())},searchRef:h}),E=T.ModalComponent,N=T.openModal,G=T.isLoading,R=T.closeModal,q=(0,k.Z)({link:{url:"/task/production/get-agents",queryUrlName:"agentSearch"},columns:[{field:"entry_agent_id",headerName:"ID",width:130},{field:"fullname",headerName:"First Name",flex:1},{field:"entry_type",headerName:"ID Type",width:150}],queryKey:"get-agents",uniqueId:"entry_agent_id",responseDataKey:"agents",onSelected:function(e){l(e[0].entry_agent_id,"agent_id"),l(e[0].fullname,"agent_name"),W()},onCellKeyDown:function(e,t){"Enter"!==t.code&&"NumpadEnter"!==t.code||(l(e.row.entry_agent_id,"agent_id"),l(e.row.fullname,"agent_name"),W())},searchRef:y}),B=q.ModalComponent,U=q.openModal,O=q.isLoading,W=q.closeModal,Q=(0,m.useQuery)({queryKey:"bond-policy-account-ss",queryFn:function(){return(e=e||(0,a.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.get("/task/production/policy-accounts-by-line?Line=PA",{headers:{Authorization:"Bearer ".concat(null===d||void 0===d?void 0:d.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}),V=Q.data,H=Q.isLoading;function Y(e){"NumpadEnter"!==e.code&&"Enter"!==e.code||x()}return(0,L.jsxs)("div",{children:[(0,L.jsxs)("div",{style:{display:"flex",gap:"10px",flexDirection:"column"},children:[(0,L.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,L.jsx)("div",{style:{display:"flex",columnGap:"10px",flex:1,boxSizing:"border-box"},children:(0,L.jsxs)("fieldset",{style:{flex:1,display:"flex",flexDirection:"column",gap:"10px",padding:"15px",border:"1px solid #cbd5e1",borderRadius:"5px"},children:[(0,L.jsx)("legend",{style:{color:"#065f46"},children:"Insurer Information"}),(0,L.jsxs)("div",{style:{display:"flex",gap:"10px",flexDirection:"column"},children:[G?(0,L.jsx)(C.Z,{loading:G}):(0,L.jsxs)(D.Z,{variant:"outlined",size:"small",disabled:p,sx:{width:"170px",".MuiFormLabel-root":{fontSize:"14px",background:"white",zIndex:99,padding:"0 3px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},children:[(0,L.jsx)(Z.Z,{htmlFor:"client-id-field",children:"Client ID"}),(0,L.jsx)(P.Z,{sx:{height:"27px",fontSize:"14px"},disabled:p,fullWidth:!0,label:"Client ID",name:"client_id",value:n.client_id,onChange:i,onKeyDown:function(e){if("Enter"===e.code||"NumpadEnter"===e.code)return e.preventDefault(),N(n.client_id)},id:"client-id-field",endAdornment:(0,L.jsx)(j.Z,{position:"end",children:(0,L.jsx)(_.Z,{disabled:p,"aria-label":"search-client",color:"secondary",edge:"end",onClick:function(){N(n.client_id)},children:(0,L.jsx)(S.Z,{})})})})]}),(0,L.jsx)(u.Z,{disabled:p,fullWidth:!0,variant:"outlined",size:"small",label:"Client Name",name:"client_name",value:n.client_name,onChange:i,InputProps:{style:{height:"27px",fontSize:"14px"},readOnly:!0},sx:{flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}})]}),(0,L.jsx)(u.Z,{rows:5,disabled:p,fullWidth:!0,variant:"outlined",size:"small",label:"Client Address",multiline:!0,name:"client_address",value:n.client_address,onChange:i,InputProps:{style:{height:"100px",fontSize:"14px"},readOnly:!0},sx:{flex:1,height:"100px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}})]})}),(0,L.jsx)("div",{style:{display:"flex",columnGap:"10px",flex:1,boxSizing:"border-box"},children:(0,L.jsxs)("fieldset",{style:{flexDirection:"row",gap:"10px",padding:"15px",border:"1px solid #cbd5e1",borderRadius:"5px",flex:1,flexWrap:"wrap"},children:[(0,L.jsx)("legend",{style:{color:"#065f46"},children:"Agent Information"}),O?(0,L.jsx)(C.Z,{loading:O}):(0,L.jsxs)(D.Z,{variant:"outlined",size:"small",disabled:p,sx:{width:"170px",".MuiFormLabel-root":{fontSize:"14px",background:"white",zIndex:99,padding:"0 3px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},children:[(0,L.jsx)(Z.Z,{htmlFor:"AGENT-id-field",children:"Agent ID"}),(0,L.jsx)(P.Z,{sx:{height:"27px",fontSize:"14px"},disabled:p,label:"Agent ID",name:"agent_id",value:n.agent_id,onChange:i,onKeyDown:function(e){if("Enter"===e.code||"NumpadEnter"===e.code)return e.preventDefault(),U(n.agent_id)},id:"AGENT-id-field",endAdornment:(0,L.jsx)(j.Z,{position:"end",children:(0,L.jsx)(_.Z,{disabled:p,"aria-label":"search-client",color:"secondary",edge:"end",onClick:function(){U(n.agent_id)},children:(0,L.jsx)(S.Z,{})})})})]}),(0,L.jsx)(u.Z,{fullWidth:!0,disabled:p,variant:"outlined",size:"small",label:"Agent Name",name:"agent_name",value:n.agent_name,onChange:i,InputProps:{style:{height:"27px",fontSize:"14px"},readOnly:!0},sx:{flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"},marginTop:"10px"}}),(0,L.jsx)(u.Z,{disabled:p,fullWidth:!0,variant:"outlined",size:"small",label:"Sale Officer",multiline:!0,name:"sale_officer",value:n.sale_officer,onChange:i,InputProps:{style:{height:"27px",fontSize:"14px"},readOnly:!0},sx:{width:"100%",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"},marginTop:"10px"}})]})})]}),(0,L.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,L.jsx)("div",{style:{display:"flex",columnGap:"10px",flex:1,boxSizing:"border-box"},children:(0,L.jsxs)("fieldset",{style:{display:"flex",flexDirection:"column",gap:"10px",padding:"15px",border:"1px solid #cbd5e1",borderRadius:"5px",marginBottom:"10px",flexGrow:1},children:[(0,L.jsx)("legend",{style:{color:"#065f46"},children:"PA Policy"}),H?(0,L.jsx)(C.Z,{loading:H}):(0,L.jsxs)(D.Z,{size:"small",fullWidth:!0,disabled:p,sx:{".MuiFormLabel-root":{fontSize:"14px",background:"white",zIndex:99,padding:"0 3px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},children:[(0,L.jsx)(Z.Z,{id:"PolicyAccount",children:"Account"}),(0,L.jsx)(F.Z,{sx:{height:"27px",fontSize:"14px"},labelId:"PolicyAccount",value:n.PolicyAccount,label:"Account",name:"PolicyAccount",onChange:i,children:V.data.policyAccounts.map((function(e,t){return(0,L.jsx)(w.Z,{value:e.Account,children:e.Account},t)}))})]}),(0,L.jsx)(u.Z,{fullWidth:!0,variant:"outlined",size:"small",label:"Policy No",name:"PolicyNo",value:n.PolicyNo,onChange:i,InputProps:{style:{height:"27px",fontSize:"14px"}},sx:{width:"100%",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}})]})}),(0,L.jsx)("div",{style:{display:"flex",columnGap:"10px",flex:1,boxSizing:"border-box"},children:(0,L.jsxs)("fieldset",{style:{display:"flex",flexDirection:"column",gap:"10px",gridArea:"content4",padding:"15px",border:"1px solid #cbd5e1",borderRadius:"5px",flexGrow:1},children:[(0,L.jsx)("legend",{style:{color:"#065f46"},children:"Period of Insurance"}),(0,L.jsx)(z.Z,{disabled:p,label:"Date From",onChange:function(e){l(e,"DateFrom");var t=new Date(e),n=(0,M.Z)(t,1);l(n,"DateTo")},value:new Date(n.DateFrom),textField:{InputLabelProps:{style:{fontSize:"14px"}},InputProps:{style:{height:"27px",fontSize:"14px"}}},onKeyDown:function(e){if("Enter"===e.code||"NumpadEnter"===e.code)var t=setTimeout((function(){var e,n;null===(e=v.current)||void 0===e||null===(n=e.querySelector("button"))||void 0===n||n.click(),clearTimeout(t)}),150)},datePickerRef:v}),(0,L.jsx)(z.Z,{disabled:p,label:"Date To",onChange:function(e){l(e,"DateTo")},value:new Date(n.DateTo),textField:{InputLabelProps:{style:{fontSize:"14px"}},InputProps:{style:{height:"27px",fontSize:"14px"}}},onKeyDown:function(e){if("Enter"===e.code||"NumpadEnter"===e.code)var t=setTimeout((function(){var e,n;null===(e=g.current)||void 0===e||null===(n=e.querySelector("button"))||void 0===n||n.click(),clearTimeout(t)}),150)},datePickerRef:g}),(0,L.jsx)(z.Z,{label:"Date Issued",name:"DateIssued",onChange:function(e){l(e,"DateIssued")},value:new Date(n.DateIssued),disabled:p,textField:{InputLabelProps:{style:{fontSize:"14px"}},InputProps:{style:{height:"27px",fontSize:"14px"}}},onKeyDown:function(e){if("Enter"===e.code||"NumpadEnter"===e.code)var t=setTimeout((function(){var e,n;null===(e=b.current)||void 0===e||null===(n=e.querySelector("button"))||void 0===n||n.click(),clearTimeout(t)}),150)},datePickerRef:b})]})})]}),(0,L.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,L.jsx)("div",{style:{display:"flex",columnGap:"10px",flex:1,boxSizing:"border-box"},children:(0,L.jsxs)("fieldset",{style:{display:"flex",flexDirection:"column",gap:"10px",gridArea:"content4",padding:"15px",border:"1px solid #cbd5e1",borderRadius:"5px",flexGrow:1},children:[(0,L.jsx)("legend",{style:{color:"#065f46",height:"20px"}}),(0,L.jsx)(u.Z,{disabled:p,required:!0,variant:"outlined",size:"small",label:"Sum Insured",name:"sumInsured",value:n.sumInsured,onChange:i,placeholder:"0.00",InputProps:{inputComponent:A.a,style:{height:"27px",fontSize:"14px"}},sx:{width:"100%",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},onBlur:function(){f({type:"UPDATE_FIELD",field:"sumInsured",value:parseFloat(n.sumInsured).toFixed(2)})}}),(0,L.jsx)(u.Z,{disabled:p,required:!0,variant:"outlined",size:"small",label:"Property Insured",name:"propertyInsured",value:n.propertyInsured,onChange:i,InputProps:{style:{height:"27px",fontSize:"14px"}},sx:{width:"100%",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}})]})}),(0,L.jsx)("div",{style:{display:"flex",columnGap:"10px",flex:1,boxSizing:"border-box"},children:(0,L.jsxs)("fieldset",{style:{display:"flex",flexDirection:"column",rowGap:"10px",padding:"15px",border:"1px solid #cbd5e1",borderRadius:"5px",flexGrow:1},children:[(0,L.jsx)("legend",{children:"Premiums"}),(0,L.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",padding:"5px"},children:(0,L.jsx)(c.Z,{disabled:p,size:"small",variant:"contained",color:"primary",onClick:function(){x()},children:"Compute"})}),(0,L.jsx)(u.Z,{disabled:p,required:!0,variant:"outlined",size:"small",label:"Net Premium",name:"netPremium",value:n.netPremium,onChange:i,onKeyDown:Y,placeholder:"0.00",InputProps:{inputComponent:A.a,style:{height:"27px",fontSize:"14px"}},sx:{width:"100%",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},onBlur:function(){f({type:"UPDATE_FIELD",field:"netPremium",value:parseFloat(n.netPremium).toFixed(2)})}}),(0,L.jsx)(u.Z,{disabled:p,required:!0,variant:"outlined",size:"small",label:"Vat",name:"vat",value:n.vat,onChange:i,onKeyDown:Y,placeholder:"0.00",InputProps:{inputComponent:A.a,style:{height:"27px",fontSize:"14px"}},sx:{width:"100%",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},onBlur:function(){f({type:"UPDATE_FIELD",field:"vat",value:parseFloat(n.vat).toFixed(2)})}}),(0,L.jsx)(u.Z,{disabled:p,required:!0,variant:"outlined",size:"small",label:"Doc Stamp",name:"docStamp",value:n.docStamp,onChange:i,onKeyDown:Y,placeholder:"0.00",InputProps:{inputComponent:A.a,style:{height:"27px",fontSize:"14px"}},sx:{width:"100%",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},onBlur:function(){f({type:"UPDATE_FIELD",field:"docStamp",value:parseFloat(n.docStamp).toFixed(2)})}}),(0,L.jsxs)("div",{style:{display:"flex",gap:"5px",position:"relative"},children:[(0,L.jsx)(u.Z,{disabled:p,required:!0,variant:"outlined",size:"small",name:"localGovTaxPercent",value:n.localGovTaxPercent,onChange:i,onKeyDown:Y,placeholder:"0.00",InputProps:{inputComponent:A.a,style:{height:"27px",fontSize:"14px"}},sx:{width:"80px",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},onBlur:function(){f({type:"UPDATE_FIELD",field:"localGovTaxPercent",value:parseFloat(n.localGovTaxPercent).toFixed(2)})}}),(0,L.jsx)(u.Z,{disabled:p,required:!0,variant:"outlined",size:"small",label:"Local Gov Tax",name:"localGovTax",value:n.localGovTax,onChange:i,onKeyDown:Y,placeholder:"0.00",InputProps:{inputComponent:A.a,style:{height:"27px",fontSize:"14px"}},sx:{width:"100%",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},onBlur:function(){f({type:"UPDATE_FIELD",field:"localGovTax",value:parseFloat(n.localGovTax).toFixed(2)})}})]}),(0,L.jsx)(I.Z,{color:"secondary"}),(0,L.jsx)(u.Z,{disabled:p,required:!0,variant:"outlined",size:"small",label:"Total Due",name:"totalDue",value:n.totalDue,onChange:i,placeholder:"0.00",InputProps:{inputComponent:A.a,style:{height:"27px",fontSize:"14px"}},sx:{width:"100%",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},onBlur:function(){f({type:"UPDATE_FIELD",field:"totalDue",value:parseFloat(n.totalDue).toFixed(2)})}})]})})]})]}),E,B]})}var E=n(64230),N=n(70272),G={sub_account:"HO",client_id:"",client_name:"",client_address:"",agent_id:"",agent_name:"",agent_com:"0.00",sale_officer:"",PolicyAccount:"",PolicyNo:"",DateFrom:new Date,DateTo:(0,M.Z)(new Date,1),DateIssued:new Date,sumInsured:"",propertyInsured:"",netPremium:"",vat:"",docStamp:"",localGovTaxPercent:"0.75",localGovTax:"",totalDue:"",paActioMode:""},R=function(e,t){return"UPDATE_FIELD"===t.type?(0,r.Z)((0,r.Z)({},e),{},(0,l.Z)({},t.field,t.value)):e},K=(0,s.createContext)({}),q="pa-search",B="clients",U="agents",O="pa-policy",W="pa-policy",Q="pa-policy";function V(){var e,t,n,v,P,j,_=(0,s.useReducer)(R,G),I=(0,i.Z)(_,2),S=I[0],z=I[1],A=(0,s.useContext)(f.V),M=A.myAxios,V=A.user,H=(0,s.useState)([]),Y=(0,i.Z)(H,2),J=Y[0],X=Y[1],$=(0,s.useState)([]),ee=(0,i.Z)($,2),te=ee[0],ne=ee[1],oe=(0,s.useState)(""),ae=(0,i.Z)(oe,2),ie=ae[0],le=ae[1],re=(0,s.useState)(!1),se=(0,i.Z)(re,2),de=se[0],ce=se[1],ue=(0,s.useRef)(null),pe=(0,s.useRef)(null),xe=(0,s.useRef)(null),fe=(0,s.useRef)(null),me=(0,m.useQueryClient)(),he=""===S.paActioMode,ye=(0,m.useQuery)({queryKey:"get-sub_account",queryFn:function(){return(e=e||(0,a.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.get("/task/production/get-sub_account",{headers:{Authorization:"Bearer ".concat(null===V||void 0===V?void 0:V.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}),ve=ye.data,ge=ye.isLoading,be=(0,k.Z)({link:{url:"/task/production/search-pa-policy",queryUrlName:"searchPaPolicy"},columns:[{field:"DateIssued",headerName:"Date",width:200},{field:"PolicyNo",headerName:"Policy No",width:250},{field:"Account",headerName:"Account",width:170},{field:"client_fullname",headerName:"Full Name",flex:1}],queryKey:"search-pa-policy",uniqueId:"PolicyNo",responseDataKey:"paPolicy",onSelected:function(e){Ne(e),we()},onCellKeyDown:function(e,t){"Enter"!==t.code&&"NumpadEnter"!==t.code||(Ne([e.row]),we())},searchRef:ue}),De=be.ModalComponent,Ze=be.openModal,Fe=be.isLoading,we=be.closeModal,Pe=(0,m.useMutation)({mutationKey:W,mutationFn:function(e){return(t=t||(0,a.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("update"!==S.paActioMode){e.next=4;break}return e.next=3,M.post("/task/production/update-pa-policy",t,{headers:{Authorization:"Bearer ".concat(null===V||void 0===V?void 0:V.accessToken)}});case 3:case 6:return e.abrupt("return",e.sent);case 4:return e.next=6,M.post("/task/production/add-pa-policy",t,{headers:{Authorization:"Bearer ".concat(null===V||void 0===V?void 0:V.accessToken)}});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){return(n=n||(0,a.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.data.success){e.next=5;break}return e.next=3,Te();case 3:return Le(G,!0),e.abrupt("return",g().fire({position:"center",icon:"success",title:t.data.message,showConfirmButton:!1,timer:1500}));case 5:g().fire({position:"center",icon:"error",title:t.data.message,showConfirmButton:!1,timer:1500});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}),je=Pe.mutate,_e=Pe.isLoading,Ie=(0,m.useMutation)({mutationKey:Q,mutationFn:function(e){return(v=v||(0,a.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.post("/task/production/delete-pa-policy",t,{headers:{Authorization:"Bearer ".concat(null===V||void 0===V?void 0:V.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){return(P=P||(0,a.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.data.success){e.next=5;break}return e.next=3,Te();case 3:return Le(G,!0),e.abrupt("return",g().fire({position:"center",icon:"success",title:t.data.message,showConfirmButton:!1,timer:1500}));case 5:g().fire({position:"center",icon:"error",title:t.data.message,showConfirmButton:!1,timer:1500});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}),Se=Ie.mutate,ze=Ie.isLoading,Ae=(0,s.useCallback)((function(){S.netPremium=""===S.netPremium?"0":S.netPremium,S.vat=""===S.vat?"0":S.vat,S.docStamp=""===S.docStamp?"0":S.docStamp,S.localGovTaxPercent=""===S.localGovTaxPercent?"0":S.localGovTaxPercent,S.localGovTax=""===S.localGovTax?"0":S.localGovTax,S.totalDue=""===S.totalDue?"0":S.totalDue}),[S]),Ce=(0,s.useCallback)((function(){return""===S.client_name||null===S.client_name||void 0===S.client_name?g().fire("Unable to save! Invalid Client ID","you missed the Client Id Field?","error"):""===S.client_id||null===S.client_id?g().fire("Unable to save! Invalid IDNo.","you missed the Client Id Field?","error"):""===S.PolicyAccount||null===S.PolicyAccount?g().fire("Unable to save! Please select Account.","you missed the Account Field?","error"):""===S.PolicyNo||null===S.PolicyNo?g().fire("Unable to save! Invalid Policy No.","you missed the Policy No Field?","error"):void("update"===S.paActioMode?(0,E.s)({isUpdate:!0,cb:function(e){Ae(),je((0,r.Z)((0,r.Z)({},S),{},{userCodeConfirmation:e}))}}):(0,E.L)({isConfirm:function(){Ae(),je(S)}}))}),[je,Ae,S]);(0,s.useEffect)((function(){var e=function(e){var t,n,o;""!==S.paActioMode||"KeyN"!==e.code&&"Enter"!==e.code&&"NumpadEnter"!==e.code||(e.preventDefault(),null===(t=pe.current)||void 0===t||t.click());""!==S.paActioMode&&"Escape"===e.code&&(e.preventDefault(),null===(n=xe.current)||void 0===n||n.click());"update"===S.paActioMode&&"Delete"===e.code&&(e.preventDefault(),null===(o=fe.current)||void 0===o||o.click())};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[Ce,S.paActioMode]);var ke=function(e){var t=e.target,n=t.name,o=t.value;z({type:"UPDATE_FIELD",field:n,value:o})},Me=function(e,t){z({type:"UPDATE_FIELD",field:t,value:e})};function Le(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.form_type=S.form_type,e.form_action=S.form_action,e.prem_text_one=S.prem_text_one,e.prem_text_two=S.prem_text_two,t||(e.paActioMode=S.paActioMode),Object.entries(e).forEach((function(e){var t=(0,i.Z)(e,2),n=t[0],o=t[1];Me(o,n)}))}function Te(){return(j=j||(0,a.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([me.invalidateQueries(q),me.invalidateQueries(B),me.invalidateQueries(U),me.invalidateQueries(O),me.invalidateQueries(W),me.invalidateQueries(Q)]));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ee(e){return(e||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function Ne(e){var t=e[0],n=t.PolicyNo,o=t.Account,a=t.PeriodFrom,i=t.PeriodTo,l=t.Location,r=t.IDNo,s=t.SubAcct,d=t.DateIssued,c=t.TotalPremium,u=t.AgentID,p=t.AgentCom,x=t.client_fullname,f=t.agent_fullname,m=t.address,h=t.sumInsured,y=t.sale_officer,v=t.TotalDue,g=t.LGovTax,b=t.DocStamp,D=t.Vat;Me(s,"sub_account"),Me(r,"client_id"),Me(x,"client_name"),Me(m,"client_address"),Me(u,"agent_id"),Me(f,"agent_name"),Me(p,"agent_com"),Me(y,"sale_officer"),Me(o,"PolicyAccount"),Me(n,"PolicyNo"),Me(a,"DateFrom"),Me(i,"DateTo"),Me(d,"DateIssued"),Me(l,"propertyInsured"),Me(h,"sumInsured"),Me(h,"sumInsured"),Me(Ee(parseFloat(c)),"netPremium"),Me(Ee(parseFloat(D)),"vat"),Me(Ee(parseFloat(b)),"docStamp"),Me(Ee(parseFloat(g)),"localGovTax"),Me(Ee(parseFloat(v)),"totalDue"),S.netPremium=parseFloat(c).toFixed(2),Me("update","paActioMode")}return(0,s.useEffect)((function(){var e=function(e){(e.ctrlKey||e.metaKey)&&"s"===e.key&&(e.preventDefault(),Ce())};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[Ce]),(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(N.Z,{title:"PA Policy"}),(0,L.jsxs)(K.Provider,{value:{state:S,handleInputChange:ke,customInputchange:Me,Mortgagee:de,setMortgagee:ce,clientRows:J,setClientRows:X,myAxios:M,user:V,agentRows:te,setAgentRows:ne,computation:function(){Ae();var e=parseFloat(S.localGovTaxPercent)/100,t=parseFloat(S.netPremium);Me((.12*t).toFixed(2),"vat"),Me((.125*t).toFixed(2),"docStamp"),Me((e*t).toFixed(2),"localGovTax"),Me(t.toFixed(2),"netPremium"),Me((parseFloat(t.toFixed(2))+parseFloat((.12*t).toFixed(2))+parseFloat((.125*t).toFixed(2))+parseFloat((e*t).toFixed(2))).toFixed(2),"totalDue")},isAddOrEditMode:he,dispatch:z,keySave:function(e){""===S.mode||"Enter"!==e.code&&"NumpadEnter"!==e.code||(e.preventDefault(),Ce())}},children:[(0,L.jsx)(d.Z,{sx:function(e){return(0,l.Z)({display:"flex",alignItems:"center",columnGap:"20px",marginBottom:"10px"},e.breakpoints.down("sm"),{flexDirection:"column",alignItems:"flex-start",flex:1})},children:(0,L.jsx)("div",{style:{display:"flex",alignItems:"center",columnGap:"20px"},children:(0,L.jsxs)("div",{style:{display:"flex",alignItems:"center",columnGap:"5px"},children:[""===S.paActioMode&&(0,L.jsx)(c.Z,{sx:{height:"30px",fontSize:"11px"},ref:pe,variant:"contained",startIcon:(0,L.jsx)(x.Z,{}),onClick:function(){Me("add","paActioMode")},children:"New"}),(0,L.jsx)(C.Z,{sx:{height:"30px",fontSize:"11px"},color:"primary",variant:"contained",type:"submit",onClick:Ce,disabled:""===S.paActioMode,startIcon:(0,L.jsx)(y.Z,{}),loading:_e,children:"Save"}),""!==S.paActioMode&&(0,L.jsx)(c.Z,{sx:{height:"30px",fontSize:"11px"},ref:xe,variant:"contained",startIcon:(0,L.jsx)(h.Z,{}),color:"error",onClick:function(){g().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, cancel it!"}).then((function(e){e.isConfirmed&&(Me("","paActioMode"),Le(G,!0))}))},children:"Cancel"}),(0,L.jsx)(C.Z,{loading:ze,id:"save-entry-header",variant:"contained",sx:{height:"30px",fontSize:"11px",backgroundColor:p.Z[500],"&:hover":{backgroundColor:p.Z[600]}},ref:fe,disabled:"update"!==S.paActioMode,startIcon:(0,L.jsx)(b.Z,{}),onClick:function(){(0,E.s)({isUpdate:!1,cb:function(e){Se({PolicyAccount:S.PolicyAccount,PolicyNo:S.PolicyNo,policyType:S.policyType,userCodeConfirmation:e})}})},children:"Delete"})]})})}),(0,L.jsxs)("div",{style:{marginBottom:"5px",display:"flex",gap:"10px"},children:[Fe?(0,L.jsx)(C.Z,{loading:Fe}):(0,L.jsx)(u.Z,{label:"Search",size:"small",name:"search",value:ie,onChange:function(e){le(e.target.value)},onKeyDown:function(e){"Enter"!==e.code&&"NumpadEnter"!==e.code||(e.preventDefault(),Ze(ie))},InputProps:{style:{height:"27px",fontSize:"14px"}},sx:{width:"300px",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}}),ge?(0,L.jsx)(C.Z,{loading:ge}):(0,L.jsxs)(D.Z,{size:"small",sx:function(e){return{width:"150px",".MuiFormLabel-root":{fontSize:"14px",background:"white",zIndex:99,padding:"0 3px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}},children:[(0,L.jsx)(Z.Z,{id:"subAccount",children:"Sub Account"}),(0,L.jsx)(F.Z,{sx:{height:"27px",fontSize:"14px"},size:"small",labelId:"subAccount",label:"subAccount",name:"sub_account",value:S.sub_account,onChange:function(e){ke(e)},children:(null===ve||void 0===ve?void 0:ve.data.sub_account).map((function(e,t){return(0,L.jsx)(w.Z,{value:e.Acronym.trim(),children:e.Acronym},t)}))})]})]}),(0,L.jsx)(T,{}),De]})]})}},42419:function(e,t,n){var o=n(64836);t.Z=void 0;var a=o(n(45649)),i=n(80184),l=(0,a.default)((0,i.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");t.Z=l},27247:function(e,t,n){var o=n(64836);t.Z=void 0;var a=o(n(45649)),i=n(80184),l=(0,a.default)((0,i.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");t.Z=l},91421:function(e,t,n){var o=n(64836);t.Z=void 0;var a=o(n(45649)),i=n(80184),l=(0,a.default)([(0,i.jsx)("circle",{cx:"10",cy:"8",r:"4"},"0"),(0,i.jsx)("path",{d:"M10.35 14.01C7.62 13.91 2 15.27 2 18v2h9.54c-2.47-2.76-1.23-5.89-1.19-5.99zm9.08 4.01c.36-.59.57-1.28.57-2.02 0-2.21-1.79-4-4-4s-4 1.79-4 4 1.79 4 4 4c.74 0 1.43-.22 2.02-.57L20.59 22 22 20.59l-2.57-2.57zM16 18c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"},"1")],"PersonSearch");t.Z=l},53329:function(e,t,n){var o=n(64836);t.Z=void 0;var a=o(n(45649)),i=n(80184),l=(0,a.default)((0,i.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"}),"Save");t.Z=l},4378:function(e,t){t.Z={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162"}},45987:function(e,t,n){n.d(t,{Z:function(){return a}});var o=n(63366);function a(e,t){if(null==e)return{};var n,a,i=(0,o.Z)(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}}}]);
//# sourceMappingURL=6975.22a119d8.chunk.js.map