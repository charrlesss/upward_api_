"use strict";(self.webpackChunkupward=self.webpackChunkupward||[]).push([[6813],{93346:function(e,n,t){t.d(n,{r:function(){return l}});var i=t(93433),r=t(29439),o=t(72791),u=t(16088),c=t(80184),l=(0,o.forwardRef)((function(e,n){var t,l=e.rows,a=e.column,d=e.width,s=e.height,f=e.dataReadOnly,h=e.onSelectionChange,v=void 0===h?function(){}:h,m=e.isMultipleSelect,p=void 0!==m&&m,g=e.freeze,x=void 0!==g&&g,w=e.onKeyDown,y=e.inputsearchselector,N=void 0===y?".search-input-up-on-key-down":y,j=e.isRowSelectable,S=void 0===j||j,b=e.unSelectable,C=void 0===b?function(){return!1}:b,k=e.isLoading,D=e.onRightClick,A=(0,o.useState)([]),Z=(0,r.Z)(A,2),I=Z[0],R=Z[1],L=(0,o.useState)(0),E=(0,r.Z)(L,2),M=E[0],T=E[1],O=(0,o.useRef)(v),P=(0,o.useRef)(w),q=(0,o.useState)(a.filter((function(e){return!e.hide}))),K=(0,r.Z)(q,2),V=K[0],F=K[1],U=(0,o.useState)(null),z=(0,r.Z)(U,2),B=z[0],G=z[1],W=(0,o.useState)([0]),H=(0,r.Z)(W,2),X=H[0],_=H[1],Q=(0,o.useState)(0),J=(0,r.Z)(Q,2),Y=J[0],$=J[1],ee=(0,o.useState)([]),ne=(0,r.Z)(ee,2),te=ne[0],ie=ne[1],re=(0,o.useRef)(null),oe=(0,o.useState)(null),ue=(0,r.Z)(oe,2),ce=ue[0],le=ue[1];(0,o.useEffect)((function(){var e=function(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,t=[],i=0;i<e.length;i+=n)t.push(e.slice(i,i+n));return t}(l,100);R(e)}),[l]);var ae=function(e,n){n.preventDefault(),n.stopPropagation();var t=n.clientX,r=V[e].width,o=function(n){var o=r+(n.clientX-t),u=(0,i.Z)(V);u[e].width=o>50?o:50,F(u)};document.addEventListener("mousemove",o),document.addEventListener("mouseup",(function e(){document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",e)}))},de=function(e){G(e)},se=function(){G(null)};(0,o.useImperativeHandle)(n,(function(){return{resetTableSelected:function(){if(_([0]),$(0),ie([]),l.length>0){var e=document.querySelector(".row-".concat(0));null===e||void 0===e||e.scrollIntoView({block:"end",behavior:"smooth"})}},getSelectedIndex:function(){return te[0]},getSelectedRows:function(){return l.filter((function(e,n){return te.includes(n)}))},getFirstColumn:function(){return l.filter((function(e,n){return te.includes(n)}))},getParentElement:function(){return re.current},getSelectedRowsOnClick:function(){return X[0]}}}));return(0,c.jsx)("div",{style:{display:"flex",justifyContent:"center"},onKeyDown:function(e){if("ArrowDown"===e.key)e.preventDefault(),_((function(e){var n;if(null===e[e.length-1])return[0];if(e[e.length-1]>=l.length-1)return[l.length-1];var t=e[e.length-1]+1,i=document.querySelector(".row-".concat(t));return null===i||void 0===i||null===(n=i.querySelector("input"))||void 0===n||n.focus(),null===i||void 0===i||i.scrollIntoView({block:"end",behavior:"smooth"}),[t]}));else if("ArrowUp"===e.key){if(e.preventDefault(),0===X[X.length-1]){var n=document.querySelector(N);if(n&&"INPUT"===n.tagName)null===n||void 0===n||n.focus();else if(n&&"DIV"===n.tagName){var t=document.querySelector("".concat(N," input"));null===t||void 0===t||t.focus()}}_((function(e){var n;if(0===e[e.length-1])return[0];var t=e[e.length-1]-1,i=document.querySelector(".row-".concat(t));return null===i||void 0===i||i.scrollIntoView({block:"end",behavior:"smooth"}),null===i||void 0===i||null===(n=i.querySelector("input"))||void 0===n||n.focus(),[t]}))}},children:(0,c.jsxs)("div",{children:[(0,c.jsxs)("div",{className:"table-frame-color",children:[(0,c.jsx)("div",{style:{display:"flex",flexDirection:"column",width:"".concat(d-10,"px        "),height:"".concat(s-135,"px"),minHeight:"270px"},className:"table-frame",children:(0,c.jsx)("div",{className:"table-panel",children:(0,c.jsxs)("div",{ref:re,className:"grid-container ",tabIndex:-1,children:[(0,c.jsx)("div",{className:"grid-row grid-header",style:{position:"sticky",zIndex:"10",top:"-1px",background:"white"},children:V.map((function(e,n){return(0,c.jsxs)("div",{className:"grid-cell header-cell ".concat(B===n?"highlight-column":""),style:{width:e.width,height:"20px"},children:[(0,c.jsx)("input",{style:{fontWeight:"bold"},defaultValue:e.headerName,readOnly:!0,onChange:function(e){}}),(0,c.jsx)("div",{className:"resize-handle",onMouseDown:function(e){return ae(n,e)},onMouseEnter:function(e){e.preventDefault(),de(n)},onMouseLeave:function(e){e.preventDefault(),se()}})]},n)}))}),null===(t=I[M])||void 0===t?void 0:t.map((function(e,n){return(0,c.jsx)("div",{className:"grid-row row-".concat(n),onClick:function(e){return function(e,n){if(p)if(n.shiftKey&&null!==Y){for(var t=Math.min(Y,e),r=Math.max(Y,e),o=[],u=t;u<=r;u++)X.includes(u)||o.push(u);var c=[].concat((0,i.Z)(te),o);_([].concat((0,i.Z)(X),o));var a=function(e){var n=e.map((function(e,n){return C(e)?null:{idx:n,data:e}})).filter((function(e){return null!==e})),t=n.map((function(e){return e.data}));return{newSelectedRowsFiltered:n.map((function(e){return e.idx})),data:t}}(l.filter((function(e,n){return c.includes(n)}))).newSelectedRowsFiltered;ie(a)}else if(n.ctrlKey||n.metaKey)if(X.includes(e)&&!x){_(X.filter((function(n){return n!==e}))),ie((function(n){return n=n.filter((function(n){return n!==e})),n}));var d=te.filter((function(n){return n!==e}));ie(d)}else{_([].concat((0,i.Z)(X),[e])),ie((function(n){return n.push(e),n}));var s=[].concat((0,i.Z)(te),[e]);ie(s)}else _([e]);else _([e]);$(e)}(n,e)},onDoubleClick:function(e){ce&&(clearTimeout(ce),le(null));var t=setTimeout((function(){!function(e,n){var t=l[e];if(!C(t)&&S){var r=[];if(r=p?[].concat((0,i.Z)(te),(0,i.Z)(X)):[e],te.includes(e)&&!x)return r=te.filter((function(n){return n!==e})),ie(r),void O.current([],e);ie(r),O.current([t],e)}}(n)}),200);le(t)},onKeyDown:function(e){ce&&(clearTimeout(ce),le(null));var n=setTimeout((function(){!function(e){if(e.stopPropagation(),"Enter"===e.key||"NumpadEnter"===e.key){if(e.preventDefault(),!S)return;var n=[],t=X[X.length-1];n=p?[].concat((0,i.Z)(te),(0,i.Z)(X)):[t];var r=l[n[n.length-1]];if(C(r))return;if(te.includes(t)&&!x)return n=te.filter((function(e){return e!==t})),ie(n),void O.current([],t);ie(n),O.current([r],t)}else if("Delete"===e.key||"Backspace"===e.key){if(!S)return;var o=X[X.length-1],u=l.filter((function(e,n){return X.includes(n)}));null!==P&&void 0!==P&&P.current&&(null===P||void 0===P||P.current(u,e.key,o))}}(e)}),200);le(n)},onContextMenu:function(e){return function(e,n){e.preventDefault();var t=l[n];D&&D(t,e)}(e,n)},children:V.map((function(t,i){return(0,c.jsxs)("div",{style:{width:t.width},className:"grid-cell ".concat(B===i?"highlight-column":""," row-").concat(n," col-").concat(i),children:[(0,c.jsx)("input",{value:e[t.field],onChange:function(e){},readOnly:f,className:"".concat(X.includes(n)?"selected-row":""," ").concat(te.includes(n)?"selected-items":"","\n                          ").concat("number"===t.type?"number":"text","\n                          ")}),(0,c.jsx)("div",{className:"resize-handle",onMouseDown:function(e){e.preventDefault(),ae(i,e)},onMouseEnter:function(e){e.preventDefault(),de(i)},onMouseLeave:function(e){e.preventDefault(),se()}})]},i)}))},n)}))]})})}),k&&(0,c.jsx)("div",{className:"table-loading",children:(0,c.jsx)("div",{className:"loader"})})]}),(0,c.jsxs)("div",{className:"table-panel-footer",children:[(0,c.jsxs)("div",{children:["Records : ",null===l||void 0===l?void 0:l.length]}),(0,c.jsx)("div",{children:(0,c.jsx)(u.Z,{count:I.length,onChange:function(e,n){T(n-1)}})})]})]})})}))},66813:function(e,n,t){t.r(n),t.d(n,{default:function(){return g}});var i=t(74165),r=t(15861),o=t(29439),u=t(72791),c=t(91933),l=t(24035),a=t(3380),d=t(25756),s=t(54164),f=t(93346),h=t(80184),v=[{field:"AssuredName",headerName:"Assured Name",width:300},{field:"PolicyNo",headerName:"Policy No.",width:200},{field:"InsuredValue",headerName:"Insured Value",width:120,type:"number"},{field:"unit",headerName:"Unit",width:270},{field:"ChassisNo",headerName:"Chassis No.",width:160},{field:"DateExpired",headerName:"Date Expired",width:100}],m=[{field:"claims_id",headerName:"Claims ID.",width:300},{field:"AssuredName",headerName:"Assured Name",width:200},{field:"PolicyNo",headerName:"Policy No.",width:120,type:"number"},{field:"dateAccident",headerName:"Date Accident",width:270},{field:"dateReported",headerName:"Date Reported",width:160},{field:"status",headerName:"Status",width:100}],p=[{text:"TPL"},{text:"COM"},{text:"CGL"},{text:"FIRE"},{text:"MAR"},{text:"PA"}];function g(){var e,n=(0,u.useState)(0),t=(0,o.Z)(n,2),g=t[0],y=t[1],N=(0,u.useState)(!1),j=(0,o.Z)(N,2),S=j[0],b=j[1],C=(0,u.useState)(0),k=(0,o.Z)(C,2),D=k[0],A=k[1],Z=(0,d.Z)([(0,h.jsx)(w,{policy:"TPL",column:v}),(0,h.jsx)(w,{policy:"COM",column:v}),(0,h.jsx)(w,{policy:"CGL",column:v}),(0,h.jsx)(w,{policy:"FIRE",column:v}),(0,h.jsx)(w,{policy:"MAR",column:v}),(0,h.jsx)(w,{policy:"PA",column:v})]),I=Z.step,R=Z.goTo,L=(0,u.useContext)(a.V).user,E=(0,c.useQuery)({queryKey:"claims-notice",queryFn:function(){return(e=e||(0,r.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.G.get("/get-claims-notice",{headers:{Authorization:"Bearer ".concat(null===L||void 0===L?void 0:L.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}),M=E.data,T=E.isLoading,O=function(e,n){(0,s.flushSync)((function(){b(!0)})),A(e),R(e),y(n.target.getBoundingClientRect().left)},P=window.innerWidth-50,q=window.innerHeight-145;return(0,h.jsxs)("div",{id:"main",children:[("PRODUCTION"===(null===L||void 0===L?void 0:L.userAccess)||"ACCOUNTING"===(null===L||void 0===L?void 0:L.userAccess)||"PRODUCTION_ACCOUNTING"===(null===L||void 0===L?void 0:L.userAccess)||"ADMIN"===(null===L||void 0===L?void 0:L.userAccess))&&(0,h.jsxs)("div",{style:{position:"relative",width:"100%",height:"auto"},children:[(0,h.jsx)("h3",{style:{padding:0,margin:0,fontWeight:"bold",position:"absolute"},children:"RENEWAL NOTICE"}),(0,h.jsxs)("div",{style:{position:"relative",textAlign:"center",width:"100%",marginBottom:"10px"},children:[p.map((function(e,n){return(0,h.jsx)(x,{text:e.text,index:n,handleIncrement:O,curr:D},n)})),(0,h.jsx)("span",{onTransitionEnd:function(e){b(!1)},style:{position:"absolute",background:"rgba(0, 0, 0, 0.524)",top:0,left:"".concat(g,"px"),width:"60px",height:"40px",transition:"all 200ms",display:S?"block":"none"}})]}),(0,h.jsx)("div",{style:{width:"100%",height:"360px"},children:I})]}),("CLAIMS"===(null===L||void 0===L?void 0:L.userAccess)||"ADMIN"===(null===L||void 0===L?void 0:L.userAccess))&&(0,h.jsxs)("div",{children:[(0,h.jsx)("h3",{style:{padding:0,fontWeight:"bold"},children:"CLAIMS"}),T?(0,h.jsx)("div",{children:"Loading..."}):(0,h.jsx)(f.r,{isLoading:T,ref:null,rows:null===M||void 0===M?void 0:M.data.claims,column:m,width:P,height:q,dataReadOnly:!0,onSelectionChange:function(){},onKeyDown:function(){},inputsearchselector:".manok"})]})]})}var x=function(e){var n=e.text,t=void 0===n?"unknown":n,i=e.index,r=void 0===i?0:i,o=e.handleIncrement,u=e.curr;return(0,h.jsx)("button",{disabled:u===r,style:{border:"none",borderRadius:"0",cursor:"pointer",color:"white",background:u===r?"":"#008CBA",width:"80px",height:"40px",padding:0},onClick:function(e){o(r,e)},children:t})},w=function(e){var n=e.policy,t=e.column,i=(0,u.useRef)(),r=(0,u.useState)(!1),c=(0,o.Z)(r,2),d=c[0],s=c[1],v=(0,u.useState)([]),m=(0,o.Z)(v,2),p=m[0],g=m[1],x=(0,u.useContext)(a.V).user;(0,u.useEffect)((function(){s(!0),l.G.get("/get-renewal-this-month?policy=".concat(n),{headers:{Authorization:"Bearer ".concat(null===x||void 0===x?void 0:x.accessToken)}}).then((function(e){s(!1),g(null===e||void 0===e?void 0:e.data.renewal)}))}),[n,x]);var w=window.innerWidth-50,y=window.innerHeight-145;return d?(0,h.jsx)("div",{style:{textAlign:"center"},children:"Loading..."}):(0,h.jsx)("div",{children:(0,h.jsx)(f.r,{isLoading:d,ref:i,rows:p,column:t,width:w,height:y,dataReadOnly:!0,onSelectionChange:function(){},onKeyDown:function(){},inputsearchselector:".manok"})})}},25756:function(e,n,t){t.d(n,{Z:function(){return o}});var i=t(29439),r=t(72791);function o(e){var n=(0,r.useState)(0),t=(0,i.Z)(n,2),o=t[0],u=t[1];return{step:e[o],goTo:function(e){u(e)},back:function(){u((function(e){return e<=0?e:e+1}))},next:function(){u((function(n){return n>=e.length-1?n:n+1}))},isFirstStep:0!==o,isLastStep:o===e.length-1,currentStepIndex:o}}}}]);
//# sourceMappingURL=6813.0721ad1c.chunk.js.map