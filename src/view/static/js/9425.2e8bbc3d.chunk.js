"use strict";(self.webpackChunkupward=self.webpackChunkupward||[]).push([[9425],{81582:function(e,t,n){n.d(t,{XT:function(){return v},ZP:function(){return f},rO:function(){return h}});n(72791);var r=n(88447),o=n(64554),i=n(20890),a=n(27391),l=n(13400),u=n(29823),c=n(89767),d=n(80184),s={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"70%",bgcolor:"background.paper",boxShadow:24,p:4,heigth:"auto"};function f(e){var t=e.height,n=e.isLoading,f=(e.queryKey,e.columns),p=e.onSelectionChange,x=(e.setRows,e.rows),m=e.id,g=e.onCloseModal,y=e.showModal,w=e.onClickCloseIcon,b=e.searchOnChange,C=e.title,j=void 0===C?"":C,S=e.searchRef,D=(e.onCellKeyDown,e.onSearchKeyEnter),Z=void 0===D?function(){}:D,N=e.isRowSelectable,k=e.getCellClassName,I=v();return(0,d.jsx)(r.Z,{open:y,onClose:g,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,d.jsxs)(o.Z,{sx:s,children:[(0,d.jsx)(i.Z,{id:"modal-modal-title",variant:"h6",component:"h2",mb:2,children:j}),(0,d.jsx)(a.Z,{size:"small",label:"Search",sx:{marginBottom:"10px"},fullWidth:!0,onChange:b,InputProps:{inputRef:S},onKeyDown:function(e){var t;"Enter"!==e.code&&"NumpadEnter"!==e.code||(e.preventDefault(),Z(null===S||void 0===S||null===(t=S.current)||void 0===t?void 0:t.value));h(e,I,null===S||void 0===S?void 0:S.current)}}),(0,d.jsx)("div",{className:"".concat(I," main-table-selection-container"),style:{position:"relative",height:"".concat(t+20,"px")},children:(0,d.jsx)(c.Z,{isSingleSelection:!0,isRowFreeze:!1,columns:f,isLoading:n,dataSelection:function(e,t,n){p(e,t)},table_id:m,rows:x,isRowSelectable:N,getCellClassName:k})}),(0,d.jsx)("div",{style:{position:"absolute",top:"10px",right:"10px"},children:(0,d.jsx)(l.Z,{"aria-label":"search-client",color:"secondary",onClick:w,children:(0,d.jsx)(u.Z,{})})})]})})}function v(){return"main-"+Math.floor(1e4*Math.random())}function h(e,t,n){var r=t;if("ArrowDown"===e.code){var o,i=document.querySelectorAll(".".concat(r," .MuiDataGrid-row"));e.preventDefault(),null===(o=i[0])||void 0===o||o.classList.add("hover-keyboard"),function(e,t){var n=document.querySelector(".".concat(e," .MuiDataGrid-row")),r=null===n||void 0===n?void 0:n.querySelector("input");null===r||void 0===r||r.focus();var o=new MouseEvent("mouseenter",{bubbles:!0,cancelable:!0,view:window});null===n||void 0===n||n.dispatchEvent(o),null===r||void 0===r||r.addEventListener("keydown",(function(e){"ArrowUp"===e.key&&(e.preventDefault(),t.focus()),"ArrowUp"===e.key&&(null===n||void 0===n||n.classList.remove("hover-keyboard"))}))}(t,n),i.forEach((function(e,t){e.addEventListener("keydown",(function(e){if("ArrowUp"===e.key){var n,r;if(t<=0)return;return e.preventDefault(),null===(n=i[t])||void 0===n||n.classList.remove("hover-keyboard"),void(null===(r=i[t-1])||void 0===r||r.classList.add("hover-keyboard"))}if("ArrowDown"===e.key){var o,a;if(e.preventDefault(),t>=i.length-1)return;null===(o=i[t])||void 0===o||o.classList.remove("hover-keyboard"),null===(a=i[t+1])||void 0===a||a.classList.add("hover-keyboard")}}))}))}}},89767:function(e,t,n){var r=n(93433),o=n(1413),i=n(29439),a=n(72791),l=n(57482),u=n(64554),c=n(70561),d=n(29961),s=n(54277),f=n(70169),v=n(5794),h=n(16088),p=n(80184),x=(0,a.createContext)({rows:[],rowSelectionModel:[],footerChildren:function(){return(0,p.jsx)("div",{})},footerPaginationPosition:"right-left",showFooterSelectedCount:!0}),m=(0,a.forwardRef)((function(e,t){var n=e.isLoading,u=e.columns,d=e.rows,s=e.table_id,f=e.isSingleSelection,v=e.isRowFreeze,h=e.dataSelection,m=e.CustomFooterComponent,g=void 0===m?w:m,y=e.isRowSelectable,b=e.getCellClassName,C=e.checkboxSelection,j=void 0===C||C,S=e.footerChildren,D=void 0===S?function(e,t){return(0,p.jsx)("div",{})}:S,Z=e.footerPaginationPosition,N=void 0===Z?"right-left":Z,k=e.showFooterSelectedCount,I=void 0===k||k,E=(0,a.useState)([]),T=(0,i.Z)(E,2),A=T[0],R=T[1];function M(e,t,n){h&&h(e,t,n)}(0,a.useImperativeHandle)(t,(function(){return{removeSelection:function(){R([])},getSelectedRows:function(){return d.filter((function(e){return null===A||void 0===A?void 0:A.includes(e[s])}))},setSelectedRows:function(e){R(e)}}}));var z=[];return(0,p.jsx)(x.Provider,{value:{showFooterSelectedCount:I,footerPaginationPosition:N,rowSelectionModel:A,rows:d,footerChildren:D},children:(0,p.jsx)(c._$,{slots:{loadingOverlay:l.Z,footer:g},initialState:{pagination:{paginationModel:{pageSize:35}}},loading:n,getRowId:function(e){return e[s]},columns:u.filter((function(e){return!e.hide})),rows:d,showCellVerticalBorder:!0,showColumnVerticalBorder:!0,checkboxSelection:j,rowSelectionModel:A,rowHeight:25,columnHeaderHeight:35,pageSizeOptions:[10,20,35,50,75,100],sx:(0,o.Z)((0,o.Z)({"& .cash":{color:"#ec4899"},"& .check":{color:"#0891b2"},"& .approved":{color:"green"},"& .pending":{color:"orange"},"& .disapproved":{color:"red"},"& .normal":{color:"red"},"& .MuiDataGrid-row.Mui-selected:hover":{color:"black","& .MuiSvgIcon-root ":{fill:"#3b82f6"}},"& .hover-keyboard":{background:"#2563eb",color:"white","& .MuiSvgIcon-root ":{fill:"white"}},"& .MuiDataGrid-row:hover":{background:"#2563eb",color:"white","& .MuiSvgIcon-root ":{fill:"white"}},"& .MuiDataGrid-row.hover":{background:"#2563eb",color:"white","& .MuiSvgIcon-root ":{fill:"white"}},"& .MuiTablePagination-root p ":{padding:"0 !important"}},{"& .MuiDataGrid-columnHeaders":{background:"#64748b",color:"white",fontSize:"14px"},"& .MuiDataGrid-columnHeaderCheckbox .MuiDataGrid-columnHeaderTitleContainer .MuiSvgIcon-root ":{display:f||v?"none":"block",fill:"white"},"& .MuiDataGrid-columnHeaderCheckbox .MuiDataGrid-columnHeaderTitleContainer input ":{display:f||v?"none":"block"}}),{fontSize:13,fontWeight:500,"& .MuiDataGrid-checkboxInput":{height:"27px",width:"27px"},"& .MuiDataGrid-checkboxInput svg":{height:"20px",width:"20px"}}),onRowSelectionModelChange:function(e){if(v){if(e.length<=0)return;if(z=e,A.includes(z[z.length-1]))return;return R(e),void M([e[e.length-1]],d,null)}if(!v&&f)if(A&&(null===A||void 0===A?void 0:A.length)>0){var t=new Set(A);R(e.filter((function(e){return!t.has(e)})))}else R(e);else R(e);M([e[e.length-1]],d,null)},onCellKeyDown:function(e,t){if(["NumpadEnter","Enter","Delete","Backspace"].includes(t.code))return t.preventDefault(),"Enter"===t.code||"NumpadEnter"===t.code?f&&!v?R((function(n){return n&&n.length>0&&n[0]===e.rowNode.id?(M([],d,t.code),[]):(M([e.rowNode.id],d,t.code),[e.rowNode.id])})):void R((function(n){return n&&!v&&n.length>0&&n.includes(e.rowNode.id)?(n=n.filter((function(t){return t!==e.rowNode.id})),M([],d,t.code),n):n&&v&&n.length>0&&n.includes(e.rowNode.id)?n:(M([e.rowNode.id],d,t.code),[].concat((0,r.Z)(n),[e.rowNode.id]))})):"Delete"===t.code||"Backspace"===t.code?(R([e.rowNode.id]),M([e.rowNode.id],d,t.code)):void 0},disableVirtualization:!0,isRowSelectable:y,getCellClassName:b})})}));function g(e){var t=e.page,n=e.onPageChange,r=e.className,o=(0,d.l)(),i=(0,s.P)(o,f.UB);return(0,p.jsx)(h.Z,{variant:"outlined",color:"primary",className:r,count:i,page:t+1,onChange:function(e,t){n(e,t-1)}})}function y(e){return(0,p.jsx)(v.x,(0,o.Z)({ActionsComponent:g},e))}function w(e){var t=(0,a.useContext)(x),n=t.rowSelectionModel,r=t.showFooterSelectedCount,i=t.footerPaginationPosition,l=t.footerChildren,c=t.rows;return(0,p.jsxs)(u.Z,{sx:{columnGap:"50px",display:"flex",width:"100%",justifyContent:"space-between",px:3,alignItems:"center",flexDirection:"right-left"===i?"row-reverse":"row"},children:[(0,p.jsx)(y,(0,o.Z)({},e)),(0,p.jsxs)(u.Z,{sx:{display:"flex",justifyContent:"right-left"===i?"flex-start":"flex-end",flex:1,alignItems:"center"},children:[r&&(0,p.jsxs)("div",{children:["Selected:",null===n||void 0===n?void 0:n.length]}),(0,p.jsx)("div",{children:l(n,c)})]})]})}t.Z=m},37209:function(e,t,n){n.d(t,{sT:function(){return d},lq:function(){return c},Fz:function(){return u},iA:function(){return a},oi:function(){return l}});var r=n(1413),o=n(72791),i=n(80184);function a(e){var t=e.input,n=e.label,a=e.inputRef,l=e.icon,u=e.iconPosition,c=void 0===u?"end":u,d=e.disableIcon,s=void 0!==d&&d,f=e.onIconClick,v=void 0===f?function(e){}:f,h=e.onChange,p=void 0===h?function(e){}:h,x=(0,o.useId)(),m=function(e){if(!e)return e;var t=e.split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")},g=function(e){return e.replace(/,/g,"")};return(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",position:"relative"},children:[(0,i.jsx)("label",(0,r.Z)((0,r.Z)({},n),{},{htmlFor:x,children:n.title})),l&&"start"===c&&(0,i.jsx)("div",{style:{position:"absolute",left:"8px",zIndex:1},children:l}),(0,i.jsx)("input",(0,r.Z)((0,r.Z)({ref:a,id:x},t),{},{type:"text",style:(0,r.Z)({height:"100%"},t.style),onChange:function(e){!function(e){var t=e.target.value;t=g(t),(""===(t=g(t))||/^-?\d+(,\d{3})*(\.\d*)?$/.test(t))&&(e.target.value=m(t))}(e),p(e)},onBlur:function(e){!function(e){var t=g(e.target.value);t=function(e){return e.includes(".")?1===e.split(".")[1].length?e+"0":e:""===e?"0.00":e+".00"}(t),e.target.value=m(t)}(e)}})),l&&"end"===c&&(0,i.jsx)("div",{onClick:v,style:{position:"absolute",right:"2px",top:"50%",transform:"translateY(-50%)",zIndex:1,cursor:s?"none":"pointer",display:"flex",alignItems:"center",justifyContent:"center",background:"white",pointerEvents:s?"none":"auto"},children:l})]})}function l(e){var t=e.input,n=e.label,a=e.inputRef,l=e.icon,u=e.iconPosition,c=void 0===u?"end":u,d=e.disableIcon,s=void 0!==d&&d,f=e.onIconClick,v=void 0===f?function(e){}:f,h=(0,o.useId)();return(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",position:"relative"},children:[(0,i.jsx)("label",(0,r.Z)((0,r.Z)({},n),{},{htmlFor:h,children:n.title})),l&&"start"===c&&(0,i.jsx)("div",{style:{position:"absolute",left:"8px",zIndex:1},children:l}),(0,i.jsx)("input",(0,r.Z)((0,r.Z)({ref:a,id:h},t),{},{style:(0,r.Z)({height:"100%"},t.style)})),l&&"end"===c&&(0,i.jsx)("div",{onClick:v,style:{position:"absolute",right:"2px",top:"50%",transform:"translateY(-50%)",zIndex:1,cursor:s?"none":"pointer",display:"flex",alignItems:"center",justifyContent:"center",background:"white",pointerEvents:s?"none":"auto"},children:l})]})}function u(e){var t=e.textarea,n=e.label,a=e._inputRef,l=e.icon,u=e.iconPosition,c=void 0===u?"end":u,d=e.disableIcon,s=void 0!==d&&d,f=e.onIconClick,v=void 0===f?function(e){}:f,h=(0,o.useId)();return(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",position:"relative"},children:[(0,i.jsx)("label",(0,r.Z)((0,r.Z)({},n),{},{htmlFor:h,children:n.title})),l&&"start"===c&&(0,i.jsx)("div",{style:{position:"absolute",left:"8px",zIndex:1},children:l}),(0,i.jsx)("textarea",(0,r.Z)((0,r.Z)({ref:a,id:h},t),{},{style:(0,r.Z)({height:"100%"},t.style)})),l&&"end"===c&&(0,i.jsx)("div",{onClick:v,style:{position:"absolute",right:"2px",top:"50%",transform:"translateY(-50%)",zIndex:1,cursor:s?"none":"pointer",display:"flex",alignItems:"center",justifyContent:"center",background:"white",pointerEvents:s?"none":"auto"},children:l})]})}function c(e){var t=e.select,n=e.label,a=e.selectRef,l=e.datasource,u=void 0===l?[]:l,c=e.values,d=void 0===c?"":c,s=e.display,f=void 0===s?"":s,v=(0,o.useId)();return(0,i.jsxs)("div",{style:{display:"flex",height:"18px",alignItems:"center"},children:[(0,i.jsx)("label",(0,r.Z)((0,r.Z)({},n),{},{htmlFor:v,children:n.title})),(0,i.jsx)("select",(0,r.Z)((0,r.Z)({},t),{},{ref:a,className:"select ".concat(t.className),style:(0,r.Z)({height:"18px"},t.style),children:u.map((function(e,t){return(0,i.jsx)("option",{value:e[d],children:e[f]},t)}))}))]})}function d(e){var t=e.buttonRetRef,n=e.button,o=e.tooltipText,a=void 0===o?"":o,l=e.children,u=e.disabled,c=void 0!==u&&u;return(0,i.jsxs)("div",{className:"tooltip",children:[(0,i.jsx)("button",(0,r.Z)((0,r.Z)({disabled:c},n),{},{ref:t,style:(0,r.Z)((0,r.Z)({},n.style),{},{background:c?"#f1f1f1":"transparent"}),className:"tooltip-button",children:l})),!c&&(0,i.jsx)("span",{className:"tooltip-text",children:a})]})}},93346:function(e,t,n){n.d(t,{r:function(){return u}});var r=n(93433),o=n(29439),i=n(72791),a=n(16088),l=n(80184),u=(0,i.forwardRef)((function(e,t){var n,u=e.rows,c=e.column,d=e.width,s=e.height,f=e.dataReadOnly,v=e.onSelectionChange,h=void 0===v?function(){}:v,p=e.isMultipleSelect,x=void 0!==p&&p,m=e.freeze,g=void 0!==m&&m,y=e.onKeyDown,w=e.inputsearchselector,b=void 0===w?".search-input-up-on-key-down":w,C=e.isRowSelectable,j=void 0===C||C,S=e.unSelectable,D=void 0===S?function(){return!1}:S,Z=e.isLoading,N=e.onRightClick,k=(0,i.useState)([]),I=(0,o.Z)(k,2),E=I[0],T=I[1],A=(0,i.useState)(0),R=(0,o.Z)(A,2),M=R[0],z=R[1],L=(0,i.useRef)(h),F=(0,i.useRef)(y),P=(0,i.useState)(c.filter((function(e){return!e.hide}))),B=(0,o.Z)(P,2),K=B[0],q=B[1],_=(0,i.useState)(null),V=(0,o.Z)(_,2),U=V[0],O=V[1],G=(0,i.useState)([0]),H=(0,o.Z)(G,2),W=H[0],J=H[1],Y=(0,i.useState)(0),Q=(0,o.Z)(Y,2),X=Q[0],$=Q[1],ee=(0,i.useState)([]),te=(0,o.Z)(ee,2),ne=te[0],re=te[1],oe=(0,i.useRef)(null),ie=(0,i.useState)(null),ae=(0,o.Z)(ie,2),le=ae[0],ue=ae[1];(0,i.useEffect)((function(){var e=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=[],r=0;r<e.length;r+=t)n.push(e.slice(r,r+t));return n}(u,100);T(e)}),[u]);var ce=function(e,t){t.preventDefault(),t.stopPropagation();var n=t.clientX,o=K[e].width,i=function(t){var i=o+(t.clientX-n),a=(0,r.Z)(K);a[e].width=i>50?i:50,q(a)};document.addEventListener("mousemove",i),document.addEventListener("mouseup",(function e(){document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",e)}))},de=function(e){O(e)},se=function(){O(null)};(0,i.useImperativeHandle)(t,(function(){return{resetTableSelected:function(){if(J([0]),$(0),re([]),u.length>0){var e=document.querySelector(".row-".concat(0));null===e||void 0===e||e.scrollIntoView({block:"end",behavior:"smooth"})}},getSelectedIndex:function(){return ne[0]},getSelectedRows:function(){return u.filter((function(e,t){return ne.includes(t)}))},getFirstColumn:function(){return u.filter((function(e,t){return ne.includes(t)}))},getParentElement:function(){return oe.current},getSelectedRowsOnClick:function(){return W[0]},setSelectRows:function(e){return re([e])}}}));return(0,l.jsx)("div",{style:{display:"flex",justifyContent:"center"},onKeyDown:function(e){if("ArrowDown"===e.key)e.preventDefault(),J((function(e){var t;if(null===e[e.length-1])return[0];if(e[e.length-1]>=u.length-1)return[u.length-1];var n=e[e.length-1]+1,r=document.querySelector(".row-".concat(n));return null===r||void 0===r||null===(t=r.querySelector("input"))||void 0===t||t.focus(),null===r||void 0===r||r.scrollIntoView({block:"end",behavior:"smooth"}),[n]}));else if("ArrowUp"===e.key){if(e.preventDefault(),0===W[W.length-1]){var t=document.querySelector(b);if(t&&"INPUT"===t.tagName)null===t||void 0===t||t.focus();else if(t&&"DIV"===t.tagName){var n=document.querySelector("".concat(b," input"));null===n||void 0===n||n.focus()}}J((function(e){var t;if(0===e[e.length-1])return[0];var n=e[e.length-1]-1,r=document.querySelector(".row-".concat(n));return null===r||void 0===r||r.scrollIntoView({block:"end",behavior:"smooth"}),null===r||void 0===r||null===(t=r.querySelector("input"))||void 0===t||t.focus(),[n]}))}},children:(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"table-frame-color",children:[(0,l.jsx)("div",{style:{display:"flex",flexDirection:"column",width:"".concat(d-10,"px        "),height:"".concat(s-135,"px"),minHeight:"270px"},className:"table-frame",children:(0,l.jsx)("div",{className:"table-panel",children:(0,l.jsxs)("div",{ref:oe,className:"grid-container ",tabIndex:-1,children:[(0,l.jsx)("div",{className:"grid-row grid-header",style:{position:"sticky",zIndex:"10",top:"-1px",background:"white"},children:K.map((function(e,t){return(0,l.jsxs)("div",{className:"grid-cell header-cell ".concat(U===t?"highlight-column":""),style:{width:e.width,height:"20px"},children:[(0,l.jsx)("input",{style:{fontWeight:"bold"},defaultValue:e.headerName,readOnly:!0,onChange:function(e){}}),(0,l.jsx)("div",{className:"resize-handle",onMouseDown:function(e){return ce(t,e)},onMouseEnter:function(e){e.preventDefault(),de(t)},onMouseLeave:function(e){e.preventDefault(),se()}})]},t)}))}),null===(n=E[M])||void 0===n?void 0:n.map((function(e,t){return(0,l.jsx)("div",{className:"grid-row row-".concat(t),onClick:function(e){return function(e,t){if(x)if(t.shiftKey&&null!==X){for(var n=Math.min(X,e),o=Math.max(X,e),i=[],a=n;a<=o;a++)W.includes(a)||i.push(a);var l=[].concat((0,r.Z)(ne),i);J([].concat((0,r.Z)(W),i));var c=function(e){var t=e.map((function(e,t){return D(e)?null:{idx:t,data:e}})).filter((function(e){return null!==e})),n=t.map((function(e){return e.data}));return{newSelectedRowsFiltered:t.map((function(e){return e.idx})),data:n}}(u.filter((function(e,t){return l.includes(t)}))).newSelectedRowsFiltered;re(c)}else if(t.ctrlKey||t.metaKey)if(W.includes(e)&&!g){J(W.filter((function(t){return t!==e}))),re((function(t){return t=t.filter((function(t){return t!==e})),t}));var d=ne.filter((function(t){return t!==e}));re(d)}else{J([].concat((0,r.Z)(W),[e])),re((function(t){return t.push(e),t}));var s=[].concat((0,r.Z)(ne),[e]);re(s)}else J([e]);else J([e]);$(e)}(t,e)},onDoubleClick:function(e){le&&(clearTimeout(le),ue(null));var n=setTimeout((function(){!function(e,t){var n=u[e];if(!D(n)&&j){var o=[];if(o=x?[].concat((0,r.Z)(ne),(0,r.Z)(W)):[e],ne.includes(e)&&!g)return o=ne.filter((function(t){return t!==e})),re(o),void L.current([],e);re(o),L.current([n],e)}}(t)}),200);ue(n)},onKeyDown:function(e){le&&(clearTimeout(le),ue(null));var t=setTimeout((function(){!function(e){if(e.stopPropagation(),"Enter"===e.key||"NumpadEnter"===e.key){if(e.preventDefault(),!j)return;var t=[],n=W[W.length-1];t=x?[].concat((0,r.Z)(ne),(0,r.Z)(W)):[n];var o=u[t[t.length-1]];if(D(o))return;if(ne.includes(n)&&!g)return t=ne.filter((function(e){return e!==n})),re(t),void L.current([],n);re(t),L.current([o],n)}else if("Delete"===e.key||"Backspace"===e.key){if(!j)return;var i=W[W.length-1],a=u.filter((function(e,t){return W.includes(t)}));null!==F&&void 0!==F&&F.current&&(null===F||void 0===F||F.current(a,e.key,i))}}(e)}),200);ue(t)},onContextMenu:function(e){return function(e,t){e.preventDefault();var n=u[t];N&&N(n,e)}(e,t)},children:K.map((function(n,r){return(0,l.jsxs)("div",{style:{width:n.width},className:"grid-cell ".concat(U===r?"highlight-column":""," row-").concat(t," col-").concat(r),children:[(0,l.jsx)("input",{value:e[n.field],onChange:function(e){},readOnly:f,className:"".concat(W.includes(t)?"selected-row":""," ").concat(ne.includes(t)?"selected-items":"","\n                          ").concat("number"===n.type?"number":"text","\n                          ")}),(0,l.jsx)("div",{className:"resize-handle",onMouseDown:function(e){e.preventDefault(),ce(r,e)},onMouseEnter:function(e){e.preventDefault(),de(r)},onMouseLeave:function(e){e.preventDefault(),se()}})]},r)}))},t)}))]})})}),Z&&(0,l.jsx)("div",{className:"table-loading",children:(0,l.jsx)("div",{className:"loader"})})]}),(0,l.jsxs)("div",{className:"table-panel-footer",children:[(0,l.jsxs)("div",{children:["Records : ",null===u||void 0===u?void 0:u.length]}),(0,l.jsx)("div",{children:(0,l.jsx)(a.Z,{count:E.length,onChange:function(e,t){z(t-1)}})})]})]})})}))},89425:function(e,t,n){n.r(t),n.d(t,{default:function(){return $},reducer:function(){return Q}});var r=n(93433),o=n(74165),i=n(15861),a=n(29439),l=n(4942),u=n(1413),c=n(72791),d=n(27391),s=n(36151),f=n(88447),v=n(64554),h=n(13400),p=n(20890),x=n(85523),m=n(94454),g=n(68096),y=n(94925),w=n(58406),b=n(23786),C=n(67442),j=n(39709),S=n(42419),D=n(29823),Z=n(21830),N=n.n(Z),k=n(3380),I=n(91933),E=n(93263),T=n(79018),A=n(84669),R=n(71652),M=n(93862),z=n(93777),L=n(95643),F=n(16656),P=n(5519),B=n(64230),K=n(81582),q=n(54164),_=n(53329),V=n(93346),U=n(37209),O=n(42249),G=n(85545),H=n(84072),W=n(16386),J=n(80184),Y={totalDebit:"",totalCredit:"",totalBalance:"",jobAutoExp:!1,jobTransactionDate:new Date,jobType:"",search:""},Q=function(e,t){return"UPDATE_FIELD"===t.type?(0,u.Z)((0,u.Z)({},e),{},(0,l.Z)({},t.field,t.value)):e},X=[{field:"code",headerName:"Code",width:150},{field:"acctName",headerName:"Account Name",width:300},{field:"subAcctName",headerName:"Sub Account",width:170},{field:"ClientName",headerName:"Name",width:300},{field:"debit",headerName:"Debit",width:120,type:"number"},{field:"credit",headerName:"Credit",width:120,type:"number"},{field:"TC_Code",headerName:"TC",width:120},{field:"remarks",headerName:"Remarks",flex:1,width:300},{field:"vatType",headerName:"Vat Type",width:120},{field:"invoice",headerName:"Invoice",width:200},{field:"TempID",headerName:"TempId",hide:!0},{field:"IDNo",headerName:"I.D.",width:300,hide:!0},{field:"BranchCode",headerName:"BranchCode",width:300,hide:!0}];function $(){var e,t,n,l,u,Z=(0,c.useState)(null),$=(0,a.Z)(Z,2),ee=$[0],te=$[1],ne=(0,c.useState)(""),re=(0,a.Z)(ne,2),oe=re[0],ie=re[1],ae=(0,c.useRef)(null),le=(0,c.useRef)(null),ue=(0,c.useRef)(null),ce=(0,c.useRef)(null),de=(0,c.useRef)(null),se=(0,c.useRef)(null),fe=(0,c.useRef)(null),ve=(0,c.useRef)(null),he=(0,c.useRef)(null),pe=(0,c.useRef)(null),xe=(0,c.useRef)(null),me=(0,c.useRef)(null),ge=(0,c.useRef)(null),ye=(0,c.useRef)(null),we=(0,c.useRef)(""),be=(0,c.useRef)(""),Ce=(0,c.useRef)(""),je=(0,K.XT)(),Se=(0,c.useContext)(k.V),De=Se.myAxios,Ze=Se.user,Ne=(0,c.useReducer)(Q,Y),ke=(0,a.Z)(Ne,2),Ie=ke[0],Ee=ke[1],Te=(0,c.useState)(!1),Ae=(0,a.Z)(Te,2),Re=Ae[0],Me=Ae[1],ze=(0,c.useState)([]),Le=(0,a.Z)(ze,2),Fe=Le[0],Pe=Le[1],Be=(0,I.useQueryClient)(),Ke=(0,c.useRef)(null),qe=(0,c.useRef)(null),_e=(0,c.useRef)(null),Ve=(0,c.useRef)(null),Ue="add"===oe,Oe="update"===oe,Ge=""===oe,He=(0,I.useQuery)({queryKey:"general-journal-id-generator",queryFn:function(){return(e=e||(0,i.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,De.get("/task/accounting/general-journal/get-general-journal-id",{headers:{Authorization:"Bearer ".concat(null===Ze||void 0===Ze?void 0:Ze.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},refetchOnWindowFocus:!1,onSuccess:function(e){var t,n=e;Oe?Ee({type:"UPDATE_FIELD",field:"refNo",value:null!==(t=Ie.sub_refNo)&&void 0!==t?t:""}):(0,T.D)(100).then((function(){ae.current&&(ae.current.value=n.data.generateGeneralJournalID[0].general_journal_id),le.current&&(le.current.value=n.data.generateGeneralJournalID[0].general_journal_id),ue.current&&(ue.current.value=(0,W.Z)(new Date,"yyyy-MM-dd")),ge.current&&(ge.current.value="Non-VAT")}))}}),We=He.isLoading,Je=He.refetch,Ye=(0,I.useMutation)({mutationKey:"add-journal-voucher",mutationFn:function(e){return(t=t||(0,i.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,De.post("/task/accounting/general-journal/add-general-journal",t,{headers:{Authorization:"Bearer ".concat(null===Ze||void 0===Ze?void 0:Ze.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t=e;return t.data.success?(Be.invalidateQueries("search-general-journal"),function(e,t){Object.entries(t).forEach((function(t){var n=(0,a.Z)(t,2),r=n[0],o=n[1];e({type:"UPDATE_FIELD",field:r,value:o})}))}(Ee,Y),Je(),Pe([]),ie(""),N().fire({position:"center",icon:"success",title:t.data.message,timer:1500})):N().fire({position:"center",icon:"warning",title:t.data.message,timer:1500})}}),Qe=Ye.mutate,Xe=Ye.isLoading,$e=(0,I.useMutation)({mutationKey:"jobs",mutationFn:function(e){return(n=n||(0,i.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,De.post("/task/accounting/general-journal/jobs",t,{headers:{Authorization:"Bearer ".concat(null===Ze||void 0===Ze?void 0:Ze.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t=e;Pe([]),Pe(t.data.jobs),Me(!1),ie("")}}),et=$e.mutate,tt=$e.isLoading,nt=(0,I.useMutation)({mutationKey:"void-journal-voucher",mutationFn:function(e){return(l=l||(0,i.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,De.post("/task/accounting/general-journal/void-general-journal",t,{headers:{Authorization:"Bearer ".concat(null===Ze||void 0===Ze?void 0:Ze.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t=e;return t.data.success?(Be.invalidateQueries("search-general-journal"),Je(),Pe([]),ie(""),N().fire({position:"center",icon:"success",title:t.data.message,timer:1500})):N().fire({position:"center",icon:"warning",title:t.data.message,timer:1500})}}),rt=nt.mutate,ot=nt.isLoading,it=(0,I.useMutation)({mutationKey:"get-selected-search-general-journal",mutationFn:function(e){return(u=u||(0,i.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,De.post("/task/accounting/general-journal/get-selected-search-general-journal",t,{headers:{Authorization:"Bearer ".concat(null===Ze||void 0===Ze?void 0:Ze.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t=e.data.getSelectedSearchGeneralJournal,n=t[0],r=n.explanation,o=n.dateEntry,i=n.refNo;ae.current&&(ae.current.value=i),ue.current&&(ue.current.value=(0,W.Z)(new Date(o),"yyyy-MM-dd")),ce.current&&(ce.current.value=r),Pe(t)}}),at=it.mutate,lt=it.isLoading,ut=(0,E.Z)({link:{url:"/task/accounting/general-journal/search-general-journal",queryUrlName:"searchGeneralJournal"},columns:[{field:"Date_Entry",headerName:"Date",width:130},{field:"Source_No",headerName:"Ref No.",width:250},{field:"Explanation",headerName:"Explanation",flex:1}],queryKey:"search-general-journal",uniqueId:"Source_No",responseDataKey:"searchGeneralJournal",onSelected:function(e,t){at({Source_No:e[0].Source_No}),ie("update"),Pe([]),_e.current.resetTableSelected(),ft(),Et()},onCloseFunction:function(e){Ee({type:"UPDATE_FIELD",field:"search",value:e})},searchRef:Ke}),ct=ut.ModalComponent,dt=ut.openModal,st=ut.isLoading,ft=ut.closeModal,vt=(0,E.Z)({link:{url:"/task/accounting/general-journal/get-chart-account",queryUrlName:"chartAccountSearch"},columns:[{field:"Acct_Code",headerName:"Account Code",width:130},{field:"Acct_Title",headerName:"Account Title.",width:250},{field:"Short",headerName:"Short",flex:1}],queryKey:"get-chart-account",uniqueId:"Acct_Code",responseDataKey:"getChartOfAccount",onSelected:function(e,t){de.current&&(de.current.value=e[0].Acct_Code),se.current&&(se.current.value=e[0].Acct_Title),mt(),setTimeout((function(){var e;null===(e=ve.current)||void 0===e||e.focus()}),250)},searchRef:Ke}),ht=vt.ModalComponent,pt=vt.openModal,xt=vt.isLoading,mt=vt.closeModal,gt=(0,E.Z)({link:{url:"/task/accounting/search-pdc-policy-id",queryUrlName:"searchPdcPolicyIds"},columns:[{field:"Type",headerName:"Type",width:130},{field:"IDNo",headerName:"ID No.",width:200},{field:"Name",headerName:"Name",flex:1},{field:"ID",headerName:"ID",hide:!0}],queryKey:"get-policyId-ClientId-RefId",uniqueId:"IDNo",responseDataKey:"clientsId",onSelected:function(e){var t,n;ve.current&&(ve.current.value=null!==(t=e[0].Name)&&void 0!==t?t:"");fe.current&&(fe.current.value=null!==(n=e[0].ShortName)&&void 0!==n?n:"");we.current=e[0].IDNo,be.current=e[0].sub_account,Ct(),setTimeout((function(){var e;null===(e=he.current)||void 0===e||e.focus()}),200)},searchRef:qe}),yt=gt.ModalComponent,wt=gt.openModal,bt=gt.isLoading,Ct=gt.closeModal,jt=(0,E.Z)({link:{url:"/task/accounting/general-journal/get-transaction-account",queryUrlName:"transactionCodeSearch"},columns:[{field:"Code",headerName:"Code",width:130},{field:"Description",headerName:"Description",flex:1}],queryKey:"get-transaction-account",uniqueId:"Code",responseDataKey:"getTransactionAccount",onSelected:function(e){xe.current&&(xe.current.value=e[0].Code),Ce.current=e[0].Description,Nt(),setTimeout((function(){var e;null===(e=me.current)||void 0===e||e.focus()}),200)},searchRef:qe}),St=jt.ModalComponent,Dt=jt.openModal,Zt=jt.isLoading,Nt=jt.closeModal,kt=function(e){var t=e.target,n=t.name,r=t.value;Ee({type:"UPDATE_FIELD",field:n,value:r})},It=(0,c.useCallback)((function(){var e,t;return""===(null===(e=ae.current)||void 0===e?void 0:e.value)?N().fire({position:"center",icon:"warning",title:"Please provide reference number!",timer:1500}):""===(null===(t=ce.current)||void 0===t?void 0:t.value)?N().fire({position:"center",icon:"warning",title:"Please provide explanation!",timer:1500}).then((function(){(0,T.D)(300).then((function(){var e;null===(e=ce.current)||void 0===e||e.focus()}))})):""===Ie.totalDebit&&""===Ie.totalCredit||"0.00"===Ie.totalDebit&&"0.00"===Ie.totalCredit?N().fire({position:"center",icon:"warning",title:"Total Debit and Credit amount must not be zero(0), please double check the entries",timer:1500}).then((function(){(0,T.D)(300).then((function(){}))})):Ie.totalDebit!==Ie.totalCredit?N().fire({position:"center",icon:"warning",title:"Total Debit and Credit amount must be balance, please double check the entries",timer:1500}).then((function(){(0,T.D)(300).then((function(){}))})):void(Oe?(0,B.s)({isUpdate:!0,cb:function(e){var t,n,r;Qe({hasSelected:!0,refNo:null===(t=ae.current)||void 0===t?void 0:t.value,dateEntry:null===(n=ue.current)||void 0===n?void 0:n.value,explanation:null===(r=ce.current)||void 0===r?void 0:r.value,generalJournal:Fe,userCodeConfirmation:e})}}):(0,B.L)({isConfirm:function(){var e,t,n;Qe({hasSelected:!1,refNo:null===(e=ae.current)||void 0===e?void 0:e.value,dateEntry:null===(t=ue.current)||void 0===t?void 0:t.value,explanation:null===(n=ce.current)||void 0===n?void 0:n.value,generalJournal:Fe})}}))}),[Ie,Fe,Qe,Oe]);function Et(){de.current&&(de.current.value=""),se.current&&(se.current.value=""),ve.current&&(ve.current.value=""),fe.current&&(fe.current.value=""),xe.current&&(xe.current.value=""),he.current&&(he.current.value=""),pe.current&&(pe.current.value=""),me.current&&(me.current.value=""),ge.current&&(ge.current.value="Non-VAT"),ye.current&&(ye.current.value=""),Ce.current="",we.current="",be.current="",te(null)}function Tt(){var e,t,n,o,i,a,l;if(de.current&&""===de.current.value)return N().fire({position:"center",icon:"warning",title:"Code is required!",timer:1500}).then((function(){return pt(Ie.code)}));if(ve.current&&""===ve.current.value)return N().fire({position:"center",icon:"warning",title:"ID is required!",timer:1500}).then((function(){var e;return wt(null===(e=ve.current)||void 0===e?void 0:e.value)}));if(he.current&&isNaN(parseFloat(null===(e=he.current)||void 0===e?void 0:e.value.replace(/,/g,""))))return N().fire({position:"center",icon:"warning",title:"Debit is required!",timer:1500});if(pe.current&&isNaN(parseFloat(null===(t=pe.current)||void 0===t?void 0:t.value.replace(/,/g,""))))return N().fire({position:"center",icon:"warning",title:"Credit is required!",timer:1500});if(he.current&&pe.current&&0===parseFloat(null===(n=pe.current)||void 0===n?void 0:n.value.replace(/,/g,""))&&0===parseFloat(null===(o=he.current)||void 0===o?void 0:o.value.replace(/,/g,"")))return N().fire({position:"center",icon:"warning",title:"Credit and Debit must be different!",timer:1500});if(xe.current&&""===(null===(i=xe.current)||void 0===i?void 0:i.value))return N().fire({position:"center",icon:"warning",title:"TC is required!",timer:1500}).then((function(){return Dt(Ie.TC_Code)}));if(de.current&&(null===(a=de.current)||void 0===a?void 0:a.value.length)>=200)return N().fire({position:"center",icon:"warning",title:"Code is too long!",timer:1500});if(ve.current&&(null===(l=ve.current)||void 0===l?void 0:l.value.length)>=200)return N().fire({position:"center",icon:"warning",title:"Client name is too long!",timer:1500});if(xe.current&&xe.current.value.length>=200)return N().fire({position:"center",icon:"warning",title:"TC is too long!",timer:1500});if(ye.current&&ye.current.value.length>=200)return N().fire({position:"center",icon:"warning",title:"Invoice is too long!",timer:1500});function u(e){var t=e.length?e[e.length-1].TempID:"000";return(parseInt(t.toString().match(/\d+/)[0])+1).toString().padStart(3,"0")}var c=null!==ee&&ee>=0;N().fire({title:c?"Are you sure you want to update row?":"Are you sure you want to add new row?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:c?"Yes, update it!":"Yes Add it"}).then((function(e){if(e.isConfirmed&&de.current&&se.current&&fe.current&&ve.current&&he.current&&pe.current&&xe.current&&me.current&&ge.current&&ye.current){var t,n,o,i,a,l,d={code:de.current.value,acctName:se.current.value,subAcctName:fe.current.value,ClientName:ve.current.value,debit:he.current.value,credit:pe.current.value,TC_Code:xe.current.value,remarks:me.current.value,vatType:ge.current.value,invoice:ye.current.value,TempID:u(Fe),IDNo:we.current,BranchCode:be.current};if(c)"VAT"===(null===(o=ge.current)||void 0===o?void 0:o.value)&&"1.06.02"!==(null===(i=de.current)||void 0===i?void 0:i.value)?Pe((function(e){return e=e.filter((function(e,t){return t!==ee}))})):Pe((function(e){return e=e.map((function(e,t){return t===ee&&(e=d),e}))}));else"VAT"!==(null===(a=ge.current)||void 0===a?void 0:a.value)&&"1.06.02"!==(null===(l=de.current)||void 0===l?void 0:l.value)&&Pe((function(e){return[].concat((0,r.Z)(e),[d])}));var s=parseFloat(he.current.value.replace(/,/g,"")),f=parseFloat(pe.current.value.replace(/,/g,"")),v={code:de.current.value,acctName:se.current.value,subAcctName:fe.current.value,ClientName:ve.current.value,debit:he.current.value,credit:pe.current.value,TC_Code:xe.current.value,remarks:me.current.value,vatType:ge.current.value,invoice:ye.current.value,TempID:u(Fe),IDNo:we.current,BranchCode:be.current};if("VAT"===(null===(t=ge.current)||void 0===t?void 0:t.value)&&"1.06.02"!==(null===(n=de.current)||void 0===n?void 0:n.value)){var h=function(e,t,n,r){var o=[],i=0,a=0;return 0!==r?(i=r/1.12,e.credit=i.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})):(i=n/1.12,e.debit=i.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})),o.push(e),a=.12*i,t.code="1.06.02",t.acctName="Input Tax",0!==parseFloat(e.credit.replace(/,/g,""))?t.credit=a.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):t.debit=a.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),o.push(t),o}(d,v,s,f);Pe((function(e){return[].concat((0,r.Z)(e),(0,r.Z)(h))}))}Et(),_e.current.resetTableSelected(),setTimeout((function(){de.current&&de.current.focus()}),350)}}))}(0,c.useEffect)((function(){var e=function(e){(e.ctrlKey||e.metaKey)&&"s"===e.key&&(e.preventDefault(),It())};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[It]);var At=window.innerWidth-50,Rt=window.innerHeight-200;function Mt(e){return e.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}return(0,c.useEffect)((function(){if(Fe.length>0){var e=Fe.reduce((function(e,t){return e+parseFloat(t.debit.replace(/,/g,""))}),0),t=Fe.reduce((function(e,t){return e+parseFloat(t.credit.replace(/,/g,""))}),0);Ee({type:"UPDATE_FIELD",field:"totalDebit",value:Mt(e)}),Ee({type:"UPDATE_FIELD",field:"totalCredit",value:Mt(t)}),Ee({type:"UPDATE_FIELD",field:"totalBalance",value:Mt(e-t)})}else Ee({type:"UPDATE_FIELD",field:"totalDebit",value:"0.00"}),Ee({type:"UPDATE_FIELD",field:"totalCredit",value:"0.00"}),Ee({type:"UPDATE_FIELD",field:"totalBalance",value:"0.00"})}),[Fe]),(0,J.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"100%",height:"100%",flex:1,padding:"10px"},children:[(0,J.jsxs)("div",{style:{display:"flex",alignItems:"center",columnGap:"5px"},children:[(0,J.jsxs)("div",{style:{display:"flex",alignItems:"center",columnGap:"5px"},children:[st?(0,J.jsx)(j.Z,{loading:st}):(0,J.jsx)(d.Z,{label:"Search",size:"small",name:"search",value:Ie.search,onChange:kt,onKeyDown:function(e){if("Enter"===e.code||"NumpadEnter"===e.code)return e.preventDefault(),dt(e.target.value);"ArrowDown"===e.key&&(e.preventDefault(),document.querySelector(".grid-container").focus())},InputProps:{style:{height:"27px",fontSize:"14px"},className:"manok"},sx:{width:"300px",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}}),Ge&&(0,J.jsx)(s.Z,{sx:{height:"30px",fontSize:"11px"},variant:"contained",startIcon:(0,J.jsx)(S.Z,{sx:{width:15,height:15}}),id:"entry-header-save-button",onClick:function(){ie("add")},color:"primary",children:"New"}),(0,J.jsx)(j.Z,{sx:{height:"30px",fontSize:"11px"},loading:Xe,disabled:Ge,onClick:It,color:"success",variant:"contained",children:"Save"}),(Ue||Oe)&&(0,J.jsx)(j.Z,{sx:{height:"30px",fontSize:"11px"},variant:"contained",startIcon:(0,J.jsx)(D.Z,{sx:{width:15,height:15}}),color:"error",onClick:function(){N().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, cancel it!"}).then((function(e){e.isConfirmed&&(ie(""),Je(),Pe([]))}))},disabled:Ge,children:"Cancel"}),(0,J.jsx)(j.Z,{sx:{height:"30px",fontSize:"11px",background:L.Z[500],":hover":{background:L.Z[600]}},onClick:function(){(0,B.s)({isUpdate:!1,text:"Are you sure you want to void ".concat(Ie.refNo),cb:function(e){rt({refNo:Ie.refNo,dateEntry:Ie.dateEntry,userCodeConfirmation:e})}})},loading:ot,disabled:Ge,variant:"contained",startIcon:(0,J.jsx)(A.Z,{sx:{width:20,height:20}}),children:"Void"}),(0,J.jsx)(j.Z,{sx:{height:"30px",fontSize:"11px",background:F.Z[500],":hover":{background:F.Z[600]}},onClick:function(){Me((function(e){return!e}))},loading:tt,variant:"contained",startIcon:(0,J.jsx)(C.Z,{sx:{width:20,height:20}}),children:"Jobs"}),(0,J.jsx)(s.Z,{disabled:Ge,id:"basic-button","aria-haspopup":"true",onClick:function(){(0,q.flushSync)((function(){var e,t,n;localStorage.removeItem("printString"),localStorage.setItem("dataString",JSON.stringify(Fe)),localStorage.setItem("paper-width","8.5in"),localStorage.setItem("paper-height","11in"),localStorage.setItem("module","general-journal"),localStorage.setItem("state",JSON.stringify({JVNo:null===(e=ae.current)||void 0===e?void 0:e.value,JVDate:null===(t=ue.current)||void 0===t?void 0:t.value,JVExp:null===(n=ce.current)||void 0===n?void 0:n.value})),localStorage.setItem("column",JSON.stringify([{datakey:"code",header:"ACCT #",width:"40px"},{datakey:"acctName",header:"ACCOUNT TITLE",width:"130px"},{datakey:"IDNo",header:"ID NO.",width:"120px"},{datakey:"ClientName",header:"IDENTITY",width:"200px"},{datakey:"debit",header:"DEBIT",width:"65px"},{datakey:"credit",header:"CREDIT",width:"65px"}])),localStorage.setItem("title","UMIS"===(null===Ze||void 0===Ze?void 0:Ze.department)?"UPWARD MANAGEMENT INSURANCE SERVICES\n":"UPWARD CONSULTANCY SERVICES AND MANAGEMENT INC.\n")})),window.open("/dashboard/print","_blank")},sx:{height:"30px",fontSize:"11px",color:"white",backgroundColor:P.Z[600],"&:hover":{backgroundColor:P.Z[700]}},children:"Print"})]}),(0,J.jsxs)("div",{style:{fontSize:"13px",border:"1px solid #d4d4d8",width:"100%",display:"flex",columnGap:"50px",height:"30px",alignItems:"center",justifyContent:"center"},children:[(0,J.jsxs)("p",{style:{margin:0,padding:0,color:"black"},children:[(0,J.jsx)("span",{style:{fontSize:"12px"},children:"Total Rows:"})," ",(0,J.jsx)("strong",{children:Fe.length})]}),(0,J.jsxs)("p",{style:{margin:0,padding:0,color:"black"},children:[(0,J.jsx)("span",{style:{fontSize:"12px"},children:"Total Debit:"})," ",(0,J.jsx)("strong",{children:Ie.totalDebit})]}),(0,J.jsxs)("p",{style:{margin:0,padding:0,color:"black"},children:[(0,J.jsx)("span",{style:{fontSize:"12px"},children:"Total Credit:"})," ",(0,J.jsx)("strong",{children:Ie.totalCredit})]}),(0,J.jsxs)("p",{style:{margin:0,padding:0,color:"black"},children:[(0,J.jsx)("span",{style:{fontSize:"12px"},children:"Balance:"})," ",(0,J.jsx)("strong",{style:{color:parseFloat(Ie.totalBalance.replace(/,/g,""))>0?"red":"black"},children:Ie.totalBalance})]})]})]}),(0,J.jsxs)("div",{style:{position:"relative",width:"100%",height:"auto",display:"flex",marginTop:"10px",gap:"10px",padding:"5px"},children:[We?(0,J.jsx)(j.Z,{loading:We}):(0,J.jsx)(U.oi,{label:{title:"Ref. No. : ",style:{fontSize:"12px",fontWeight:"bold",width:"70px"}},input:{disabled:Ge||Oe,type:"text",style:{width:"190px"},readOnly:!0,onKeyDown:function(e){var t;"NumpadEnter"!==e.code&&"Enter"!==e.code||(null===(t=ue.current)||void 0===t||t.focus())}},inputRef:ae}),(0,J.jsx)(U.oi,{label:{title:"Date : ",style:{fontSize:"12px",fontWeight:"bold",width:"50px"}},input:{disabled:Ge,type:"date",style:{width:"190px"},onKeyDown:function(e){var t;"NumpadEnter"!==e.code&&"Enter"!==e.code||(null===(t=ce.current)||void 0===t||t.focus())}},inputRef:ue}),(0,J.jsx)(U.oi,{label:{title:"Explanation : ",style:{fontSize:"12px",fontWeight:"bold",width:"90px"}},input:{disabled:Ge,type:"text",style:{width:"600px"},onKeyDown:function(e){var t;"NumpadEnter"!==e.code&&"Enter"!==e.code||(null===(t=de.current)||void 0===t||t.focus())}},inputRef:ce})]}),(0,J.jsxs)("fieldset",{style:{border:"1px solid #cbd5e1",borderRadius:"5px",position:"relative",width:"100%",height:"auto",marginTop:"10px",padding:"15px"},children:[(0,J.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[xt?(0,J.jsx)(j.Z,{loading:xt}):(0,J.jsx)(U.oi,{label:{title:"Code : ",style:{fontSize:"12px",fontWeight:"bold",width:"70px"}},input:{disabled:Ge,type:"text",style:{width:"190px"},onKeyDown:function(e){"Enter"!==e.key&&"NumpadEnter"!==e.key||(e.preventDefault(),de.current&&pt(de.current.value))}},inputRef:de,icon:(0,J.jsx)(O.Z,{sx:{fontSize:"18px",color:Ge?"gray":"black"}}),onIconClick:function(e){e.preventDefault(),de.current&&pt(de.current.value)},disableIcon:Ge}),(0,J.jsx)(U.oi,{label:{title:"Account Name : ",style:{fontSize:"12px",fontWeight:"bold",width:"100px"}},input:{disabled:Ge,type:"text",style:{width:"190px"},readOnly:!0,onKeyDown:function(e){var t;"NumpadEnter"!==e.code&&"Enter"!==e.code||(null===(t=fe.current)||void 0===t||t.focus())}},inputRef:se}),(0,J.jsx)(U.oi,{label:{title:"Sub Account : ",style:{fontSize:"12px",fontWeight:"bold",width:"100px"}},input:{disabled:Ge,type:"text",style:{width:"190px"},readOnly:!0,onKeyDown:function(e){var t;"NumpadEnter"!==e.code&&"Enter"!==e.code||(null===(t=ve.current)||void 0===t||t.focus())}},inputRef:fe}),bt?(0,J.jsx)(j.Z,{loading:bt}):(0,J.jsx)(U.oi,{label:{title:"I.D : ",style:{fontSize:"12px",fontWeight:"bold",width:"70px"}},input:{disabled:Ge,type:"text",style:{width:"300px"},onKeyDown:function(e){"Enter"!==e.key&&"NumpadEnter"!==e.key||(e.preventDefault(),ve.current&&wt(ve.current.value))}},inputRef:ve,icon:(0,J.jsx)(G.Z,{sx:{fontSize:"18px",color:Ge?"gray":"black"}}),onIconClick:function(e){e.preventDefault(),ve.current&&wt(ve.current.value)},disableIcon:Ge})]}),(0,J.jsxs)("div",{style:{display:"flex",gap:"10px",marginTop:"10px"},children:[(0,J.jsx)(U.iA,{label:{title:"Debit : ",style:{fontSize:"12px",fontWeight:"bold",width:"70px"}},input:{disabled:Ge,type:"text",style:{width:"190px"},onKeyDown:function(e){var t;"NumpadEnter"!==e.code&&"Enter"!==e.code||(null===(t=pe.current)||void 0===t||t.focus())}},inputRef:he}),(0,J.jsx)(U.iA,{label:{title:"Credit : ",style:{fontSize:"12px",fontWeight:"bold",width:"100px"}},input:{disabled:Ge,type:"text",style:{width:"190px"},onKeyDown:function(e){var t;"NumpadEnter"!==e.code&&"Enter"!==e.code||(null===(t=xe.current)||void 0===t||t.focus())}},inputRef:pe}),Zt?(0,J.jsx)(j.Z,{loading:Zt}):(0,J.jsx)(U.oi,{label:{title:"TC : ",style:{fontSize:"12px",fontWeight:"bold",width:"100px"}},input:{disabled:Ge,type:"text",style:{width:"190px"},onKeyDown:function(e){"Enter"!==e.key&&"NumpadEnter"!==e.key||(e.preventDefault(),xe.current&&Dt(xe.current.value))}},inputRef:xe,icon:(0,J.jsx)(H.Z,{sx:{fontSize:"18px",color:Ge?"gray":"black"}}),onIconClick:function(e){e.preventDefault(),xe.current&&Dt(xe.current.value)},disableIcon:Ge}),(0,J.jsx)(U.oi,{label:{title:"Remarks : ",style:{fontSize:"12px",fontWeight:"bold",width:"70px"}},input:{disabled:Ge,type:"text",style:{width:"300px"},onKeyDown:function(e){var t;"NumpadEnter"!==e.code&&"Enter"!==e.code||(null===(t=ge.current)||void 0===t||t.focus())}},inputRef:me})]}),(0,J.jsxs)("div",{style:{display:"flex",gap:"10px",marginTop:"10px"},children:[(0,J.jsx)(U.lq,{label:{title:"Vat Type : ",style:{fontSize:"12px",fontWeight:"bold",width:"70px"}},selectRef:ge,select:{disabled:Ge,style:{width:"190px",height:"22px"},defaultValue:"Non-VAT",onKeyDown:function(e){var t;"NumpadEnter"!==e.code&&"Enter"!==e.code||(e.preventDefault(),null===(t=ye.current)||void 0===t||t.focus())}},datasource:[{key:"VAT"},{key:"Non-VAT"}],values:"key",display:"key"}),(0,J.jsx)(U.oi,{label:{title:"OR/Invoice No. : ",style:{fontSize:"12px",fontWeight:"bold",width:"100px"}},input:{disabled:Ge,type:"text",style:{width:"300px"},onKeyDown:function(e){"NumpadEnter"!==e.code&&"Enter"!==e.code||(e.preventDefault(),Tt())}},inputRef:ye}),(0,J.jsx)(s.Z,{disabled:Ge,sx:{height:"22px",fontSize:"11px"},variant:"contained",startIcon:(0,J.jsx)(_.Z,{sx:{fontSize:"12px"}}),onClick:function(){Tt()},color:"primary",children:"Save Row"})]})]}),(0,J.jsx)("div",{ref:Ve,className:je,style:{marginTop:"10px",width:"100%",position:"relative",flex:1},children:(0,J.jsx)(V.r,{isLoading:Xe||lt||tt,ref:_e,rows:Fe,column:X,width:At,height:Rt,dataReadOnly:!0,onSelectionChange:function(e,t){var n=e[0];e.length>0?(we.current=n.IDNo,be.current=n.BranchCode,ve.current&&(ve.current.value=n.ClientName),xe.current&&(xe.current.value=n.TC_Code),se.current&&(se.current.value=n.acctName),de.current&&(de.current.value=n.code),pe.current&&(pe.current.value=n.credit),he.current&&(he.current.value=n.debit),ye.current&&(ye.current.value=n.invoice),me.current&&(me.current.value=n.remarks),fe.current&&(fe.current.value=n.subAcctName),ge.current&&(ge.current.value=n.vatType),te(t)):(te(null),Et())},onKeyDown:function(e,t,n){"Delete"!==t&&"Backspace"!==t||N().fire({title:"Are you sure you want to delete?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(e){if(e.isConfirmed)return Pe((function(e){return e.filter((function(e,t){return t!==n}))}))}))},inputsearchselector:".manok"})}),(0,J.jsx)(f.Z,{open:Re,onClose:function(){return Me(!1)},children:(0,J.jsxs)(v.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:470,bgcolor:"background.paper",p:4},children:[(0,J.jsx)(h.Z,{style:{position:"absolute",top:"10px",right:"10px"},"aria-label":"search-client",onClick:function(){return Me(!1)},children:(0,J.jsx)(D.Z,{})}),(0,J.jsx)(p.Z,{id:"modal-modal-title",variant:"h6",component:"h2",sx:{marginBottom:"20px"},children:"Jobs"}),(0,J.jsxs)("div",{style:{width:"400px"},children:[(0,J.jsxs)("div",{style:{width:"100%",display:"flex",marginBottom:"10px",justifyContent:"space-between",alignItems:"center"},children:[(0,J.jsx)(R._,{dateAdapter:M.H,children:(0,J.jsx)(z.M,{sx:{width:"200px",".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},slotProps:{textField:{size:"small",name:"",InputLabelProps:{style:{fontSize:"14px"}},InputProps:{style:{height:"27px",fontSize:"14px"}}}},label:"Transaction Date: ",views:["month","year"],value:Ie.jobTransactionDate,onChange:function(e){Ee({type:"UPDATE_FIELD",field:"jobTransactionDate",value:e})}})}),(0,J.jsx)(x.Z,{sx:{height:"30px","& .MuiTypography-root":{fontSize:"14px"}},control:(0,J.jsx)(m.Z,{size:"small",checked:Ie.jobAutoExp,onChange:function(e){Ee({type:"UPDATE_FIELD",field:"jobAutoExp",value:!Ie.jobAutoExp})}}),label:"Auto Explanation"})]}),(0,J.jsxs)(g.Z,{fullWidth:!0,size:"small",variant:"outlined",sx:{".MuiFormLabel-root":{fontSize:"14px",background:"white",zIndex:99,padding:"0 3px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},children:[(0,J.jsx)(y.Z,{id:"label-selection-job-type",children:"Type of Job"}),(0,J.jsxs)(w.Z,{labelId:"label-selection-job-type",value:Ie.jobType,name:"jobType",onChange:kt,autoWidth:!0,sx:{height:"27px",fontSize:"14px"},children:[(0,J.jsx)(b.Z,{value:"",children:" "}),(0,J.jsx)(b.Z,{value:"0",children:"Reversal of Accrued Interest "}),(0,J.jsxs)(b.Z,{value:"1",children:[" ","Income Recognition & Accrual of Interest"]}),(0,J.jsx)(b.Z,{value:"2",children:"Penalty Charges"}),(0,J.jsx)(b.Z,{value:"3",children:"Penalty Income"}),(0,J.jsx)(b.Z,{value:"4",children:"RPT Transaction (NIL-HN)"}),(0,J.jsx)(b.Z,{value:"5",children:"RPT Transaction (AMIFIN)"}),(0,J.jsx)(b.Z,{value:"6",children:"RPT Income"}),(0,J.jsx)(b.Z,{value:"7",children:"Monthly Accrual Expenses"}),(0,J.jsx)(b.Z,{value:"8",children:"Monthly Accrual Income"}),(0,J.jsx)(b.Z,{value:"9",children:"Production (Milestone Guarantee)"}),(0,J.jsx)(b.Z,{value:"10",children:"Production (Liberty Insurance Co.)"}),(0,J.jsx)(b.Z,{value:"11",children:"Production (Federal Phoenix)"})]})]})]}),(0,J.jsxs)("div",{style:{display:"flex",columnGap:"30px",alignItems:"flex-end",marginTop:"20px"},children:[(0,J.jsx)(j.Z,{loading:tt,color:"success",variant:"contained",onClick:function(){return et(Ie)},children:"Create Job"}),(0,J.jsx)(s.Z,{color:"error",variant:"contained",onClick:function(){return Me(!1)},children:"Cancel"})]})]})}),ht,yt,St,ct]})}},93263:function(e,t,n){var r,o=n(29439),i=n(74165),a=n(15861),l=n(72791),u=n(91933),c=n(3380),d=n(81582),s=n(54164),f=n(80184);function v(e,t,n){return(r=r||(0,a.Z)((0,i.Z)().mark((function e(t,n,r){var o,a=arguments;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=a.length>3&&void 0!==a[3]?a[3]:"",e.abrupt("return",t.get("".concat(null===r||void 0===r?void 0:r.url,"?").concat(null===r||void 0===r?void 0:r.queryUrlName,"=").concat(o),{headers:{Authorization:"Bearer ".concat(null===n||void 0===n?void 0:n.accessToken)}}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t.Z=function(e){var t,n,r=e.link,h=e.uniqueId,p=e.queryKey,x=e.responseDataKey,m=e.columns,g=e.onSelected,y=void 0===g?function(){}:g,w=e.onRemoveSelected,b=void 0===w?function(){}:w,C=e.onSuccess,j=void 0===C?function(){}:C,S=e.searchRef,D=e.onCellKeyDown,Z=e.onCloseFunction,N=void 0===Z?function(){}:Z,k=e.CustomizeAxios,I=void 0===k?v:k,E=e.isRowSelectable,T=e.getCellClassName,A=(0,l.useContext)(c.V),R=A.myAxios,M=A.user,z=(0,l.useState)(!1),L=(0,o.Z)(z,2),F=L[0],P=L[1],B=(0,l.useState)([]),K=(0,o.Z)(B,2),q=K[0],_=K[1];function V(){return(t=t||(0,a.Z)((0,i.Z)().mark((function e(){var t,n=arguments;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:"",e.next=3,I(R,M,r,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var U=(0,u.useQuery)({queryKey:p,queryFn:function(){return(n=n||(0,a.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t=e;_(t.data[x]),j(t)},refetchOnWindowFocus:!1}),O=U.isLoading,G=U.refetch;return{show:F,rows:q,isLoading:O,openModal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";(0,s.flushSync)((function(){P(!0)})),null!==S&&void 0!==S&&S.current&&(S.current.value=e,V(e).then((function(e){if(null===e||void 0===e||!e.data.success)return alert("Error : ".concat(null===e||void 0===e?void 0:e.data.message));_(e.data[x]),null!==S&&void 0!==S&&S.current&&S.current.focus()})))},closeModal:function(){var e;(P(!1),N)&&N(null===S||void 0===S||null===(e=S.current)||void 0===e?void 0:e.value)},ModalComponent:(0,f.jsx)(d.ZP,{getCellClassName:T,searchRef:S,showModal:F,onCloseModal:function(){var e;(P(!1),N)&&N(null===S||void 0===S||null===(e=S.current)||void 0===e?void 0:e.value)},onClickCloseIcon:function(){var e;(P(!1),N)&&N(null===S||void 0===S||null===(e=S.current)||void 0===e?void 0:e.value)},searchOnChange:function(e){},onSearchKeyEnter:function(e){V(e).then((function(e){if(null===e||void 0===e||!e.data.success)return alert("Error : ".concat(null===e||void 0===e?void 0:e.data.message));_(e.data[x])}))},onCellKeyDown:D,height:300,isLoading:O,queryKey:p,columns:m,onSelectionChange:function(e,t){if(e.length<=0)return b(t);var n=new Set(e),r=t.filter((function(e){return n.has(e[h].toString())}));r.length<=0||y(r,t)},id:h,rows:q,setRows:_,isRowSelectable:E}),refetch:G}}},64230:function(e,t,n){n.d(t,{L:function(){return u},s:function(){return l}});var r=n(74165),o=n(15861),i=n(21830),a=n.n(i);function l(e){var t;a().fire({title:"Are you sure!",html:null!==e&&void 0!==e&&e.text?null===e||void 0===e?void 0:e.text:e.isUpdate?"Are you sure you want to make this change?":"Are you sure you want to delete this?",icon:"warning",input:"text",inputAttributes:{autocapitalize:"off"},showCancelButton:!0,confirmButtonText:"Save",confirmButtonColor:"green",showLoaderOnConfirm:!0,preConfirm:function(n){return(t=t||(0,o.Z)((0,r.Z)().mark((function t(n){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{e.cb(n)}catch(r){a().showValidationMessage("\n            Request failed: ".concat(r,"\n          "))}case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)},allowOutsideClick:function(){return!a().isLoading()}}).then((function(t){if(t.isConfirmed&&e.isConfirm)return e.isConfirm();e.isDeclined&&e.isDeclined()}))}function u(e){a().fire({title:"Are you sure?",text:null!==e&&void 0!==e&&e.text?null===e||void 0===e?void 0:e.text:"Do you want to proceed with saving?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, save it!"}).then((function(t){if(t.isConfirmed&&e.isConfirm)return e.isConfirm();e.isDeclined&&e.isDeclined()}))}},84072:function(e,t,n){var r=n(64836);t.Z=void 0;var o=r(n(45649)),i=n(80184),a=(0,o.default)((0,i.jsx)("path",{d:"M21 18v1c0 1.1-.9 2-2 2H5c-1.11 0-2-.9-2-2V5c0-1.1.89-2 2-2h14c1.1 0 2 .9 2 2v1h-9c-1.11 0-2 .9-2 2v8c0 1.1.89 2 2 2h9zm-9-2h10V8H12v8zm4-2.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"}),"AccountBalanceWallet");t.Z=a},42419:function(e,t,n){var r=n(64836);t.Z=void 0;var o=r(n(45649)),i=n(80184),a=(0,o.default)((0,i.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");t.Z=a},67442:function(e,t,n){var r=n(64836);t.Z=void 0;var o=r(n(45649)),i=n(80184),a=(0,o.default)((0,i.jsx)("path",{d:"M20 6h-3V4c0-1.11-.89-2-2-2H9c-1.11 0-2 .89-2 2v2H4c-1.11 0-2 .89-2 2v11c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zM9 4h6v2H9V4zm11 15H4v-2h16v2zm0-5H4V8h3v2h2V8h6v2h2V8h3v6z"}),"CardTravel");t.Z=a},84669:function(e,t,n){var r=n(64836);t.Z=void 0;var o=r(n(45649)),i=n(80184),a=(0,o.default)((0,i.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8 0-1.85.63-3.55 1.69-4.9L16.9 18.31C15.55 19.37 13.85 20 12 20zm6.31-3.1L7.1 5.69C8.45 4.63 10.15 4 12 4c4.42 0 8 3.58 8 8 0 1.85-.63 3.55-1.69 4.9z"}),"NotInterested");t.Z=a},53329:function(e,t,n){var r=n(64836);t.Z=void 0;var o=r(n(45649)),i=n(80184),a=(0,o.default)((0,i.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"}),"Save");t.Z=a},16656:function(e,t){t.Z={50:"#efebe9",100:"#d7ccc8",200:"#bcaaa4",300:"#a1887f",400:"#8d6e63",500:"#795548",600:"#6d4c41",700:"#5d4037",800:"#4e342e",900:"#3e2723",A100:"#d7ccc8",A200:"#bcaaa4",A400:"#8d6e63",A700:"#5d4037"}},95643:function(e,t){t.Z={50:"#fbe9e7",100:"#ffccbc",200:"#ffab91",300:"#ff8a65",400:"#ff7043",500:"#ff5722",600:"#f4511e",700:"#e64a19",800:"#d84315",900:"#bf360c",A100:"#ff9e80",A200:"#ff6e40",A400:"#ff3d00",A700:"#dd2c00"}}}]);
//# sourceMappingURL=9425.2e8bbc3d.chunk.js.map