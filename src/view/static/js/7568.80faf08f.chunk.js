(self.webpackChunkupward=self.webpackChunkupward||[]).push([[7568,2074],{58610:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return T}});var n=i(4942),a=i(1413),r=i(74165),d=i(15861),o=i(29439),s=i(72791),l=i(64554),u=i(48550),c=i(36151),f=i(77196),h=i(63466),m=i(13400),p=i(3380),x=i(91933),w=i(21830),y=i.n(w),b=i(48749),v=i(68096),N=i(94925),g=i(58406),_=i(23786),Z=i(39709),A=i(8185),S=i(16395),k=i(89767),C=i(86753),F=i(42419),j=i(27247),D=i(29823),I=i(53329),z=i(4378),L=i(64230),B=i(80184),M={description:"",remarks:"",fullname:"",search:"",mode:"",entry_fixed_assets_id:"",sub_account:"c02534ee-6d7e-40dd-a22b-bc9024fa12ca"};function T(){var e,t,i,w,T,E,q,R=(0,s.useRef)(null),P=(0,s.useState)([]),U=(0,o.Z)(P,2),K=U[0],V=U[1],W=(0,s.useReducer)(b.I6,M),G=(0,o.Z)(W,2),O=G[0],Q=G[1],Y=(0,s.useContext)(p.V),J=Y.myAxios,X=Y.user,H=(0,x.useQueryClient)(),$=(0,s.useRef)(null),ee="entry_fixed_assets_id",te=(0,x.useQuery)({queryKey:"sub-accounts",queryFn:function(){return(e=e||(0,d.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J.get("/reference/sub-account",{headers:{Authorization:"Bearer ".concat(null===X||void 0===X?void 0:X.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t,i;Q({type:"UPDATE_FIELD",field:"sub_account",value:null===(t=e.data)||void 0===t||null===(i=t.defaultValue[0])||void 0===i?void 0:i.Sub_Acct})}}),ie=te.data,ne=te.isLoading,ae=te.refetch,re=(0,x.useQuery)({queryKey:"fixed-generate-id",queryFn:function(){return(t=t||(0,d.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J.post("/reference/id-entry-generate-id",{sign:"FA",type:"entry fixed assets"},{headers:{Authorization:"Bearer ".concat(null===X||void 0===X?void 0:X.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},refetchOnWindowFocus:!1,onSuccess:function(e){ve({target:{value:e.data.generateID,name:"entry_fixed_assets_id"}})}}),de=re.isLoading,oe=re.refetch,se=(0,x.useQuery)({queryKey:ee,queryFn:function(){return(i=i||(0,d.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J.get("/reference/search-entry?entrySearch=".concat(O.search,"&entry=Fixed Assets"),{headers:{Authorization:"Bearer ".concat(null===X||void 0===X?void 0:X.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){V(null===e||void 0===e?void 0:e.data.entry)}}),le=se.isLoading,ue=se.refetch,ce=(0,x.useMutation)({mutationKey:ee,mutationFn:function(e){return(w=w||(0,d.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J.post("/reference/id-entry-fixed-assets",t,{headers:{Authorization:"Bearer ".concat(null===X||void 0===X?void 0:X.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:Ne}),fe=ce.mutate,he=ce.isLoading,me=(0,x.useMutation)({mutationKey:ee,mutationFn:function(e){return(T=T||(0,d.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J.post("/reference/entry-update?entry=Fixed Assets",t,{headers:{Authorization:"Bearer ".concat(null===X||void 0===X?void 0:X.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:Ne}),pe=me.mutate,xe=me.isLoading,we=(0,x.useMutation)({mutationKey:ee,mutationFn:function(e){return(E=E||(0,d.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J.post("/reference/entry-delete?entry=Fixed Assets",t,{headers:{Authorization:"Bearer ".concat(null===X||void 0===X?void 0:X.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:Ne}),ye=we.mutate,be=we.isLoading,ve=function(e){var t=e.target,i=t.name,n=t.value;if(["fullname","description","remarks"].includes(i))return Q({type:"UPDATE_FIELD",field:i,value:n.toUpperCase()});Q({type:"UPDATE_FIELD",field:i,value:n})};function Ne(e){if(e.data.success)return H.invalidateQueries(ee),_e(),y().fire({position:"center",icon:"success",title:e.data.message,showConfirmButton:!1,timer:1500});y().fire({position:"center",icon:"error",title:e.data.message,showConfirmButton:!1,timer:1500})}function ge(e){return""===O.fullname?y().fire({position:"center",icon:"error",title:"Fullname is required!",showConfirmButton:!1,timer:1500}):""===O.description?y().fire({position:"center",icon:"error",title:"Description is required!",showConfirmButton:!1,timer:1500}):O.fullname.length>=200?y().fire({position:"center",icon:"error",title:"Fullname is too Long!",showConfirmButton:!1,timer:1500}):(e.preventDefault(),void("edit"===O.mode?(0,L.s)({isUpdate:!0,cb:function(e){pe((0,a.Z)((0,a.Z)({},O),{},{userCodeConfirmation:e}))}}):(0,L.L)({isConfirm:function(){fe(O)}})))}function _e(){var e;(0,A.setNewStateValue)(Q,M),null===(e=$.current)||void 0===e||e.removeSelection(),(0,S.wait)(250).then((function(){ue(),oe(),ae()}))}return(0,B.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"100%",height:"100%",flex:1},children:[(0,B.jsxs)(l.Z,{sx:function(e){return(0,n.Z)({display:"flex",alignItems:"center",columnGap:"20px"},e.breakpoints.down("sm"),{flexDirection:"column",alignItems:"flex-start",flex:1,marginBottom:"15px"})},children:[(0,B.jsx)("div",{style:{marginTop:"10px",marginBottom:"12px",width:"100%"},children:(0,B.jsx)(u.Z,{label:"Search",fullWidth:!0,size:"small",type:"text",value:O.search,name:"search",onChange:ve,onKeyDown:function(e){if("Enter"===e.code||"NumpadEnter"===e.code)return e.preventDefault(),ue()},InputProps:{style:{height:"27px",fontSize:"14px"}},sx:{width:"500px",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}})}),(0,B.jsx)("div",{style:{display:"flex",alignItems:"center",columnGap:"20px"},children:(0,B.jsxs)("div",{style:{display:"flex",alignItems:"center",columnGap:"5px"},children:[""===O.mode&&(0,B.jsx)(c.Z,{variant:"contained",startIcon:(0,B.jsx)(F.Z,{}),id:"entry-header-save-button",sx:{height:"30px",fontSize:"11px"},onClick:function(){oe(),ve({target:{value:"add",name:"mode"}})},children:"New"}),(0,B.jsx)(Z.Z,{id:"save-entry-header",color:"primary",variant:"contained",type:"submit",sx:{height:"30px",fontSize:"11px"},onClick:ge,startIcon:(0,B.jsx)(I.Z,{}),disabled:""===O.mode,loading:he||xe,children:"Save"}),""!==O.mode&&(0,B.jsx)(c.Z,{sx:{height:"30px",fontSize:"11px"},variant:"contained",startIcon:(0,B.jsx)(D.Z,{}),color:"error",onClick:function(){y().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, cancel it!"}).then((function(e){e.isConfirmed&&_e()}))},children:"Cancel"}),(0,B.jsx)(Z.Z,{id:"save-entry-header",variant:"contained",sx:{height:"30px",fontSize:"11px",backgroundColor:z.Z[500],"&:hover":{backgroundColor:z.Z[600]}},loading:be,startIcon:(0,B.jsx)(j.Z,{}),disabled:"edit"!==O.mode,onClick:function(){(0,L.s)({isUpdate:!1,cb:function(e){ye({id:O.entry_fixed_assets_id,userCodeConfirmation:e})}})},children:"Delete"})]})})]}),(0,B.jsx)("form",{onKeyDown:function(e){"Enter"!==e.code&&"NumpadEnter"!==e.code||!["description","remarks","fullname","entry_fixed_assets_id"].includes(e.target.name)||(e.preventDefault(),ge(e))},onSubmit:ge,id:"Form-Fixed Assets",children:(0,B.jsxs)(l.Z,{sx:function(e){var t;return t={display:"flex",columnGap:"15px",flexDirection:"row"},(0,n.Z)(t,e.breakpoints.down("md"),{flexDirection:"column",rowGap:"10px"}),(0,n.Z)(t,"marginBottom","10px"),t},children:[de?(0,B.jsx)(Z.Z,{loading:de}):(0,B.jsxs)(v.Z,{variant:"outlined",size:"small",disabled:""===O.mode,sx:{width:"150px",".MuiFormLabel-root":{fontSize:"14px",background:"white",zIndex:99,padding:"0 3px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},children:[(0,B.jsx)(N.Z,{htmlFor:"fixed_assets-auto-generate-id-field",children:"Fixed Assets ID"}),(0,B.jsx)(f.Z,{sx:{height:"27px",fontSize:"14px"},disabled:""===O.mode,fullWidth:!0,label:"Fixed Assets ID",name:"entry_fixed_assets_id",value:O.entry_fixed_assets_id,onChange:ve,readOnly:!0,id:"fixed_assets-auto-generate-id-field",endAdornment:(0,B.jsx)(h.Z,{position:"end",children:(0,B.jsx)(m.Z,{disabled:""===O.mode,"aria-label":"search-client",color:"secondary",edge:"end",onClick:function(){oe()},children:(0,B.jsx)(C.Z,{})})})})]}),(0,B.jsx)(u.Z,{label:"Full Name",name:"fullname",minRows:10,fullWidth:!0,style:{marginBottom:"10px"},size:"small",required:!0,value:O.fullname,onChange:ve,disabled:""===O.mode,InputProps:{style:{height:"27px",fontSize:"14px"}},sx:{flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}}),(0,B.jsx)(u.Z,{label:"Description",name:"description",minRows:10,fullWidth:!0,style:{marginBottom:"10px"},size:"small",required:!0,value:O.description,onChange:ve,disabled:""===O.mode,InputProps:{style:{height:"27px",fontSize:"14px"}},sx:{flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}}),(0,B.jsx)(u.Z,{label:"Remarks",name:"remarks",minRows:10,fullWidth:!0,style:{marginBottom:"10px"},size:"small",value:O.remarks,onChange:ve,disabled:""===O.mode,InputProps:{style:{height:"27px",fontSize:"14px"}},sx:{flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}}),ne?(0,B.jsx)(Z.Z,{loading:ne}):(0,B.jsxs)(v.Z,{fullWidth:!0,required:!0,size:"small",sx:{flex:1,".MuiFormLabel-root":{fontSize:"14px",background:"white",zIndex:99,padding:"0 3px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},children:[(0,B.jsx)(N.Z,{id:"Sub Account",children:"Sub Account"}),(0,B.jsx)(g.Z,{sx:{height:"27px",fontSize:"14px"},disabled:""===O.mode,value:O.sub_account,onChange:function(e){Q({type:"UPDATE_FIELD",field:"sub_account",value:e.target.value})},labelId:"Sub Account",label:"Sub Account",name:"sub_account",children:null===ie||void 0===ie?void 0:ie.data.subAccount.map((function(e){return(0,B.jsx)(_.Z,{value:e.Sub_Acct,children:e.NewShortName},e.Sub_Acct)}))})]})]})}),(0,B.jsx)("div",{ref:R,style:{marginTop:"10px",width:"100%",position:"relative",flex:1},children:(0,B.jsx)(l.Z,{style:{height:"".concat(null===(q=R.current)||void 0===q?void 0:q.getBoundingClientRect().height,"px"),width:"100%",overflowX:"scroll",position:"absolute"},children:(0,B.jsx)(k.Z,{ref:$,isLoading:le||be||xe||he,columns:b.fJ,rows:K,table_id:"entry_fixed_assets_id",isSingleSelection:!0,isRowFreeze:!1,dataSelection:function(e,t,i){var n=t.filter((function(t){return t.entry_fixed_assets_id===e[0]}))[0];if(void 0===n||n.length<=0)return(0,A.setNewStateValue)(Q,M),void ve({target:{value:"",name:"mode"}});ve({target:{value:"edit",name:"mode"}}),(0,A.setNewStateValue)(Q,n),"Delete"!==i&&"Backspace"!==i||(0,L.s)({isUpdate:!1,cb:function(e){ye({id:n.entry_fixed_assets_id,userCodeConfirmation:e})}})}})})})]})}},48749:function(e,t,i){"use strict";i.d(t,{GY:function(){return l},I6:function(){return c},fJ:function(){return s},kb:function(){return d},m5:function(){return u},oy:function(){return r},y:function(){return o}});var n=i(4942),a=i(1413),r=[{field:"entry_client_id",headerName:"ID",width:130},{field:"company",headerName:"Company",width:200},{field:"firstname",headerName:"First Name",width:200},{field:"lastname",headerName:"Last Name",width:200},{field:"middlename",headerName:"Middle Name",width:200},{field:"email",headerName:"Email",width:200},{field:"mobile",headerName:"Mobile",width:200},{field:"sale_officer",headerName:"Sale Officer",width:200},{field:"NewShortName",headerName:"Sub Account",width:130},{field:"option",headerName:"Option",width:130},{field:"createdAt",headerName:"Created At",width:130},{field:"address",headerName:"Address",width:500}],d=[{field:"entry_employee_id",headerName:"ID",width:130},{field:"firstname",headerName:"First Name",width:200},{field:"lastname",headerName:"Last Name",width:200},{field:"middlename",headerName:"Middle Name",width:200},{field:"NewShortName",headerName:"Sub Account",width:130},{field:"createdAt",headerName:"Created At",width:130},{field:"address",headerName:"Address",width:500}],o=[{field:"entry_agent_id",headerName:"ID",width:130},{field:"firstname",headerName:"First Name",width:200},{field:"lastname",headerName:"Last Name",width:200},{field:"middlename",headerName:"Middle Name",width:200},{field:"email",headerName:"Email",width:250},{field:"mobile",headerName:"Mobile",width:130},{field:"telephone",headerName:"Telephone",width:130},{field:"createdAt",headerName:"Created At",width:130},{field:"address",headerName:"Address",width:500},{field:"sub_account",headerName:"sub_account",width:500,hide:!0}],s=[{field:"entry_fixed_assets_id",headerName:"ID",width:130},{field:"fullname",headerName:"Full Name",width:250},{field:"description",headerName:"Description",flex:1},{field:"remarks",headerName:"Remarks",flex:1},{field:"createdAt",headerName:"Created At",width:200}],l=[{field:"entry_supplier_id",headerName:"ID",width:130},{field:"company",headerName:"Company",width:200},{field:"firstname",headerName:"First Name",width:200},{field:"lastname",headerName:"Last Name",width:200},{field:"middlename",headerName:"Middle Name",width:200},{field:"email",headerName:"Email",width:200},{field:"mobile",headerName:"Mobile",width:200},{field:"telephone",headerName:"Telephone",width:200},{field:"tin_no",headerName:"TIN NO.",width:200},{field:"option",headerName:"Option",width:200},{field:"VAT_Type",headerName:"Vat Type",width:200},{field:"createdAt",headerName:"Created At",width:200},{field:"address",headerName:"Address",width:500}],u=[{field:"entry_others_id",headerName:"ID",width:130},{field:"description",headerName:"Description",flex:1},{field:"remarks",headerName:"Remarks",flex:1},{field:"createdAt",headerName:"Created At",width:200}],c=function(e,t){return"UPDATE_FIELD"===t.type?(0,a.Z)((0,a.Z)({},e),{},(0,n.Z)({},t.field,t.value)):e}},4378:function(e,t){"use strict";t.Z={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162"}},24654:function(){}}]);
//# sourceMappingURL=7568.80faf08f.chunk.js.map