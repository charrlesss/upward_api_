"use strict";(self.webpackChunkupward=self.webpackChunkupward||[]).push([[993,2074],{19522:function(e,t,n){n.r(t),n.d(t,{default:function(){return T}});var i=n(93433),r=n(4942),a=n(1413),o=n(74165),d=n(15861),s=n(29439),l=n(72791),u=n(64554),c=n(48550),m=n(36151),h=n(68096),f=n(77196),p=n(63466),x=n(13400),y=n(3380),w=n(91933),b=n(94925),g=n(23786),N=n(58406),v=n(21830),Z=n.n(v),_=n(48749),S=n(8185),C=n(79018),A=n(89767),k=n(86753),L=n(39709),F=n(42419),j=n(27247),z=n(29823),D=n(53329),I=n(4378),M=n(64230),B=n(80184),E={firstname:"",lastname:"",middlename:"",address:"",sub_account:"",search:"",mode:"",entry_employee_id:""};function T(){var e,t,n,v,T,q,P,K=(0,l.useRef)(null),R=(0,l.useState)([]),U=(0,s.Z)(R,2),V=U[0],G=U[1],O=(0,l.useReducer)(_.I6,E),W=(0,s.Z)(O,2),Q=W[0],Y=W[1],J=(0,l.useContext)(y.V),X=J.myAxios,H=J.user,$="entry_employee_id",ee=(0,w.useQueryClient)(),te=(0,l.useRef)(null),ne=(0,w.useQuery)({queryKey:"sub-accounts",queryFn:function(){return(e=e||(0,d.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X.get("/reference/sub-account",{headers:{Authorization:"Bearer ".concat(null===H||void 0===H?void 0:H.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t,n;Y({type:"UPDATE_FIELD",field:"sub_account",value:null===(t=e.data)||void 0===t||null===(n=t.defaultValue[0])||void 0===n?void 0:n.Sub_Acct})}}),ie=ne.data,re=ne.isLoading,ae=ne.refetch,oe=(0,w.useQuery)({queryKey:"employee-generate-id",queryFn:function(){return(t=t||(0,d.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X.post("/reference/id-entry-generate-id",{sign:"E",type:"entry employee"},{headers:{Authorization:"Bearer ".concat(null===H||void 0===H?void 0:H.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},refetchOnWindowFocus:!1,onSuccess:function(e){Ne({target:{value:e.data.generateID,name:"entry_employee_id"}})}}),de=oe.isLoading,se=oe.refetch,le=(0,w.useQuery)({queryKey:$,queryFn:function(){return(n=n||(0,d.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X.get("/reference/search-entry?entrySearch=".concat(Q.search,"&entry=Employee"),{headers:{Authorization:"Bearer ".concat(null===H||void 0===H?void 0:H.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){G(null===e||void 0===e?void 0:e.data.entry)}}),ue=le.isLoading,ce=le.refetch,me=(0,w.useMutation)({mutationKey:$,mutationFn:function(e){return(v=v||(0,d.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X.post("/reference/id-entry-employee",t,{headers:{Authorization:"Bearer ".concat(null===H||void 0===H?void 0:H.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:ve}),he=me.mutate,fe=me.isLoading,pe=(0,w.useMutation)({mutationKey:$,mutationFn:function(e){return(T=T||(0,d.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X.post("/reference/entry-update?entry=Employee",t,{headers:{Authorization:"Bearer ".concat(null===H||void 0===H?void 0:H.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:ve}),xe=pe.mutate,ye=pe.isLoading,we=(0,w.useMutation)({mutationKey:$,mutationFn:function(e){return(q=q||(0,d.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X.post("/reference/entry-delete?entry=Employee",t,{headers:{Authorization:"Bearer ".concat(null===H||void 0===H?void 0:H.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:ve}),be=we.mutate,ge=we.isLoading,Ne=function(e){var t=e.target,n=t.name,i=t.value;if(["lastname","middlename","firstname"].includes(n))return Y({type:"UPDATE_FIELD",field:n,value:i.toUpperCase()});Y({type:"UPDATE_FIELD",field:n,value:i})};function ve(e){if(e.data.success)return ee.invalidateQueries($),_e(),Z().fire({position:"center",icon:"success",title:e.data.message,showConfirmButton:!1,timer:1500});Z().fire({position:"center",icon:"error",title:e.data.message,showConfirmButton:!1,timer:1500})}function Ze(e){return""===Q.firstname?Z().fire({position:"center",icon:"error",title:"Firstname is required!",showConfirmButton:!1,timer:1500}):""===Q.lastname?Z().fire({position:"center",icon:"error",title:"Lastname is required!",showConfirmButton:!1,timer:1500}):""===Q.sub_account?Z().fire({position:"center",icon:"error",title:"Sub Account is required!",showConfirmButton:!1,timer:1500}):Q.firstname.length>=200?Z().fire({position:"center",icon:"error",title:"Firstname is too Long!",showConfirmButton:!1,timer:1500}):Q.middlename.length>=200?Z().fire({position:"center",icon:"error",title:"Middlename is too Long!",showConfirmButton:!1,timer:1500}):Q.lastname.length>=200?Z().fire({position:"center",icon:"error",title:"Lastname is too Long!",showConfirmButton:!1,timer:1500}):Q.sub_account.length>=200?Z().fire({position:"center",icon:"error",title:"Sub Account is too Long!",showConfirmButton:!1,timer:1500}):Q.address.length>=200?Z().fire({position:"center",icon:"error",title:"Address is too Long!",showConfirmButton:!1,timer:1500}):(e.preventDefault(),void("edit"===Q.mode?(0,M.s)({isUpdate:!0,cb:function(e){xe((0,a.Z)((0,a.Z)({},Q),{},{userCodeConfirmation:e}))}}):(0,M.L)({isConfirm:function(){he(Q)}})))}function _e(){var e;(0,S.setNewStateValue)(Y,E),null===(e=te.current)||void 0===e||e.removeSelection(),(0,C.D)(250).then((function(){se(),ce(),ae()}))}return(0,B.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"100%",height:"100%",flex:1},children:[(0,B.jsxs)(u.Z,{sx:function(e){return(0,r.Z)({display:"flex",alignItems:"center",columnGap:"20px"},e.breakpoints.down("sm"),{flexDirection:"column",alignItems:"flex-start",flex:1,marginBottom:"15px"})},children:[(0,B.jsx)("div",{style:{marginTop:"10px",marginBottom:"12px",width:"100%"},children:(0,B.jsx)(c.Z,{label:"Search",fullWidth:!0,size:"small",type:"text",value:Q.search,name:"search",onChange:Ne,InputProps:{style:{height:"27px",fontSize:"14px"}},onKeyDown:function(e){if("Enter"===e.code||"NumpadEnter"===e.code)return e.preventDefault(),ce()},sx:{width:"500px",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}})}),(0,B.jsx)("div",{style:{display:"flex",alignItems:"center",columnGap:"20px"},children:(0,B.jsxs)("div",{style:{display:"flex",alignItems:"center",columnGap:"5px"},children:[""===Q.mode&&(0,B.jsx)(m.Z,{variant:"contained",startIcon:(0,B.jsx)(F.Z,{}),id:"entry-header-save-button",sx:{height:"30px",fontSize:"11px"},onClick:function(){se(),Ne({target:{value:"add",name:"mode"}})},children:"New"}),(0,B.jsx)(L.Z,{id:"save-entry-header",color:"primary",variant:"contained",type:"submit",sx:{height:"30px",fontSize:"11px"},onClick:Ze,startIcon:(0,B.jsx)(D.Z,{}),disabled:""===Q.mode,loading:fe||ye,children:"Save"}),""!==Q.mode&&(0,B.jsx)(m.Z,{sx:{height:"30px",fontSize:"11px"},variant:"contained",startIcon:(0,B.jsx)(z.Z,{}),color:"error",onClick:function(){Z().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, cancel it!"}).then((function(e){e.isConfirmed&&_e()}))},children:"Cancel"}),(0,B.jsx)(L.Z,{id:"save-entry-header",variant:"contained",sx:{height:"30px",fontSize:"11px",backgroundColor:I.Z[500],"&:hover":{backgroundColor:I.Z[600]}},loading:ge,startIcon:(0,B.jsx)(j.Z,{}),disabled:"edit"!==Q.mode,onClick:function(){(0,M.s)({isUpdate:!1,cb:function(e){be({id:Q.entry_employee_id,userCodeConfirmation:e})}})},children:"Delete"})]})})]}),(0,B.jsxs)("form",{onKeyDown:function(e){"Enter"!==e.code&&"NumpadEnter"!==e.code||!["firstname","lastname","middlename","address","entry_employee_id"].includes(e.target.name)||(e.preventDefault(),Ze(e))},onSubmit:Ze,id:"Form-Employee",children:[(0,B.jsxs)(u.Z,{sx:function(e){return(0,r.Z)({display:"flex",columnGap:"15px",flexDirection:"row",marginBottom:"10px"},e.breakpoints.down("md"),{flexDirection:"column",rowGap:"10px"})},children:[de?(0,B.jsx)(L.Z,{loading:de}):(0,B.jsxs)(h.Z,{fullWidth:!0,variant:"outlined",size:"small",disabled:""===Q.mode,sx:{flex:1,".MuiFormLabel-root":{fontSize:"14px",background:"white",zIndex:99,padding:"0 3px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},children:[(0,B.jsx)(b.Z,{htmlFor:"employee-auto-generate-id-field",children:"Employee ID"}),(0,B.jsx)(f.Z,{sx:{height:"27px",fontSize:"14px"},disabled:""===Q.mode,fullWidth:!0,label:"Employee ID",name:"entry_employee_id",value:Q.entry_employee_id,onChange:Ne,readOnly:!0,id:"employee-auto-generate-id-field",endAdornment:(0,B.jsx)(p.Z,{position:"end",children:(0,B.jsx)(x.Z,{disabled:""===Q.mode,"aria-label":"search-client",color:"secondary",edge:"end",onClick:function(){se()},children:(0,B.jsx)(k.Z,{})})})})]}),(0,B.jsx)(c.Z,{type:"text",name:"firstname",label:"First Name",size:"small",required:!0,onChange:Ne,disabled:""===Q.mode,value:Q.firstname,InputProps:{style:{height:"27px",fontSize:"14px"}},sx:{flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}}),(0,B.jsx)(c.Z,{type:"text",name:"middlename",label:"Middle Name",size:"small",onChange:Ne,disabled:""===Q.mode,value:Q.middlename,InputProps:{style:{height:"27px",fontSize:"14px"}},sx:{flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}}),(0,B.jsx)(c.Z,{type:"text",name:"lastname",label:"Last Name",size:"small",required:!0,onChange:Ne,disabled:""===Q.mode,value:Q.lastname,InputProps:{style:{height:"27px",fontSize:"14px"}},sx:{flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}}),re?(0,B.jsx)(L.Z,{loading:re}):(0,B.jsxs)(h.Z,{fullWidth:!0,required:!0,size:"small",sx:{width:"300px",".MuiFormLabel-root":{fontSize:"14px",background:"white",zIndex:99,padding:"0 3px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},children:[(0,B.jsx)(b.Z,{id:"Sub Account",children:"Sub Account"}),(0,B.jsx)(N.Z,{sx:{height:"27px",fontSize:"14px"},disabled:""===Q.mode,value:Q.sub_account,onChange:Ne,labelId:"Sub Account",label:"Sub Account",name:"sub_account",children:(0,i.Z)(null===ie||void 0===ie?void 0:ie.data.subAccount).map((function(e){return(0,B.jsx)(g.Z,{value:e.Sub_Acct,children:e.NewShortName},e.Sub_Acct)}))})]})]}),(0,B.jsx)(c.Z,{name:"address",label:"Address",minRows:10,size:"small",fullWidth:!0,style:{margin:"10px 0px"},onChange:Ne,disabled:""===Q.mode,value:Q.address,InputProps:{style:{height:"27px",fontSize:"14px"}},sx:{flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}})]}),(0,B.jsx)("div",{ref:K,style:{marginTop:"10px",width:"100%",position:"relative",flex:1},children:(0,B.jsx)(u.Z,{style:{height:"".concat(null===(P=K.current)||void 0===P?void 0:P.getBoundingClientRect().height,"px"),width:"100%",overflowX:"scroll",position:"absolute"},children:(0,B.jsx)(A.Z,{ref:te,isLoading:ue||ge||ye||fe,columns:_.kb,rows:V,table_id:"entry_employee_id",isSingleSelection:!0,isRowFreeze:!1,dataSelection:function(e,t,n){var i=t.filter((function(t){return t.entry_employee_id===e[0]}))[0];if(void 0===i||i.length<=0)return(0,S.setNewStateValue)(Y,E),void Ne({target:{value:"",name:"mode"}});Ne({target:{value:"edit",name:"mode"}}),(0,S.setNewStateValue)(Y,i),"Delete"!==n&&"Backspace"!==n||(0,C.D)(350).then((function(){(0,M.s)({isUpdate:!1,cb:function(e){be({id:Q.entry_employee_id,userCodeConfirmation:e})}})}))}})})})]})}},48749:function(e,t,n){n.d(t,{GY:function(){return l},I6:function(){return c},fJ:function(){return s},kb:function(){return o},m5:function(){return u},oy:function(){return a},y:function(){return d}});var i=n(4942),r=n(1413),a=[{field:"entry_client_id",headerName:"ID",width:130},{field:"company",headerName:"Company",width:200},{field:"firstname",headerName:"First Name",width:200},{field:"lastname",headerName:"Last Name",width:200},{field:"middlename",headerName:"Middle Name",width:200},{field:"email",headerName:"Email",width:200},{field:"mobile",headerName:"Mobile",width:200},{field:"sale_officer",headerName:"Sale Officer",width:200},{field:"NewShortName",headerName:"Sub Account",width:130},{field:"option",headerName:"Option",width:130},{field:"createdAt",headerName:"Created At",width:130},{field:"address",headerName:"Address",width:500}],o=[{field:"entry_employee_id",headerName:"ID",width:130},{field:"firstname",headerName:"First Name",width:200},{field:"lastname",headerName:"Last Name",width:200},{field:"middlename",headerName:"Middle Name",width:200},{field:"NewShortName",headerName:"Sub Account",width:130},{field:"createdAt",headerName:"Created At",width:130},{field:"address",headerName:"Address",width:500}],d=[{field:"entry_agent_id",headerName:"ID",width:130},{field:"firstname",headerName:"First Name",width:200},{field:"lastname",headerName:"Last Name",width:200},{field:"middlename",headerName:"Middle Name",width:200},{field:"email",headerName:"Email",width:250},{field:"mobile",headerName:"Mobile",width:130},{field:"telephone",headerName:"Telephone",width:130},{field:"createdAt",headerName:"Created At",width:130},{field:"address",headerName:"Address",width:500},{field:"sub_account",headerName:"sub_account",width:500,hide:!0}],s=[{field:"entry_fixed_assets_id",headerName:"ID",width:130},{field:"fullname",headerName:"Full Name",width:250},{field:"description",headerName:"Description",flex:1},{field:"remarks",headerName:"Remarks",flex:1},{field:"createdAt",headerName:"Created At",width:200}],l=[{field:"entry_supplier_id",headerName:"ID",width:130},{field:"company",headerName:"Company",width:200},{field:"firstname",headerName:"First Name",width:200},{field:"lastname",headerName:"Last Name",width:200},{field:"middlename",headerName:"Middle Name",width:200},{field:"email",headerName:"Email",width:200},{field:"mobile",headerName:"Mobile",width:200},{field:"telephone",headerName:"Telephone",width:200},{field:"tin_no",headerName:"TIN NO.",width:200},{field:"option",headerName:"Option",width:200},{field:"VAT_Type",headerName:"Vat Type",width:200},{field:"createdAt",headerName:"Created At",width:200},{field:"address",headerName:"Address",width:500}],u=[{field:"entry_others_id",headerName:"ID",width:130},{field:"description",headerName:"Description",flex:1},{field:"remarks",headerName:"Remarks",flex:1},{field:"createdAt",headerName:"Created At",width:200}],c=function(e,t){return"UPDATE_FIELD"===t.type?(0,r.Z)((0,r.Z)({},e),{},(0,i.Z)({},t.field,t.value)):e}},4378:function(e,t){t.Z={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162"}}}]);
//# sourceMappingURL=993.83658e0e.chunk.js.map