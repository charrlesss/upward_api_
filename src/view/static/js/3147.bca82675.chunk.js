"use strict";(self.webpackChunkupward=self.webpackChunkupward||[]).push([[3147],{13784:function(e,t,n){n.d(t,{Z:function(){return d}});var o=n(1413),i=n(45987),r=n(71652),a=n(48193),c=n(93777),l=n(80184),u=["label","name","onChange","value","onKeyDown","inputRef","datePickerRef","fullWidth","textField","minWidth"];function d(e){var t=e.label,n=e.name,d=e.onChange,s=e.value,h=e.onKeyDown,f=e.inputRef,p=e.datePickerRef,m=e.fullWidth,x=e.textField,v=e.minWidth,g=void 0===v?"200px":v,C=(0,i.Z)(e,u);return(0,l.jsx)(r._,{dateAdapter:a.H,children:(0,l.jsx)(c.M,(0,o.Z)({floatingLabelStyle:{color:"black"},value:s,onChange:d,ref:p,slotProps:{textField:(0,o.Z)({size:"small",label:t,name:n,onKeyDown:h,inputRef:f,fullWidth:m},x)},InputLabelProps:{sx:{color:"black"}},sx:{minWidth:g,fieldset:{borderColor:"black"},".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}},C))})}},70272:function(e,t,n){var o=n(54270),i=n(80184);t.Z=function(e){var t=e.title,n=void 0===t?"":t;return(0,i.jsxs)(o.q,{children:[(0,i.jsx)("title",{children:n}),(0,i.jsx)("link",{rel:"icon",type:"image/png",href:"".concat("http://localhost:4400/","/logo.png")})]})}},81582:function(e,t,n){n.d(t,{XT:function(){return f},ZP:function(){return h},rO:function(){return p}});n(72791);var o=n(88447),i=n(64554),r=n(20890),a=n(27391),c=n(13400),l=n(29823),u=n(89767),d=n(80184),s={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"80%",bgcolor:"background.paper",boxShadow:24,p:4,heigth:"auto"};function h(e){var t=e.height,n=e.isLoading,h=(e.queryKey,e.columns),m=e.onSelectionChange,x=(e.setRows,e.rows),v=e.id,g=e.onCloseModal,C=e.showModal,D=e.onClickCloseIcon,k=e.searchOnChange,S=e.title,b=void 0===S?"":S,y=e.searchRef,w=(e.onCellKeyDown,e.onSearchKeyEnter),R=void 0===w?function(){}:w,N=e.isRowSelectable,A=e.getCellClassName,I=f();return(0,d.jsx)(o.Z,{open:C,onClose:g,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,d.jsxs)(i.Z,{sx:s,children:[(0,d.jsx)(r.Z,{id:"modal-modal-title",variant:"h6",component:"h2",mb:2,children:b}),(0,d.jsx)(a.Z,{size:"small",label:"Search",sx:{marginBottom:"10px"},fullWidth:!0,onChange:k,InputProps:{inputRef:y},onKeyDown:function(e){var t;"Enter"!==e.code&&"NumpadEnter"!==e.code||(e.preventDefault(),R(null===y||void 0===y||null===(t=y.current)||void 0===t?void 0:t.value));p(e,I,null===y||void 0===y?void 0:y.current)}}),(0,d.jsx)("div",{className:"".concat(I," main-table-selection-container"),style:{position:"relative",height:"".concat(t+20,"px")},children:(0,d.jsx)(u.Z,{isSingleSelection:!0,isRowFreeze:!1,columns:h,isLoading:n,dataSelection:function(e,t,n){m(e,t)},table_id:v,rows:x,isRowSelectable:N,getCellClassName:A})}),(0,d.jsx)("div",{style:{position:"absolute",top:"10px",right:"10px"},children:(0,d.jsx)(c.Z,{"aria-label":"search-client",color:"secondary",onClick:D,children:(0,d.jsx)(l.Z,{})})})]})})}function f(){return"main-"+Math.floor(1e4*Math.random())}function p(e,t,n){var o=t;if("ArrowDown"===e.code){var i,r=document.querySelectorAll(".".concat(o," .MuiDataGrid-row"));e.preventDefault(),null===(i=r[0])||void 0===i||i.classList.add("hover-keyboard"),function(e,t){var n=document.querySelector(".".concat(e," .MuiDataGrid-row")),o=null===n||void 0===n?void 0:n.querySelector("input");null===o||void 0===o||o.focus();var i=new MouseEvent("mouseenter",{bubbles:!0,cancelable:!0,view:window});null===n||void 0===n||n.dispatchEvent(i),null===o||void 0===o||o.addEventListener("keydown",(function(e){"ArrowUp"===e.key&&(e.preventDefault(),t.focus()),"ArrowUp"===e.key&&(null===n||void 0===n||n.classList.remove("hover-keyboard"))}))}(t,n),r.forEach((function(e,t){e.addEventListener("keydown",(function(e){if("ArrowUp"===e.key){var n,o;if(t<=0)return;return e.preventDefault(),null===(n=r[t])||void 0===n||n.classList.remove("hover-keyboard"),void(null===(o=r[t-1])||void 0===o||o.classList.add("hover-keyboard"))}if("ArrowDown"===e.key){var i,a;if(e.preventDefault(),t>=r.length-1)return;null===(i=r[t])||void 0===i||i.classList.remove("hover-keyboard"),null===(a=r[t+1])||void 0===a||a.classList.add("hover-keyboard")}}))}))}}},89767:function(e,t,n){var o=n(93433),i=n(1413),r=n(29439),a=n(72791),c=n(57482),l=n(64554),u=n(70561),d=n(29961),s=n(54277),h=n(70169),f=n(5794),p=n(16088),m=n(80184),x=(0,a.createContext)({rows:[],rowSelectionModel:[],footerChildren:function(){return(0,m.jsx)("div",{})},footerPaginationPosition:"right-left",showFooterSelectedCount:!0}),v=(0,a.forwardRef)((function(e,t){var n=e.isLoading,l=e.columns,d=e.rows,s=e.table_id,h=e.isSingleSelection,f=e.isRowFreeze,p=e.dataSelection,v=e.CustomFooterComponent,g=void 0===v?D:v,C=e.isRowSelectable,k=e.getCellClassName,S=e.checkboxSelection,b=void 0===S||S,y=e.footerChildren,w=void 0===y?function(e,t){return(0,m.jsx)("div",{})}:y,R=e.footerPaginationPosition,N=void 0===R?"right-left":R,A=e.showFooterSelectedCount,I=void 0===A||A,_=(0,a.useState)([]),Z=(0,r.Z)(_,2),E=Z[0],L=Z[1];function j(e,t,n){p&&p(e,t,n)}(0,a.useImperativeHandle)(t,(function(){return{removeSelection:function(){L([])},getSelectedRows:function(){return d.filter((function(e){return null===E||void 0===E?void 0:E.includes(e[s])}))},setSelectedRows:function(e){L(e)}}}));var F=[];return(0,m.jsx)(x.Provider,{value:{showFooterSelectedCount:I,footerPaginationPosition:N,rowSelectionModel:E,rows:d,footerChildren:w},children:(0,m.jsx)(u._$,{slots:{loadingOverlay:c.Z,footer:g},initialState:{pagination:{paginationModel:{pageSize:100}}},loading:n,getRowId:function(e){return e[s]},columns:l.filter((function(e){return!e.hide})),rows:d,showCellVerticalBorder:!0,showColumnVerticalBorder:!0,checkboxSelection:b,rowSelectionModel:E,rowHeight:25,columnHeaderHeight:35,pageSizeOptions:[10,20,35,50,75,100],sx:(0,i.Z)((0,i.Z)({"& .cash":{color:"#ec4899"},"& .check":{color:"#0891b2"},"& .approved":{color:"green"},"& .pending":{color:"orange"},"& .disapproved":{color:"red"},"& .normal":{color:"red"},"& .MuiDataGrid-row.Mui-selected:hover":{color:"black","& .MuiSvgIcon-root ":{fill:"#3b82f6"}},"& .hover-keyboard":{background:"#2563eb",color:"white","& .MuiSvgIcon-root ":{fill:"white"}},"& .MuiDataGrid-row:hover":{background:"#2563eb",color:"white","& .MuiSvgIcon-root ":{fill:"white"}},"& .MuiDataGrid-row.hover":{background:"#2563eb",color:"white","& .MuiSvgIcon-root ":{fill:"white"}},"& .MuiTablePagination-root p ":{padding:"0 !important"}},{"& .MuiDataGrid-columnHeaders":{background:"#64748b",color:"white",fontSize:"14px"},"& .MuiDataGrid-columnHeaderCheckbox .MuiDataGrid-columnHeaderTitleContainer .MuiSvgIcon-root ":{display:h||f?"none":"block",fill:"white"},"& .MuiDataGrid-columnHeaderCheckbox .MuiDataGrid-columnHeaderTitleContainer input ":{display:h||f?"none":"block"}}),{fontSize:13,fontWeight:500,"& .MuiDataGrid-checkboxInput":{height:"27px",width:"27px"},"& .MuiDataGrid-checkboxInput svg":{height:"20px",width:"20px"}}),onRowSelectionModelChange:function(e){if(f){if(e.length<=0)return;if(F=e,E.includes(F[F.length-1]))return;return L(e),void j([e[e.length-1]],d,null)}if(!f&&h)if(E&&(null===E||void 0===E?void 0:E.length)>0){var t=new Set(E);L(e.filter((function(e){return!t.has(e)})))}else L(e);else L(e);j([e[e.length-1]],d,null)},onCellKeyDown:function(e,t){if(["NumpadEnter","Enter","Delete","Backspace"].includes(t.code))return t.preventDefault(),"Enter"===t.code||"NumpadEnter"===t.code?h&&!f?L((function(n){return n&&n.length>0&&n[0]===e.rowNode.id?(j([],d,t.code),[]):(j([e.rowNode.id],d,t.code),[e.rowNode.id])})):void L((function(n){return n&&!f&&n.length>0&&n.includes(e.rowNode.id)?(n=n.filter((function(t){return t!==e.rowNode.id})),j([],d,t.code),n):n&&f&&n.length>0&&n.includes(e.rowNode.id)?n:(j([e.rowNode.id],d,t.code),[].concat((0,o.Z)(n),[e.rowNode.id]))})):"Delete"===t.code||"Backspace"===t.code?(L([e.rowNode.id]),j([e.rowNode.id],d,t.code)):void 0},disableVirtualization:!0,isRowSelectable:C,getCellClassName:k})})}));function g(e){var t=e.page,n=e.onPageChange,o=e.className,i=(0,d.l)(),r=(0,s.P)(i,h.UB);return(0,m.jsx)(p.Z,{variant:"outlined",color:"primary",className:o,count:r,page:t+1,onChange:function(e,t){n(e,t-1)}})}function C(e){return(0,m.jsx)(f.x,(0,i.Z)({ActionsComponent:g},e))}function D(e){var t=(0,a.useContext)(x),n=t.rowSelectionModel,o=t.showFooterSelectedCount,r=t.footerPaginationPosition,c=t.footerChildren,u=t.rows;return(0,m.jsxs)(l.Z,{sx:{columnGap:"50px",display:"flex",width:"100%",justifyContent:"space-between",px:3,alignItems:"center",flexDirection:"right-left"===r?"row-reverse":"row"},children:[(0,m.jsx)(C,(0,i.Z)({},e)),(0,m.jsxs)(l.Z,{sx:{display:"flex",justifyContent:"right-left"===r?"flex-start":"flex-end",flex:1,alignItems:"center"},children:[o&&(0,m.jsxs)("div",{children:["Selected:",null===n||void 0===n?void 0:n.length]}),(0,m.jsx)("div",{children:c(n,u)})]})]})}t.Z=v},53147:function(e,t,n){n.r(t),n.d(t,{default:function(){return X},reducer:function(){return V}});var o=n(93433),i=n(74165),r=n(15861),a=n(29439),c=n(4942),l=n(1413),u=n(72791),d=n(27391),s=n(36151),h=n(68096),f=n(94925),p=n(77196),m=n(63466),x=n(13400),v=n(88447),g=n(64554),C=n(20890),D=n(58406),k=n(23786),S=n(13784),b=n(39709),y=n(42419),w=n(53329),R=n(29823),N=n(21830),A=n.n(N),I=n(86753),_=n(91933),Z=n(3380),E=n(84669),L=n(98946),j=n(16395),F=n(93263),M=n(54164),T=n(89767),P=n(25756),z=n(64230),B=n(81582),U=n(70272),W=n(80184),O={RefNo:"",Sub_RefNo:"",DateReturn:new Date,Explanation:"Returned Checks",search:"",returnMode:"",searchCheckList:""},K={ModalDateReturn:(new Date).toLocaleDateString(),ReturnReason:"",AccountName:"",AccountID:"",Amount:"",SubAccount:"",BranchCode:"",IDNo:"",Short:"",Check_No:"",TempID:"",updateAmount:"",updateAmountID:"",depoBankName:"",depoBankIdentity:"",subSelectedChecks:{}},q=(0,u.createContext)({checkCollection:[],checkSelectedCollection:[],accountingEntry:[],LoadingCheckList:!1,addReturnCheckLoading:!1,tableSelectedCheck:{current:{}},tableAccountingEntryCheck:{current:{}},tableSelectedCheckReturn:{current:{}},dispatchModal:function(){},modalSelectedMutate:function(){},getSearchReturnCheckInfoLoading:!1,modalSelectedCheckLoading:!1,debitModalCollection:[],myAxios:{},user:{},setCheckCollection:function(){},openSelectedCheckModal:!1,setOpenSelectedCheckModal:function(){},currentStepIndex:0,fireModal:function(){},stateModal:{},datePickerModalRef:{current:null},setAccountingEntry:function(){},handleModalInputChange:function(){},LoadSelectedCheckInSelectedTable:function(){},setCheckSelectedCollection:function(){}}),G=[{title:"Selected Check",index:0},{title:"Selected Check to be Returned",index:1},{title:"Accounting Entry",index:2}],H=[{field:"CRCode",headerName:"Code",minWidth:140},{field:"CRTitle",headerName:"Account Name",minWidth:300,flex:1},{field:"Credit",headerName:"Amount",minWidth:140,align:"right"},{field:"CRLoanID",headerName:"ID No.",minWidth:140},{field:"CRLoanName",headerName:"Identity",minWidth:300,flex:1},{field:"SubAcctCode",headerName:"Sub Account",minWidth:160,flex:1},{field:"SubAcctName",headerName:"Sub Account Name",minWidth:300,flex:1},{field:"TempID",headerName:"Sub Account Name",hide:!0}],V=function(e,t){return"UPDATE_FIELD"===t.type?(0,l.Z)((0,l.Z)({},e),{},(0,c.Z)({},t.field,t.value)):e};function X(){var e,t,n,c,N,B=Q(),X=B.ConfirmationModal,Y=B.fireModal,ie=(0,u.useContext)(Z.V),re=ie.myAxios,ae=ie.user,ce=(0,u.useReducer)(V,O),le=(0,a.Z)(ce,2),ue=le[0],de=le[1],se=(0,u.useReducer)(V,K),he=(0,a.Z)(se,2),fe=he[0],pe=he[1],me=(0,P.Z)([(0,W.jsx)($,{}),(0,W.jsx)(J,{}),(0,W.jsx)(ee,{})]),xe=me.currentStepIndex,ve=me.step,ge=me.goTo,Ce=(0,u.useState)([]),De=(0,a.Z)(Ce,2),ke=De[0],Se=De[1],be=(0,u.useState)([]),ye=(0,a.Z)(be,2),we=ye[0],Re=ye[1],Ne=(0,u.useState)([]),Ae=(0,a.Z)(Ne,2),Ie=Ae[0],_e=Ae[1],Ze=(0,u.useState)([]),Ee=(0,a.Z)(Ze,2),Le=Ee[0],je=Ee[1],Fe=(0,u.useState)(!1),Me=(0,a.Z)(Fe,2),Te=Me[0],Pe=Me[1],ze=(0,u.useRef)(null),Be=(0,u.useRef)(null),Ue=(0,u.useRef)(null),We=(0,u.useRef)(null),Oe=(0,u.useRef)(null),Ke=(0,u.useRef)(null),qe=(0,u.useRef)(null),Ge=(0,u.useRef)(null),He=(0,u.useRef)(null),Ve=(0,_.useQuery)({queryKey:"return-check-id",queryFn:function(){return(e=e||(0,r.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re.get("/task/accounting/get-new-return-check-id",{headers:{Authorization:"Bearer ".concat(null===ae||void 0===ae?void 0:ae.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},refetchOnWindowFocus:!1,onSuccess:function(e){var t=e;de({type:"UPDATE_FIELD",field:"RefNo",value:t.data.returnCheckID[0].return_check_id}),de({type:"UPDATE_FIELD",field:"Sub_RefNo",value:t.data.returnCheckID[0].return_check_id})}}),Xe=Ve.isLoading,Ye=Ve.refetch,Qe=(0,_.useQuery)({queryKey:"check-list",queryFn:function(){return(t=t||(0,r.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re.get("/task/accounting/get-check-list?checkListSearch=".concat(ue.searchCheckList),{headers:{Authorization:"Bearer ".concat(null===ae||void 0===ae?void 0:ae.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){Se(e.data.checkList)}}),$e=Qe.isLoading,Je=Qe.refetch,et=(0,_.useMutation)({mutationKey:"selected-check-modal",mutationFn:function(e){return(n=n||(0,r.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",re.post("/task/accounting/get-modal-return-check-data",t,{headers:{Authorization:"Bearer ".concat(null===ae||void 0===ae?void 0:ae.accessToken)}}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t=e,n=t.data.credit[0],o=t.data.debit[0];console.log(t),je(t.data.debit),pe({type:"UPDATE_FIELD",field:"AccountName",value:n.Acct_Title}),pe({type:"UPDATE_FIELD",field:"AccountID",value:n.Account_ID}),pe({type:"UPDATE_FIELD",field:"IDNo",value:o.ID_No}),pe({type:"UPDATE_FIELD",field:"Short",value:o.CRLoanName}),pe({type:"UPDATE_FIELD",field:"depoBankName",value:n.IDNo}),pe({type:"UPDATE_FIELD",field:"depoBankIdentity",value:n.Identity}),pe({type:"UPDATE_FIELD",field:"Short",value:o.CRLoanName}),pe({type:"UPDATE_FIELD",field:"Short",value:o.CRLoanName}),pe({type:"UPDATE_FIELD",field:"SubAccount",value:o.SubAcctName}),pe({type:"UPDATE_FIELD",field:"BranchCode",value:o.SubAcctCode}),pe({type:"UPDATE_FIELD",field:"Amount",value:t.data.debit.reduce((function(e,t){return e+parseFloat(t.Credit.replace(/,/g,""))}),0).toLocaleString("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2})}),Pe(!0)}}),tt=et.isLoading,nt=et.mutate,ot=(0,_.useMutation)({mutationKey:"selected-search-return-check",mutationFn:function(e){return(c=c||(0,r.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",re.post("/task/accounting/get-search-selected-checks-information",t,{headers:{Authorization:"Bearer ".concat(null===ae||void 0===ae?void 0:ae.accessToken)}}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t=e,n=t.data.selected[0],o=t.data.selected.map((function(e){return e.Amount=parseFloat(e.Amount.toString().replace(/,/g,"")).toLocaleString("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}),e}));_e(t.data.accountingEntry),Re(o),te(de,(0,l.Z)((0,l.Z)({},ue),{RefNo:n.RC_No,Sub_RefNo:n.RC_No,DateReturn:n.RC_Date,Explanation:n.Explanation,returnMode:"edit"}))}}),it=ot.isLoading,rt=ot.mutate,at=(0,_.useMutation)({mutationKey:"selected-check-modal",mutationFn:function(e){return(N=N||(0,r.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",re.post("/task/accounting/add-return-check",t,{headers:{Authorization:"Bearer ".concat(null===ae||void 0===ae?void 0:ae.accessToken)}}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t=e;return t.data.isClearableError?(Ye(),Je(),Re([]),_e([]),de({type:"UPDATE_FIELD",field:"returnMode",value:""}),A().fire({position:"center",icon:"success",title:t.data.message,timer:1500})):A().fire({position:"center",icon:"warning",title:t.data.message,timer:1500})}}),ct=at.isLoading,lt=at.mutate,ut=(0,F.Z)({link:{url:"/task/accounting/search-return-checks",queryUrlName:"searchReturnChecks"},columns:[{field:"RC_Date",headerName:"Date",width:150},{field:"RC_No",headerName:"Slip Code",width:170},{field:"Explanation",headerName:"Bank Account",flex:1}],queryKey:"return-checks-search",uniqueId:"RC_No",responseDataKey:"returnCheckSearch",onSelected:function(e){de({type:"UPDATE_FIELD",field:"returnMode",value:"edit"}),rt({RC_No:e[0].RC_No}),ft()},onCloseFunction:function(e){de({type:"UPDATE_FIELD",field:"search",value:e})},searchRef:Ke}),dt=ut.ModalComponent,st=ut.openModal,ht=ut.isLoading,ft=ut.closeModal,pt=function(e){var t=e.target,n=t.name,o=t.value;de({type:"UPDATE_FIELD",field:n,value:o})},mt=function(e){var t=e.target,n=t.name,o=t.value;pe({type:"UPDATE_FIELD",field:n,value:o})};function xt(e){return e.preventDefault(),""===ue.Explanation?A().fire({position:"center",icon:"warning",title:"Please provide an explanation",timer:1500}).then((function(e){(0,j.wait)(350).then((function(){var e;null===(e=We.current)||void 0===e||e.focus()}))})):we.length<=0?A().fire({position:"center",icon:"warning",title:"Please provide return entry!",timer:1500}):Ie.reduce((function(e,t){return e+parseFloat(t.Credit.replace(/,/g,""))}),0).toLocaleString("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2})!==Ie.reduce((function(e,t){return e+parseFloat(t.Debit.replace(/,/g,""))}),0).toLocaleString("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2})?A().fire({position:"center",icon:"warning",title:"Accounting entry must be equal in Debit and Credit amount!",timer:1500}).then((function(){(0,j.wait)(300).then((function(){ge(3)}))})):void("edit"===ue.returnMode?(0,z.s)({isUpdate:!0,cb:function(e){lt({selected:we,accountingEntry:Ie,RefNo:ue.RefNo,Sub_RefNo:ue.Sub_RefNo,DateReturn:ue.DateReturn,Explanation:ue.Explanation,ModalDateReturn:fe.ModalDateReturn,ReturnReason:fe.ReturnReason,AccountName:fe.AccountName,AccountID:fe.AccountID,Amount:fe.Amount,SubAccount:fe.SubAccount,BranchCode:fe.BranchCode,IDNo:fe.IDNo,Short:fe.Short,Check_No:fe.Check_No,isUpdated:"edit"===ue.returnMode,userCodeConfirmation:e})}}):(0,z.L)({isConfirm:function(){lt({selected:we,accountingEntry:Ie,RefNo:ue.RefNo,Sub_RefNo:ue.Sub_RefNo,DateReturn:ue.DateReturn,Explanation:ue.Explanation,ModalDateReturn:fe.ModalDateReturn,ReturnReason:fe.ReturnReason,AccountName:fe.AccountName,AccountID:fe.AccountID,Amount:fe.Amount,SubAccount:fe.SubAccount,BranchCode:fe.BranchCode,IDNo:fe.IDNo,Short:fe.Short,Check_No:fe.Check_No,isUpdated:"edit"===ue.returnMode})}}))}function vt(e){var t={Temp_OR:"".concat(e.Official_Receipt).concat((ke.length+1).toString().padStart(2,"0")),OR_NO:e.Official_Receipt,OR_Date:e.Date_OR,DepoSlip:e.DepoSlip,DepoDate:e.DepoDate,Check_No:e.Check_No,Check_Date:e.Check_Date,Amount:e.Amount,Bank:e.Bank,Bank_Account:e.BankAccount,Reason:fe.ReturnReason,Return_Date:new Date(fe.ModalDateReturn).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}),TempID:e.TempID};Re((function(e){return[].concat((0,o.Z)(e),[t])}))}var gt=function(){var e,t,n,i=Le.reduce((function(e,t){return e+parseFloat(t.Credit.replace(/,/g,""))}),0).toLocaleString("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2});if(fe.Amount!==i)return(0,M.flushSync)((function(){Pe(!1)})),A().fire({text:"Debit must eequal to Credit!",icon:"warning",showCancelButton:!1,timer:1500,position:"center"});if(null!==(e=He.current)&&void 0!==e&&e.getSelectedRows()){var r,a=null===(r=He.current)||void 0===r?void 0:r.getSelectedRows(),c=a[a.length-1];Re((function(e){return e=e.filter((function(e){return e.TempID!==c.TempID}))})),_e((function(e){return e=e.filter((function(e){return e.Check_No!==c.Check_No}))})),vt((0,l.Z)((0,l.Z)({},c),{},{Official_Receipt:c.OR_NO,Date_OR:c.OR_Date,BankAccount:c.Bank_Account}))}else{var u,d=null===(u=qe.current)||void 0===u?void 0:u.getSelectedRows();vt(d[d.length-1])}function s(e){var t=e.length>0?e[e.length-1].TempID:"000";return(parseInt(t.match(/\d+/)[0])+1).toString().padStart(3,"0")}Le.forEach((function(e){_e((function(t){return[].concat((0,o.Z)(t),[{Code:e.CRCode,AccountName:e.CRTitle,Debit:e.Credit,Credit:"0.00",IDNo:e.ID_No,Identity:e.Short,SubAcct:e.SubAcctCode,SubAcctName:e.SubAcctName,Check_No:fe.subSelectedChecks.Check_No,Bank:fe.subSelectedChecks.Bank,Check_Date:fe.subSelectedChecks.Check_Date,Check_Return:fe.ModalDateReturn,Check_Reason:fe.ReturnReason,PK:fe.subSelectedChecks.Check_No,DepoDate:fe.subSelectedChecks.DepoDate,Date_Collection:fe.subSelectedChecks.Date_Collection,TempID:s(t)}])}))})),console.log(fe),_e((function(e){return e=[].concat((0,o.Z)(e),[{Code:fe.AccountID,AccountName:fe.AccountName,Debit:"0.00",Credit:fe.Amount,IDNo:fe.depoBankName,Identity:fe.depoBankIdentity,SubAcct:fe.BranchCode,SubAcctName:fe.SubAccount,Check_No:fe.subSelectedChecks.Check_No,Bank:fe.subSelectedChecks.Bank,Check_Date:fe.subSelectedChecks.Check_Date,Check_Return:fe.ModalDateReturn,Check_Reason:fe.ReturnReason,PK:fe.subSelectedChecks.Check_No,DepoDate:fe.subSelectedChecks.DepoDate,Date_Collection:fe.subSelectedChecks.Date_Collection,TempID:s(e)}])})),Pe(!1),null===(t=qe.current)||void 0===t||t.removeSelection(),null===(n=He.current)||void 0===n||n.removeSelection()},Ct=""===ue.returnMode;return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(U.Z,{title:"Returned Check"}),(0,W.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"100%",height:"100%",flex:1,padding:"5px"},children:[(0,W.jsxs)("div",{style:{display:"flex",alignItems:"center",columnGap:"5px"},children:[ht?(0,W.jsx)(b.Z,{loading:ht}):(0,W.jsx)(d.Z,{label:"Search",size:"small",name:"search",value:ue.search,onChange:pt,onKeyDown:function(e){if("Enter"===e.code||"NumpadEnter"===e.code)return e.preventDefault(),st(e.target.value)},InputProps:{style:{height:"27px",fontSize:"14px"}},sx:{width:"300px",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}}),""===ue.returnMode&&(0,W.jsx)(s.Z,{sx:{height:"30px",fontSize:"11px"},variant:"contained",startIcon:(0,W.jsx)(y.Z,{sx:{width:15,height:15}}),id:"entry-header-save-button",onClick:function(){de({type:"UPDATE_FIELD",field:"returnMode",value:"add"})},children:"New"}),(0,W.jsx)(b.Z,{sx:{height:"30px",fontSize:"11px"},id:"save-entry-header",color:"primary",variant:"contained",type:"submit",onClick:xt,disabled:""===ue.returnMode,startIcon:(0,W.jsx)(w.Z,{sx:{width:15,height:15}}),loading:ct,children:"edit"===ue.returnMode?"Update":"Save"}),""!==ue.returnMode&&(0,W.jsx)(s.Z,{sx:{height:"30px",fontSize:"11px"},variant:"contained",startIcon:(0,W.jsx)(R.Z,{sx:{width:15,height:15}}),color:"error",onClick:function(){A().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, cancel it!"}).then((function(e){e.isConfirmed&&(Je(),Re([]),_e([]),de({type:"UPDATE_FIELD",field:"returnMode",value:""}),te(de,O),Ye())}))},children:"Cancel"})]}),(0,W.jsx)("br",{}),(0,W.jsxs)("form",{onKeyDown:function(e){"Enter"!==e.code&&"NumpadEnter"!==e.code||e.preventDefault()},style:{display:"flex",gap:"10px"},children:[Xe?(0,W.jsx)(b.Z,{loading:Xe}):(0,W.jsxs)(h.Z,{sx:{width:"200px",".MuiFormLabel-root":{fontSize:"14px",background:"white",zIndex:99,padding:"0 3px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},variant:"outlined",size:"small",disabled:Ct,children:[(0,W.jsx)(f.Z,{htmlFor:"return-check-id-field",children:"Ref. No."}),(0,W.jsx)(p.Z,{sx:{height:"27px",fontSize:"14px"},disabled:Ct,fullWidth:!0,label:"Ref. No.",name:"RefNo",value:ue.RefNo,onChange:pt,onKeyDown:function(e){if("Enter"===e.code||"NumpadEnter"===e.code)return xt(e)},readOnly:"UCSMI"!==(null===ae||void 0===ae?void 0:ae.department),id:"return-check-id-field",endAdornment:(0,W.jsx)(m.Z,{position:"end",children:(0,W.jsx)(x.Z,{ref:Be,disabled:Ct,"aria-label":"search-client",color:"secondary",edge:"end",onClick:function(){Ye()},children:(0,W.jsx)(I.Z,{})})})})]}),(0,W.jsx)(S.Z,{disabled:Ct,label:"Date Returned",onChange:function(e){de({type:"UPDATE_FIELD",field:"DateReturn",value:e})},value:new Date(ue.DateReturn),onKeyDown:function(e){if("Enter"===e.code||"NumpadEnter"===e.code)var t=setTimeout((function(){var e,n;null===(e=ze.current)||void 0===e||null===(n=e.querySelector("button"))||void 0===n||n.click(),clearTimeout(t)}),150)},textField:{InputLabelProps:{style:{fontSize:"14px"}},InputProps:{style:{height:"27px",fontSize:"14px"}}},datePickerRef:ze}),(0,W.jsx)(d.Z,{disabled:Ct,fullWidth:!0,label:"Explanation",size:"small",name:"Explanation",value:ue.Explanation,onChange:pt,onKeyDown:function(e){"Enter"!==e.code&&e.code},InputProps:{style:{height:"27px",fontSize:"14px"},readOnly:!0},sx:{flex:1,".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},inputRef:We}),(0,W.jsx)("button",{ref:Oe,style:{display:"none"},type:"submit"})]}),(0,W.jsx)("br",{}),(0,W.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,W.jsx)("div",{children:G.map((function(e,t){return(0,W.jsxs)("button",{style:{border:"none",outline:"none",backgroundColor:"rgba(51, 51, 51, 0.05)",borderWidth:"0",color:xe===t?"#7e22ce":"#333333",cursor:"pointer",display:"inline-block",fontFamily:'"Haas Grot Text R Web", "Helvetica Neue", Helvetica, Arial, sans-serif',fontSize:"14px",fontWeight:"500",lineHeight:"20px",listStyle:"none",margin:"0",padding:"10px 12px",textAlign:"center",transition:"all 200ms",verticalAlign:"baseline",whiteSpace:"nowrap",userSelect:"none",touchAction:"manipulation",position:"relative",overflow:"hidden"},onClick:function(){return ge(t)},children:[(0,W.jsx)("span",{style:{position:"absolute",top:0,bottom:0,left:0,right:0,background:"rgba(206, 214, 211, 0.18)",transition:"all 200ms",transform:ne(xe,t)}}),e.title]},t)}))}),(0,W.jsxs)("div",{children:["Total Amount:"," ",(0,W.jsx)("strong",{children:Ie.reduce((function(e,t){return e+parseFloat(t.Credit.replace(/,/g,""))}),0).toLocaleString("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2})})]})]}),(0,W.jsx)("br",{}),(0,W.jsx)(q.Provider,{value:{checkCollection:ke,checkSelectedCollection:we,accountingEntry:Ie,LoadingCheckList:$e,addReturnCheckLoading:ct,tableSelectedCheck:qe,dispatchModal:pe,modalSelectedMutate:nt,getSearchReturnCheckInfoLoading:it,debitModalCollection:Le,tableAccountingEntryCheck:Ge,tableSelectedCheckReturn:He,modalSelectedCheckLoading:tt,myAxios:re,user:ae,setCheckCollection:Se,openSelectedCheckModal:Te,setOpenSelectedCheckModal:Pe,currentStepIndex:xe,fireModal:Y,stateModal:fe,datePickerModalRef:Ue,setAccountingEntry:_e,handleModalInputChange:mt,LoadSelectedCheckInSelectedTable:vt,setCheckSelectedCollection:Re},children:(0,W.jsxs)("div",{style:{display:"flex",flexDirection:"column",flex:1},id:"container",children:[ve,dt,(0,W.jsx)(v.Z,{open:Te,onClose:function(){var e,t;Pe(!1),null===(e=qe.current)||void 0===e||e.removeSelection(),null===(t=He.current)||void 0===t||t.removeSelection()},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",onKeyDown:function(e){1!==xe||"Backspace"!==e.code&&"Delete"!==e.code||(Pe(!1),Y({onConfirmCallback:function(){Re((function(e){return e.filter((function(e){return e.TempID.toString()!==fe.TempID.toString()}))})),_e((function(e){return e.filter((function(e){return e.Check_No.split("-")[0]!==fe.Check_No.toString()}))}))},onCancelCallback:function(){var e,t;Pe(!1),null===(e=qe.current)||void 0===e||e.removeSelection(),null===(t=He.current)||void 0===t||t.removeSelection()}})),0!==xe||"Enter"!==e.code&&"NumpadEnter"!==e.code||gt()},children:(0,W.jsxs)(g.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"80%",bgcolor:"background.paper",p:3,boxSizing:"border-box"},children:[(0,W.jsx)(x.Z,{style:{position:"absolute",top:"10px",right:"10px"},"aria-label":"search-client",onClick:function(){var e,t;Pe(!1),null===(e=qe.current)||void 0===e||e.removeSelection(),null===(t=He.current)||void 0===t||t.removeSelection(),pe({type:"UPDATE_FIELD",field:"TempID",value:""}),pe({type:"UPDATE_FIELD",field:"subSelectedChecks",value:{}})},children:(0,W.jsx)(R.Z,{})}),(0,W.jsxs)(C.Z,{id:"modal-modal-title",variant:"body1",component:"h2",children:["Return Detail and Accounting Entry (Check No.:",(0,W.jsx)("strong",{children:fe.Check_No}),")"]}),(0,W.jsxs)("fieldset",{style:{display:"flex",columnGap:"10px",padding:"10px",border:"1px solid #cbd5e1",borderRadius:"5px",marginTop:"20px"},children:[(0,W.jsx)("legend",{style:{fontSize:"14px"},children:"Return Detail"}),(0,W.jsxs)(h.Z,{size:"small",variant:"outlined",fullWidth:!0,sx:{".MuiFormLabel-root":{fontSize:"14px",background:"white",zIndex:99,padding:"0 3px"},".MuiFormLabel-root[data-shrink=false]":{top:"-1px"}},children:[(0,W.jsx)(f.Z,{id:"label-selection-reason",children:"Return Reason"}),(0,W.jsxs)(D.Z,{labelId:"label-selection-reason",value:fe.ReturnReason,name:"ReturnReason",onChange:mt,autoWidth:!0,sx:{height:"27px",fontSize:"14px"},children:[(0,W.jsx)(k.Z,{value:"DAIF",children:"DAIF"}),(0,W.jsx)(k.Z,{value:"DAUD",children:"DAUD"}),(0,W.jsx)(k.Z,{value:"AC",children:"ACCOUNT CLOSED"}),(0,W.jsx)(k.Z,{value:"SPO",children:"SPO"}),(0,W.jsx)(k.Z,{value:"SD",children:"SIGNATURE DIFFERS"})]})]}),(0,W.jsx)(S.Z,{fullWidth:!0,label:"Date Returned",onChange:function(e){pe({type:"UPDATE_FIELD",field:"ModalDateReturn",value:e.toLocaleDateString()})},value:new Date(fe.ModalDateReturn),onKeyDown:function(e){if("Enter"===e.code||"NumpadEnter"===e.code)var t=setTimeout((function(){var e,n;null===(e=Ue.current)||void 0===e||null===(n=e.querySelector("button"))||void 0===n||n.click(),clearTimeout(t)}),150)},datePickerRef:Ue,textField:{InputLabelProps:{style:{fontSize:"14px"}},InputProps:{style:{height:"27px",fontSize:"14px"}}}})]}),(0,W.jsxs)("fieldset",{style:{display:"flex",columnGap:"10px",padding:"10px",border:"1px solid #cbd5e1",borderRadius:"5px",marginTop:"5px"},children:[(0,W.jsx)("legend",{style:{fontSize:"14px"},children:"Credit Entry"}),(0,W.jsxs)("div",{style:{display:"flex",gap:"10px",width:"100%"},children:[(0,W.jsx)(d.Z,{size:"small",label:"Account Name",name:"AccountName",value:fe.Short,onChange:mt,InputProps:{readOnly:!0,style:{height:"27px",fontSize:"14px"}},sx:{flex:1,".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-1px"}}}),(0,W.jsx)(d.Z,{size:"small",label:"Account ID",name:"AccountID",value:fe.AccountID,onChange:mt,InputProps:{readOnly:!0,style:{height:"27px",fontSize:"14px",width:"200px"}},sx:{".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-1px"}}}),(0,W.jsx)(d.Z,{size:"small",label:"Amount",name:"Amount",value:fe.Amount,onChange:mt,InputProps:{readOnly:!0,style:{height:"27px",fontSize:"14px",width:"200px"}},sx:{".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-1px"}}}),(0,W.jsx)(d.Z,{size:"small",label:"Sub Account",name:"SubAccount",value:fe.SubAccount,onChange:mt,InputProps:{readOnly:!0,style:{height:"27px",fontSize:"14px",width:"200px"}},sx:{".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-1px"}}})]})]}),(0,W.jsxs)("fieldset",{style:{display:"flex",columnGap:"10px",border:"1px solid #cbd5e1",borderRadius:"5px",marginTop:"5px"},children:[(0,W.jsx)("legend",{style:{fontSize:"14px"},children:"Debit Entry"}),(0,W.jsx)("div",{style:{marginTop:"10px",width:"100%",position:"relative",height:"300px"},children:(0,W.jsx)("div",{style:{marginTop:"10px",width:"100%",position:"relative"},children:(0,W.jsx)(g.Z,{style:{height:"300px",width:"100%",overflowX:"scroll",position:"absolute"},children:(0,W.jsx)(T.Z,{isLoading:tt,columns:H,rows:Le,table_id:"TempID",isSingleSelection:!0,isRowFreeze:!0,checkboxSelection:!1,footerChildren:function(){return(0,W.jsx)(oe,{})},footerPaginationPosition:"left-right",showFooterSelectedCount:!1})})})})]}),(0,W.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",gap:"20px",marginTop:"15px"},children:(0,W.jsxs)("div",{children:[(0,W.jsx)(s.Z,{color:"success",variant:"contained",onClick:gt,style:{marginRight:"10px"},startIcon:(0,W.jsx)(L.Z,{}),sx:{height:"30px",fontSize:"14px",textTransform:"none"},children:"Accept"}),(0,W.jsx)(s.Z,{color:"error",variant:"contained",onClick:function(){var e,t;Pe(!1),null===(e=qe.current)||void 0===e||e.removeSelection(),null===(t=He.current)||void 0===t||t.removeSelection(),pe({type:"UPDATE_FIELD",field:"TempID",value:""}),pe({type:"UPDATE_FIELD",field:"subSelectedChecks",value:{}})},startIcon:(0,W.jsx)(E.Z,{}),sx:{height:"30px",fontSize:"14px",textTransform:"none"},children:"Cancel"})]})})]})}),(0,W.jsx)(X,{})]})})]})]})}var Y={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center"},modal:{backgroundColor:"#fff",padding:"20px",borderRadius:"5px",textAlign:"center",width:"300px"},button:{margin:"0 10px",background:"white",fontFamily:'"Roboto", sans-serif',color:"#475569",padding:"5px 10px"}},Q=function(){var e=(0,u.useState)(!1),t=(0,a.Z)(e,2),n=t[0],o=t[1],i=(0,u.useState)((function(){return function(){}})),r=(0,a.Z)(i,2),c=r[0],l=r[1],d=(0,u.useState)((function(){return function(){}})),s=(0,a.Z)(d,2),h=s[0],f=s[1],p=function(){h(),o(!1)},m=function(){c(),o(!1)};return{ConfirmationModal:function(){var e=(0,u.useRef)(null);return(0,u.useEffect)((function(){var t;n&&(null===(t=e.current)||void 0===t||t.focus())}),[]),n?(0,W.jsx)("div",{style:Y.overlay,children:(0,W.jsxs)("div",{style:Y.modal,children:[(0,W.jsx)("p",{style:{color:"black"},children:"Do you want to proceed?"}),(0,W.jsx)("button",{ref:e,onClick:m,style:Y.button,children:"Yes"}),(0,W.jsx)("button",{onClick:p,style:Y.button,children:"No"})]})}):null},fireModal:function(e){o(!0),l((function(){return e.onConfirmCallback})),f((function(){return e.onCancelCallback}))}}};function $(){var e,t,n=(0,u.useContext)(q),o=n.checkCollection,a=n.LoadingCheckList,c=n.dispatchModal,l=n.modalSelectedMutate,s=n.checkSelectedCollection,h=n.getSearchReturnCheckInfoLoading,f=n.tableSelectedCheck,p=n.myAxios,m=n.setCheckCollection,x=n.user,v=(0,u.useRef)(null),g=(0,_.useMutation)({mutationKey:"check-list",mutationFn:function(t){return(e=e||(0,r.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.get("/task/accounting/get-check-list?checkListSearch=".concat(t.searchCheckList),{headers:{Authorization:"Bearer ".concat(null===x||void 0===x?void 0:x.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){m(e.data.checkList)}}),C=g.isLoading,D=g.mutate,k=(0,B.XT)();return(0,W.jsxs)(u.Fragment,{children:[(0,W.jsx)(d.Z,{inputRef:v,label:"Search by check no.",name:"searchCheckList",onKeyDown:function(e){var t;"Enter"!==e.code&&"NumpadEnter"!==e.code||D({searchCheckList:null===(t=v.current)||void 0===t?void 0:t.value});(0,B.rO)(e,k,null===v||void 0===v?void 0:v.current)},InputProps:{style:{height:"27px",fontSize:"14px"},inputRef:v},sx:{".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-13px"}}}),(0,W.jsx)("div",{style:{marginTop:"10px",width:"100%",position:"relative"},children:(0,W.jsx)("div",{className:k,style:{height:"".concat((null===(t=document.getElementById("container"))||void 0===t?void 0:t.getBoundingClientRect().height)-30,"px"),width:"100%",overflowX:"scroll",position:"absolute"},children:(0,W.jsx)(T.Z,{ref:f,isLoading:a||h||C,columns:[{field:"DepoSlip",headerName:"Deposit Slip",minWidth:140},{field:"DepoDate",headerName:"Deposit Date",minWidth:140},{field:"Check_No",headerName:"Check No",minWidth:140},{field:"Check_Date",headerName:"Check Date",minWidth:140},{field:"Amount",headerName:"Amount",minWidth:160,align:"right"},{field:"Bank",headerName:"Bank",minWidth:300}],rows:o,table_id:"TempID",isSingleSelection:!0,isRowFreeze:!0,dataSelection:function(e,t,n){var o=t.filter((function(t){return t.TempID===e[0]}))[0];void 0===o||o.length<=0||(c({type:"UPDATE_FIELD",field:"subSelectedChecks",value:{Check_No:o.Check_No,Bank:o.Bank,Check_Date:o.Check_Date,PK:o.Check_No,DepoDate:o.DepoDate,Date_Collection:o.Date_OR,TempID:o.TempID}}),c({type:"UPDATE_FIELD",field:"ReturnReason",value:"DAIF"}),c({type:"UPDATE_FIELD",field:"TempID",value:o.TempID}),c({type:"UPDATE_FIELD",field:"Check_No",value:o.Check_No}),l({BankAccount:o.BankAccount,Official_Receipt:o.Official_Receipt}))},isRowSelectable:function(e){return!s.map((function(e){return e.Check_No})).includes(e.row.Check_No)}})})})]})}function J(){var e,t=(0,u.useContext)(q),n=t.dispatchModal,o=t.modalSelectedMutate,i=t.checkSelectedCollection,r=t.tableSelectedCheckReturn;return(0,W.jsx)("div",{style:{marginTop:"10px",width:"100%",position:"relative"},children:(0,W.jsx)(g.Z,{style:{height:"".concat((null===(e=document.getElementById("container"))||void 0===e?void 0:e.getBoundingClientRect().height)-30,"px"),width:"100%",overflowX:"scroll",position:"absolute"},children:(0,W.jsx)(T.Z,{ref:r,isLoading:!1,columns:[{field:"OR_NO",headerName:"OR No.",minWidth:170},{field:"OR_Date",headerName:"OR Date",minWidth:160},{field:"DepoSlip",headerName:"Deposit Slip",minWidth:160},{field:"DepoDate",headerName:"Deposit Date",minWidth:160},{field:"Check_No",headerName:"Check No",minWidth:160},{field:"Check_Date",headerName:"Check Date",minWidth:160},{field:"Amount",headerName:"Amount",minWidth:160,align:"right"},{field:"Bank",headerName:"Bank/Branch",minWidth:160},{field:"Bank_Account",headerName:"Bank Account",minWidth:160},{field:"Reason",headerName:"Reason",minWidth:160},{field:"Return_Date",headerName:"Return Date",minWidth:160}],rows:i,table_id:"TempID",isSingleSelection:!0,isRowFreeze:!0,dataSelection:function(e,t,i){var r=t.filter((function(t){return t.TempID===e[0]}))[0];void 0===r||r.length<=0||(n({type:"UPDATE_FIELD",field:"subSelectedChecks",value:{Check_No:r.Check_No,Bank:r.Bank,Check_Date:r.Check_Date,PK:r.Check_No,DepoDate:r.DepoDate,Date_Collection:r.OR_Date,TempID:r.TempID}}),n({type:"UPDATE_FIELD",field:"ReturnReason",value:r.Reason}),n({type:"UPDATE_FIELD",field:"ModalDateReturn",value:r.Return_Date}),n({type:"UPDATE_FIELD",field:"TempID",value:r.TempID}),n({type:"UPDATE_FIELD",field:"Check_No",value:r.Check_No}),o({BankAccount:r.Bank_Account,Official_Receipt:r.OR_NO}))}})})})}function ee(){var e,t=(0,u.useContext)(q),n=t.accountingEntry,o=t.tableAccountingEntryCheck;return(0,W.jsx)("div",{style:{marginTop:"10px",width:"100%",position:"relative"},children:(0,W.jsx)(g.Z,{style:{height:"".concat((null===(e=document.getElementById("container"))||void 0===e?void 0:e.getBoundingClientRect().height)-30,"px"),width:"100%",overflowX:"scroll",position:"absolute"},children:(0,W.jsx)(T.Z,{ref:o,isLoading:!1,columns:[{field:"Code",headerName:"Code",minWidth:170},{field:"AccountName",headerName:"Account Name",minWidth:160},{field:"Debit",headerName:"Debit",minWidth:160,align:"right"},{field:"Credit",headerName:"Credit",minWidth:160,align:"right"},{field:"IDNo",headerName:"ID No.",minWidth:160},{field:"Identity",headerName:"Identity",minWidth:160},{field:"SubAcct",headerName:"Sub Acct",minWidth:160},{field:"SubAcctName",headerName:"Sub Acct Name",minWidth:300},{field:"Check_No",headerName:"Check No",minWidth:160},{field:"Bank",headerName:"Bank/Branch",minWidth:160},{field:"Check_Date",headerName:"Check Date",minWidth:160},{field:"Check_Return",headerName:"Check Return",minWidth:160},{field:"Check_Reason",headerName:"Check Reason",minWidth:160},{field:"PK",headerName:"PK",minWidth:160},{field:"DepoDate",headerName:"Date Deposit",minWidth:160},{field:"Date_Collection",headerName:"Date Collection",minWidth:160}],rows:n,table_id:"TempID",isSingleSelection:!0,isRowFreeze:!0,checkboxSelection:!1,footerPaginationPosition:"left-right",footerChildren:function(){return(0,W.jsx)(ie,{})},showFooterSelectedCount:!1})})})}function te(e,t){Object.entries(t).forEach((function(t){var n=(0,a.Z)(t,2),o=n[0],i=n[1];e({type:"UPDATE_FIELD",field:o,value:i})}))}function ne(e,t){return e===t?"translateX(100%)":"translateX(0%)"}function oe(){var e=(0,u.useContext)(q).debitModalCollection;return(0,W.jsx)(g.Z,{sx:{px:2,py:1,display:"flex",justifyContent:"flex-end",borderTop:"2px solid #e2e8f0"},children:(0,W.jsxs)("strong",{children:["Total:"," ",e.reduce((function(e,t){return e+parseFloat(t.Credit.replace(/,/g,""))}),0).toLocaleString("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2})]})})}function ie(){var e=(0,u.useContext)(q).accountingEntry;return(0,W.jsxs)(g.Z,{sx:{px:2,py:1,display:"flex",justifyContent:"flex-end",borderTop:"2px solid #e2e8f0"},children:[(0,W.jsx)("span",{style:{marginRight:"10px"},children:"Total:"}),(0,W.jsx)("input",{style:{fontWeight:"bold"},type:"text",readOnly:!0,value:e.reduce((function(e,t){return e+parseFloat(t.Credit.replace(/,/g,""))}),0).toLocaleString("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2})}),(0,W.jsx)("input",{style:{fontWeight:"bold"},type:"text",readOnly:!0,value:e.reduce((function(e,t){return e+parseFloat(t.Debit.replace(/,/g,""))}),0).toLocaleString("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2})})]})}},25756:function(e,t,n){n.d(t,{Z:function(){return r}});var o=n(29439),i=n(72791);function r(e){var t=(0,i.useState)(0),n=(0,o.Z)(t,2),r=n[0],a=n[1];return{step:e[r],goTo:function(e){a(e)},back:function(){a((function(e){return e<=0?e:e+1}))},next:function(){a((function(t){return t>=e.length-1?t:t+1}))},isFirstStep:0!==r,isLastStep:r===e.length-1,currentStepIndex:r}}},93263:function(e,t,n){var o,i=n(29439),r=n(74165),a=n(15861),c=n(72791),l=n(91933),u=n(3380),d=n(81582),s=n(54164),h=n(80184);function f(e,t,n){return(o=o||(0,a.Z)((0,r.Z)().mark((function e(t,n,o){var i,a=arguments;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=a.length>3&&void 0!==a[3]?a[3]:"",e.abrupt("return",t.get("".concat(null===o||void 0===o?void 0:o.url,"?").concat(null===o||void 0===o?void 0:o.queryUrlName,"=").concat(i),{headers:{Authorization:"Bearer ".concat(null===n||void 0===n?void 0:n.accessToken)}}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t.Z=function(e){var t,n,o=e.link,p=e.uniqueId,m=e.queryKey,x=e.responseDataKey,v=e.columns,g=e.onSelected,C=void 0===g?function(){}:g,D=e.onRemoveSelected,k=void 0===D?function(){}:D,S=e.onSuccess,b=void 0===S?function(){}:S,y=e.searchRef,w=e.onCellKeyDown,R=e.onCloseFunction,N=void 0===R?function(){}:R,A=e.CustomizeAxios,I=void 0===A?f:A,_=e.isRowSelectable,Z=e.getCellClassName,E=(0,c.useContext)(u.V),L=E.myAxios,j=E.user,F=(0,c.useState)(!1),M=(0,i.Z)(F,2),T=M[0],P=M[1],z=(0,c.useState)([]),B=(0,i.Z)(z,2),U=B[0],W=B[1];function O(){return(t=t||(0,a.Z)((0,r.Z)().mark((function e(){var t,n=arguments;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:"",e.next=3,I(L,j,o,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var K=(0,l.useQuery)({queryKey:m,queryFn:function(){return(n=n||(0,a.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t=e;W(t.data[x]),b(t)},refetchOnWindowFocus:!1}),q=K.isLoading,G=K.refetch;return{show:T,rows:U,isLoading:q,openModal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";(0,s.flushSync)((function(){P(!0)})),null!==y&&void 0!==y&&y.current&&(y.current.value=e,O(e).then((function(e){if(null===e||void 0===e||!e.data.success)return alert("Error : ".concat(null===e||void 0===e?void 0:e.data.message));W(e.data[x]),null!==y&&void 0!==y&&y.current&&y.current.focus()})))},closeModal:function(){var e;(P(!1),N)&&N(null===y||void 0===y||null===(e=y.current)||void 0===e?void 0:e.value)},ModalComponent:(0,h.jsx)(d.ZP,{getCellClassName:Z,searchRef:y,showModal:T,onCloseModal:function(){var e;(P(!1),N)&&N(null===y||void 0===y||null===(e=y.current)||void 0===e?void 0:e.value)},onClickCloseIcon:function(){var e;(P(!1),N)&&N(null===y||void 0===y||null===(e=y.current)||void 0===e?void 0:e.value)},searchOnChange:function(e){},onSearchKeyEnter:function(e){O(e).then((function(e){if(null===e||void 0===e||!e.data.success)return alert("Error : ".concat(null===e||void 0===e?void 0:e.data.message));W(e.data[x])}))},onCellKeyDown:w,height:300,isLoading:q,queryKey:m,columns:v,onSelectionChange:function(e,t){if(e.length<=0)return k(t);var n=new Set(e),o=t.filter((function(e){return n.has(e[p].toString())}));o.length<=0||C(o,t)},id:p,rows:U,setRows:W,isRowSelectable:_}),refetch:G}}},64230:function(e,t,n){n.d(t,{L:function(){return l},s:function(){return c}});var o=n(74165),i=n(15861),r=n(21830),a=n.n(r);function c(e){var t;a().fire({title:"Are you sure!",html:null!==e&&void 0!==e&&e.text?null===e||void 0===e?void 0:e.text:e.isUpdate?"Are you sure you want to make this change?":"Are you sure you want to delete this?",icon:"warning",input:"text",inputAttributes:{autocapitalize:"off"},showCancelButton:!0,confirmButtonText:"Save",confirmButtonColor:"green",showLoaderOnConfirm:!0,preConfirm:function(n){return(t=t||(0,i.Z)((0,o.Z)().mark((function t(n){return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{e.cb(n)}catch(o){a().showValidationMessage("\n            Request failed: ".concat(o,"\n          "))}case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)},allowOutsideClick:function(){return!a().isLoading()}}).then((function(t){if(t.isConfirmed&&e.isConfirm)return e.isConfirm();e.isDeclined&&e.isDeclined()}))}function l(e){a().fire({title:"Are you sure?",text:null!==e&&void 0!==e&&e.text?null===e||void 0===e?void 0:e.text:"Do you want to proceed with saving?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, save it!"}).then((function(t){if(t.isConfirmed&&e.isConfirm)return e.isConfirm();e.isDeclined&&e.isDeclined()}))}},42419:function(e,t,n){var o=n(64836);t.Z=void 0;var i=o(n(45649)),r=n(80184),a=(0,i.default)((0,r.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");t.Z=a},98946:function(e,t,n){var o=n(64836);t.Z=void 0;var i=o(n(45649)),r=n(80184),a=(0,i.default)((0,r.jsx)("path",{d:"M16.59 7.58 10 14.17l-3.59-3.58L5 12l5 5 8-8zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"CheckCircleOutline");t.Z=a},84669:function(e,t,n){var o=n(64836);t.Z=void 0;var i=o(n(45649)),r=n(80184),a=(0,i.default)((0,r.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8 0-1.85.63-3.55 1.69-4.9L16.9 18.31C15.55 19.37 13.85 20 12 20zm6.31-3.1L7.1 5.69C8.45 4.63 10.15 4 12 4c4.42 0 8 3.58 8 8 0 1.85-.63 3.55-1.69 4.9z"}),"NotInterested");t.Z=a},86753:function(e,t,n){var o=n(64836);t.Z=void 0;var i=o(n(45649)),r=n(80184),a=(0,i.default)((0,r.jsx)("path",{d:"M12 5V2L8 6l4 4V7c3.31 0 6 2.69 6 6 0 2.97-2.17 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93 0-4.42-3.58-8-8-8zm-6 8c0-1.65.67-3.15 1.76-4.24L6.34 7.34C4.9 8.79 4 10.79 4 13c0 4.08 3.05 7.44 7 7.93v-2.02c-2.83-.48-5-2.94-5-5.91z"}),"RestartAlt");t.Z=a},53329:function(e,t,n){var o=n(64836);t.Z=void 0;var i=o(n(45649)),r=n(80184),a=(0,i.default)((0,r.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"}),"Save");t.Z=a}}]);
//# sourceMappingURL=3147.bca82675.chunk.js.map