"use strict";(self.webpackChunkupward=self.webpackChunkupward||[]).push([[8185],{8185:function(e,t,n){n.r(t),n.d(t,{default:function(){return re},incrementCheckNo:function(){return ie},pdcBanksColumn:function(){return ee},pdcColumn:function(){return X},pdcSearchColumn:function(){return $},reducer:function(){return H},setNewStateValue:function(){return oe}});var r=n(93433),o=n(74165),i=n(15861),a=n(29439),l=n(4942),c=n(1413),u=n(72791),d=n(64554),s=n(27391),f=n(36151),p=n(65117),h=n(23786),x=n(68096),m=n(94925),v=n(77196),g=n(63466),k=n(13400),y=n(88447),D=n(20890),b=n(42419),C=n(91933),N=n(21830),w=n.n(N),S=n(53329),R=n(3380),E=n(13784),_=n(91421),Z=n(29823),j=n(54164),I=n(39709),P=n(86753),A=n(73518),T=n(64230),F=n(71640),B=n(92562),M=n(58340),L=n(5519),z=n(2548),U=n(37209),O=n(763),K=n(79018),W=n(80184),q=function(e){var t,n=e.myAxios,r=e.user,l=e.column,c=e.link,d=e.onSelectionChange,s=e.responseDataKey,f=e.onModalClose,p=void 0===f?function(){}:f,h=(0,u.useId)(),x=(0,u.useRef)(null),m=(0,u.useRef)(null),v=(0,u.useRef)(null),g=(0,u.useState)(!1),D=(0,a.Z)(g,2),b=D[0],N=D[1],w=(0,u.useState)([]),S=(0,a.Z)(w,2),R=S[0],E=S[1],_=(0,C.useMutation)({mutationKey:h,mutationFn:function(e){return(t=t||(0,i.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.get("".concat(null===c||void 0===c?void 0:c.url,"?").concat(null===c||void 0===c?void 0:c.queryUrlName,"=").concat(t.search),{headers:{Authorization:"Bearer ".concat(null===r||void 0===r?void 0:r.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){E(e.data[s])}}),j=_.isLoading,I=_.mutate,P=(0,O.throttle)((function(e){return function(e){""===e&&I({search:e})}(e)}),500),A=function(){N(!1),p()};return(0,u.useEffect)((function(){b&&v.current&&(0,K.D)(1050).then((function(){var e;null===(e=v.current)||void 0===e||e.focus()}))}),[b,v]),{Modal:(0,W.jsx)(y.Z,{open:b,onClose:function(){N(!1)},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,W.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"auto",background:"#fff",paddingTop:"30px",paddingBottom:"20px",paddingLeft:"10px",paddingRight:"10px"},children:(0,W.jsxs)("div",{children:[(0,W.jsx)(U.oi,{label:{style:{display:"none"}},input:{className:"search-input-up-on-key-down",type:"text",style:{width:"100%",marginBottom:"20px"},onChange:function(e){e.preventDefault(),P(e.currentTarget.value)},onKeyDown:function(e){if("Enter"!==e.key&&"NumpadEnter"!==e.key||(e.preventDefault(),I({search:e.target.value})),"ArrowDown"===e.key){e.preventDefault();var t=m.current.getParentElement().querySelector(".grid-container .row-0.col-0 input");setTimeout((function(){t&&t.focus()}),100)}}},inputRef:x}),(0,W.jsx)(z.r,{ref:m,rows:R,column:l.filter((function(e){return!e.hide})),width:460,height:530,dataReadOnly:!0,onSelectionChange:d}),(0,W.jsx)(k.Z,{style:{position:"absolute",top:"5px",right:"10px"},"aria-label":"search-client",onClick:A,children:(0,W.jsx)(Z.Z,{style:{fontSize:"15px"}})})]})})}),openModal:function(e){I({search:e}),N(!0),setTimeout((function(){var t;x.current&&(x.current.value=e),null===(t=x.current)||void 0===t||t.focus()}),150)},closeModal:A,isLoading:j}},G=n(78946),Y=n(30948),V=n(16386),J={Sub_Ref_No:"",Ref_No:"",PNo:"",IDNo:"",Date:new Date,Name:"",Remarks:"",PDC_Status:"",Deposit_Slip:"",DateDeposit:"",OR_No:"",search:"",pdcMode:"",checkMode:"",sub_account:"",Acronym:""},Q={CheckIdx:"0",BankName:"",BankCode:"",Branch:"",Check_Date:new Date,Check_No:"",Check_Amnt:"",Check_Remarks:"",Check_Count:""},H=function(e,t){return"UPDATE_FIELD"===t.type?(0,c.Z)((0,c.Z)({},e),{},(0,l.Z)({},t.field,t.value)):e},X=[{field:"Check_No",headerName:"Check No.",width:150},{field:"Check_Date",headerName:"Check Date",width:150},{field:"Check_Amnt",headerName:"Amount",width:150,type:"number"},{field:"BankName",headerName:"Bank",width:200},{field:"Branch",headerName:"Branch",width:200},{field:"Check_Remarks",headerName:"Checked Remarks",width:350},{field:"Deposit_Slip",headerName:"Deposit Slip",width:150},{field:"DateDeposit",headerName:"Date Deposit",width:150},{field:"OR_No",headerName:"OR Num",width:150},{field:"BankCode",headerName:"Bank Code",width:150,hide:!0}],$=[{field:"Date",headerName:"Date Received",width:160},{field:"Ref_No",headerName:"Ref No.",width:160},{field:"Name",headerName:"Name",flex:1}],ee=[{field:"Bank_Code",headerName:"Code",width:130},{field:"Bank",headerName:"Bank Name",flex:1}],te="pdc",ne="pdc-search";function re(){var e,t,n,N,O,K,$,ee=(0,u.useRef)(null),re=u.useState(null),ae=(0,a.Z)(re,2),le=ae[0],ce=ae[1],ue=Boolean(le),de=(0,u.useState)(!1),se=(0,a.Z)(de,2),fe=se[0],pe=se[1],he=(0,u.useState)([]),xe=(0,a.Z)(he,2),me=xe[0],ve=xe[1],ge=(0,u.useState)([]),ke=(0,a.Z)(ge,2),ye=ke[0],De=ke[1],be=(0,u.useState)(!1),Ce=(0,a.Z)(be,2),Ne=Ce[0],we=Ce[1],Se=(0,u.useState)(!1),Re=(0,a.Z)(Se,2),Ee=Re[0],_e=Re[1],Ze=(0,u.useReducer)(H,J),je=(0,a.Z)(Ze,2),Ie=je[0],Pe=je[1],Ae=(0,u.useReducer)(H,Q),Te=(0,a.Z)(Ae,2),Fe=Te[0],Be=Te[1],Me=(0,u.useContext)(R.V),Le=Me.myAxios,ze=Me.user,Ue=((0,u.useRef)(null),(0,u.useRef)(null)),Oe=(0,u.useRef)(null),Ke=(0,u.useRef)(null),We=(0,u.useRef)(null),qe=(0,u.useRef)(null),Ge=(0,u.useRef)(null),Ye=(0,u.useRef)(null),Ve=(0,u.useRef)(null),Je=(0,u.useRef)(null),Qe=(0,u.useRef)(null),He=(0,u.useRef)(null),Xe=(0,u.useRef)(null),$e=(0,u.useRef)(null),et=(0,u.useRef)(""),tt=(0,u.useRef)(""),nt=(0,u.useRef)(""),rt=(0,u.useRef)(""),ot=(0,u.useRef)(null),it=(0,C.useQueryClient)(),at=(0,u.useRef)(null),lt=(0,u.useRef)(null),ct=(0,u.useRef)(null),ut=(0,u.useRef)(null),dt=(0,u.useRef)(null),st=(0,C.useQuery)({queryKey:"new-ref-number",queryFn:function(){return(e=e||(0,i.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Le.get("/task/accounting/pdc-new-ref-number",{headers:{Authorization:"Bearer ".concat(null===ze||void 0===ze?void 0:ze.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},refetchOnWindowFocus:!1,onSuccess:function(e){var t=e;Pe({type:"UPDATE_FIELD",field:"Ref_No",value:t.data.RefNo[0].pdcID}),Pe({type:"UPDATE_FIELD",field:"Sub_Ref_No",value:t.data.RefNo[0].pdcID})}}),ft=st.isLoading,pt=st.refetch,ht=(0,C.useMutation)({mutationKey:te,mutationFn:function(e){return(t=t||(0,i.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("update"!==Ie.pdcMode){e.next=5;break}return delete t.mode,e.next=4,Le.post("/task/accounting/update-pdc",t,{headers:{Authorization:"Bearer ".concat(null===ze||void 0===ze?void 0:ze.accessToken)}});case 4:case 8:return e.abrupt("return",e.sent);case 5:return delete t.mode,e.next=8,Le.post("/task/accounting/add-pdc",t,{headers:{Authorization:"Bearer ".concat(null===ze||void 0===ze?void 0:ze.accessToken)}});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){if(e.data.success)return pt(),it.invalidateQueries(ne),oe(Pe,J),De([]),Pe({type:"UPDATE_FIELD",field:"pdcMode",value:""}),w().fire({position:"center",icon:"success",title:e.data.message,showConfirmButton:!1,timer:1500});w().fire({position:"center",icon:"error",title:e.data.message,showConfirmButton:!1,timer:1500})}}),xt=ht.mutate,mt=ht.isLoading,vt=(0,C.useMutation)({mutationKey:te,mutationFn:function(e){return(n=n||(0,i.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Le.post("/task/accounting/get-search-pdc-check",t,{headers:{Authorization:"Bearer ".concat(null===ze||void 0===ze?void 0:ze.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){return(N=N||(0,i.Z)((0,o.Z)().mark((function e(t){var n,r,a,l,u,d,s,f;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f=function(e,t){return(n=n||(0,i.Z)((0,o.Z)().mark((function e(t,n){var r,i,a;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],i=(0,o.Z)().mark((function e(){var i,l,c,u,d,s;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t[a],l="".concat(n,"/").concat(i.uniqueFilename),e.next=4,fetch(l);case 4:return c=e.sent,e.next=7,c.blob();case 7:u=e.sent,d=new File([u],i.fileName,{type:i.fileType}),s=new FileReader,r.push(new Promise((function(e,t){s.onload=function(t){e(d)},s.onerror=function(e){t(new Error("Error reading file: "+d.name))},s.readAsDataURL(d)})));case 11:case"end":return e.stop()}}),e)})),a=0;case 3:if(!(a<t.length)){e.next=8;break}return e.delegateYield(i(),"t0",5);case 5:a++,e.next=3;break;case 8:return e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)},null!==t&&void 0!==t&&t.data.success){e.next=3;break}return e.abrupt("return",alert("Error : ".concat(null===t||void 0===t?void 0:t.data.message)));case 3:if(a=(r=t).data.getSearchPDCCheck[0].Ref_No,!r.data.upload[0]){e.next=14;break}return u=JSON.parse(null===(l=r.data.upload[0])||void 0===l?void 0:l.upload),e.next=9,f(u,"".concat("/","pdc/").concat(a));case 9:return d=e.sent,e.next=12,Promise.all(d);case 12:s=e.sent,ve(s);case 14:De(r.data.getSearchPDCCheck.map((function(e,t){return(0,c.Z)((0,c.Z)({},e),{},{CheckIdx:"".concat(t)})}))),Pe({type:"UPDATE_FIELD",field:"Ref_No",value:r.data.getSearchPDCCheck[0].Ref_No}),Pe({type:"UPDATE_FIELD",field:"Name",value:r.data.getSearchPDCCheck[0].Name}),Pe({type:"UPDATE_FIELD",field:"Date",value:r.data.getSearchPDCCheck[0].Date}),Pe({type:"UPDATE_FIELD",field:"PNo",value:r.data.getSearchPDCCheck[0].PNo}),Pe({type:"UPDATE_FIELD",field:"IDNo",value:r.data.getSearchPDCCheck[0].IDNo}),Pe({type:"UPDATE_FIELD",field:"Acronym",value:r.data.getSearchPDCCheck[0].Acronym}),Pe({type:"UPDATE_FIELD",field:"sub_account",value:r.data.getSearchPDCCheck[0].sub_account}),Pe({type:"UPDATE_FIELD",field:"Remarks",value:r.data.getSearchPDCCheck[0].Remarks}),Pe({type:"UPDATE_FIELD",field:"pdcMode",value:"update"});case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}),gt=vt.mutate,kt=vt.isLoading,yt=q({myAxios:Le,user:ze,link:{url:"/task/accounting/search-pdc-policy-id",queryUrlName:"searchPdcPolicyIds"},column:[{field:"Type",headerName:"Type",width:130},{field:"IDNo",headerName:"ID No.",width:200},{field:"chassis",headerName:"Chassis No.",width:200,hide:!0},{field:"Name",headerName:"Name",width:350},{field:"ID",headerName:"ID",width:300,hide:!0},{field:"client_id",headerName:"client_id",width:200,hide:!0}],onSelectionChange:function(e){var t,n;e.length>0&&(Pe({type:"UPDATE_FIELD",field:"PNo",value:e[0].IDNo}),Pe({type:"UPDATE_FIELD",field:"IDNo",value:e[0].client_id}),Pe({type:"UPDATE_FIELD",field:"Name",value:null!==(t=e[0].Name)&&void 0!==t?t:""}),Pe({type:"UPDATE_FIELD",field:"Remarks",value:null!==(n=e[0].remarks)&&void 0!==n?n:""}),Pe({type:"UPDATE_FIELD",field:"sub_account",value:e[0].sub_account}),Pe({type:"UPDATE_FIELD",field:"Acronym",value:e[0].Acronym}),bt(),ye.length<=0&&setTimeout((function(){var e;null===(e=ot.current)||void 0===e||e.click()}),100))},responseDataKey:"clientsId"}),Dt=yt.Modal,bt=yt.closeModal,Ct=yt.openModal,Nt=yt.isLoading,wt=q({myAxios:Le,user:ze,link:{url:"/task/accounting/search-pdc-banks",queryUrlName:"searchPdcBanks"},column:[{field:"Bank_Code",headerName:"Code",width:100},{field:"Bank",headerName:"Bank Name",width:350}],onSelectionChange:function(e){e.length>0&&(setTimeout((function(){et.current=e[0].Bank_Code,Ve.current&&(Ve.current.value=e[0].Bank)}),100),Rt(),we(!0),setTimeout((function(){var e;null===(e=Je.current)||void 0===e||e.focus()}),100))},onModalClose:function(){setTimeout((function(){we(!0)}),100)},responseDataKey:"pdcBanks"}),St=wt.Modal,Rt=wt.closeModal,Et=wt.openModal,_t=wt.isLoading,Zt=q({myAxios:Le,user:ze,column:[{field:"Date",headerName:"Date Received",width:90},{field:"Ref_No",headerName:"Ref No.",width:80},{field:"Name",headerName:"Name",width:320}],link:{url:"/task/accounting/search-pdc",queryUrlName:"searchPDCInput"},onSelectionChange:function(e){var t;e.length>0&&(gt({ref_no:e[0].Ref_No}),It(),Ue.current&&(null===(t=Ue.current)||void 0===t||t.focus()))},responseDataKey:"searchPDC"}),jt=Zt.Modal,It=Zt.closeModal,Pt=Zt.openModal,At=Zt.isLoading,Tt=function(e){var t=e.target,n=t.name,r=t.value;Pe({type:"UPDATE_FIELD",field:n,value:r})};var Ft=function(e){e.preventDefault(),pe(!1)},Bt=function(e){e.preventDefault(),pe(!0)},Mt=function(e){e.preventDefault();var t,n=e.dataTransfer.files,o=Array.from(n),i=[].concat((0,r.Z)(me),o);if(pe(!1),(0,B.checkFile)(i))return null===(t=Oe.current)||void 0===t||t.click(),alert("file is not valid Extention!");ve(i)};function Lt(e){return(e||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function zt(){setTimeout((function(){var e;null===(e=ee.current)||void 0===e||e.resetTableSelected();var t=ee.current.getParentElement().querySelector(".grid-container .row-0.col-0 input");setTimeout((function(){t&&t.focus()}),100)}),100)}var Ut=""===Ie.pdcMode,Ot=window.innerWidth-50,Kt=window.innerHeight-145;return(0,W.jsxs)("div",{style:{width:"100%",height:"100%",flex:1,background:"red",padding:"10px",backgroundColor:"#F8F8FF"},children:[St,jt,Dt,(0,W.jsx)(d.Z,{sx:function(e){return(0,l.Z)({display:"flex",alignItems:"center",columnGap:"20px"},e.breakpoints.down("sm"),{flexDirection:"column",alignItems:"flex-start",flex:1,marginBottom:"15px"})},children:(0,W.jsxs)("div",{style:{display:"flex",alignItems:"center",columnGap:"5px",marginBottom:"15px"},children:[At?(0,W.jsx)(I.Z,{loading:At}):(0,W.jsx)(s.Z,{label:"Search",size:"small",name:"search",value:Ie.search,onChange:Tt,onKeyDown:function(e){("Enter"!==e.code&&"NumpadEnter"!==e.code||(e.preventDefault(),Pt(e.target.value)),"ArrowDown"===e.key)&&(e.preventDefault(),document.querySelector(".grid-container").focus())},InputProps:{style:{height:"27px",fontSize:"14px"},inputRef:Ue,className:"manok"},sx:{width:"400px",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}}),""===Ie.pdcMode&&(0,W.jsx)(f.Z,{sx:{height:"30px",fontSize:"11px"},variant:"contained",startIcon:(0,W.jsx)(b.Z,{sx:{width:15,height:15}}),id:"entry-header-save-button",color:"primary",onClick:function(){Pe({type:"UPDATE_FIELD",field:"pdcMode",value:"add"})},children:"New"}),(0,W.jsx)(I.Z,{sx:{height:"30px",fontSize:"11px"},ref:Ke,id:"save-entry-header",color:"success",variant:"contained",type:"submit",onClick:function(e){return(O=O||(0,i.Z)((0,o.Z)().mark((function e(t){var n,r,i,a;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=function(e){var t=me;if(t.length>0)for(var n=function(){var n=t[r],o=new FileReader;e.push(new Promise((function(e,t){o.onload=function(t){var r;e({datakey:"pdc_file",fileName:n.name,fileContent:null===(r=t.target)||void 0===r?void 0:r.result,fileType:n.type,file:n})},o.onerror=function(e){t(new Error("Error reading file: "+n.name))},o.readAsDataURL(n)})))},r=0;r<t.length;r++)n()},""!==Ie.PNo){e.next=3;break}return e.abrupt("return",w().fire({position:"center",icon:"warning",title:"Please provide loan information!",timer:1500}).then((function(){setTimeout((function(){var e;null===(e=We.current)||void 0===e||e.click()}),350)})));case 3:if(!(ye.length<=0)){e.next=5;break}return e.abrupt("return",w().fire({position:"center",icon:"warning",title:"Please provide entry!",timer:1500}).then((function(){we(!0)})));case 5:if(!(Ie.PNo.length>=45)){e.next=7;break}return e.abrupt("return",w().fire({position:"center",icon:"warning",title:"Pno is too long!",timer:1500}));case 7:if(!(Ie.Remarks.length>=220)){e.next=9;break}return e.abrupt("return",w().fire({position:"center",icon:"warning",title:"Remarks is too long!",timer:1500}));case 9:return r(n=[]),e.next=13,Promise.all(n);case 13:i=e.sent,a={Ref_No:Ie.Ref_No,PNo:Ie.PNo,IDNo:Ie.IDNo,Date:Ie.Date,Name:Ie.Name,Remarks:Ie.Remarks,BankCode:Ie.BankCode,checks:JSON.stringify(ye)},"update"===Ie.pdcMode?(0,T.s)({isUpdate:!0,cb:function(e){xt((0,c.Z)((0,c.Z)({},a),{},{userCodeConfirmation:e,fileToSave:i}))}}):(0,T.L)({isConfirm:function(){xt((0,c.Z)((0,c.Z)({},a),{},{fileToSave:i}))}});case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)},disabled:""===Ie.pdcMode,loading:mt,startIcon:(0,W.jsx)(S.Z,{sx:{width:15,height:15}}),children:"Save"}),("add"===Ie.pdcMode||"update"===Ie.pdcMode)&&(0,W.jsx)(f.Z,{sx:{height:"30px",fontSize:"11px"},variant:"contained",startIcon:(0,W.jsx)(Z.Z,{sx:{width:15,height:15}}),onClick:function(){w().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, cancel it!"}).then((function(e){e.isConfirmed&&(J.Sub_Ref_No=Ie.Sub_Ref_No,J.Ref_No=Ie.Sub_Ref_No,oe(Pe,J),De([]),Pe({type:"UPDATE_FIELD",field:"pdcMode",value:""}))}))},color:"error",children:"Cancel"}),(0,W.jsx)(f.Z,{sx:{height:"30px",fontSize:"11px"},disabled:""===Ie.pdcMode,variant:"contained",startIcon:(0,W.jsx)(b.Z,{sx:{width:15,height:15}}),onClick:function(){var e,t=ye[ye.length-1];Q.Check_No=ie(null===t||void 0===t?void 0:t.Check_No),oe(Be,Q),Pe({type:"UPDATE_FIELD",field:"checkMode",value:""}),(0,j.flushSync)((function(){we(!0)})),null===(e=Ye.current)||void 0===e||e.focus()},ref:ot,children:"Add Check"}),(0,W.jsxs)("div",{children:[(0,W.jsx)(f.Z,{disabled:"update"!==Ie.pdcMode,id:"basic-button","aria-controls":ue?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":ue?"true":void 0,onClick:function(e){ce(e.currentTarget)},sx:{height:"30px",fontSize:"11px",color:"white",backgroundColor:L.Z[600],"&:hover":{backgroundColor:L.Z[700]}},children:"Print"}),(0,W.jsxs)(p.Z,{id:"basic-menu",anchorEl:le,open:ue,onClose:function(){ce(null)},MenuListProps:{"aria-labelledby":"basic-button"},children:[(0,W.jsx)(h.Z,{onClick:function(){(0,j.flushSync)((function(){localStorage.removeItem("printString"),localStorage.setItem("dataString",JSON.stringify(ye)),localStorage.setItem("paper-width","8.5in"),localStorage.setItem("paper-height","11in"),localStorage.setItem("module","pdc"),localStorage.setItem("state",JSON.stringify(Ie)),localStorage.setItem("column",JSON.stringify([{datakey:"Check_No",header:"CHECK NO",width:"80px"},{datakey:"Check_Date",header:"DATE",width:"130px"},{datakey:"BankName",header:"BANK",width:"240px"},{datakey:"Check_Amnt",header:"AMOUNT",width:"70px"},{datakey:"SEQ",header:"SEQ",width:"30px"}])),localStorage.setItem("title","UMIS"===(null===ze||void 0===ze?void 0:ze.department)?"UPWARD MANAGEMENT INSURANCE SERVICES\n Post Date Checks Receipt":"UPWARD CONSULTANCY SERVICES AND MANAGEMENT INC.\n Post Date Checks Receipt")})),window.open("/dashboard/print","_blank")},children:"PDC Receipt"}),(0,W.jsx)(h.Z,{onClick:function(){(0,j.flushSync)((function(){var e=M.renderToString((0,W.jsxs)("div",{children:[(0,W.jsx)("p",{style:{color:"#d1d5db",fontSize:"11px",textAlign:"center",padding:0,marginTop:"8px",marginBottom:0},children:"UCSMI"}),(0,W.jsx)("p",{style:{color:"#d1d5db",fontSize:"11px",textAlign:"center",padding:0,margin:0},children:Ie.Name}),(0,W.jsx)("p",{style:{color:"#d1d5db",fontSize:"11px",textAlign:"center",padding:0,margin:0},children:Ie.IDNo}),(0,W.jsx)("p",{style:{color:"#d1d5db",fontSize:"11px",textAlign:"center",padding:0,margin:"20px"},children:Ie.Ref_No})]}));localStorage.setItem("printString",e),localStorage.removeItem("dataString"),localStorage.setItem("paper-width","8.5in"),localStorage.setItem("paper-height","11in")})),window.open("/dashboard/print","_blank")},children:"PDC Labeling"})]})]})]})}),(0,W.jsx)("form",{onKeyDown:function(e){"Enter"!==e.code&&"NumpadEnter"!==e.code||e.preventDefault()},style:{marginBottom:"20px"},children:(0,W.jsx)(d.Z,{sx:function(e){return(0,l.Z)({display:"flex",columnGap:"15px",flexDirection:"row"},e.breakpoints.down("md"),{flexDirection:"column",rowGap:"10px"})},children:(0,W.jsxs)(d.Z,{sx:{display:"flex",gap:"10px",width:"100%"},children:[(0,W.jsxs)("fieldset",{style:{flex:1,display:"flex",flexDirection:"column",gap:"10px",padding:"15px",border:"1px solid #cbd5e1",borderRadius:"5px"},children:[(0,W.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[ft?(0,W.jsx)(I.Z,{loading:ft}):(0,W.jsxs)(x.Z,{fullWidth:!0,variant:"outlined",size:"small",disabled:Ut,sx:{".MuiFormLabel-root":{fontSize:"14px",background:"white",zIndex:99,padding:"0 3px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},children:[(0,W.jsx)(m.Z,{htmlFor:"pdc-id-field",children:"Reference No."}),(0,W.jsx)(v.Z,{readOnly:"UCSMI"!==(null===ze||void 0===ze?void 0:ze.department),sx:{height:"27px",fontSize:"14px",fieldset:{borderColor:"black"}},disabled:Ut,label:"Reference No.",name:"Ref_No",value:Ie.Ref_No,onChange:Tt,onKeyDown:function(e){var t;"Enter"!==e.code&&"NumpadEnter"!==e.code||(null===(t=at.current)||void 0===t||t.focus())},id:"pdc-id-field",endAdornment:(0,W.jsx)(g.Z,{position:"end",children:(0,W.jsx)(k.Z,{disabled:Ut,"aria-label":"search-client",color:"secondary",edge:"end",children:(0,W.jsx)(P.Z,{})})})})]}),(0,W.jsx)(E.Z,{fullWidth:!0,disabled:Ut,label:"Date Received",onChange:function(e){Pe({type:"UPDATE_FIELD",field:"Date",value:e})},inputRef:at,value:new Date(Ie.Date),onKeyDown:function(e){var t;"Enter"!==e.code&&"NumpadEnter"!==e.code||(null===(t=lt.current)||void 0===t||t.focus())},textField:{InputLabelProps:{style:{fontSize:"14px"}},InputProps:{style:{height:"27px",fontSize:"14px"}}}})]}),(0,W.jsx)(s.Z,{InputLabelProps:{sx:{color:"black"}},variant:"outlined",size:"small",label:"Remarks",name:"Remarks",value:Ie.Remarks,onChange:Tt,disabled:Ut,onKeyDown:function(e){var t;"Enter"!==e.code&&"NumpadEnter"!==e.code||(null===(t=ct.current)||void 0===t||t.focus())},InputProps:{style:{height:"27px",fontSize:"14px"},inputRef:lt},sx:{fieldset:{borderColor:"black"},".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}})]}),(0,W.jsxs)("fieldset",{style:{flex:1,display:"flex",gap:"10px",padding:"15px",border:"1px solid #cbd5e1",borderRadius:"5px",flexDirection:"column"},children:[(0,W.jsxs)("div",{style:{width:"100%",flex:1,display:"flex",gap:"10px"},children:[Nt?(0,W.jsx)(I.Z,{loading:Nt}):(0,W.jsxs)(x.Z,{fullWidth:!0,variant:"outlined",size:"small",disabled:Ut,sx:{flex:1,".MuiFormLabel-root":{fontSize:"14px",background:"white",zIndex:99,padding:"0 3px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},children:[(0,W.jsx)(m.Z,{htmlFor:"label-input-id",children:"PN/Client ID"}),(0,W.jsx)(v.Z,{inputRef:ct,sx:{fieldset:{borderColor:"black"},height:"27px",fontSize:"14px"},onKeyDown:function(e){var t;"Enter"!==e.code&&"NumpadEnter"!==e.code||(null===(t=We.current)||void 0===t||t.click())},name:"PNo",value:Ie.PNo,onChange:Tt,id:"label-input-id",endAdornment:(0,W.jsx)(g.Z,{position:"end",children:(0,W.jsx)(k.Z,{ref:We,disabled:Ut,"aria-label":"search-client",color:"secondary",edge:"end",onClick:function(){return Ct(Ie.PNo)},children:(0,W.jsx)(_.Z,{})})}),label:"PN/Client ID"})]}),(0,W.jsx)(s.Z,{InputLabelProps:{sx:{color:"black"}},variant:"outlined",size:"small",label:"Branch",name:"Acronym",value:Ie.Acronym,onChange:Tt,disabled:Ut,onKeyDown:function(e){var t;"Enter"!==e.code&&"NumpadEnter"!==e.code||(null===(t=dt.current)||void 0===t||t.focus())},InputProps:{style:{height:"27px",fontSize:"14px"},readOnly:!0,inputRef:ut},sx:{fieldset:{borderColor:"black"},flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}})]}),(0,W.jsxs)("div",{style:{width:"100%",display:"flex",columnGap:"10px"},children:[(0,W.jsx)(s.Z,{InputLabelProps:{sx:{color:"black"}},variant:"outlined",size:"small",label:"Clients Name",name:"Name",value:Ie.Name,onChange:Tt,disabled:Ut,onKeyDown:function(e){var t;"Enter"!==e.code&&"NumpadEnter"!==e.code||(null===(t=Ke.current)||void 0===t||t.click())},InputProps:{style:{height:"27px",fontSize:"14px"},readOnly:!0,inputRef:dt},sx:{fieldset:{borderColor:"black"},flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}}),(0,W.jsx)(f.Z,{sx:{height:"27px",fontSize:"11px"},disabled:""===Ie.pdcMode,variant:"contained",startIcon:(0,W.jsx)(A.Z,{sx:{width:15,height:15}}),onClick:function(){_e(!0)},children:"Upload Check"})]})]})]})})}),(0,W.jsx)(z.r,{isLoading:kt,ref:ee,rows:ye,column:X,width:Ot,height:Kt,dataReadOnly:!0,onSelectionChange:function(e){if(e.length>0){var t,n=e[0];console.log(n),setTimeout((function(){Ye.current&&Ve.current&&Je.current&&Qe.current&&He.current&&Xe.current&&$e.current&&(Ye.current.value=n.Check_No,Ve.current.value=n.BankName,Je.current.value=n.Branch,Qe.current.value=n.Check_Remarks,He.current.value=n.Check_Date,Xe.current.value=Lt(parseFloat(n.Check_Amnt.replace(/,/g,""))),$e.current.value="0",et.current=n.BankCode,tt.current=n.Deposit_Slip,nt.current=n.DateDeposit,rt.current=n.Ref_No)}),100),(0,j.flushSync)((function(){we(!0)})),null===(t=Ge.current)||void 0===t||t.focusVisible()}else Pe({type:"UPDATE_FIELD",field:"checkMode",value:""})},onKeyDown:function(e,t){if("Delete"===t||"Backspace"===t){var n=e[0];if(n.Deposit_Slip&&""!==n.Deposit_Slip||n.DateDeposit&&""!==n.DateDeposit||n.OR_No&&""!==n.OR_No)return w().fire({position:"center",icon:"warning",title:"Unable to delete. Check No ".concat(n.Check_No," is already ").concat(n.OR_No," issued of OR!"),showConfirmButton:!1,timer:1500});w().fire({title:"Are you sure?",text:"You won't to delete this Check No. ".concat(n.Check_No),icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(e){e.isConfirmed&&setTimeout((function(){var e,t=ee.current.getSelectedRowsOnClick();De((function(e){return e.filter((function(e,n){return n!==t}))})),null===(e=ee.current)||void 0===e||e.resetTableSelected()}),100)}))}},inputsearchselector:".manok"}),(0,W.jsx)(y.Z,{open:Ne,onClose:function(){var e;null===(e=ee.current)||void 0===e||e.resetTableSelected(),we(!1),zt()},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,W.jsxs)(d.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"auto",bgcolor:"background.paper",p:4},children:[(0,W.jsx)(D.Z,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Check Detail"}),(0,W.jsx)("br",{}),(0,W.jsxs)("div",{style:{display:"flex",columnGap:"10px"},children:[(0,W.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[(0,W.jsx)(U.oi,{label:{title:"Check No : ",style:{fontSize:"12px",fontWeight:"bold",width:"70px"}},input:{type:"text",style:{width:"190px"},onKeyDown:function(e){var t;"NumpadEnter"!==e.code&&"Enter"!==e.code||(null===(t=Ve.current)||void 0===t||t.focus())}},inputRef:Ye}),_t?(0,W.jsx)(I.Z,{loading:_t}):(0,W.jsx)(U.oi,{label:{title:"Bank : ",style:{fontSize:"12px",fontWeight:"bold",width:"70px"}},input:{type:"text",style:{width:"190px"},value:Ie.refNo,name:"refNo",onKeyDown:function(e){if("NumpadEnter"===e.code||"Enter"===e.code)return Et(e.currentTarget.value)}},icon:(0,W.jsx)(G.Z,{sx:{fontSize:"18px"}}),onIconClick:function(e){var t;(e.preventDefault(),Ve.current)&&Et(null===(t=Ve.current)||void 0===t?void 0:t.value)},inputRef:Ve}),(0,W.jsx)(U.oi,{label:{title:"Branch : ",style:{fontSize:"12px",fontWeight:"bold",width:"70px"}},input:{type:"text",style:{width:"190px"},onKeyDown:function(e){var t;"NumpadEnter"!==e.code&&"Enter"!==e.code||(null===(t=Qe.current)||void 0===t||t.focus())}},inputRef:Je}),(0,W.jsx)(U.Fz,{label:{title:"Remarks : ",style:{fontSize:"12px",fontWeight:"bold",width:"70px"}},textarea:{rows:4,disabled:Ut,style:{flex:1},onKeyDown:function(e){var t;"NumpadEnter"!==e.code&&"Enter"!==e.code||(null===(t=He.current)||void 0===t||t.focus())}},_inputRef:Qe})]}),(0,W.jsxs)("div",{style:{display:"flex",gap:"10px",flexDirection:"column"},children:[(0,W.jsx)(U.oi,{label:{title:"Check Dated : ",style:{fontSize:"12px",fontWeight:"bold",width:"90px"}},input:{disabled:Ut,type:"date",style:{width:"190px"},defaultValue:(new Date).toISOString().split("T")[0],onKeyDown:function(e){var t;"NumpadEnter"!==e.code&&"Enter"!==e.code||(null===(t=Xe.current)||void 0===t||t.focus())}},inputRef:He}),(0,W.jsxs)("div",{style:{display:"flex"},children:[(0,W.jsx)("label",{style:{fontSize:"12px",fontWeight:"bold",width:"90px"},children:"Amount :"}),(0,W.jsx)(Y.h3,{style:{flex:1},value:null!==(K=null===($=Xe.current)||void 0===$?void 0:$.value)&&void 0!==K?K:"",getInputRef:Xe,allowNegative:!1,thousandSeparator:!0,valueIsNumericString:!0,onKeyDown:function(e){if("Enter"===e.code||"NumpadEnter"===e.code){var t,n,r=null===(t=Xe.current)||void 0===t?void 0:t.value,o=parseFloat(r.replace(/,/g,""));Xe.current&&(isNaN(o)?Xe.current.value="0.00":r.includes(".")?Xe.current.value=Lt(o):Xe.current.value="".concat(Lt(o))),null===(n=$e.current)||void 0===n||n.focus()}}})]}),"update"!==Ie.checkMode&&(0,W.jsx)(U.oi,{label:{title:"Check Count : ",style:{fontSize:"12px",fontWeight:"bold",width:"90px"}},input:{disabled:Ut,type:"number",style:{width:"190px"},onKeyDown:function(e){if("NumpadEnter"===e.code||"Enter"===e.code)var t=setTimeout((function(){var e;null===(e=qe.current)||void 0===e||e.click(),clearTimeout(t)}),100)}},inputRef:$e})]})]}),(0,W.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",width:"100%",marginTop:"10px"},children:(0,W.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,W.jsx)(f.Z,{ref:qe,action:Ge,color:"primary",variant:"contained",autoFocus:""!==Ie.checkMode,onClick:function(){!function(){function e(e,t){var n=parseInt(e);return(n+=t).toString().padStart(e.length,"0")}function t(e,t){var n=new Date(e);return n.setMonth(n.getMonth()+t),(0,V.Z)(n,"yyyy-MM-dd")}if(Ye.current&&Ve.current&&Je.current&&Qe.current&&He.current&&Xe.current&&$e.current){if(ye.filter((function(e){return Ye.current&&Ye.current.value===e.Check_No})).length>0)return alert("check no. is already exist!"),void Ye.current.focus();if(""===Ye.current.value)return alert("check no. is required!"),void Ye.current.focus();if(""===Ve.current.value)return alert("bank is required!"),void Ve.current.focus();if(""===Je.current.value)return alert("branch is required!"),void Je.current.focus();if(!function(e){var t=new Date(e);return t instanceof Date&&!isNaN(t.getTime())}(He.current.value))return alert("invalid date!"),void He.current.focus();if(parseFloat(Xe.current.value.replace(/,/g,""))<=0)return alert("amount must be greater than 0!"),void Xe.current.focus();De((function(n){if(Ye.current&&Ve.current&&Je.current&&Qe.current&&He.current&&Xe.current&&$e.current){var o=ee.current.getSelectedIndex();if(null!==o&&void 0!==o)return n.map((function(e,t){return Ye.current&&Ve.current&&Je.current&&Qe.current&&He.current&&Xe.current&&$e.current&&t===o&&(e={Check_No:Ye.current.value,Check_Date:He.current.value,Check_Amnt:Xe.current.value,BankName:Ve.current.value,BankCode:et.current,Branch:Je.current.value,Check_Remarks:Qe.current.value,Deposit_Slip:tt.current,DateDeposit:nt.current,OR_No:rt.current}),e}));for(var i=[],a=0;a<parseInt($e.current.value);a++){var l={Check_No:e(Ye.current.value,a),Check_Date:t(He.current.value,a),Check_Amnt:Xe.current.value,BankName:Ve.current.value,BankCode:et.current,Branch:Je.current.value,Check_Remarks:Qe.current.value,Deposit_Slip:tt.current,DateDeposit:nt.current,OR_No:rt.current};i.push(l)}return[].concat((0,r.Z)(n),i)}return n})),we(!1),zt()}}()},sx:{height:"30px",fontSize:"11px"},children:"update"===Ie.checkMode?"Update":"Save"}),"update"===Ie.checkMode&&(0,W.jsx)(f.Z,{color:"error",variant:"contained",onClick:function(){(0,j.flushSync)((function(){we(!1)})),w().fire({title:"Are you sure?",text:"Delete Check ".concat(Fe.Check_No," "),icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(e){e.isConfirmed&&De((function(e){return e=e.filter((function(e){return e.CheckIdx!==Fe.CheckIdx}))})),zt()}))},sx:{height:"30px",fontSize:"11px"},children:"Delete"}),(0,W.jsx)(f.Z,{color:"success",variant:"contained",sx:{height:"30px",fontSize:"11px"},onClick:function(){zt(),we(!1)},children:"Cancel"}),(0,W.jsx)(k.Z,{style:{position:"absolute",top:"10px",right:"10px"},"aria-label":"search-client",onClick:function(){we(!1),zt()},children:(0,W.jsx)(Z.Z,{})})]})})]})}),(0,W.jsx)("div",{style:{display:Ee?"flex":"none",position:"absolute",top:0,bottom:0,left:0,right:0,background:"rgba(158, 155, 157, 0.31)",zIndex:"999",justifyContent:"center",alignItems:"center"},children:(0,W.jsx)("div",{style:{width:"90%",height:"90%"},children:(0,W.jsx)("div",{style:{width:"90%",height:"90%",overflow:"auto",background:"white",padding:"20px",margin:"auto",zIndex:"9929",boxShadow:" -1px 1px 13px 6px rgba(0,0,0,0.54)",position:"relative"},children:(0,W.jsxs)("div",{style:{height:"100%",width:"100%",position:"relative",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[(0,W.jsx)(k.Z,{sx:{position:"absolute",right:"5px",top:"5px"},onClick:function(){_e(!1)},children:(0,W.jsx)(Z.Z,{})}),(0,W.jsxs)("div",{style:{width:"100%",height:"500px",border:fe?"5px dashed green":"5px dashed grey",overflow:"auto",padding:"10px"},onDragEnter:Bt,onDragOver:function(e){return e.preventDefault()},onDragLeave:Ft,onDrop:Mt,children:[(0,W.jsx)("div",{id:"upload-container",style:{width:"100%",height:"100%",display:"flex",gap:"10px",flexWrap:"wrap"},onDragEnter:Bt,onDragOver:function(e){return e.preventDefault()},onDragLeave:Ft,onDrop:Mt,children:me.map((function(e,t){return(0,W.jsx)(B.DisplayFile,{itm:e,selectedFiles:me,setSelectedFiles:ve,fileInput:Oe},t)}))}),me.length<=0&&(0,W.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)",textAlign:"center"},children:(0,W.jsx)(F.Z,{sx:{fontSize:"20em",color:"#64748b"}})}),(0,W.jsx)("input",{ref:Oe,type:"file",multiple:!0,style:{display:"none",background:"white"},id:"input-file",onChange:function(e){var t=e.target.files,n=Array.from(t),o=[].concat((0,r.Z)(me),n);if((0,B.checkFile)(o))return alert("file is not valid Extention!");ve(o)}})]}),(0,W.jsx)("div",{style:{width:"100%"},children:(0,W.jsx)(f.Z,{fullWidth:!0,onClick:function(){var e=document.getElementById("input-file");null===e||void 0===e||e.click()},children:"CLick it to upload"})})]})})})}),(mt||kt)&&(0,W.jsx)("div",{className:"loading-component",children:(0,W.jsx)("div",{className:"loader"})})]})}function oe(e,t){Object.entries(t).forEach((function(t){var n=(0,a.Z)(t,2),r=n[0],o=n[1];e({type:"UPDATE_FIELD",field:r,value:o})}))}function ie(e){if(void 0===e||null===e||""===e)return"001";for(var t=(parseInt(e)+1).toString();t.length<e.length;)t="0"+t;return t}}}]);
//# sourceMappingURL=8185.3d6b5ead.chunk.js.map