"use strict";(self.webpackChunkupward=self.webpackChunkupward||[]).push([[1441],{70272:function(e,t,n){var r=n(54270),i=n(80184);t.Z=function(e){var t=e.title,n=void 0===t?"":t;return(0,i.jsxs)(r.q,{children:[(0,i.jsx)("title",{children:n}),(0,i.jsx)("link",{rel:"icon",type:"image/png",href:"".concat("/","/logo.png")})]})}},1441:function(e,t,n){n.r(t),n.d(t,{Autocomplete:function(){return P},AutocompleteNumber:function(){return F},chartColumn:function(){return z},default:function(){return M},reducer:function(){return E}});var r=n(74165),i=n(15861),o=n(29439),a=n(4942),u=n(1413),c=n(72791),l=n(36151),s=n(39709),d=n(42419),p=n(53329),f=n(29823),h=n(21830),v=n.n(h),x=n(3380),y=n(86753),g=n(91933),w=n(79018),m=n(64230),b=n(70272),k=n(37209),D=n(30948),S=n(16386),C=n(637),j=n(11690),Z=n(5403),N=n(65413),T=n(85172),I=n(54164),A=n(91421),R=n(80184),E=function(e,t){return"UPDATE_FIELD"===t.type?(0,u.Z)((0,u.Z)({},e),{},(0,a.Z)({},t.field,t.value)):e},_=[{key:"purpose",label:"Purpose",width:400},{key:"amount",label:"Amount",width:140},{key:"usage",label:"Usage",width:450},{key:"accountID",label:"Account ID",width:400},{key:"sub_account",label:"Sub Account",width:120},{key:"clientID",label:"ID No",width:140},{key:"clientName",label:"Name",width:350},{key:"accountCode",label:"Accoount Code",width:130},{key:"accountShort",label:"Account Short",width:300},{key:"vatType",label:"Vat Type",width:100},{key:"invoice",label:"Invoice",width:200},{key:"TempID",label:"TempId",hide:!0}],z=[{field:"Acct_Code",headerName:"Code",flex:1},{field:"Acct_Title",headerName:"Title",flex:1},{field:"Short",headerName:"Short Name",flex:1}];function M(){var e,t,n,a,u,h,T,I=(0,c.useContext)(x.V),E=I.myAxios,z=I.user,M=(0,c.useState)(""),F=(0,o.Z)(M,2),K=F[0],L=F[1],B=(0,C.Z)().executeQueryToClient,W=(0,c.useRef)(null),V=(0,c.useRef)(null),O=(0,c.useRef)(""),U=(0,c.useRef)(null),q=(0,c.useRef)(null),G=(0,c.useRef)(null),H=(0,c.useRef)(null),Q=(0,c.useRef)(null),Y=(0,c.useRef)(null),J=(0,c.useRef)(null),$=(0,c.useRef)(null),X=(0,c.useRef)(null),ee=((0,c.useRef)(null),(0,c.useRef)("")),te=(0,c.useRef)(""),ne=(0,c.useRef)(""),re=(0,c.useRef)(""),ie=""===K,oe=(0,g.useQuery)({queryKey:"petty-cash-id-generator",queryFn:function(){return(e=e||(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.get("/task/accounting/get-petty-cash-id",{headers:{Authorization:"Bearer ".concat(null===z||void 0===z?void 0:z.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},refetchOnWindowFocus:!1,onSuccess:function(e){var t=e;(0,w.D)(100).then((function(){O.current=t.data.pettyCashId[0].petty_cash_id,U.current&&(U.current.value=t.data.pettyCashId[0].petty_cash_id)}))}}),ae=oe.isLoading,ue=oe.refetch,ce=(0,g.useMutation)({mutationKey:"add-update-petty-cash",mutationFn:function(e){return(t=t||(0,i.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.post("/task/accounting/add-petty-cash",t,{headers:{Authorization:"Bearer ".concat(null===z||void 0===z?void 0:z.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t=e;return t.data.success?(we(),v().fire({position:"center",icon:"success",title:t.data.message,timer:1500})):v().fire({position:"center",icon:"warning",title:t.data.message,timer:1500})}}),le=ce.isLoading,se=ce.mutate,de=(0,g.useMutation)({mutationKey:"load-selected-petty-cash",mutationFn:function(e){return(n=n||(0,i.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.post("/task/accounting/load-selected-petty-cash",t,{headers:{Authorization:"Bearer ".concat(null===z||void 0===z?void 0:z.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t=e.data.loadSelectedPettyCash;O.current=t[0].PC_No,U.current&&(U.current.value=t[0].PC_No),q.current&&(q.current.value=(0,S.Z)(new Date(t[0].PC_Date),"yyyy-MM-dd")),G.current&&(G.current.value=t[0].Payee),H.current&&(H.current.value=t[0].Explanation),W.current.setDataFormated(t)}}),pe=de.isLoading,fe=de.mutate,he=(0,g.useQuery)({queryKey:"load-transcation",queryFn:function(){return(a=a||(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.get("/task/accounting/load-transcation",{headers:{Authorization:"Bearer ".concat(null===z||void 0===z?void 0:z.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},refetchOnWindowFocus:!1}),ve=he.isLoading,xe=he.data;function ye(){return(u=u||(0,i.Z)((0,r.Z)().mark((function e(){var t,n,i,o,a,u,c,l,s,d;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Q.current||""!==Q.current.value){e.next=2;break}return e.abrupt("return",v().fire({position:"center",icon:"warning",title:"Please provide transaction",timer:1500}).then((function(){(0,w.D)(300).then((function(){var e;null===(e=Q.current)||void 0===e||e.focus()}))})));case 2:if(""!==ne.current){e.next=4;break}return e.abrupt("return",v().fire({position:"center",icon:"warning",title:"Please provide usage",timer:1500}).then((function(){(0,w.D)(300).then((function(){Y.current&&je(Y.current.value)}))})));case 4:if(!J.current||!(""===J.current.value||parseFloat(J.current.value.replace(/,/g,""))<1)){e.next=6;break}return e.abrupt("return",v().fire({position:"center",icon:"warning",title:"Please provide proper amount",timer:1500}).then((function(){(0,w.D)(300).then((function(){var e;null===(e=J.current)||void 0===e||e.focus()}))})));case 6:return e.next=8,B("\n         SELECT DISTINCT\n              Chart_Account.Acct_Code,\n              Chart_Account.Acct_Title,\n              Chart_Account.Short\n          FROM\n              Petty_Log\n                  LEFT JOIN\n              Chart_Account ON Petty_Log.Acct_Code = Chart_Account.Acct_Code\n          WHERE\n              Petty_Log.Acct_Code = '".concat(ee.current,"'\n      "));case 8:c=e.sent,l=W.current.getData(),s=0,l.length<=0?l[0]=[]:(d=W.current.getSelectedRow())?s=d:(s=l.length,l[l.length]=[]),l[s][0]=null===(t=Q.current)||void 0===t?void 0:t.value,l[s][1]=null===(n=J.current)||void 0===n?void 0:n.value,l[s][2]="".concat(null===(i=Y.current)||void 0===i?void 0:i.value," > ").concat(ne.current," > ").concat(re.current),l[s][3]="".concat(c.data.data[0].Short," > ").concat(c.data.data[0].Acct_Code),l[s][4]=re.current,l[s][5]=ne.current,l[s][6]=null===(o=Y.current)||void 0===o?void 0:o.value,l[s][7]=c.data.data[0].Acct_Code,l[s][8]=c.data.data[0].Short,l[s][9]=null===(a=$.current)||void 0===a?void 0:a.value,l[s][10]=null===(u=X.current)||void 0===u?void 0:u.value,W.current.setData(l),W.current.setSelectedRow(null),ge(),Q.current&&Q.current.focus();case 27:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ge(){setTimeout((function(){Q.current&&(Q.current.value=""),J.current&&(J.current.value=""),Y.current&&(Y.current.value=""),$.current&&($.current.value="NON-VAT"),X.current&&(X.current.value=""),re.current="",ne.current="",ee.current="",te.current=""}),100)}function we(){L(""),ue(),setTimeout((function(){ue(),q.current&&(q.current.value=(0,S.Z)(new Date,"yyyy-MM-dd")),G.current&&(G.current.value=""),H.current&&(H.current.value="")}),100),ge(),W.current.setData([])}var me=(0,j._j)({link:"/task/accounting/search-petty-cash",column:[{key:"PC_Date",label:"Type",width:130},{key:"PC_No",label:"ID No.",width:200},{key:"Payee",label:"Name",flex:1},{key:"Explanation",label:"ID",flex:1},{key:"Explanation",label:"ID",flex:1,hide:!0}],getSelectedItem:function(e,t,n,o){return(h=h||(0,i.Z)((0,r.Z)().mark((function e(t,n,i,o){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&((0,w.D)(100).then((function(){fe({PC_No:t[1]})})),L("edit"),De());case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}),be=me.UpwardTableModalSearch,ke=me.openModal,De=me.closeModal,Se=(0,j._j)({size:"large",link:"/task/accounting/search-pdc-policy-id",column:[{key:"Type",label:"Type",width:100},{key:"IDNo",label:"ID No.",width:120},{key:"Name",label:"Name",width:350},{key:"chassis",label:"Chassis No.",width:200},{key:"remarks",label:"remarks",width:0,hide:!0},{key:"client_id",label:"client_id",width:0,hide:!0},{key:"Acronym",label:"Acronym",width:0,hide:!0},{key:"sub_account",label:"sub_account",width:0,hide:!0}],getSelectedItem:function(e,t,n,o){return(T=T||(0,i.Z)((0,r.Z)().mark((function e(t,n,i,o){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&((0,w.D)(100).then((function(){ne.current=t[1],re.current=t[6],Y.current&&(Y.current.value=t[2])})),(0,w.D)(200).then((function(){var e;J.current&&(null===(e=J.current)||void 0===e||e.focus(),J.current.value="")})),Ze());case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}),Ce=Se.UpwardTableModalSearch,je=Se.openModal,Ze=Se.closeModal;return(0,R.jsxs)(R.Fragment,{children:[(pe||le)&&(0,R.jsx)(N.g,{}),(0,R.jsx)(b.Z,{title:"Petty Cash"}),(0,R.jsx)(be,{}),(0,R.jsx)(Ce,{}),(0,R.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"100%",height:"100%",flex:1,padding:"5px",background:"#F1F1F1"},children:[(0,R.jsxs)("div",{style:{display:"flex",alignItems:"center",columnGap:"5px",marginBottom:"10px"},children:[(0,R.jsx)(k.oi,{label:{title:"Search: ",style:{fontSize:"12px",fontWeight:"bold",width:"50px"}},input:{className:"search-input-up-on-key-down",type:"search",onKeyDown:function(e){("Enter"!==e.key&&"NumpadEnter"!==e.key||(e.preventDefault(),ke(e.currentTarget.value)),"ArrowDown"===e.key)&&(e.preventDefault(),document.querySelector(".grid-container").focus())},style:{width:"500px"}},icon:(0,R.jsx)(Z.Z,{sx:{fontSize:"18px"}}),onIconClick:function(e){e.preventDefault(),V.current&&ke(V.current.value)},inputRef:V}),""===K&&(0,R.jsx)(l.Z,{sx:{height:"30px",fontSize:"11px"},variant:"contained",startIcon:(0,R.jsx)(d.Z,{sx:{width:15,height:15}}),id:"entry-header-save-button",onClick:function(){L("add")},children:"New"}),(0,R.jsx)(s.Z,{sx:{height:"30px",fontSize:"11px"},id:"save-entry-header",color:"primary",variant:"contained",type:"submit",onClick:function(){if(G.current&&""===G.current.value)return v().fire({position:"center",icon:"warning",title:"Please provide payee!",timer:1500}).then((function(e){(0,w.D)(300).then((function(){var e;null===(e=G.current)||void 0===e||e.focus()}))}));if(H.current&&""===H.current.value)return v().fire({position:"center",icon:"warning",title:"Please provide explanation!",timer:1500}).then((function(e){(0,w.D)(300).then((function(){var e;null===(e=H.current)||void 0===e||e.focus()}))}));var e=W.current.getData().map((function(e){return{purpose:e[0],amount:e[1],usage:e[2],accountID:e[3],sub_account:e[4],clientID:e[5],clientName:e[6],accountCode:e[7],accountShort:e[8],vatType:e[9],invoice:e[10]}}));if(e.length<=0)return v().fire({position:"center",icon:"warning",title:"Please provide transaction entry!",timer:1500});"edit"===K?(0,m.s)({isUpdate:!0,cb:function(t){var n,r,i,o;se({refNo:null===(n=U.current)||void 0===n?void 0:n.value,datePetty:null===(r=q.current)||void 0===r?void 0:r.value,payee:null===(i=G.current)||void 0===i?void 0:i.value,explanation:null===(o=H.current)||void 0===o?void 0:o.value,hasSelected:"edit"===K,pettyCash:e,userCodeConfirmation:t})}}):(0,m.L)({isConfirm:function(){var t,n,r,i;se({refNo:null===(t=U.current)||void 0===t?void 0:t.value,datePetty:null===(n=q.current)||void 0===n?void 0:n.value,payee:null===(r=G.current)||void 0===r?void 0:r.value,explanation:null===(i=H.current)||void 0===i?void 0:i.value,hasSelected:"edit"===K,pettyCash:e})}})},disabled:""===K,startIcon:(0,R.jsx)(p.Z,{sx:{width:15,height:15}}),loading:le,children:"edit"===K?"Update":"Save"}),""!==K&&(0,R.jsx)(l.Z,{sx:{height:"30px",fontSize:"11px"},variant:"contained",startIcon:(0,R.jsx)(f.Z,{sx:{width:15,height:15}}),color:"error",onClick:function(){v().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, cancel it!"}).then((function(e){e.isConfirmed&&we()}))},children:"Cancel"})]}),(0,R.jsxs)("div",{style:{display:"flex",flexDirection:"row",width:"100%",borderBottom:"1px dashed  #334155",paddingBottom:"20px",gap:"50px",marginTop:"5px"},children:[(0,R.jsxs)("div",{style:{display:"flex",flexDirection:"column",rowGap:"10px"},children:[ae?(0,R.jsx)(s.Z,{loading:ae}):(0,R.jsx)(k.oi,{label:{title:"Ref. No. : ",style:{fontSize:"12px",fontWeight:"bold",width:"80px"}},input:{disabled:ie,type:"text",style:{width:"200px"},readOnly:!0,onKeyDown:function(e){var t;"NumpadEnter"!==e.code&&"Enter"!==e.code||(null===(t=q.current)||void 0===t||t.focus())}},icon:(0,R.jsx)(y.Z,{sx:{fontSize:"18px"}}),onIconClick:function(e){e.preventDefault(),ue()},inputRef:U}),(0,R.jsx)(k.oi,{label:{title:"Deposit Date: ",style:{fontSize:"12px",fontWeight:"bold",width:"80px"}},input:{defaultValue:(0,S.Z)(new Date,"yyyy-MM-dd"),className:"search-input-up-on-key-down",type:"date",style:{width:"200px"},disabled:ie,onKeyDown:function(e){var t;"NumpadEnter"!==e.code&&"Enter"!==e.code||(null===(t=G.current)||void 0===t||t.focus())}},inputRef:q})]}),(0,R.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column",rowGap:"10px"},children:[(0,R.jsx)(k.oi,{label:{title:"Payee : ",style:{fontSize:"12px",fontWeight:"bold",width:"100px"}},input:{disabled:ie,type:"text",style:{width:"400px"},onKeyDown:function(e){var t;"NumpadEnter"!==e.code&&"Enter"!==e.code||(null===(t=H.current)||void 0===t||t.focus())}},inputRef:G}),(0,R.jsx)(k.oi,{label:{title:"Explanation : ",style:{fontSize:"12px",fontWeight:"bold",width:"100px"}},input:{disabled:ie,type:"text",style:{flex:1},onKeyDown:function(e){var t;"NumpadEnter"!==e.code&&"Enter"!==e.code||(null===(t=Q.current)||void 0===t||t.focus())}},inputRef:H})]})]}),(0,R.jsx)("div",{style:{display:"flex",flexDirection:"row",width:"100%",paddingTop:"20px",gap:"50px",borderRadius:"3px"},children:(0,R.jsxs)("div",{style:{display:"flex",flexDirection:"column",rowGap:"10px"},children:[ve?(0,R.jsx)(s.Z,{loading:ve}):(0,R.jsx)(P,{containerStyle:{width:"100%"},label:{title:"Transaction : ",style:{fontSize:"12px",fontWeight:"bold",width:"80px"}},DisplayMember:"Purpose",DataSource:null===xe||void 0===xe?void 0:xe.data.laodTranscation,disableInput:ie,inputRef:Q,input:{style:{width:"100%",flex:1}},onChange:function(e,t){Q.current&&(Q.current.value=e.Purpose),ee.current=e.Acct_Code,te.current=e.Short},onKeydown:function(e){var t;"Enter"!==e.key&&"NumpadEnter"!==e.key||(e.preventDefault(),null===(t=Y.current)||void 0===t||t.focus())}}),(0,R.jsxs)("div",{style:{display:"flex",columnGap:"20px"},children:[(0,R.jsx)(k.oi,{label:{title:"Usage : ",style:{fontSize:"12px",fontWeight:"bold",width:"80px"}},input:{disabled:ie,type:"text",style:{width:"450px"},onKeyDown:function(e){"NumpadEnter"!==e.code&&"Enter"!==e.code||je(e.currentTarget.value)}},icon:(0,R.jsx)(A.Z,{sx:{fontSize:"18px",color:ie?"gray":"black"}}),onIconClick:function(e){e.preventDefault(),Y.current&&je(Y.current.value)},inputRef:Y}),(0,R.jsxs)("div",{style:{display:"flex"},children:[(0,R.jsx)("label",{style:{fontSize:"12px",fontWeight:"bold",width:"70px"},children:"Amount :"}),(0,R.jsx)(D.h3,{disabled:ie,getInputRef:J,decimalScale:2,fixedDecimalScale:!0,style:{width:"200px"},onKeyDown:function(e){var t;"Enter"!==e.code&&"NumpadEnter"!==e.code||(e.currentTarget.value=function(e){if(""!==e&&null!==e){var t=parseFloat(e.replace(/,/g,""));return isNaN(t)?"0.00":e}return"0.00"}(e.currentTarget.value),null===(t=$.current)||void 0===t||t.focus())},onBlur:function(e){""===e.currentTarget.value&&(e.currentTarget.value="0.00")},allowNegative:!1,thousandSeparator:!0,valueIsNumericString:!0})]})]}),(0,R.jsxs)("div",{style:{display:"flex",columnGap:"20px"},children:[(0,R.jsx)(k.lq,{containerStyle:{fontSize:"12px",fontWeight:"bold"},label:{title:"VAT Type",style:{width:"80px"}},select:{defaultValue:"NON-VAT",disabled:ie,style:{width:"100% !important",flex:1,height:"100% !important",padding:0,margin:0,cursor:"pointer"},onKeyDown:function(e){var t;"Enter"!==e.code&&"NumpadEnter"!==e.code||(null===(t=X.current)||void 0===t||t.focus())}},datasource:[{key:"NON-VAT"},{key:"VAT"}],values:"key",display:"key",selectRef:$}),(0,R.jsx)(k.oi,{label:{title:"Invoice : ",style:{fontSize:"12px",fontWeight:"bold",width:"80px"}},input:{disabled:ie,type:"text",style:{width:"270px"},onKeyDown:function(e){"NumpadEnter"!==e.code&&"Enter"!==e.code||(e.preventDefault(),ye())}},inputRef:X}),(0,R.jsx)(l.Z,{disabled:ie,color:"success",variant:"contained",style:{gridArea:"button",height:"22px",fontSize:"12px",width:"270px"},startIcon:(0,R.jsx)(d.Z,{}),onClick:function(){ye()},children:"Save Transaction"})]})]})}),(0,R.jsx)("br",{}),(0,R.jsx)(j.BW,{ref:W,width:"100%",height:"350px",columns:_,getSelectedItem:function(e,t,n,r){e?(Q.current&&(Q.current.value=e[0]),J.current&&(J.current.value=e[1]),Y.current&&(Y.current.value=e[6]),$.current&&($.current.value=e[9]),X.current&&(X.current.value=e[10]),re.current=e[4],ne.current=e[5],ee.current=e[7],te.current=e[8]):ge()}})]})]})}var P=(0,c.forwardRef)((function(e,t){var n=e.DisplayMember,r=e.DataSource,i=e.inputRef,a=e.disableInput,l=void 0!==a&&a,s=e.onKeydown,d=e.onChange,p=e.label,f=void 0===p?{title:"Transaction : ",style:{fontSize:"12px",fontWeight:"bold",width:"100px"}}:p,h=e.input,v=void 0===h?{width:"740px"}:h,x=e.containerStyle,y=(0,c.useState)(r),g=(0,o.Z)(y,2),m=g[0],b=g[1],D=(0,c.useState)([]),S=(0,o.Z)(D,2),C=S[0],j=S[1],Z=(0,c.useState)(!1),N=(0,o.Z)(Z,2),A=N[0],E=N[1],_=(0,c.useState)(0),z=(0,o.Z)(_,2),M=z[0],P=z[1],F=(0,c.useRef)(null);(0,c.useEffect)((function(){var e,t=null===(e=F.current)||void 0===e?void 0:e.children[M];t&&t.scrollIntoView({behavior:"smooth",block:"nearest"})}),[M]);return(0,c.useImperativeHandle)(t,(function(){return{setDataSource:function(e){b(e)}}})),(0,R.jsxs)("div",{style:{width:"100%"},children:[(0,R.jsx)(k.oi,{containerStyle:x,label:f,input:(0,u.Z)((0,u.Z)({},v),{},{disabled:l,type:"text",onKeyDown:function(e){if("Tab"===e.key&&(0,I.flushSync)((function(){E(!1),j([])})),"ArrowDown"===e.key)e.preventDefault(),P((function(e){return Math.min(e+1,C.length-1)}));else if("ArrowUp"===e.key)e.preventDefault(),P((function(e){return Math.max(e-1,0)}));else if(("Enter"===e.key||"NumpadEnter"===e.key)&&(e.preventDefault(),C.length>0)){var t=C[M];d(t,e),E(!1)}setTimeout((function(){s&&s(e)}),150)},onChange:function(e){var t=e.target.value;if(t.trim()){var r=m.filter((function(e){return e[n].toLowerCase().includes(t.toLowerCase())}));j(r),E(!0)}else j([]),E(!1)},onFocus:function(e){var t;e.preventDefault(),null===(t=e.currentTarget)||void 0===t||t.focus(),E(!0),j(m),i.current&&i.current.focus()},onBlur:function(e){e.relatedTarget&&"LI"===e.relatedTarget.tagName?(0,w.D)(250).then((function(){E(!1),j([])})):(E(!1),j([]))}}),icon:(0,R.jsx)(T.Z,{sx:{fontSize:"18px"}}),onIconClick:function(e){i.current&&i.current.focus()},inputRef:i}),A&&C.length>0&&(0,R.jsx)("ul",{className:"suggestions",ref:F,children:C.map((function(e,t){return(0,R.jsx)("li",{tabIndex:0,onClick:function(t){E(!1),d(e,t)},className:t===M?"active":"",onMouseEnter:function(e){e.preventDefault(),P(Math.min(t,C.length-1))},children:e[n]},t)}))}),(0,R.jsx)("style",{children:"\n          .suggestions {\n            margin-top: 0;\n            padding: 0;\n            list-style: none;\n            max-height: 150px;\n            overflow-y: auto;\n            position:absolute;\n            z-index:100;\n            background:white;\n            width:350px;\n            border:1px solid #e5e7eb;\n            box-shadow: 0px 23px 32px -17px rgba(0,0,0,0.75);\n          }\n          .suggestions li {\n            padding:3px 10px;\n            cursor: pointer;\n            font-size:14px;\n          }\n          .suggestions li.active {\n            background-color: #e2e8f0;\n          }\n      \n        "})]})})),F=(0,c.forwardRef)((function(e,t){var n=e.DisplayMember,r=e.DataSource,i=e.inputRef,a=e.disableInput,l=void 0!==a&&a,s=e.onKeydown,d=e.onChange,p=e.label,f=void 0===p?{title:"Transaction : ",style:{fontSize:"12px",fontWeight:"bold",width:"100px"}}:p,h=e.input,v=void 0===h?{width:"740px"}:h,x=e.containerStyle,y=(0,c.useState)(r),g=(0,o.Z)(y,2),m=g[0],b=g[1],D=(0,c.useState)([]),S=(0,o.Z)(D,2),C=S[0],j=S[1],Z=(0,c.useState)(!1),N=(0,o.Z)(Z,2),A=N[0],E=N[1],_=(0,c.useState)(0),z=(0,o.Z)(_,2),M=z[0],P=z[1],F=(0,c.useRef)(null);(0,c.useEffect)((function(){var e,t=null===(e=F.current)||void 0===e?void 0:e.children[M];t&&t.scrollIntoView({behavior:"smooth",block:"nearest"})}),[M]);var K=function(e){if(!e)return e;var t=e.split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")},L=function(e){return e.replace(/,/g,"")},B=function(e){if(e.trim()){var t=m.filter((function(t){return t[n].toLowerCase().includes(e.toLowerCase())}));j(t),E(!0)}else j([]),E(!1)};return(0,c.useImperativeHandle)(t,(function(){return{setDataSource:function(e){b(e)}}})),(0,R.jsxs)("div",{style:{flex:1},children:[(0,R.jsx)(k.oi,{containerStyle:x,label:f,input:(0,u.Z)((0,u.Z)({},v),{},{disabled:l,type:"text",onKeyDown:function(e){if("Tab"===e.key&&(0,I.flushSync)((function(){E(!1),j([])})),"ArrowDown"===e.key)e.preventDefault(),P((function(e){return Math.min(e+1,C.length-1)}));else if("ArrowUp"===e.key)e.preventDefault(),P((function(e){return Math.max(e-1,0)}));else if(("Enter"===e.key||"NumpadEnter"===e.key)&&(e.preventDefault(),C.length>0)){var t=C[M];d(t,e),E(!1)}setTimeout((function(){s&&s(e)}),150)},onChange:function(e){var t=e.target.value;t=L(t);if(""===(t=L(t))||/^-?\d+(,\d{3})*(\.\d*)?$/.test(t))e.target.value=K(t);else{var n=t.match(/\d+/g);if(n){var r=n.join("");e.target.value=K(r)}else e.target.value="0"}B(e.target.value)},onFocus:function(e){var t;e.preventDefault(),null===(t=e.currentTarget)||void 0===t||t.focus(),E(!0),j(m),i.current&&i.current.focus()},onBlur:function(e){!function(e,t){var n=L(e);n=function(e){return e.includes(".")?1===e.split(".")[1].length?e+"0":e:""===e?"0.00":e+".00"}(n),t.target.value=K(n)}(e.currentTarget.value,e),e.relatedTarget&&"LI"===e.relatedTarget.tagName?(0,w.D)(250).then((function(){E(!1),j([])})):(E(!1),j([]))}}),icon:(0,R.jsx)(T.Z,{sx:{fontSize:"18px"}}),onIconClick:function(e){i.current&&i.current.focus()},inputRef:i}),A&&C.length>0&&(0,R.jsx)("ul",{className:"suggestions",ref:F,children:C.map((function(e,t){return(0,R.jsx)("li",{tabIndex:0,onClick:function(t){E(!1),d(e,t)},className:t===M?"active":"",onMouseEnter:function(e){e.preventDefault(),P(Math.min(t,C.length-1))},children:e[n]},t)}))}),(0,R.jsx)("style",{children:"\n          .suggestions {\n            margin-top: 0;\n            padding: 0;\n            list-style: none;\n            max-height: 150px;\n            overflow-y: auto;\n            position:absolute;\n            z-index:100;\n            background:white;\n            width:350px;\n            border:1px solid #e5e7eb;\n            box-shadow: 0px 23px 32px -17px rgba(0,0,0,0.75);\n          }\n          .suggestions li {\n            padding:3px 10px;\n            cursor: pointer;\n            font-size:14px;\n          }\n          .suggestions li.active {\n            background-color: #e2e8f0;\n          }\n      \n        "})]})}))}}]);
//# sourceMappingURL=1441.0ef760de.chunk.js.map