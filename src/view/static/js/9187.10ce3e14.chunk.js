"use strict";(self.webpackChunkupward=self.webpackChunkupward||[]).push([[9187],{29187:function(e,t,n){n.r(t),n.d(t,{BondContext:function(){return J},default:function(){return ie}});var o=n(74165),i=n(15861),a=n(29439),l=n(4942),r=n(1413),s=n(72791),d=n(36151),u=n(64554),c=n(27391),p=n(63466),x=n(13400),f=n(4378),m=n(42419),h=n(3380),y=n(91933),g=n(29823),b=n(53329),v=n(21830),w=n.n(v),F=n(27247),D=n(68096),C=n(94925),I=n(58406),P=n(23786),j=n(93263),z=n(39709),Z=n(98333),S=n(51760),k=n(25756),L=n(93433),_=n(77196),M=n(91421),T=n(13784),A=n(45987),N=n(71652),E=n(93862),G=n(98034),K=n(80184),B=["label","name","onChange","value","onKeyDown","inputRef","datePickerRef","fullWidth","textField"];function R(e){var t=e.label,n=e.name,o=e.onChange,i=e.value,a=e.onKeyDown,l=e.inputRef,s=(e.datePickerRef,e.fullWidth),d=e.textField,u=(0,A.Z)(e,B);return(0,K.jsx)(N._,{dateAdapter:E.H,children:(0,K.jsx)(G.j,(0,r.Z)({value:i,onChange:o,slotProps:{textField:(0,r.Z)({size:"small",label:t,name:n,onKeyDown:a,inputRef:l,fullWidth:s},d)}},u))})}function q(){var e,t,n,l=(0,s.useContext)(J),r=l.state,d=l.handleInputChange,u=l.customInputchange,f=l.myAxios,m=l.user,h=l.isAddOrEditMode,g=l.keySave,b=(0,s.useState)([]),v=(0,a.Z)(b,2),w=v[0],F=v[1],Z=(0,s.useRef)(null),S=(0,s.useRef)(null),k=(0,s.useRef)(null),A=(0,s.useRef)(null),N=(0,s.useRef)(null),E=(0,j.Z)({link:{url:"/task/production/get-clients",queryUrlName:"clientSearch"},columns:[{field:"entry_client_id",headerName:"ID",width:130},{field:"fullname",headerName:"First Name",flex:1},{field:"entry_type",headerName:"ID Type",width:150}],queryKey:"get-clients",uniqueId:"entry_client_id",responseDataKey:"clients",onSelected:function(e){u(e[0].entry_client_id,"client_id"),u(e[0].fullname,"client_name"),u(e[0].address,"client_address"),u(e[0].sale_officer,"sale_officer"),U()},onCellKeyDown:function(e,t){"Enter"!==t.code&&"NumpadEnter"!==t.code||(u(e.row.entry_client_id,"client_id"),u(e.row.fullname,"client_name"),u(e.row.address,"client_address"),u(e.row.sale_officer,"sale_officer"),U())},searchRef:A}),G=E.ModalComponent,B=E.openModal,q=E.isLoading,U=E.closeModal,O=(0,j.Z)({link:{url:"/task/production/get-agents",queryUrlName:"agentSearch"},columns:[{field:"entry_agent_id",headerName:"ID",width:130},{field:"fullname",headerName:"First Name",flex:1},{field:"entry_type",headerName:"ID Type",width:150}],queryKey:"get-agents",uniqueId:"entry_agent_id",responseDataKey:"agents",onSelected:function(e){u(e[0].entry_agent_id,"agent_id"),u(e[0].fullname,"agent_name"),H()},onCellKeyDown:function(e,t){"Enter"!==t.code&&"NumpadEnter"!==t.code||(u(e.row.entry_agent_id,"agent_id"),u(e.row.fullname,"agent_name"),H())},searchRef:N}),V=O.ModalComponent,W=O.openModal,Q=O.isLoading,H=O.closeModal,Y=(0,y.useQuery)({queryKey:"get-bond-acc-type",queryFn:function(){return(e=e||(0,i.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.get("/task/production/get-policy-account-types",{headers:{Authorization:"Bearer ".concat(null===m||void 0===m?void 0:m.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},refetchOnWindowFocus:!1}),X=Y.data,$=Y.isLoading,ee=(0,y.useQuery)({queryKey:"get-bond-acc",queryFn:function(){return(t=t||(0,i.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.get("/task/production/get-policy-account-bonds",{headers:{Authorization:"Bearer ".concat(null===m||void 0===m?void 0:m.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t;F(null===(t=e.data)||void 0===t?void 0:t.getPolicyAccountByBonds)},refetchOnWindowFocus:!1}),te=ee.isLoading;return(0,K.jsxs)("div",{children:[(0,K.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,K.jsx)("div",{style:{display:"flex",columnGap:"10px",flex:1,boxSizing:"border-box"},children:(0,K.jsxs)("fieldset",{style:{flex:1,display:"flex",flexDirection:"column",gap:"10px",padding:"15px",border:"1px solid #cbd5e1",borderRadius:"5px"},children:[(0,K.jsx)("legend",{style:{color:"#065f46"},children:"Insurer Information"}),(0,K.jsxs)("div",{style:{display:"flex",gap:"10px",flexDirection:"column"},children:[q?(0,K.jsx)(z.Z,{loading:q}):(0,K.jsxs)(D.Z,{variant:"outlined",size:"small",disabled:h,sx:{width:"170px",".MuiFormLabel-root":{fontSize:"14px",background:"white",zIndex:99,padding:"0 3px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},children:[(0,K.jsx)(C.Z,{htmlFor:"client-id-field",children:"Client ID"}),(0,K.jsx)(_.Z,{sx:{height:"27px",fontSize:"14px"},disabled:h,fullWidth:!0,label:"Client ID",name:"client_id",value:r.client_id,onChange:d,onKeyDown:function(e){if("Enter"===e.code||"NumpadEnter"===e.code)return e.preventDefault(),B(r.client_id)},id:"client-id-field",endAdornment:(0,K.jsx)(p.Z,{position:"end",children:(0,K.jsx)(x.Z,{disabled:h,"aria-label":"search-client",color:"secondary",edge:"end",onClick:function(){B(r.client_id)},children:(0,K.jsx)(M.Z,{})})})})]}),(0,K.jsx)(c.Z,{disabled:h,fullWidth:!0,variant:"outlined",size:"small",label:"Client Name",name:"client_name",value:r.client_name,onChange:d,onKeyDown:g,InputProps:{style:{height:"27px",fontSize:"14px"},readOnly:!0},sx:{flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}})]}),(0,K.jsx)(c.Z,{rows:5,disabled:h,fullWidth:!0,variant:"outlined",size:"small",label:"Client Address",multiline:!0,name:"client_address",value:r.client_address,onChange:d,onKeyDown:g,InputProps:{style:{height:"100px",fontSize:"14px"},readOnly:!0},sx:{flex:1,height:"100px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}})]})}),(0,K.jsx)("div",{style:{display:"flex",columnGap:"10px",flex:1,boxSizing:"border-box"},children:(0,K.jsxs)("fieldset",{style:{flexDirection:"row",gap:"10px",padding:"15px",border:"1px solid #cbd5e1",borderRadius:"5px",flex:1,flexWrap:"wrap"},children:[(0,K.jsx)("legend",{style:{color:"#065f46"},children:"Agent Information"}),Q?(0,K.jsx)(z.Z,{loading:Q}):(0,K.jsxs)(D.Z,{variant:"outlined",size:"small",disabled:h,sx:{width:"170px",".MuiFormLabel-root":{fontSize:"14px",background:"white",zIndex:99,padding:"0 3px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},children:[(0,K.jsx)(C.Z,{htmlFor:"AGENT-id-field",children:"Agent ID"}),(0,K.jsx)(_.Z,{sx:{height:"27px",fontSize:"14px"},disabled:h,label:"Agent ID",name:"agent_id",value:r.agent_id,onChange:d,onKeyDown:function(e){if("Enter"===e.code||"NumpadEnter"===e.code)return e.preventDefault(),W(r.agent_id)},id:"AGENT-id-field",endAdornment:(0,K.jsx)(p.Z,{position:"end",children:(0,K.jsx)(x.Z,{disabled:h,"aria-label":"search-client",color:"secondary",edge:"end",onClick:function(){W(r.agent_id)},children:(0,K.jsx)(M.Z,{})})})})]}),(0,K.jsx)(c.Z,{fullWidth:!0,disabled:h,variant:"outlined",size:"small",label:"Agent Name",name:"agent_name",value:r.agent_name,onChange:d,onKeyDown:g,InputProps:{style:{height:"27px",fontSize:"14px"},readOnly:!0},sx:{marginTop:"10px",flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}}),(0,K.jsx)(c.Z,{onKeyDown:g,disabled:h,fullWidth:!0,variant:"outlined",size:"small",label:"Sale Officer",multiline:!0,name:"sale_officer",value:r.sale_officer,onChange:d,InputProps:{style:{height:"27px",fontSize:"14px"},readOnly:!0},sx:{marginTop:"10px",width:"100%",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}})]})})]}),(0,K.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,K.jsxs)("div",{style:{display:"flex",columnGap:"10px",flex:1,boxSizing:"border-box"},children:[(0,K.jsxs)("fieldset",{style:{display:"flex",flexDirection:"column",gap:"10px",padding:"15px",border:"1px solid #cbd5e1",borderRadius:"5px",marginBottom:"10px",height:"100%",width:"100%"},children:[(0,K.jsx)("legend",{style:{color:"#065f46"},children:"Bonds Policy"}),(0,K.jsxs)("div",{children:[te?(0,K.jsx)(z.Z,{loading:te}):(0,K.jsxs)(D.Z,{size:"small",fullWidth:!0,disabled:h,sx:{flex:1,".MuiFormLabel-root":{fontSize:"14px",background:"white",zIndex:99,padding:"0 3px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},children:[(0,K.jsx)(C.Z,{id:"PolicyAccount",children:"Account"}),(0,K.jsx)(I.Z,{labelId:"PolicyAccount",value:r.PolicyAccount,label:"Account",name:"PolicyAccount",onChange:function(e){d(e)},sx:{height:"27px",fontSize:"14px"},children:w.map((function(e,t){return(0,K.jsx)(P.Z,{value:e.Account,children:e.Account},t)}))})]}),(0,K.jsxs)("div",{style:{display:"flex",columnGap:"10px",height:"40px",marginTop:"10px"},children:[(0,K.jsx)(c.Z,{disabled:h||"delete"===r.bondActioMode,fullWidth:!0,variant:"outlined",size:"small",label:"Policy No",name:"PolicyNo",value:r.PolicyNo,onChange:d,onKeyDown:g,InputProps:{style:{height:"27px",fontSize:"14px"}},sx:{width:"100%",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}}),$?(0,K.jsx)(z.Z,{loading:$}):(0,K.jsxs)(D.Z,{size:"small",fullWidth:!0,disabled:h,sx:{".MuiFormLabel-root":{fontSize:"14px",background:"white",zIndex:99,padding:"0 3px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},children:[(0,K.jsx)(C.Z,{id:"policyType",children:"Policy Type"}),(0,K.jsx)(I.Z,{labelId:"policyType",value:r.policyType,label:"policyType",name:"policyType",onChange:function(e){F((function(t){return"G02"===e.target.value||"G13"===e.target.value||"G16"===e.target.value?t=t.filter((function(e){return 1===e.G02})):t})),d(e)},sx:{height:"27px",fontSize:"14px"},children:X&&[{SubLineName:""}].concat((0,L.Z)(null===(n=X.data)||void 0===n?void 0:n.getPolicyAccountType)).map((function(e,t){return(0,K.jsx)(P.Z,{value:e.SubLineName,children:e.SubLineName},t)}))})]})]})]})]}),(0,K.jsxs)("fieldset",{style:{flexGrow:1,display:"flex",flexDirection:"column",gap:"10px",padding:"15px",border:"1px solid #cbd5e1",borderRadius:"5px",width:"100%"},children:[(0,K.jsx)("legend",{style:{height:"22px"}}),(0,K.jsx)(c.Z,{disabled:h,variant:"outlined",size:"small",label:"Officer",name:"officer",value:r.officer,onChange:d,onKeyDown:g,InputProps:{style:{height:"27px",fontSize:"14px"}},sx:{width:"100%",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}}),(0,K.jsx)(c.Z,{disabled:h,variant:"outlined",size:"small",label:"Position",name:"position",value:r.position,onChange:d,onKeyDown:g,InputProps:{style:{height:"27px",fontSize:"14px"}},sx:{width:"100%",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}})]})]}),(0,K.jsx)("div",{style:{display:"flex",columnGap:"10px",flex:1,boxSizing:"border-box"},children:(0,K.jsxs)("fieldset",{style:{display:"flex",flexDirection:"column",gap:"10px",padding:"15px",border:"1px solid #cbd5e1",borderRadius:"5px",flexGrow:1},children:[(0,K.jsx)("legend",{style:{color:"#065f46"},children:"Period of Insurance"}),(0,K.jsxs)("div",{style:{display:"flex",columnGap:"10px"},children:[(0,K.jsx)(T.Z,{disabled:h,label:"Bidding Date",onChange:function(e){u(e,"biddingDate")},value:new Date(r.biddingDate),textField:{InputLabelProps:{style:{fontSize:"14px"}},InputProps:{style:{height:"27px",fontSize:"14px"}}},onKeyDown:function(e){if("Enter"===e.code||"NumpadEnter"===e.code)var t=setTimeout((function(){var e,n;null===(e=Z.current)||void 0===e||null===(n=e.querySelector("button"))||void 0===n||n.click(),clearTimeout(t)}),150)},datePickerRef:Z}),(0,K.jsx)(R,{disabled:h,label:"Time",onChange:function(e){u(e,"time")},value:new Date(r.time),textField:{InputLabelProps:{style:{fontSize:"14px"}},InputProps:{style:{height:"27px",fontSize:"14px"}}},onKeyDown:function(e){if("Enter"===e.code||"NumpadEnter"===e.code)var t=setTimeout((function(){var e,n;null===(e=S.current)||void 0===e||null===(n=e.querySelector("button"))||void 0===n||n.click(),clearTimeout(t)}),150)},datePickerRef:S}),(0,K.jsx)(T.Z,{label:"Date Issued",name:"DateIssued",onChange:function(e){u(e,"DateIssued")},value:new Date(r.DateIssued),disabled:h,textField:{InputLabelProps:{style:{fontSize:"14px"}},InputProps:{style:{height:"27px",fontSize:"14px"}}},onKeyDown:function(e){if("Enter"===e.code||"NumpadEnter"===e.code)var t=setTimeout((function(){var e,n;null===(e=k.current)||void 0===e||null===(n=e.querySelector("button"))||void 0===n||n.click(),clearTimeout(t)}),150)},datePickerRef:k})]}),(0,K.jsx)(c.Z,{disabled:h,fullWidth:!0,variant:"outlined",size:"small",label:"Validity",name:"validity",value:r.validity,onChange:d,rows:2,multiline:!0})]})})]}),(0,K.jsxs)("fieldset",{style:{display:"flex",gap:"15px",padding:"15px",border:"1px solid #cbd5e1",borderRadius:"5px",flexDirection:"row",flexGrow:1},children:[(0,K.jsx)("legend",{style:{height:"20px"}}),(0,K.jsx)(c.Z,{disabled:h,fullWidth:!0,variant:"outlined",size:"small",label:"Unit",name:"unit",value:r.unit,onChange:d,multiline:!0,rows:3,onKeyDown:g}),(0,K.jsx)(c.Z,{disabled:h,fullWidth:!0,variant:"outlined",size:"small",label:"Obligee",name:"obligee",value:r.obligee,onChange:d,multiline:!0,rows:3,onKeyDown:g})]}),G,V]})}var U=n(94721),O=n(56580);function V(){var e=(0,s.useContext)(J),t=e.state,n=e.handleInputChange,o=e.customInputchange,i=e.computation,a=e.isAddOrEditMode,l=e.dispatch,r=e.keySave,u=(0,s.useRef)(null),p=(0,s.useRef)(null);function x(e){"NumpadEnter"!==e.code&&"Enter"!==e.code||i()}return(0,K.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,K.jsxs)("div",{style:{display:"flex",gap:"10px",flexDirection:"column",flexGrow:1},children:[(0,K.jsxs)("fieldset",{style:{display:"flex",flexDirection:"column",rowGap:"10px",padding:"15px",border:"1px solid #cbd5e1",borderRadius:"5px"},children:[(0,K.jsx)("legend",{children:"Information for notary (Officer)"}),(0,K.jsx)(c.Z,{onKeyDown:r,disabled:a,required:!0,variant:"outlined",size:"small",label:"Name",name:"officerName",value:t.officerName,onChange:n,InputProps:{style:{height:"27px",fontSize:"14px"}},sx:{width:"auto",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}}),(0,K.jsx)(c.Z,{onKeyDown:r,disabled:a,required:!0,variant:"outlined",size:"small",label:"Tax Certificate No.",name:"officerTaxCertNo",value:t.officerTaxCertNo,onChange:n,InputProps:{style:{height:"27px",fontSize:"14px"}},sx:{width:"auto",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}}),(0,K.jsx)(c.Z,{disabled:a,required:!0,variant:"outlined",size:"small",label:"Issued Location",name:"officerIssuedLoc",value:t.officerIssuedLoc,onChange:n,InputProps:{style:{height:"27px",fontSize:"14px"}},sx:{width:"auto",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}}),(0,K.jsx)(T.Z,{disabled:a,label:"Date Issued",onChange:function(e){o(e,"officerDateIssued")},value:new Date(t.officerDateIssued),onKeyDown:function(e){if("Enter"===e.code||"NumpadEnter"===e.code)var t=setTimeout((function(){var e,n;null===(e=u.current)||void 0===e||null===(n=e.querySelector("button"))||void 0===n||n.click(),clearTimeout(t)}),150)},datePickerRef:u,textField:{InputLabelProps:{style:{fontSize:"14px"}},InputProps:{style:{height:"27px",fontSize:"14px"}}}})]}),(0,K.jsxs)("fieldset",{style:{display:"flex",flexDirection:"column",rowGap:"10px",padding:"15px",border:"1px solid #cbd5e1",borderRadius:"5px"},children:[(0,K.jsx)("legend",{children:"Information for notary (Insurance Corp)"}),(0,K.jsx)(c.Z,{disabled:a,required:!0,variant:"outlined",size:"small",label:"Capacity as",name:"insuranceCapacity",value:t.insuranceCapacity,onChange:n,InputProps:{style:{height:"27px",fontSize:"14px"}},sx:{width:"auto",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}}),(0,K.jsx)(c.Z,{disabled:a,required:!0,variant:"outlined",size:"small",label:"Tax Certificate No",name:"insuranceOfficerTaxCert",value:t.insuranceOfficerTaxCert,onChange:n,InputProps:{style:{height:"27px",fontSize:"14px"}},sx:{width:"auto",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}}),(0,K.jsx)(c.Z,{disabled:a,required:!0,variant:"outlined",size:"small",label:"Issued Location",name:"insuranceIssuedLoc",value:t.insuranceIssuedLoc,onChange:n,InputProps:{style:{height:"27px",fontSize:"14px"}},sx:{width:"auto",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}}),(0,K.jsx)(T.Z,{disabled:a,label:"Date Issued",onChange:function(e){o(e,"insuranceDateIssued")},value:new Date(t.insuranceDateIssued),onKeyDown:function(e){if("Enter"===e.code||"NumpadEnter"===e.code)var t=setTimeout((function(){var e,n;null===(e=p.current)||void 0===e||null===(n=e.querySelector("button"))||void 0===n||n.click(),clearTimeout(t)}),150)},datePickerRef:p,textField:{InputLabelProps:{style:{fontSize:"14px"}},InputProps:{style:{height:"27px",fontSize:"14px"}}}})]})]}),(0,K.jsxs)("fieldset",{style:{flexGrow:1,display:"flex",flexDirection:"column",rowGap:"10px",padding:"15px",border:"1px solid #cbd5e1",borderRadius:"5px"},children:[(0,K.jsx)("legend",{children:"Premiums"}),(0,K.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",padding:"5px"},children:(0,K.jsx)(d.Z,{disabled:a,size:"small",variant:"contained",color:"primary",onClick:function(){i()},children:"Compute"})}),(0,K.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(2,1fr)",gap:"10px"},children:[(0,K.jsx)(c.Z,{disabled:a,required:!0,variant:"outlined",size:"small",label:"Insured Value",name:"insuredValue",value:t.insuredValue,onChange:n,onKeyDown:x,placeholder:"0.00",InputProps:{inputComponent:O.a,style:{height:"27px",fontSize:"14px"}},sx:{width:"auto",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},onBlur:function(){l({type:"UPDATE_FIELD",field:"insuredValue",value:parseFloat(t.insuredValue).toFixed(2)})}}),(0,K.jsx)(c.Z,{disabled:a,required:!0,variant:"outlined",size:"small",label:"Percentage",name:"percentagePremium",value:t.percentagePremium,onChange:n,onKeyDown:x,placeholder:"0.00",InputProps:{inputComponent:O.a,style:{height:"27px",fontSize:"14px"}},sx:{width:"auto",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},onBlur:function(){l({type:"UPDATE_FIELD",field:"percentagePremium",value:parseFloat(t.percentagePremium).toFixed(2)})}}),(0,K.jsx)(c.Z,{disabled:a,required:!0,variant:"outlined",size:"small",label:"Total Premium",name:"totalPremium",value:t.totalPremium,onChange:n,onKeyDown:x,placeholder:"0.00",InputProps:{inputComponent:O.a,style:{height:"27px",fontSize:"14px"}},sx:{width:"auto",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},onBlur:function(){l({type:"UPDATE_FIELD",field:"totalPremium",value:parseFloat(t.totalPremium).toFixed(2)})}}),(0,K.jsx)(c.Z,{disabled:a,required:!0,variant:"outlined",size:"small",label:"Vat",name:"vat",value:t.vat,onChange:n,onKeyDown:x,placeholder:"0.00",InputProps:{inputComponent:O.a,style:{height:"27px",fontSize:"14px"}},sx:{width:"auto",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},onBlur:function(){l({type:"UPDATE_FIELD",field:"vat",value:parseFloat(t.vat).toFixed(2)})}}),(0,K.jsx)(c.Z,{disabled:a,required:!0,variant:"outlined",size:"small",label:"Doc Stamp",name:"docStamp",value:t.docStamp,onChange:n,onKeyDown:x,placeholder:"0.00",InputProps:{inputComponent:O.a,style:{height:"27px",fontSize:"14px"}},sx:{width:"auto",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},onBlur:function(){l({type:"UPDATE_FIELD",field:"docStamp",value:parseFloat(t.docStamp).toFixed(2)})}}),(0,K.jsxs)("div",{style:{display:"flex",gap:"5px",position:"relative"},children:[(0,K.jsx)(c.Z,{disabled:a,required:!0,variant:"outlined",size:"small",name:"localGovTaxPercent",value:t.localGovTaxPercent,onChange:n,onKeyDown:x,placeholder:"0.00",InputProps:{inputComponent:O.a,style:{height:"27px",fontSize:"14px"}},sx:{width:"80px",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},onBlur:function(){l({type:"UPDATE_FIELD",field:"localGovTaxPercent",value:parseFloat(t.localGovTaxPercent).toFixed(2)})}}),(0,K.jsx)(c.Z,{disabled:a,required:!0,variant:"outlined",size:"small",label:"Local Gov Tax",name:"localGovTax",value:t.localGovTax,onChange:n,onKeyDown:x,placeholder:"0.00",InputProps:{inputComponent:O.a,style:{height:"27px",fontSize:"14px"}},sx:{width:"80px",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},onBlur:function(){l({type:"UPDATE_FIELD",field:"localGovTax",value:parseFloat(t.localGovTax).toFixed(2)})}})]}),(0,K.jsx)(c.Z,{disabled:a,required:!0,variant:"outlined",size:"small",label:"Notary/Misc(umis)",name:"umis",value:t.umis,onChange:n,onKeyDown:x,placeholder:"0.00",InputProps:{inputComponent:O.a,style:{height:"27px",fontSize:"14px"}},sx:{width:"auto",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},onBlur:function(){l({type:"UPDATE_FIELD",field:"umis",value:parseFloat(t.umis).toFixed(2)})}}),(0,K.jsx)(c.Z,{disabled:a,required:!0,variant:"outlined",size:"small",label:"Notary Misc(Principal)",name:"principal",value:t.principal,onChange:n,onKeyDown:x,placeholder:"0.00",InputProps:{inputComponent:O.a,style:{height:"27px",fontSize:"14px"}},sx:{width:"auto",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},onBlur:function(){l({type:"UPDATE_FIELD",field:"principal",value:parseFloat(t.principal).toFixed(2)})}})]}),(0,K.jsx)(U.Z,{sx:{background:"black"}}),(0,K.jsx)(c.Z,{disabled:a,required:!0,variant:"outlined",size:"small",label:"Total Due",name:"totalDue",value:t.totalDue,onChange:n,placeholder:"0.00",InputProps:{inputComponent:O.a,style:{height:"27px",fontSize:"14px"}},sx:{width:"auto",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},onBlur:function(){l({type:"UPDATE_FIELD",field:"totalDue",value:parseFloat(t.totalDue).toFixed(2)})}})]})]})}var W=n(64230),Q=n(5403),H={form_action:"REG",form_type:"COM",sub_account:"HO",client_id:"",client_name:"",client_address:"",agent_id:"",agent_name:"",agent_com:"0.00",sale_officer:"",PolicyAccount:"",PolicyNo:"",policyType:"",biddingDate:new Date,time:new Date,DateIssued:new Date,validity:"",officer:"",position:"",unit:"",obligee:"",printType:"Front Page",officerName:"",officerTaxCertNo:"",officerIssuedLoc:"",officerDateIssued:new Date,insuranceCapacity:"",insuranceOfficerTaxCert:"",insuranceIssuedLoc:"",insuranceDateIssued:new Date,insuredValue:"",percentagePremium:"",totalPremium:"",vat:"",docStamp:"",localGovTaxPercent:"0.75",localGovTax:"",umis:"",principal:"",totalDue:"",bondActioMode:""},Y=function(e,t){return"UPDATE_FIELD"===t.type?(0,r.Z)((0,r.Z)({},e),{},(0,l.Z)({},t.field,t.value)):e},J=(0,s.createContext)({}),X="bond-search",$="clients",ee="agents",te="bond-policy",ne="bond-policy",oe="bond-policy";function ie(){var e,t,n,v,L,_,M=(0,k.Z)([(0,K.jsx)(q,{}),(0,K.jsx)(V,{})]),T=M.step,A=M.goTo,N=M.currentStepIndex,E=(0,s.useReducer)(Y,H),G=(0,a.Z)(E,2),B=G[0],R=G[1],U=(0,s.useContext)(h.V),O=U.myAxios,ie=U.user,ae=(0,s.useState)([]),le=(0,a.Z)(ae,2),re=le[0],se=le[1],de=(0,s.useState)([]),ue=(0,a.Z)(de,2),ce=ue[0],pe=ue[1],xe=(0,s.useState)(""),fe=(0,a.Z)(xe,2),me=fe[0],he=fe[1],ye=(0,s.useState)(!1),ge=(0,a.Z)(ye,2),be=ge[0],ve=ge[1],we=(0,s.useState)({thirdparty:"tpl"===B.form_type.toLowerCase(),compre:"com"===B.form_type.toLowerCase()}),Fe=(0,a.Z)(we,2),De=Fe[0],Ce=Fe[1],Ie=(0,s.useRef)(null),Pe=(0,s.useRef)(null),je=(0,s.useRef)(null),ze=(0,y.useQueryClient)(),Ze=""===B.bondActioMode,Se=(0,s.useRef)(null),ke=(0,y.useQuery)({queryKey:"get-sub_account",queryFn:function(){return(e=e||(0,i.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.get("/task/production/get-sub_account",{headers:{Authorization:"Bearer ".concat(null===ie||void 0===ie?void 0:ie.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}),Le=ke.data,_e=ke.isLoading,Me=(0,j.Z)({link:{url:"/task/production/search-bonds-policy",queryUrlName:"searchBondsPolicy"},columns:[{field:"DateIssued",headerName:"Date",width:200},{field:"PolicyNo",headerName:"Policy No",width:250},{field:"Account",headerName:"Account",width:170},{field:"client_fullname",headerName:"Full Name",flex:1}],queryKey:"search-bonds-policy",uniqueId:"PolicyNo",responseDataKey:"bondsPolicy",onSelected:function(e){Xe(e),Ee()},onCellKeyDown:function(e,t){"Enter"!==t.code&&"NumpadEnter"!==t.code||(Xe([e.row]),Ee())},onSuccess:function(e){console.log(e)},searchRef:Se}),Te=Me.ModalComponent,Ae=Me.openModal,Ne=Me.isLoading,Ee=Me.closeModal,Ge=(0,y.useMutation)({mutationKey:ne,mutationFn:function(e){return(t=t||(0,i.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("delete"!==B.bondActioMode){e.next=4;break}return e.next=3,O.post("/task/production/update-bonds-policy",t,{headers:{Authorization:"Bearer ".concat(null===ie||void 0===ie?void 0:ie.accessToken)}});case 3:case 6:return e.abrupt("return",e.sent);case 4:return e.next=6,O.post("/task/production/add-bonds-policy",t,{headers:{Authorization:"Bearer ".concat(null===ie||void 0===ie?void 0:ie.accessToken)}});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){return(n=n||(0,i.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.data.success){e.next=5;break}return e.next=3,Je();case 3:return Ye(H,!0),e.abrupt("return",w().fire({position:"center",icon:"success",title:t.data.message,showConfirmButton:!1,timer:1500}));case 5:w().fire({position:"center",icon:"error",title:t.data.message,showConfirmButton:!1,timer:1500});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}),Ke=Ge.mutate,Be=Ge.isLoading,Re=(0,y.useMutation)({mutationKey:oe,mutationFn:function(e){return(v=v||(0,i.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.post("/task/production/delete-bonds-policy",t,{headers:{Authorization:"Bearer ".concat(null===ie||void 0===ie?void 0:ie.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){return(L=L||(0,i.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.data.success){e.next=5;break}return e.next=3,Je();case 3:return Ye(H,!0),e.abrupt("return",w().fire({position:"center",icon:"success",title:t.data.message,showConfirmButton:!1,timer:1500}));case 5:w().fire({position:"center",icon:"error",title:t.data.message,showConfirmButton:!1,timer:1500});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}),qe=Re.mutate,Ue=Re.isLoading,Oe=(0,s.useCallback)((function(){B.insuredValue=""===B.insuredValue?"0":B.insuredValue,B.percentagePremium=""===B.percentagePremium?"0":B.percentagePremium,B.totalPremium=""===B.totalPremium?"0":B.totalPremium,B.vat=""===B.vat?"0":B.vat,B.docStamp=""===B.docStamp?"0":B.docStamp,B.localGovTaxPercent=""===B.localGovTaxPercent?"0":B.localGovTaxPercent,B.localGovTax=""===B.localGovTax?"0":B.localGovTax,B.umis=""===B.umis?"0":B.umis,B.principal=""===B.principal?"0":B.principal,B.totalDue=""===B.totalDue?"0":B.totalDue}),[B]),Ve=(0,s.useCallback)((function(){return""===B.client_name||null===B.client_name||void 0===B.client_name?w().fire("Unable to save! Invalid Client ID","you missed the Client Id Field?","error"):""===B.client_id||null===B.client_id?w().fire("Unable to save! Invalid IDNo.","you missed the Client Id Field?","error"):""===B.PolicyAccount||null===B.PolicyAccount?w().fire("Unable to save! Please select Account.","you missed the Account Field?","error"):""===B.PolicyNo||null===B.PolicyNo?w().fire("Unable to save! Invalid Policy No.","you missed the Policy No Field?","error"):void("delete"===B.bondActioMode?(0,W.s)({isUpdate:!0,cb:function(e){Oe(),Ke((0,r.Z)((0,r.Z)({},B),{},{userCodeConfirmation:e}))}}):(0,W.L)({isConfirm:function(){Oe(),Ke(B)}}))}),[B,Oe,Ke]);(0,s.useEffect)((function(){var e=function(e){var t,n,o;("AudioVolumeMute"!==e.code&&"F1"!==e.code&&173!==e.keyCode||(e.preventDefault(),A(0)),"AudioVolumeDown"!==e.code&&"F2"!==e.code&&174!==e.keyCode||(e.preventDefault(),A(1)),""!==B.bondActioMode||"KeyN"!==e.code&&"Enter"!==e.code&&"NumpadEnter"!==e.code)||(e.preventDefault(),null===(t=Ie.current)||void 0===t||t.click());""!==B.bondActioMode&&"Escape"===e.code&&(e.preventDefault(),null===(n=Pe.current)||void 0===n||n.click());"delete"===B.bondActioMode&&"Delete"===e.code&&(e.preventDefault(),null===(o=je.current)||void 0===o||o.click())};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[A,B.bondActioMode]);var We=function(e){var t=e.target,n=t.name,o=t.value;R({type:"UPDATE_FIELD",field:n,value:o})},Qe=function(e,t){R({type:"UPDATE_FIELD",field:t,value:e})};function He(){Oe();var e=parseFloat(B.insuredValue),t=parseFloat(B.percentagePremium),n=parseFloat(B.localGovTaxPercent),o=parseFloat(B.umis),i=parseFloat(B.principal),a=n/100,l=e*(t/100);Qe(e.toFixed(2),"insuredValue"),Qe(t.toFixed(2),"percentagePremium"),Qe(l.toFixed(2),"totalPremium"),Qe((.12*l).toFixed(2),"vat"),Qe((.125*l).toFixed(2),"docStamp"),Qe((a*l).toFixed(2),"localGovTax"),Qe(o.toFixed(2),"umis"),Qe(i.toFixed(2),"principal"),Qe((parseFloat(l.toFixed(2))+parseFloat((.12*l).toFixed(2))+parseFloat((.125*l).toFixed(2))+parseFloat((a*l).toFixed(2))+parseFloat(o.toFixed(2))+parseFloat(i.toFixed(2))).toFixed(2),"totalDue")}function Ye(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.form_type=B.form_type,e.form_action=B.form_action,e.prem_text_one=B.prem_text_one,e.prem_text_two=B.prem_text_two,t||(e.bondActioMode=B.bondActioMode),Object.entries(e).forEach((function(e){var t=(0,a.Z)(e,2),n=t[0],o=t[1];Qe(o,n)}))}function Je(){return(_=_||(0,i.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([ze.invalidateQueries(X),ze.invalidateQueries($),ze.invalidateQueries(ee),ze.invalidateQueries(te),ze.invalidateQueries(ne),ze.invalidateQueries(oe)]));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xe(e){var t=e[0],n=t.PolicyNo,o=t.Account,i=t.PolicyType,a=t.Percentage,l=t.BidDate,r=t.BidTime,s=t.Obligee,d=t.UnitDetail,u=t.BondValue,c=t.NotaryName,p=t.TaxCerNo,x=t.IssuedLocation,f=t.NIssued,m=t.CapacityAs,h=t.TaxCerNoCorp,y=t.IssuedLoctCorp,g=t.CIssued,b=t.Officer,v=t.OPosition,w=t.Validity,F=t.IDNo,D=t.SubAcct,C=t.DateIssued,I=t.Notarial,P=t.Misc,j=t.AgentID,z=t.AgentCom,Z=t.client_fullname,S=t.agent_fullname,k=t.address,L=t.sale_officer;Qe(D,"sub_account"),Qe(F,"client_id"),Qe(Z,"client_name"),Qe(k,"client_address"),Qe(j,"agent_id"),Qe(S,"agent_name"),Qe(z,"agent_com"),Qe(L,"sale_officer"),Qe(o,"PolicyAccount"),Qe(n,"PolicyNo"),Qe(i,"policyType"),Qe(l,"biddingDate"),Qe(r,"time"),Qe(C,"DateIssued"),Qe(w,"validity"),Qe(b,"officer"),Qe(v,"position"),Qe(d,"unit"),Qe(s,"obligee"),Qe(c,"officerName"),Qe(p,"officerTaxCertNo"),Qe(x,"officerIssuedLoc"),Qe(f,"officerDateIssued"),Qe(m,"insuranceCapacity"),Qe(h,"insuranceOfficerTaxCert"),Qe(y,"insuranceIssuedLoc"),Qe(g,"insuranceDateIssued"),B.insuredValue=u,B.percentagePremium=a,B.umis=I,B.principal=P,He(),Qe("delete","bondActioMode")}return(0,K.jsxs)(J.Provider,{value:{state:B,handleInputChange:We,customInputchange:Qe,Mortgagee:be,setMortgagee:ve,showField:De,setShowField:Ce,clientRows:re,setClientRows:se,myAxios:O,user:ie,agentRows:ce,setAgentRows:pe,computation:He,isAddOrEditMode:Ze,dispatch:R,keySave:function(e){""===B.mode||"Enter"!==e.code&&"NumpadEnter"!==e.code||(e.preventDefault(),Ve())}},children:[(0,K.jsxs)("div",{style:{display:"flex",columnGap:"5px"},children:[(0,K.jsxs)("div",{style:{display:"flex",columnGap:"8px",alignItems:"center"},children:[(0,K.jsx)(S.CustomButton,{onClick:function(){A(0)},currentStepIndex:N,index:0,children:"Policy Information"}),(0,K.jsx)(Z.Z,{fontSize:"small"})]}),(0,K.jsx)("div",{style:{display:"flex",columnGap:"8px",alignItems:"center"},children:(0,K.jsx)(S.CustomButton,{onClick:function(){A(1)},currentStepIndex:N,index:1,children:"Policy Premium"})}),(0,K.jsx)("div",{style:{display:"flex",alignItems:"center",columnGap:"20px",marginLeft:"30px"},children:(0,K.jsxs)("div",{style:{display:"flex",alignItems:"center",columnGap:"5px"},children:[""===B.bondActioMode&&(0,K.jsx)(d.Z,{sx:{height:"30px",fontSize:"11px"},ref:Ie,variant:"contained",startIcon:(0,K.jsx)(m.Z,{}),onClick:function(){Qe("add","bondActioMode")},children:"New"}),(0,K.jsx)(z.Z,{sx:{height:"30px",fontSize:"11px"},loading:Be,color:"primary",variant:"contained",type:"submit",onClick:Ve,disabled:""===B.bondActioMode,startIcon:(0,K.jsx)(b.Z,{}),children:"Save"}),""!==B.bondActioMode&&(0,K.jsx)(d.Z,{sx:{height:"30px",fontSize:"11px"},ref:Pe,variant:"contained",startIcon:(0,K.jsx)(g.Z,{}),color:"error",onClick:function(){w().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, cancel it!"}).then((function(e){e.isConfirmed&&(Qe("","bondActioMode"),Ye(H,!0))}))},children:"Cancel"}),(0,K.jsx)(z.Z,{loading:Ue,ref:je,id:"save-entry-header",variant:"contained",sx:{height:"30px",fontSize:"11px",backgroundColor:f.Z[500],"&:hover":{backgroundColor:f.Z[600]}},disabled:"delete"!==B.bondActioMode,startIcon:(0,K.jsx)(F.Z,{}),onClick:function(){(0,W.s)({isUpdate:!1,cb:function(e){qe({PolicyAccount:B.PolicyAccount,PolicyNo:B.PolicyNo,policyType:B.policyType,userCodeConfirmation:e})}})},children:"Delete"})]})})]}),(0,K.jsx)(u.Z,{sx:function(e){return(0,l.Z)({display:"flex",alignItems:"center",columnGap:"20px",marginBottom:"10px"},e.breakpoints.down("sm"),{flexDirection:"column",alignItems:"flex-start",flex:1})},children:(0,K.jsx)("div",{style:{marginTop:"10px",marginBottom:"12px",width:"100%"}})}),(0,K.jsxs)("div",{style:{marginBottom:"5px",display:"flex",gap:"10px"},children:[Ne?(0,K.jsx)(z.Z,{loading:Ne}):(0,K.jsx)(c.Z,{label:"Search",size:"small",name:"search",value:me,onChange:function(e){he(e.target.value)},onKeyDown:function(e){"Enter"!==e.code&&"NumpadEnter"!==e.code||(e.preventDefault(),Ae(me))},InputProps:{style:{height:"27px",fontSize:"14px"},endAdornment:(0,K.jsx)(p.Z,{position:"end",children:(0,K.jsx)(x.Z,{onClick:function(){Ae(me)},edge:"end",children:(0,K.jsx)(Q.Z,{})})})},type:"search",sx:{width:"300px",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}}),_e?(0,K.jsx)(z.Z,{loading:_e}):(0,K.jsxs)(D.Z,{size:"small",sx:function(e){return{width:"150px",".MuiFormLabel-root":{fontSize:"14px",background:"white",zIndex:99,padding:"0 3px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}},children:[(0,K.jsx)(C.Z,{id:"subAccount",children:"Sub Account"}),(0,K.jsx)(I.Z,{sx:{height:"27px",fontSize:"14px"},size:"small",labelId:"subAccount",label:"subAccount",name:"sub_account",value:B.sub_account,onChange:function(e){We(e)},children:(null===Le||void 0===Le?void 0:Le.data.sub_account).map((function(e,t){return(0,K.jsx)(P.Z,{value:e.Acronym.trim(),children:e.Acronym},t)}))})]}),(0,K.jsxs)(D.Z,{size:"small",sx:function(e){return{width:"150px",".MuiFormLabel-root":{fontSize:"14px",background:"white",zIndex:99,padding:"0 3px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}},children:[(0,K.jsx)(C.Z,{id:"print-type",children:"Print Type"}),(0,K.jsx)(I.Z,{sx:{height:"27px",fontSize:"14px"},size:"small",labelId:"print-type",label:"Print Type",name:"printType",value:B.printType,onChange:We,children:[{title:"Front Page"},{title:"Back Page"}].map((function(e,t){return(0,K.jsx)(P.Z,{value:e.title,children:e.title},t)}))})]})]}),T,Te]})}}}]);
//# sourceMappingURL=9187.10ce3e14.chunk.js.map