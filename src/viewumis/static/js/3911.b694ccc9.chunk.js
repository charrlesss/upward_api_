"use strict";(self.webpackChunkupward=self.webpackChunkupward||[]).push([[3911],{83911:function(e,s,n){n.r(s),n.d(s,{default:function(){return g}});var a,t=n(29439),r=n(74165),o=n(15861),c=n(72791),u=n(57689),i=n(3380),d=n(91933),p=n(79018),m=n(21830),l=n.n(m),h=(n(59491),n(80184));function w(e,s,n){return(a=a||(0,o.Z)((0,r.Z)().mark((function e(s,n,a){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.post("/login",{username:n,password:a},{withCredentials:!0});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){var e,s,n=(0,u.s0)(),a=(0,c.useState)(!1),m=(0,t.Z)(a,2),g=m[0],f=m[1],x=(0,c.useState)({username:!1,password:!1,success:!1,message:""}),S=(0,t.Z)(x,2),j=S[0],v=S[1],y=(0,c.useContext)(i.V),_=y.setUser,b=y.myAxios,N=(0,d.useMutation)({mutationKey:"login",mutationFn:function(s){return(e=e||(0,o.Z)((0,r.Z)().mark((function e(s){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,p.D)(1200).then((0,o.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(b,s.username,s.password);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){return e.data.username?v({username:!0,password:!1,success:!1,message:e.data.message}):e.data.password?v({username:!1,password:!0,success:!1,message:e.data.message}):(v({username:!1,password:!1,success:!0,message:e.data.message}),void l().fire({position:"center",icon:"success",title:e.data.message,showConfirmButton:!1,timer:800}).then((function(){if(_(e.data.user),"ACCOUNTING_CHECKS"===e.data.user.userAccess)return n("/".concat("UMIS","/dashboard/task/accounting/warehouse-checks"));e.data.user.is_master_admin?n("/master-admin-dashboard"):(window.localStorage.setItem("__policy__","COM"),"UCSMI"===e.data.user.department&&(window.localStorage.setItem("__policy_type__","TEMP"),n("/".concat("UMIS","/dashboard/task/accounting/post-date-checks"))),"UMIS"===e.data.user.department&&(window.localStorage.setItem("__policy_type__","REG"),n("/".concat("UMIS","/dashboard"))))})))}}),k=N.mutate,I=N.isLoading;return(0,h.jsxs)("div",{className:"main-landing-page",children:[(0,h.jsxs)("form",{className:"content",onSubmit:function(e){return(s=s||(0,o.Z)((0,r.Z)().mark((function e(s){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.preventDefault(),n=new FormData(s.currentTarget),k({username:n.get("username"),password:n.get("password")});case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},children:[(0,h.jsx)("img",{alt:"Upward Insurance",src:"/logo.png",style:{width:"120px",height:"auto",background:"white"}}),(0,h.jsx)("h3",{style:{fontWeight:"400",marginBottom:"30px"},children:"LOGIN TO UPWARD INSURANCE"}),(0,h.jsx)("div",{className:"content-field",children:(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{htmlFor:"username",children:" USERNAME"}),(0,h.jsx)("input",{autoFocus:!0,name:"username",id:"username",className:j.username?"error":"",onFocus:function(){return v({username:!1,password:!1,success:!1,message:""})}}),j.username&&(0,h.jsx)("p",{className:"warning-text",children:j.username&&j.message})]})}),(0,h.jsx)("div",{className:"content-field",style:{marginTop:"15px"},children:(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{htmlFor:"password",children:" PASSWORD"}),(0,h.jsx)("input",{name:"password",id:"password",type:g?"text":"password",className:j.password?"error":"",onFocus:function(){return v({username:!1,password:!1,success:!1,message:""})}}),j.password&&(0,h.jsx)("p",{className:"warning-text",children:j.message})]})}),(0,h.jsxs)("div",{style:{display:"flex",alignItems:"center",columnGap:"10px",marginTop:"10px"},children:[(0,h.jsx)("input",{name:"showpass",id:"showpass",type:"checkbox",style:{padding:"0",margin:0},onChange:function(e){var s;f(null===(s=e.currentTarget)||void 0===s?void 0:s.checked)}}),(0,h.jsx)("label",{htmlFor:"showpass",style:{fontSize:"10px",cursor:"pointer",padding:"0",margin:0},children:"SHOW PASSWORD"})]}),(0,h.jsx)("button",{children:"SUBMIT"})]}),I&&(0,h.jsx)("div",{className:"loading-component",children:(0,h.jsx)("div",{className:"loader"})})]})}},79018:function(e,s,n){function a(e){return new Promise((function(s){return setTimeout(s,e)}))}n.d(s,{D:function(){return a}})}}]);
//# sourceMappingURL=3911.b694ccc9.chunk.js.map