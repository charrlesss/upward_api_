"use strict";(self.webpackChunkupward=self.webpackChunkupward||[]).push([[5379],{70272:function(e,t,n){var o=n(54270),r=n(80184);t.Z=function(e){var t=e.title,n=void 0===t?"":t;return(0,r.jsxs)(o.q,{children:[(0,r.jsx)("title",{children:"".concat("UCSMI"," - ").concat(n)}),(0,r.jsx)("link",{rel:"icon",type:"image/png",href:"".concat("https://ucsmiapi.upwardinsurance.net/","/logo.png")})]})}},15703:function(e,t,n){n.d(t,{lq:function(){return v},Fz:function(){return p},iA:function(){return s},oi:function(){return d}});var o=n(29439),r=n(1413),i=n(72791);function l(e){if(!/^\d{4}-\d{2}-\d{2}$/.test(e))return!1;var t=e.split("-"),n=(0,o.Z)(t,3),r=n[0],i=n[1],l=n[2],a=parseInt(r);if(a<1e3||a>2040)return!1;var u=new Date(e);return u.getFullYear()===a&&u.getMonth()+1===parseInt(i)&&u.getDate()===parseInt(l)}var a=n(16386),u=n(79018),c=n(80184);function s(e){var t=e.input,n=e.label,o=e.inputRef,l=e.icon,a=e.iconPosition,u=void 0===a?"end":a,s=e.disableIcon,d=void 0!==s&&s,p=e.onIconClick,v=void 0===p?function(e){}:p,f=e.onChange,y=void 0===f?function(e){}:f,h=e.onBlur,x=void 0===h?function(e){}:h,g=e.containerStyle,m=e.containerClassName,w=(0,i.useId)(),b=function(e){if(!e)return e;var t=e.split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")},j=function(e){return e.replace(/,/g,"")};return(0,c.jsxs)("div",{className:m,style:(0,r.Z)({display:"flex",alignItems:"center",position:"relative"},g),children:[(0,c.jsx)("label",(0,r.Z)((0,r.Z)({},n),{},{htmlFor:w,children:n.title})),l&&"start"===u&&(0,c.jsx)("div",{style:{position:"absolute",left:"8px",zIndex:1},children:l}),(0,c.jsx)("input",(0,r.Z)((0,r.Z)({ref:o,id:w},t),{},{type:"text",style:(0,r.Z)({height:"100%",textAlign:"right"},t.style),onChange:function(e){!function(e){var t=e.target.value;if(t=j(t),""===(t=j(t))||/^-?\d+(,\d{3})*(\.\d*)?$/.test(t))e.target.value=b(t);else{var n=t.match(/\d+/g);if(n){var o=n.join("");e.target.value=b(o)}else e.target.value="0"}}(e),y(e)},onBlur:function(e){!function(e){var t=j(e.target.value);t=function(e){return e.includes(".")?1===e.split(".")[1].length?e+"0":e:""===e?"0.00":e+".00"}(t),e.target.value=b(t)}(e),x(e)},onFocus:function(e){e.currentTarget.select(),t&&t.onFocus&&t.onFocus(e)}})),l&&"end"===u&&(0,c.jsx)("div",{onClick:v,style:{position:"absolute",right:"2px",top:"50%",transform:"translateY(-50%)",zIndex:1,cursor:d?"none":"pointer",display:"flex",alignItems:"center",justifyContent:"center",background:"white",pointerEvents:d?"none":"auto"},children:l})]})}function d(e){var t=e.input,n=e.label,o=e.inputRef,s=e.icon,d=e.iconPosition,p=void 0===d?"end":d,v=e.disableIcon,f=void 0!==v&&v,y=e.containerStyle,h=e.onIconClick,x=void 0===h?function(e){}:h,g=e.containerClassName,m=(0,i.useId)();return(0,c.jsxs)("div",{className:g,style:(0,r.Z)({display:"flex",alignItems:"center",position:"relative"},y),children:[(0,c.jsx)("label",(0,r.Z)((0,r.Z)({},n),{},{htmlFor:m,children:n.title})),s&&"start"===p&&(0,c.jsx)("div",{style:{position:"absolute",left:"8px",zIndex:1},children:s}),(0,c.jsx)("input",(0,r.Z)((0,r.Z)({ref:o,id:m},t),{},{onBlur:function(e){var r,i;if("month"===t.type&&!l("".concat(e.currentTarget.value,"-01")))return alert("Invalid ".concat(null===(r=n.title)||void 0===r?void 0:r.replace(/:/g,"").trim(),"!, Resetting date.")),e.currentTarget.value=(0,a.Z)(new Date,"yyyy-MM"),void(0,u.D)(100).then((function(){var e;null===o||void 0===o||null===(e=o.current)||void 0===e||e.focus()}));if("date"===t.type&&!l(e.currentTarget.value))return alert("Invalid ".concat(null===(i=n.title)||void 0===i?void 0:i.replace(/:/g,"").trim(),"!, Resetting date.")),e.currentTarget.value=(0,a.Z)(new Date,"yyyy-MM-dd"),void(0,u.D)(100).then((function(){var e;null===o||void 0===o||null===(e=o.current)||void 0===e||e.focus()}));t&&t.onBlur&&t.onBlur(e)},style:(0,r.Z)({height:"100%"},t.style)})),s&&"end"===p&&(0,c.jsx)("div",{onClick:x,style:{position:"absolute",right:"2px",top:"50%",transform:"translateY(-50%)",zIndex:1,cursor:f?"none":"pointer",display:"flex",alignItems:"center",justifyContent:"center",background:"white",pointerEvents:f?"none":"auto"},children:s})]})}function p(e){var t=e.containerClassName,n=e.textarea,o=e.label,l=e._inputRef,a=e.icon,u=e.iconPosition,s=void 0===u?"end":u,d=e.disableIcon,p=void 0!==d&&d,v=e.onIconClick,f=void 0===v?function(e){}:v,y=e.containerStyle,h=(0,i.useId)();return(0,c.jsxs)("div",{className:t,style:(0,r.Z)({display:"flex",alignItems:"center",position:"relative"},y),children:[(0,c.jsx)("label",(0,r.Z)((0,r.Z)({},o),{},{htmlFor:h,children:o.title})),a&&"start"===s&&(0,c.jsx)("div",{style:{position:"absolute",left:"8px",zIndex:1},children:a}),(0,c.jsx)("textarea",(0,r.Z)((0,r.Z)({ref:l,id:h},n),{},{style:(0,r.Z)({height:"100%"},n.style)})),a&&"end"===s&&(0,c.jsx)("div",{onClick:f,style:{position:"absolute",right:"2px",top:"50%",transform:"translateY(-50%)",zIndex:1,cursor:p?"none":"pointer",display:"flex",alignItems:"center",justifyContent:"center",background:"white",pointerEvents:p?"none":"auto"},children:a})]})}var v=(0,i.forwardRef)((function(e,t){var n=e.select,l=e.label,a=e.selectRef,u=e.datasource,s=void 0===u?[]:u,d=e.values,p=void 0===d?"":d,v=e.display,f=void 0===v?"":v,y=e.containerStyle,h=e.containerClassName,x=(0,i.useState)(s),g=(0,o.Z)(x,2),m=g[0],w=g[1],b=(0,i.useId)();return(0,i.useImperativeHandle)(t,(function(){return{setDataSource:function(e){w(e)},getDataSource:function(){return m}}})),(0,c.jsxs)("div",{className:h,style:(0,r.Z)({display:"flex",height:"18px",alignItems:"center"},y),children:[(0,c.jsx)("label",(0,r.Z)((0,r.Z)({},l),{},{htmlFor:b,children:l.title})),(0,c.jsx)("select",(0,r.Z)((0,r.Z)({},n),{},{ref:a,className:"select ".concat(n.className),style:(0,r.Z)({height:"18px"},n.style),children:m.map((function(e,t){return(0,c.jsx)("option",{value:e[p],children:e[f]},t)}))}))]})}))},25379:function(e,t,n){n.r(t),n.d(t,{default:function(){return h}});var o=n(74165),r=n(15861),i=n(29439),l=n(72791),a=n(3380),u=n(15703),c=n(16386),s=n(36151),d=n(91933),p=n(70272),v=n(65413),f=n(60173),y=n(80184);function h(){var e,t,n=(0,l.useContext)(a.V),h=n.user,x=n.myAxios,g=(0,l.useState)(E({format2:"All",type:"COM",account:"All",dateFormat:"Monthly",date:new Date})),m=(0,i.Z)(g,2),w=m[0],b=m[1],j=(0,l.useRef)(null),Z=(0,l.useRef)(null),R=(0,l.useRef)(null),C=(0,l.useRef)(null),I=(0,l.useRef)(null),k=(0,l.useRef)(null),D=(0,l.useRef)(null),S=(0,l.useRef)(null);function E(e){return"UPWARD MANAGEMENT INSURANCE SERVICES \nMonthly Renewal Notice Report (".concat(e.type," - ").concat(e.account,")\nCut off Date: ").concat((0,c.Z)(new Date(e.date),"MMMM yyyy"))}var F=(0,d.useQuery)({queryKey:"policy-account",queryFn:function(){return(e=e||(0,r.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.get("/reports/reports/policy-account",{headers:{Authorization:"Bearer ".concat(null===h||void 0===h?void 0:h.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},refetchOnWindowFocus:!1,onSuccess:function(e){var t=e;S.current&&S.current.setDataSource(t.data.data)}}),N=F.isLoading;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(p.Z,{title:"Renewal Notice Report"}),N&&(0,y.jsx)(v.g,{}),(0,y.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",flex:1,height:"100vh",backgroundColor:"#F1F1F1"},children:(0,y.jsxs)("div",{style:{border:"1px solid #94a3b8",width:"500px",height:"450px",display:"flex",flexDirection:"column",rowGap:"10px",padding:"20px",boxShadow:"0px 0px 5px -1px rgba(0,0,0,0.75)"},children:[(0,y.jsx)(u.Fz,{label:{title:" ",style:{display:"none"}},textarea:{rows:6,style:{flex:1,fontSize:"14px"},value:w,onKeyDown:function(e){"NumpadEnter"===e.code||e.code},onChange:function(e){b(e.target.value)}},_inputRef:j}),(0,y.jsx)(u.lq,{label:{title:"Policy : ",style:{fontSize:"12px",fontWeight:"bold",width:"90px"}},containerStyle:{height:"22px"},selectRef:C,select:{disabled:!1,style:{width:"100%",height:"22px"},defaultValue:"COM",onKeyDown:function(e){"NumpadEnter"!==e.code&&"Enter"!==e.code||e.preventDefault()},onChange:function(e){var t,n,o,r;b(E({format2:null===(t=Z.current)||void 0===t?void 0:t.value,type:e.target.value,account:null===(n=D.current)||void 0===n?void 0:n.value,dateFormat:null===(o=R.current)||void 0===o?void 0:o.value,date:new Date(null===(r=I.current)||void 0===r?void 0:r.value)}))}},datasource:[{key:"COM"},{key:"FIRE"},{key:"MAR"},{key:"PA"}],values:"key",display:"key"}),(0,y.jsx)(u.lq,{ref:S,label:{title:"Account : ",style:{fontSize:"12px",fontWeight:"bold",width:"90px"}},containerStyle:{height:"22px"},selectRef:D,select:{disabled:!1,style:{width:"100%",height:"22px"},defaultValue:"All",onKeyDown:function(e){"NumpadEnter"!==e.code&&"Enter"!==e.code||e.preventDefault()},onChange:function(e){var t,n,o,r;b(E({format2:null===(t=Z.current)||void 0===t?void 0:t.value,type:null===(n=C.current)||void 0===n?void 0:n.value,account:e.target.value,dateFormat:null===(o=R.current)||void 0===o?void 0:o.value,date:new Date(null===(r=I.current)||void 0===r?void 0:r.value)}))}},datasource:[],values:"Account",display:"Account"}),(0,y.jsx)(u.lq,{label:{title:"Type : ",style:{fontSize:"12px",fontWeight:"bold",width:"90px"}},containerStyle:{height:"22px"},selectRef:k,select:{disabled:!1,style:{width:"100%",height:"22px"},defaultValue:"Regular",onKeyDown:function(e){"NumpadEnter"!==e.code&&"Enter"!==e.code||e.preventDefault()}},datasource:[{key:"Regular"},{key:"Temporary"}],values:"key",display:"key"}),(0,y.jsx)(u.oi,{containerStyle:{},label:{title:"Date : ",style:{fontSize:"12px",fontWeight:"bold",width:"90px"}},input:{type:"date",defaultValue:(0,c.Z)(new Date,"yyyy-MM-dd"),style:{width:"100%",height:"22px"},onKeyDown:function(e){"NumpadEnter"===e.code||e.code},onChange:function(e){var t,n,o,r;b(E({format2:null===(t=Z.current)||void 0===t?void 0:t.value,type:null===(n=C.current)||void 0===n?void 0:n.value,account:null===(o=D.current)||void 0===o?void 0:o.value,dateFormat:null===(r=R.current)||void 0===r?void 0:r.value,date:new Date(e.target.value)}))}},inputRef:I}),(0,y.jsx)(s.Z,{onClick:function(){return(t=t||(0,r.Z)((0,o.Z)().mark((function e(){var t,n,r,i,l,a,u,c,s;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l={date:new Date(null===(t=I.current)||void 0===t?void 0:t.value),account:"".concat(null===(n=D.current)||void 0===n?void 0:n.value),type:null===(r=k.current)||void 0===r?void 0:r.value,policy:null===(i=C.current)||void 0===i?void 0:i.value,title:w},e.prev=1,e.next=4,x.post("/reports/reports/renewal-notice",l,{responseType:"arraybuffer",headers:{Authorization:"Bearer ".concat(null===h||void 0===h?void 0:h.accessToken)}});case 4:if(a=e.sent,u=new Blob([a.data],{type:"application/pdf"}),c=URL.createObjectURL(u),!f.tq){e.next=17;break}return(s=document.createElement("a")).href=c,s.download="report.pdf",document.body.appendChild(s),s.click(),document.body.removeChild(s),e.abrupt("return");case 17:window.open(c);case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(1),console.error("SERVER ERROR :",e.t0);case 23:case"end":return e.stop()}}),e,null,[[1,20]])})))).apply(this,arguments)},color:"success",variant:"contained",sx:{height:"22px",fontSize:"12px"},children:"Generate Report"})]})})]})}},79018:function(e,t,n){function o(e){return new Promise((function(t){return setTimeout(t,e)}))}n.d(t,{D:function(){return o}})}}]);
//# sourceMappingURL=5379.7b484043.chunk.js.map