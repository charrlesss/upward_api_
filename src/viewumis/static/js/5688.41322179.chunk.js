"use strict";(self.webpackChunkupward=self.webpackChunkupward||[]).push([[5688],{77935:function(e,t,n){n.r(t),n.d(t,{default:function(){return b}});var o=n(1413),r=n(74165),a=n(15861),i=n(72791),u=n(91933),c=n(3380),l=n(15703),s=n(50039),d=n(36151),p=n(21830),f=n.n(p),v=n(65413),h=n(70272),m=(n(44061),n(5403)),x=n(3307),y=n(80184),k=[{key:"row_count",label:"#",width:30},{key:"Check_Date",label:"Date",width:80},{key:"Bank",label:"Bank",width:150},{key:"CheckNo",label:"Check No",width:150},{key:"Check_Amnt",label:"Amount",width:120,type:"number"}];function b(){var e,t,n,p,b,g=(0,i.useContext)(c.V),w=g.myAxios,C=g.user,N=(0,i.useRef)(null),S=(0,i.useRef)(null),R=(0,i.useRef)(null),Z=(0,i.useRef)(null),j=(0,i.useRef)(null),B=(0,i.useRef)(null),z=(0,i.useRef)(null),A=(0,u.useMutation)({mutationKey:"load-details",mutationFn:function(t){return(e=e||(0,a.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.post("/task/accounting/pullout/approved/load-details",t,{headers:{Authorization:"Bearer ".concat(null===C||void 0===C?void 0:C.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t=null===e||void 0===e?void 0:e.data.details.map((function(e){return(0,o.Z)((0,o.Z)({},e),{},{Check_Amnt:(0,x.formatNumber)(parseFloat(e.Check_Amnt.toString().replace(/,/g,"")))})}));R.current&&(R.current.value=t[0].PNNo),Z.current&&(Z.current.value=t[0].Name),j.current&&(j.current.value=t[0].Reason),N.current.setDataFormated(t)}}),T=A.isLoading,_=A.mutate,D=(0,u.useMutation)({mutationKey:"print",mutationFn:function(e){return(t=t||(0,a.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.post("/task/accounting/pullout/approved/print",t,{responseType:"arraybuffer",headers:{Authorization:"Bearer ".concat(null===C||void 0===C?void 0:C.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);window.open("/".concat("UCSMI","/dashboard/report?pdf=").concat(encodeURIComponent(n)),"_blank")}}),P=D.mutate,M=D.isLoading,F=(0,u.useMutation)({mutationKey:"confirm-code",mutationFn:function(e){return(n=n||(0,a.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.post("/task/accounting/pullout/approved/confirm-code",t,{headers:{Authorization:"Bearer ".concat(null===C||void 0===C?void 0:C.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){e.data.success?f().fire({text:e.data.message,icon:"success",timer:1500}).then((function(){var e,t,n;P({state:{PNo:null===(e=R.current)||void 0===e?void 0:e.value,Name:null===(t=Z.current)||void 0===t?void 0:t.value,rcpnNo:null===(n=S.current)||void 0===n?void 0:n.value,reportTitle:""},tableData:N.current.getData().map((function(e){return{Check_No:e[3],Check_Date:e[1],BankName:e[2],Check_Amnt:e[4],seq:e[0]}}))})})).finally((function(){N.current.resetTable(),S.current&&(S.current.value=""),R.current&&(R.current.value=""),Z.current&&(Z.current.value=""),j.current&&(j.current.value=""),B.current&&(B.current.value="")})):f().fire({text:e.data.message,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, confirm it!"})}}),L=F.isLoading,I=F.mutate,K=(0,s._j)({link:"/task/accounting/pullout/reqeust/get-rcpn-no",column:[{key:"RCPNo",label:"RCPN No.",width:400}],getSelectedItem:function(e,t,n,o){return(p=p||(0,a.Z)((0,r.Z)().mark((function e(t,n,o,a){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&(_({RCPNo:t[0]}),S.current&&(S.current.value=t[0]),E());case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}),U=K.UpwardTableModalSearch,W=K.openModal,E=K.closeModal,V=(0,u.useMutation)({mutationKey:"confirm",mutationFn:function(e){return(b=b||(0,a.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.post("/task/accounting/pullout/approved/confirm",t,{headers:{Authorization:"Bearer ".concat(null===C||void 0===C?void 0:C.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){if(e.data.success)return f().fire({title:"Are you sure?",text:e.data.message,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, confirm it!"}).then((function(e){if(e.isConfirmed){var t,n,o,r,a,i=N.current.getData().map((function(e){return{Check_Date:e[1],Bank:e[2],Check_No:e[3],Check_Amnt:e[4]}}));I({RCPNo:null===(t=S.current)||void 0===t?void 0:t.value,PNNo:null===(n=R.current)||void 0===n?void 0:n.value,reason:null===(o=j.current)||void 0===o?void 0:o.value,Name:null===(r=Z.current)||void 0===r?void 0:r.value,code:null===(a=B.current)||void 0===a?void 0:a.value,selected:JSON.stringify(i)})}}));alert(e.data.message)}}),H=V.isLoading,O=V.mutate;return(0,y.jsxs)("div",{className:"main",style:{flex:"1",display:"flex",justifyContent:"center",alignItems:"center",background:"#F1F1F1"},children:[(0,y.jsx)(U,{}),(0,y.jsx)(h.Z,{title:"Pullout Approved"}),(T||H||L||M)&&(0,y.jsx)(v.g,{}),(0,y.jsxs)("div",{className:"content",style:{padding:"10px",width:"62%",border:"1px sold black",height:"500px",boxShadow:"1px 1px 2px 2px black",display:"flex",flexDirection:"column",boxSizing:"border-box"},children:[(0,y.jsxs)("div",{style:{height:"auto",boxSizing:"border-box"},children:[(0,y.jsx)(l.oi,{containerClassName:"custom-input",containerStyle:{width:"50%",marginBottom:"8px"},label:{title:"RCP No. :",style:{fontSize:"12px",fontWeight:"bold",width:"100px"}},input:{type:"text",style:{width:"calc(100% - 100px)"},onKeyDown:function(e){"NumpadEnter"!==e.code&&"Enter"!==e.code||W(e.currentTarget.value)}},icon:(0,y.jsx)(m.Z,{sx:{fontSize:"18px"}}),onIconClick:function(e){e.preventDefault(),S.current&&W(S.current.value)},inputRef:S}),(0,y.jsx)(l.oi,{containerClassName:"custom-input",containerStyle:{width:"50%",marginBottom:"8px",marginLeft:"50px"},label:{title:"PN No. :",style:{fontSize:"12px",fontWeight:"bold",width:"100px"}},input:{disabled:!0,type:"text",style:{width:"calc(100% - 100px)"}},inputRef:R}),(0,y.jsx)(l.oi,{containerClassName:"custom-input",containerStyle:{width:"50%",marginBottom:"8px",marginLeft:"50px"},label:{title:"Client :",style:{fontSize:"12px",fontWeight:"bold",width:"100px"}},input:{disabled:!0,type:"text",style:{width:"calc(100% - 100px)"}},inputRef:Z}),(0,y.jsx)(l.oi,{containerClassName:"custom-input",containerStyle:{width:"50%",marginBottom:"8px",marginLeft:"50px"},label:{title:"Reason :",style:{fontSize:"12px",fontWeight:"bold",width:"100px"}},input:{disabled:!0,type:"text",style:{width:"calc(100% - 100px)"}},inputRef:j})]}),(0,y.jsx)(s.O0,{isTableSelectable:!1,ref:N,columns:k,rows:[],containerStyle:{flex:1},getSelectedItem:function(e){}}),(0,y.jsxs)("div",{style:{height:"35px",display:"flex",justifyContent:"flex-end",alignItems:"center",columnGap:"5px"},children:[(0,y.jsx)(l.oi,{containerClassName:"custom-input",label:{title:"Authentication Code:",style:{fontSize:"12px",fontWeight:"bold",width:"140px"}},input:{type:"text",style:{width:"300px"},onKeyDown:function(e){var t;"Enter"!==e.key&&"NumEnter"!==e.key||O({RCPNo:null===(t=S.current)||void 0===t?void 0:t.value,code:e.currentTarget.value})}},inputRef:B}),(0,y.jsx)(d.Z,{ref:z,variant:"contained",color:"info",style:{height:"25px",fontSize:"12px"},onClick:function(e){var t,n;O({RCPNo:null===(t=S.current)||void 0===t?void 0:t.value,code:null===(n=B.current)||void 0===n?void 0:n.value})},children:"Confirm"})]})]})]})}},42419:function(e,t,n){var o=n(64836);t.Z=void 0;var r=o(n(45649)),a=n(80184),i=(0,r.default)((0,a.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");t.Z=i},53329:function(e,t,n){var o=n(64836);t.Z=void 0;var r=o(n(45649)),a=n(80184),i=(0,r.default)((0,a.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"}),"Save");t.Z=i}}]);
//# sourceMappingURL=5688.41322179.chunk.js.map