"use strict";(self.webpackChunkupward=self.webpackChunkupward||[]).push([[9596,1004],{72680:function(e,t,n){n.r(t),n.d(t,{default:function(){return R}});var r=n(1413),i=n(74165),o=n(15861),u=n(29439),a=n(72791),c=n(36151),l=n(3380),s=n(91933),d=n(21830),p=n.n(d),f=n(39709),h=n(42419),v=n(27247),x=n(29823),m=n(53329),y=n(79018),b=n(4378),w=n(64230),g=n(70272),C=n(15703),S=n(5403),k=n(48910),Z=n(65413),N=n(58418),j=n(80184),D=[{key:"entry_supplier_id",label:"ID",width:130},{key:"ShortName",label:"Sub Account",width:120},{key:"company",label:"Company",width:200},{key:"firstname",label:"First Name",width:200},{key:"lastname",label:"Last Name",width:200},{key:"middlename",label:"Middle Name",width:200},{key:"mobile",label:"Mobile",width:200},{key:"option",label:"Option",width:130},{key:"tin_no",label:"TIN",width:130},{key:"address",label:"Address",width:500},{key:"createdAt",label:"Created At",width:130,hide:!0},{key:"sub_account",label:"sub_account",width:300,hide:!0}];function R(){var e,t,n,d,R,z,B=(0,a.useContext)(l.V),A=B.myAxios,E=B.user,I=(0,a.useState)("individual"),K=(0,u.Z)(I,2),F=K[0],L=K[1],T=(0,a.useState)(""),W=(0,u.Z)(T,2),_=W[0],M=W[1],q=(0,a.useRef)(null),U=(0,a.useRef)(null),G=(0,a.useRef)(null),O=(0,a.useRef)(null),Y=(0,a.useRef)(null),H=(0,a.useRef)(null),V=(0,a.useRef)(null),P=(0,a.useRef)(null),Q=(0,a.useRef)(null),J=(0,a.useRef)(null),X=(0,a.useRef)(null),$=(0,a.useRef)(null),ee=(0,a.useRef)(""),te=(0,a.useRef)(null),ne=(0,a.useRef)(null),re=(0,a.useRef)(null),ie=(0,a.useRef)(null),oe=(0,a.useRef)(null),ue=(0,s.useQuery)({queryKey:"supplier-generate-id",queryFn:function(){return(e=e||(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.post("/reference/id-entry-generate-id",{sign:"S",type:"entry supplier"},{headers:{Authorization:"Bearer ".concat(null===E||void 0===E?void 0:E.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},refetchOnWindowFocus:!1,onSuccess:function(e){(0,y.D)(100).then((function(){G.current&&(G.current.value=e.data.generateID)}))}}),ae=ue.isLoading,ce=ue.refetch,le=(0,s.useMutation)({mutationKey:"add-entry-supplier",mutationFn:function(e){return(t=t||(0,o.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.post("/reference/id-entry-supplier",t,{headers:{Authorization:"Bearer ".concat(null===E||void 0===E?void 0:E.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:Ze}),se=le.mutate,de=le.isLoading,pe=(0,s.useMutation)({mutationKey:"entry-supplier-update",mutationFn:function(e){return(n=n||(0,o.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.post("/reference/id-entry-supplier-update",t,{headers:{Authorization:"Bearer ".concat(null===E||void 0===E?void 0:E.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:Ze}),fe=pe.mutate,he=pe.isLoading,ve=(0,s.useMutation)({mutationKey:"delete-client",mutationFn:function(e){return(d=d||(0,o.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.post("/reference/entry-delete?entry=Supplier",t,{headers:{Authorization:"Bearer ".concat(null===E||void 0===E?void 0:E.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:Ze}),xe=ve.mutate,me=ve.isLoading,ye=(0,s.useMutation)({mutationKey:"search",mutationFn:function(e){return(R=R||(0,o.Z)((0,i.Z)().mark((function e(t){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.post("/reference/search-entry?entrySearch=".concat(null===(n=U.current)||void 0===n?void 0:n.value,"&entry=Client"),t,{headers:{Authorization:"Bearer ".concat(null===E||void 0===E?void 0:E.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){q.current.setDataFormated(null===e||void 0===e?void 0:e.data.entry)}}),be=ye.isLoading,we=ye.mutate,ge=(0,s.useQuery)({queryKey:"sub-accounts",queryFn:function(){return(z=z||(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.get("/reference/sub-account",{headers:{Authorization:"Bearer ".concat(null===E||void 0===E?void 0:E.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){(0,y.D)(100).then((function(){var t;X.current&&X.current.setDataSource(null===(t=e.data)||void 0===t?void 0:t.subAccount),(0,y.D)(100).then((function(){var t,n=null===(t=e.data)||void 0===t?void 0:t.subAccount.filter((function(e){return"HO"===e.Acronym}));$.current&&($.current.value=n[0].ShortName),ee.current=n[0].Sub_Acct}))}))}}),Ce=ge.isLoading,Se=ge.refetch,ke=(0,a.useRef)(we);function Ze(e){if(e.data.success)return je(),M(""),q.current.setSelectedRow(null),q.current.resetCheckBox(),ke.current({search:"",entry:"Supplier"}),p().fire({position:"center",icon:"success",title:e.data.message,showConfirmButton:!1,timer:1500});p().fire({position:"center",icon:"error",title:e.data.message,showConfirmButton:!1,timer:1500})}function Ne(e){var t,n,i,o,u,a,c,l,s,d,f;if("Individual"===(null===(t=O.current)||void 0===t?void 0:t.value)){var h,v;if(""===(null===(h=Y.current)||void 0===h?void 0:h.value))return p().fire({position:"center",icon:"error",title:"Firstname is required!",showConfirmButton:!1,timer:1500});if(""===(null===(v=V.current)||void 0===v?void 0:v.value))return p().fire({position:"center",icon:"error",title:"Lastname is required!",showConfirmButton:!1,timer:1500})}else{var x;if(""===(null===(x=P.current)||void 0===x?void 0:x.value))return p().fire({position:"center",icon:"error",title:"Full Name is required!",showConfirmButton:!1,timer:1500})}if(""===(null===(n=$.current)||void 0===n?void 0:n.value))return p().fire({position:"center",icon:"error",title:"Sub Account is required!",showConfirmButton:!1,timer:1500});var m={entry_supplier_id:null===(i=G.current)||void 0===i?void 0:i.value,option:null===(o=O.current)||void 0===o?void 0:o.value,firstname:null===(u=Y.current)||void 0===u?void 0:u.value.toLocaleUpperCase(),middlename:null===(a=H.current)||void 0===a?void 0:a.value.toLocaleUpperCase(),lastname:null===(c=V.current)||void 0===c?void 0:c.value.toLocaleUpperCase(),company:null===(l=P.current)||void 0===l?void 0:l.value.toLocaleUpperCase(),sub_account:ee.current,mobile:null===(s=ne.current)||void 0===s?void 0:s.value,tin_no:null===(d=ie.current)||void 0===d?void 0:d.value,address:null===(f=oe.current)||void 0===f?void 0:f.value};e.preventDefault(),"edit"===_?(0,w.s)({isUpdate:!0,cb:function(e){fe((0,r.Z)((0,r.Z)({},m),{},{userCodeConfirmation:e}))}}):(0,w.L)({isConfirm:function(){se(m)}})}function je(){(0,y.D)(100).then((function(){ce(),Se(),L("individual"),O.current&&(O.current.value="individual"),Y.current&&(Y.current.value=""),H.current&&(H.current.value=""),V.current&&(V.current.value=""),P.current&&(P.current.value=""),Q.current&&(Q.current.value=""),J.current&&(J.current.value=""),ne.current&&(ne.current.value=""),re.current&&(re.current.value=""),ie.current&&(ie.current.value=""),oe.current&&(oe.current.value=""),te.current&&(te.current.value=""),ee.current=""}))}return(0,a.useEffect)((function(){ke.current({search:"",entry:"Supplier"})}),[]),(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(g.Z,{title:"ID Entry - Client"}),be&&(0,j.jsx)(Z.g,{}),(0,j.jsxs)("div",{style:{display:"flex",columnGap:"10px",marginBottom:"10px"},children:[(0,j.jsx)(C.oi,{containerClassName:"custom-input",containerStyle:{width:"500px"},label:{title:"Search: ",style:{fontSize:"12px",fontWeight:"bold",width:"70px"}},input:{className:"search-input-up-on-key-down",type:"search",onKeyDown:function(e){"Enter"!==e.key&&"NumpadEnter"!==e.key||(e.preventDefault(),we({search:e.currentTarget.value,entry:"Supplier"}))},style:{width:"100%"}},icon:(0,j.jsx)(S.Z,{sx:{fontSize:"18px"}}),onIconClick:function(e){e.preventDefault(),U.current&&we({search:U.current.value,entry:"Supplier"})},inputRef:U}),(0,j.jsxs)("div",{className:"button-action-desktop",style:{display:"flex",alignItems:"center",columnGap:"5px",marginLeft:"10px"},children:[""===_&&(0,j.jsx)(c.Z,{variant:"contained",startIcon:(0,j.jsx)(h.Z,{}),id:"entry-header-save-button",sx:{height:"22px",fontSize:"11px"},onClick:function(){ce(),M("add")},children:"New"}),(0,j.jsx)(f.Z,{id:"save-entry-header",color:"primary",variant:"contained",type:"submit",sx:{height:"22px",fontSize:"11px"},onClick:Ne,startIcon:(0,j.jsx)(m.Z,{}),disabled:""===_,loading:de||he,children:"Save"}),(0,j.jsx)(f.Z,{disabled:""===_,id:"save-entry-header",variant:"contained",sx:{height:"22px",fontSize:"11px",backgroundColor:b.Z[500],"&:hover":{backgroundColor:b.Z[600]}},loading:me,startIcon:(0,j.jsx)(v.Z,{}),onClick:function(){(0,w.s)({isUpdate:!1,cb:function(e){var t;xe({id:null===(t=G.current)||void 0===t?void 0:t.value,userCodeConfirmation:e})}})},children:"Delete"}),""!==_&&(0,j.jsx)(c.Z,{sx:{height:"22px",fontSize:"11px"},variant:"contained",startIcon:(0,j.jsx)(x.Z,{}),color:"error",onClick:function(){p().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, cancel it!"}).then((function(e){e.isConfirmed&&(je(),M(""),q.current.setSelectedRow(null),q.current.resetCheckBox())}))},children:"Cancel"})]})]}),(0,j.jsxs)("div",{className:"container-fields-custom-client",style:{display:"flex",columnGap:"20px"},children:[(0,j.jsxs)("div",{style:{display:"flex",flexDirection:"column",rowGap:"5px",flex:1},children:[ae?(0,j.jsx)(f.Z,{loading:ae}):(0,j.jsx)(C.oi,{containerClassName:"custom-input",label:{title:"Client ID : ",style:{fontSize:"12px",fontWeight:"bold",width:"130px"}},input:{disabled:""===_,readOnly:!0,type:"text",style:{width:"100%",height:"22px"},onKeyDown:function(e){var t;"NumpadEnter"!==e.code&&"Enter"!==e.code||(null===(t=O.current)||void 0===t||t.focus())}},inputRef:G}),(0,j.jsx)(C.lq,{containerClassName:"custom-input custom-label",label:{title:"Option : ",style:{fontSize:"12px",fontWeight:"bold",width:"130px"}},selectRef:O,select:{disabled:""===_,value:F,style:{width:"100%",height:"22px"},onKeyDown:function(e){var t,n;"NumpadEnter"!==e.code&&"Enter"!==e.code||(e.preventDefault(),"Individual"===F?null===(t=Y.current)||void 0===t||t.focus():null===(n=P.current)||void 0===n||n.focus())},onChange:function(e){L(e.currentTarget.value)}},datasource:[{key:"Individual",value:"individual"},{key:"Company",value:"company"}],values:"value",display:"key"}),"individual"===F&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(C.oi,{containerClassName:"custom-input",label:{title:"First Name : ",style:{fontSize:"12px",fontWeight:"bold",width:"130px"}},input:{disabled:""===_,type:"text",style:{width:"100%",height:"22px",textTransform:"uppercase"},onKeyDown:function(e){var t;"NumpadEnter"!==e.code&&"Enter"!==e.code||(null===(t=H.current)||void 0===t||t.focus())}},inputRef:Y}),(0,j.jsx)(C.oi,{containerClassName:"custom-input",label:{title:"Middle Name : ",style:{fontSize:"12px",fontWeight:"bold",width:"130px"}},input:{disabled:""===_,type:"text",style:{width:"100%",height:"22px",textTransform:"uppercase"},onKeyDown:function(e){var t;"NumpadEnter"!==e.code&&"Enter"!==e.code||(null===(t=V.current)||void 0===t||t.focus())}},inputRef:H}),(0,j.jsx)(C.oi,{containerClassName:"custom-input",label:{title:"Last Name : ",style:{fontSize:"12px",fontWeight:"bold",width:"130px"}},input:{disabled:""===_,type:"text",style:{width:"100%",height:"22px",textTransform:"uppercase"},onKeyDown:function(e){var t;"NumpadEnter"!==e.code&&"Enter"!==e.code||(null===(t=J.current)||void 0===t||t.focus())}},inputRef:V})]}),"company"===F&&(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(C.Fz,{containerClassName:"custom-input",label:{title:"Full Name : ",style:{fontSize:"12px",fontWeight:"bold",width:"130px"}},textarea:{disabled:""===_,style:{width:"100%"},onKeyDown:function(e){var t;(e.stopPropagation(),"NumpadEnter"===e.code&&!e.shiftKey||"Enter"===e.code&&!e.shiftKey)&&(null===(t=Q.current)||void 0===t||t.focus())}},_inputRef:P})})]}),(0,j.jsxs)("div",{className:"clear-margin custom-padding",style:{display:"flex",flexDirection:"column",rowGap:"5px",marginBottom:"40px",flex:1},children:[Ce?(0,j.jsx)(f.Z,{loading:Ce}):(0,j.jsx)(N.Autocomplete,{containerClassName:"custom-input",disableInput:""===_,ref:X,containerStyle:{width:"100%"},label:{title:"Sub Account : ",style:{fontSize:"12px",fontWeight:"bold",width:"110px"}},DisplayMember:"ShortName",DataSource:[],inputRef:$,input:{style:{width:"100%"}},onChange:function(e,t){$.current&&($.current.value=e.ShortName),console.log(e),ee.current=e.Sub_Acct},onKeydown:function(e){var t;"Enter"!==e.key&&"NumpadEnter"!==e.key||(e.preventDefault(),null===(t=ne.current)||void 0===t||t.focus())}}),(0,j.jsx)(C.oi,{containerClassName:"custom-input",label:{title:"Contact No. : ",style:{fontSize:"12px",fontWeight:"bold",width:"110px"}},input:{disabled:""===_,type:"text",style:{width:"100%",height:"22px"},onKeyDown:function(e){var t;"NumpadEnter"!==e.code&&"Enter"!==e.code||(null===(t=re.current)||void 0===t||t.focus())}},inputRef:ne}),(0,j.jsx)(C.oi,{containerClassName:"custom-input",label:{title:"TIN : ",style:{fontSize:"12px",fontWeight:"bold",width:"110px"}},input:{disabled:""===_,type:"text",style:{width:"100%",height:"22px"},onKeyDown:function(e){var t;"NumpadEnter"!==e.code&&"Enter"!==e.code||(null===(t=oe.current)||void 0===t||t.focus())}},inputRef:ie})]}),(0,j.jsx)("div",{className:"clear-margin ",style:{display:"flex",flexDirection:"column",rowGap:"10px",marginBottom:"40px",flex:1},children:(0,j.jsx)(C.Fz,{containerClassName:"custom-input",containerStyle:{alignItems:"flex-start"},label:{title:"Address : ",style:{fontSize:"12px",fontWeight:"bold",width:"110px"}},textarea:{disabled:""===_,style:{width:"100%",height:"80px"},onKeyDown:function(e){e.stopPropagation(),"NumpadEnter"===e.code&&!e.shiftKey||"Enter"===e.code&&e.shiftKey}},_inputRef:oe})})]}),(0,j.jsx)("div",{className:"add-padding",style:{display:"flex",flexDirection:"column",width:"100%",height:"100%",flex:1,marginTop:"10px"},children:(0,j.jsx)(k.BW,{height:"340px",ref:q,rows:[],columns:D,getSelectedItem:function(e,t,n){if(!e)return q.current.setSelectedRow(null),q.current.resetCheckBox(),je(),void M("");M("edit"),L(e[7].toLowerCase()),(0,y.D)(100).then((function(){var t;(G.current&&(G.current.value=e[0]),$.current&&($.current.value=e[1]),P.current&&(P.current.value=e[2]),Y.current&&(Y.current.value=e[3]),V.current&&(V.current.value=e[4]),H.current&&(H.current.value=e[5]),ne.current&&(ne.current.value=e[6]),O.current)&&(O.current.value=null===(t=e[7])||void 0===t?void 0:t.toString().toLowerCase());ie.current&&(ie.current.value=e[8]),oe.current&&(oe.current.value=e[9]),ee.current=e[11]}))},onKeyDown:function(e,t,n){"Delete"!==n.code&&"Backspace"!==n.code||(0,y.D)(100).then((function(){(0,w.s)({isUpdate:!1,cb:function(t){xe({id:e[0],userCodeConfirmation:t})}})}))}})}),(0,j.jsxs)("div",{className:"button-action-mobile",style:{display:"flex",alignItems:"center",columnGap:"5px"},children:[""===_&&(0,j.jsx)(c.Z,{variant:"contained",startIcon:(0,j.jsx)(h.Z,{}),id:"entry-header-save-button",sx:{height:"22px",fontSize:"11px"},onClick:function(){ce(),M("add")},children:"New"}),(0,j.jsx)(f.Z,{id:"save-entry-header",color:"primary",variant:"contained",type:"submit",sx:{height:"22px",fontSize:"11px"},onClick:Ne,startIcon:(0,j.jsx)(m.Z,{}),disabled:""===_,loading:de||he,children:"Save"}),(0,j.jsx)(f.Z,{disabled:""===_,id:"save-entry-header",variant:"contained",sx:{height:"22px",fontSize:"11px",backgroundColor:b.Z[500],"&:hover":{backgroundColor:b.Z[600]}},loading:me,startIcon:(0,j.jsx)(v.Z,{}),onClick:function(){(0,w.s)({isUpdate:!1,cb:function(e){var t;xe({id:null===(t=G.current)||void 0===t?void 0:t.value,userCodeConfirmation:e})}})},children:"Delete"}),""!==_&&(0,j.jsx)(c.Z,{sx:{height:"22px",fontSize:"11px"},variant:"contained",startIcon:(0,j.jsx)(x.Z,{}),color:"error",onClick:function(){p().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, cancel it!"}).then((function(e){e.isConfirmed&&(je(),M(""),q.current.setSelectedRow(null),q.current.resetCheckBox())}))},children:"Cancel"})]})]})}},27247:function(e,t,n){var r=n(64836);t.Z=void 0;var i=r(n(45649)),o=n(80184),u=(0,i.default)((0,o.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");t.Z=u},4378:function(e,t){t.Z={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162"}}}]);
//# sourceMappingURL=9596.4a7f24e4.chunk.js.map