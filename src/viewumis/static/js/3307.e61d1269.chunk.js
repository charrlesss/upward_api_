"use strict";(self.webpackChunkupward=self.webpackChunkupward||[]).push([[3307],{3307:function(e,t,n){n.r(t),n.d(t,{default:function(){return D},formatNumber:function(){return _},getSum:function(){return F}});var r=n(93433),i=n(74165),o=n(15861),c=n(29439),a=n(36151),l=n(15703),u=n(79018),s=n(21830),d=n.n(s),f=n(42419),p=n(53329),h=n(29823),x=n(5403),y=n(72791),m=n(76633),b=n(16386),v=n(50039),g=n(91933),k=n(3380),w=n(65413),C=n(64230),R=n(80184);function D(){var e,t,n,r,s,D=(0,y.useContext)(k.V),A=D.user,j=D.myAxios,N=(0,y.useState)(""),Z=(0,c.Z)(N,2),B=Z[0],I=Z[1],M=(0,y.useRef)(null),z=(0,y.useRef)(null),T=(0,y.useRef)(null),E=(0,y.useRef)(null),L=(0,y.useRef)(null),W=(0,g.useMutation)({mutationKey:"save",mutationFn:function(t){return(e=e||(0,o.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.post("/task/accounting/return-checks/save",t,{headers:{Authorization:"Bearer ".concat(null===A||void 0===A?void 0:A.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){if(e.data.success)return re(),d().fire({position:"center",icon:"success",title:e.data.message,showConfirmButton:!1,timer:1500});d().fire({position:"center",icon:"error",title:e.data.message,showConfirmButton:!1,timer:1500})}}),O=W.isLoading,G=W.mutate,q=(0,g.useMutation)({mutationKey:"save",mutationFn:function(e){return(t=t||(0,o.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.post("/task/accounting/return-checks/update",t,{headers:{Authorization:"Bearer ".concat(null===A||void 0===A?void 0:A.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){if(e.data.success)return re(),d().fire({position:"center",icon:"success",title:e.data.message,showConfirmButton:!1,timer:1500});d().fire({position:"center",icon:"error",title:e.data.message,showConfirmButton:!1,timer:1500})}}),K=q.isLoading,V=q.mutate,H=(0,g.useQuery)({queryKey:"generate-id",queryFn:function(){return(n=n||(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.get("/task/accounting/return-checks/generate-id",{headers:{Authorization:"Bearer ".concat(null===A||void 0===A?void 0:A.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},refetchOnWindowFocus:!1,onSuccess:function(e){(0,u.D)(100).then((function(){T.current&&(T.current.value=e.data.newRefCode)}))}}),U=H.isLoading,Y=H.refetch,P=(0,g.useMutation)({mutationKey:"selected-search",mutationFn:function(e){return(r=r||(0,o.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.post("/task/accounting/return-checks/return-checks-search-selected",t,{headers:{Authorization:"Bearer ".concat(null===A||void 0===A?void 0:A.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t=JSON.parse(e.data.data1),n=JSON.parse(e.data.data2);if(console.log(t),t.length>0){T.current&&(T.current.value=t[0].RC_No),E.current&&(E.current.value=(0,b.Z)(new Date(t[0].RC_Date),"yyyy-MM-dd")),L.current&&(L.current.value=t[0].Explanation);for(var r=[],i=0;i<t.length;i++)r.push([t[i].ORNum,(0,b.Z)(new Date(t[i].Date_Collect),"MM/dd/yyy"),t[i].SlipCode,(0,b.Z)(new Date(t[i].Date_Deposit),"MM/dd/yyy"),t[i].Check_No,(0,b.Z)(new Date(t[i].Check_Date),"MM/dd/yyy"),_(parseFloat(t[i].Amount.toString().replace(/,/g,""))),t[i].Bank,t[i].BankAccnt,t[i].Reason,(0,b.Z)(new Date(t[i].Date_Return),"MM/dd/yyy")]);if(M.current.refSelectedCheckToBeReturned.current.table.current.setData(r),M.current.tssAmountRef.current&&(M.current.tssAmountRef.current.value="Total Amount:   ".concat(_(F(t,"Amount")))),n.length>0){for(var o=[],c=0;c<n.length;c++)o.push([n[c].GL_Acct,n[c].cGL_Acct,_(parseFloat(n[c].Debit.toString().replace(/,/g,""))),_(parseFloat(n[c].Credit.toString().replace(/,/g,""))),n[c].ID_No,n[c].cID_No,n[c].Sub_Acct,n[c].cSub_Acct,n[c].Check_No,n[c].Check_Bank,(0,b.Z)(new Date(n[c].Check_Date),"MM/dd/yyy"),(0,b.Z)(new Date(n[c].Check_Return),"MM/dd/yyy"),n[c].Check_Reason,n[c].Check_No,(0,b.Z)(new Date(n[c].Check_Deposit),"MM/dd/yyy"),(0,b.Z)(new Date(n[c].Check_Collect),"MM/dd/yyy")]);M.current.refAccountingEntry.current.table.current.setData(o),M.current.refAccountingEntry.current.debitRef.current&&(M.current.refAccountingEntry.current.debitRef.current.value=_(F(n,"Debit"))),M.current.refAccountingEntry.current.creditRef.current&&(M.current.refAccountingEntry.current.creditRef.current.value=_(F(n,"Credit")))}I("update")}}}),J=P.isLoading,X=P.mutate,Q=(0,v._j)({link:"/task/accounting/return-checks/return-checks-search",column:[{key:"RefDate",label:"Ref. Date",width:120},{key:"RefNo",label:"Ref. No.",width:100},{key:"Explanation",label:"Explanation",width:200}],getSelectedItem:function(e,t,n,r){return(s=s||(0,o.Z)((0,i.Z)().mark((function e(t,n,r,o){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&((0,u.D)(100).then((function(){X({RefNo:t[1]})})),te());case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}),$=Q.UpwardTableModalSearch,ee=Q.openModal,te=Q.closeModal,ne=function(){var e,t;if(""===(null===(e=L.current)||void 0===e?void 0:e.value))return alert("Pease provide an explanation"),void(null===(t=L.current)||void 0===t||t.focus());var n=M.current.refSelectedCheckToBeReturned.current.table.current.getData(),r=M.current.refAccountingEntry.current.table.current.getData();n.length<=0?alert("Please provide return entry"):"add"===B?(0,C.L)({isConfirm:function(){var e,t,i;G({dgvSelChecks:n,dgvAccountingEntry:r,refNo:null===(e=T.current)||void 0===e?void 0:e.value,date:null===(t=E.current)||void 0===t?void 0:t.value,explanation:null===(i=L.current)||void 0===i?void 0:i.value,mode:B})}}):(0,C.s)({isUpdate:!0,cb:function(e){var t,i,o;V({dgvSelChecks:n,dgvAccountingEntry:r,refNo:null===(t=T.current)||void 0===t?void 0:t.value,date:null===(i=E.current)||void 0===i?void 0:i.value,explanation:null===(o=L.current)||void 0===o?void 0:o.value,mode:B,userCodeConfirmation:e})}})};function re(){I(""),Y(),E.current&&(E.current.value=(0,b.Z)(new Date,"yyyy-MM-dd")),L.current&&(L.current.value="Returned Checks"),M.current.refSelectCheck.current.table.current.resetCheckBox(),M.current.refSelectCheck.current.table.current.setSelectedRow(null),M.current.refSelectCheck.current.table.current.setData([]),M.current.refSelectCheck.current.refetchList(),M.current.refSelectedCheckToBeReturned.current.table.current.resetCheckBox(),M.current.refSelectedCheckToBeReturned.current.table.current.setSelectedRow(null),M.current.refSelectedCheckToBeReturned.current.table.current.setData([]),M.current.refAccountingEntry.current.table.current.resetCheckBox(),M.current.refAccountingEntry.current.table.current.setSelectedRow(null),M.current.refAccountingEntry.current.table.current.setData([]),M.current.refAccountingEntry.current.debitRef.current&&(M.current.refAccountingEntry.current.debitRef.current.value="0.00"),M.current.refAccountingEntry.current.creditRef.current&&(M.current.refAccountingEntry.current.creditRef.current.value="0.00"),M.current.tssAmountRef.current.value="Total Amount:   0.00"}return(0,R.jsxs)(R.Fragment,{children:[(O||U||J||K)&&(0,R.jsx)(w.g,{}),(0,R.jsxs)("div",{className:"main",style:{display:"flex",flexDirection:"column",width:"100%",height:"auto",flex:1,padding:"5px",background:"#F1F1F1"},children:[(0,R.jsxs)("div",{style:{display:"flex",alignItems:"center",columnGap:"5px",marginBottom:"10px"},children:[(0,R.jsx)(l.oi,{containerClassName:"search-input",label:{title:"Search: ",style:{fontSize:"12px",fontWeight:"bold",width:"50px"}},input:{className:"search-input-up-on-key-down",type:"search",onKeyDown:function(e){"Enter"!==e.key&&"NumpadEnter"!==e.key||(e.preventDefault(),ee(e.currentTarget.value))},style:{width:"500px"}},icon:(0,R.jsx)(x.Z,{sx:{fontSize:"18px"}}),onIconClick:function(e){e.preventDefault(),z.current&&ee(z.current.value)},inputRef:z}),(0,R.jsxs)("div",{className:"return-checks-desktop-buttons",style:{display:"flex",alignItems:"center",columnGap:"10px"},children:[""===B&&(0,R.jsx)(a.Z,{sx:{height:"22px",fontSize:"11px"},variant:"contained",startIcon:(0,R.jsx)(f.Z,{sx:{width:15,height:15}}),id:"entry-header-save-button",onClick:function(){I("add")},children:"New"}),""!==B&&(0,R.jsx)(a.Z,{sx:{height:"22px",fontSize:"11px"},id:"save-entry-header",color:"primary",variant:"contained",type:"submit",startIcon:(0,R.jsx)(p.Z,{sx:{width:15,height:15}}),onClick:ne,children:"Save"}),(0,R.jsx)(a.Z,{sx:{height:"22px",fontSize:"11px"},disabled:""===B,variant:"contained",startIcon:(0,R.jsx)(h.Z,{sx:{width:15,height:15}}),color:"error",onClick:function(){d().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, cancel it!"}).then((function(e){e.isConfirmed&&(0,u.D)(100).then((function(){re()}))}))},children:"Cancel"})]})]}),(0,R.jsxs)("div",{className:"layer-one",style:{display:"flex",width:"100%",padding:"10px 40px",flexDirection:"column",rowGap:"10px",border:"1px solid #64748b",marginBottom:"10px"},children:[(0,R.jsxs)("div",{className:"content",style:{display:"flex",columnGap:"200px"},children:[(0,R.jsx)(l.oi,{containerClassName:"custom-input",label:{title:"Ref No.: ",style:{fontSize:"12px",fontWeight:"bold",width:"100px"}},input:{disabled:""===B,className:"ref_no",type:"text",style:{width:"200px"},defaultValue:""},inputRef:T,icon:(0,R.jsx)(m.Z,{sx:{fontSize:"18px"}}),onIconClick:function(e){e.preventDefault()}}),(0,R.jsx)(l.oi,{containerClassName:"custom-input",label:{title:"Date : ",style:{fontSize:"12px",fontWeight:"bold",width:"70px"}},input:{disabled:""===B,defaultValue:(0,b.Z)(new Date,"yyyy-MM-dd"),className:"date",type:"date",style:{width:"200px"}},inputRef:E})]}),(0,R.jsx)(l.oi,{containerClassName:"custom-input",label:{title:"Explanation : ",style:{fontSize:"12px",fontWeight:"bold",width:"100px"}},input:{disabled:""===B,className:"exp",type:"text",style:{width:"670px"},defaultValue:"Returned Checks"},inputRef:L})]}),(0,R.jsx)(S,{ref:M,mode:B}),(0,R.jsxs)("div",{className:"return-checks-mobile-buttons",style:{display:"none",alignItems:"center",columnGap:"10px"},children:[""===B&&(0,R.jsx)(a.Z,{sx:{height:"22px",fontSize:"11px"},variant:"contained",startIcon:(0,R.jsx)(f.Z,{sx:{width:15,height:15}}),id:"entry-header-save-button",onClick:function(){I("add")},children:"New"}),""!==B&&(0,R.jsx)(a.Z,{sx:{height:"22px",fontSize:"11px"},id:"save-entry-header",color:"primary",variant:"contained",type:"submit",startIcon:(0,R.jsx)(p.Z,{sx:{width:15,height:15}}),onClick:ne,children:"Save"}),(0,R.jsx)(a.Z,{sx:{height:"22px",fontSize:"11px"},disabled:""===B,variant:"contained",startIcon:(0,R.jsx)(h.Z,{sx:{width:15,height:15}}),color:"error",onClick:function(){d().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, cancel it!"}).then((function(e){e.isConfirmed&&(0,u.D)(100).then((function(){re()}))}))},children:"Cancel"})]})]}),(0,R.jsx)($,{})]})}var S=(0,y.forwardRef)((function(e,t){var n=e.mode,r=(0,y.useState)(0),i=(0,c.Z)(r,2),o=i[0],a=i[1],l=(0,y.useState)({}),u=(0,c.Z)(l,2),s=u[0],d=u[1],f=(0,y.useRef)([]),p=(0,y.useRef)(null),h=(0,y.useRef)(null),x=(0,y.useRef)(null),m=(0,y.useRef)(null),b=(0,y.useRef)(null),v=[{id:0,label:"Select Check",content:(0,R.jsx)(Z,{ref:p,refSelectedCheckToBeReturned:h,refAccountingEntry:x,tssAmountRef:m,chkFndRef:b,mode:n})},{id:1,label:"Selected Check To Be Returned",content:(0,R.jsx)(B,{ref:h,refAccountingEntry:x})},{id:2,label:"Accounting Entry",content:(0,R.jsx)(I,{ref:x})}];return(0,y.useEffect)((function(){var e;d(null===(e=f.current[0])||void 0===e?void 0:e.getBoundingClientRect())}),[]),(0,y.useImperativeHandle)(t,(function(){return{test:function(){p.current.test(),h.current.test(),x.current.test()},refSelectCheck:p,refSelectedCheckToBeReturned:h,refAccountingEntry:x,tssAmountRef:m}})),(0,R.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column"},children:[(0,R.jsx)("div",{style:{display:"flex"},children:v.map((function(e,t){return(0,R.jsx)("button",{className:"return-checks-buttons",ref:function(e){return f.current[t]=e},onClick:function(t){a(e.id),d(t.currentTarget.getBoundingClientRect())},style:{width:"auto",fontSize:"11px",padding:"10px",cursor:"pointer",backgroundColor:o===e.id?"white":"transparent",color:o===e.id?"#0074cc":"#000",border:"none",borderRight:o===e.id?0===e.id?"none":"1px solid #0074cc":0===e.id?"none":"1px solid #64748b",borderLeft:o===e.id?2===e.id?"none":"1px solid #0074cc":2===e.id?"none":"1px solid #64748b",borderTop:o===e.id?"1px solid #0074cc":"1px solid #64748b",textTransform:"uppercase",fontWeight:"bold"},children:e.label},e.id)}))}),(0,R.jsxs)("div",{style:{padding:"7px",flex:1,display:"flex",position:"relative",flexDirection:"column"},children:[(0,R.jsx)("div",{style:{position:"absolute",top:"-2px",left:0,width:"".concat((null===s||void 0===s?void 0:s.left)-5||0,"px"),height:"1px",background:"#64748b"}}),(0,R.jsx)("div",{style:{position:"absolute",top:"-2px",right:0,left:"".concat((null===s||void 0===s?void 0:s.right)-5||0,"px"),height:"1px",background:"#64748b"}}),v.map((function(e){return(0,R.jsx)("div",{style:{display:o===e.id?"flex":"none",flex:1,flexDirection:"column"},children:e.content},e.id)})),(0,R.jsxs)("div",{className:"total-container",style:{display:"flex",justifyContent:"space-between",paddingTop:"5px"},children:[(0,R.jsx)("input",{ref:b,readOnly:!0,defaultValue:"0.00",style:{textAlign:"left",fontWeight:"bold",width:"200px",border:"none"}}),(0,R.jsx)("input",{ref:m,readOnly:!0,defaultValue:"0.00",style:{textAlign:"right",fontWeight:"bold",width:"200px",border:"none"}})]})]})]})})),A=[{key:"Deposit_Slip",label:"Deposit_Slip",width:100},{key:"Depo_Date",label:"Depo_Date",width:130},{key:"Check_No",label:"Check_No",width:200},{key:"Check_Date",label:"Check_Date",width:200},{key:"Amount",label:"Amount",width:200},{key:"Bank",label:"Bank",width:200},{key:"Official_Receipt",label:"Official_Receipt",width:100},{key:"Date_OR",label:"Date_OR",width:100},{key:"BankAccount",label:"BankAccount",width:0,hide:!0},{key:"_formatted_date",label:"_formatted_date",width:0,hide:!0}],j=[{key:"ORNo",label:"OR No.",width:80},{key:"ORDate",label:"OR Date",width:130},{key:"DepoSlip",label:"Depo Slip",width:130},{key:"DepoDate",label:"Depo Date",width:130},{key:"CheckNo",label:"Check No.",width:130},{key:"CheckDate",label:"Check Date",width:130},{key:"Amount",label:"Amount",width:130},{key:"Bank",label:"Bank/Branch",width:100},{key:"BankAccount",label:"Bank Account",width:200},{key:"Reason",label:"Reason",width:200},{key:"ReturnDate",label:"Return Date",width:200}],N=[{key:"Code",label:"Code",width:80},{key:"AccountName",label:"Account Name",width:130},{key:"Debit",label:"Debit",width:130},{key:"Credit",label:"Credit",width:130},{key:"IDNo",label:"ID No.",width:130},{key:"Identity",label:"Identity",width:130},{key:"SubAcct",label:"Sub Acct",width:130},{key:"SubAcctName",label:"Sub Acct Name",width:130},{key:"CheckNo",label:"Check No",width:100},{key:"Bank",label:"Bank/Branch",width:200},{key:"CheckDate",label:"Check Date",width:100},{key:"CheckReturn",label:"Check Return",width:100},{key:"CheckReason",label:"Check Reason",width:200},{key:"PK",label:"PK",width:100},{key:"DateDeposit",label:"Date Deposit",width:100},{key:"DateCollection",label:"Date Collection",width:100}],Z=(0,y.forwardRef)((function(e,t){var n,c=e.refAccountingEntry,a=e.refSelectedCheckToBeReturned,s=e.tssAmountRef,d=e.chkFndRef,f=e.mode,p=(0,y.useContext)(k.V),h=p.user,m=p.myAxios,C=(0,y.useRef)(null),D=(0,y.useRef)(null),S=(0,y.useRef)(null),j=(0,g.useMutation)({mutationKey:"load-details",mutationFn:function(e){return(n=n||(0,o.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.post("/task/accounting/get-check-list",t,{headers:{Authorization:"Bearer ".concat(null===h||void 0===h?void 0:h.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){D.current.setDataFormated(e.data.checkList),d.current&&(d.current.value="Check Found: Top ".concat(e.data.checkList.length))}}),N=j.isLoading,Z=j.mutate,B=(0,y.useRef)(Z);return(0,y.useEffect)((function(){var e;B.current({search:null===(e=C.current)||void 0===e?void 0:e.value})}),[]),(0,y.useImperativeHandle)(t,(function(){return{test:function(){alert("qweqweqweqwe1")},refetchList:function(){B.current({search:""})},table:D}})),(0,R.jsxs)("div",{style:{display:"flex",flex:1,flexDirection:"column",rowGap:"10px"},children:[N&&(0,R.jsx)(w.g,{}),(0,R.jsx)(l.oi,{label:{title:"Search: ",style:{fontSize:"12px",fontWeight:"bold",width:"50px"}},input:{className:"search-input-up-on-key-down",type:"search",onKeyDown:function(e){"Enter"!==e.key&&"NumpadEnter"!==e.key||(e.preventDefault(),B.current({search:e.currentTarget.value}))},onChange:function(e){""===e.target.value&&B.current({search:""})},style:{width:"100%"}},icon:(0,R.jsx)(x.Z,{sx:{fontSize:"18px"}}),onIconClick:function(e){var t;e.preventDefault(),C.current&&B.current({search:null===(t=C.current)||void 0===t?void 0:t.value})},inputRef:C}),(0,R.jsx)("div",{style:{display:"flex",flex:1},children:(0,R.jsx)(v.BW,{disbaleTable:""===f,ref:D,columns:A,rows:[],containerStyle:{height:"auto",minHeight:"200px",flex:1},getSelectedItem:function(e){e?(0,u.D)(100).then((function(){if(a.current.getSelectedCheck().includes(e[2]))return alert("Check ".concat(e[2]," already exist!")),D.current.setSelectedRow(null),void D.current.resetCheckBox();S.current.showModal(),S.current.setRefs({checkNo:e[2],amount:e[4]}),S.current.mutateEntries({ORNo:e[6],Account_No:e[8]}),S.current.selectItem(e)})):(0,u.D)(100).then((function(){}))},onKeyDown:function(e,t,n){if(("Delete"===n.code||"Backspace"===n.code)&&window.confirm("Are you sure you want to delete?"))return}})}),(0,R.jsx)(M,{ref:S,handleConfirm:function(e,t,n,i,o,l){var u,d,f;if(n.lblTextRef!==n.refAmount)return alert("Debit must equal to Credit!");var p=i,h=2===(null===(u=l.refReturnReason.current)||void 0===u?void 0:u.selectedIndex)?"AC":null===(d=l.refReturnReason.current)||void 0===d?void 0:d.value,x=null===(f=l.refDateReturned.current)||void 0===f?void 0:f.value,y=[];y[0]=n.refAccountID,y[1]=n.refAccountName,y[2]=n.refAmount,y[3]=n.refAcronym,y[4]=n.refSubAccount,y[5]=n.refAccountId;var m=[].concat((0,r.Z)(a.current.table.current.getData()),[[t[6],t[7],t[0],t[1],t[2],t[3],t[4],t[5],t[8],h,(0,b.Z)(new Date(x),"MM/dd/yyyy")]]);a.current.table.current.setData(m),s.current&&(s.current.value="Total Amount:   ".concat(_(m.reduce((function(e,t){return e+=parseFloat(t[6].replace(/,/g,""))}),0))));for(var v=[],g=0;g<p.length;g++)v=[].concat((0,r.Z)(c.current.table.current.getData()),[[p[g][0],p[g][1],p[g][2],"0.00",p[g][3],p[g][4],p[g][5],p[g][6],t[2],t[5],t[3],(0,b.Z)(new Date(x),"MM/dd/yyyy"),h,t[2],t[1],t[7]]]);v=[].concat((0,r.Z)(v),[[y[0],y[1],"0.00",y[2],y[5],"",y[3],y[4],t[2],t[5],t[3],(0,b.Z)(new Date(x),"MM/dd/yyyy"),h,t[2],t[1],t[7]]]),c.current.table.current.setData(v);var k=v.map((function(e){return{debit:e[2],credit:e[3]}}));c.current.debitRef.current&&(c.current.debitRef.current.value=_(F(k,"debit"))),c.current.creditRef.current&&(c.current.creditRef.current.value=_(F(k,"credit")))},handleCancel:function(e){D.current.setSelectedRow(null),D.current.resetCheckBox()}})]})})),B=(0,y.forwardRef)((function(e,t){var n=e.refAccountingEntry,r=(0,y.useRef)(null);return(0,y.useImperativeHandle)(t,(function(){return{test:function(){alert("qweqweqweqwe2")},table:r,getSelectedCheck:function(){var e=r.current.getData();return e.length>0?e.map((function(e){return e[4]})):[]}}})),(0,R.jsx)("div",{style:{display:"flex",flex:1},children:(0,R.jsx)(v.BW,{ref:r,columns:j,rows:[],containerStyle:{height:"auto",flex:1,minHeight:"200px"},getSelectedItem:function(e){(0,u.D)(100).then((function(){}))},onKeyDown:function(e,t,i){if(("Delete"===i.code||"Backspace"===i.code)&&window.confirm("Are you sure you want to delete?")){var o=r.current.getData();o.splice(t,1);for(var c=n.current.table.current.getData(),a=[],l=0;l<c.length;l++)e[4]===c[l][8]&&a.push(l);return r.current.setData(o),void n.current.table.current.setData(function(e,t){var n=new Set(t);return e.filter((function(e,t){return!n.has(t)}))}(c,a))}}})})})),I=(0,y.forwardRef)((function(e,t){var n=(0,y.useRef)(null),r=(0,y.useRef)(null),i=(0,y.useRef)(null);return(0,y.useImperativeHandle)(t,(function(){return{test:function(){alert("qweqweqweqwe3")},table:n,debitRef:r,creditRef:i}})),(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)("div",{style:{display:"flex",flex:1},children:(0,R.jsx)(v.BW,{ref:n,columns:N,rows:[],containerStyle:{height:"auto",flex:1,minHeight:"200px"},getSelectedItem:function(e){(0,u.D)(100).then((function(){}))},onKeyDown:function(e,t,n){if(("Delete"===n.code||"Backspace"===n.code)&&window.confirm("Are you sure you want to delete?"))return}})}),(0,R.jsxs)("div",{className:"total-container",style:{display:"flex",width:"100%",justifyContent:"flex-end",padding:"5px 0",columnGap:"5px"},children:[(0,R.jsx)("span",{style:{fontSize:"13px",fontWeight:"bold",marginRight:"10px"},children:"Total:"}),(0,R.jsx)("input",{ref:r,readOnly:!0,defaultValue:"0.00",style:{textAlign:"right",fontWeight:"bold",width:"140px",border:"none"}}),(0,R.jsx)("input",{ref:i,readOnly:!0,defaultValue:"0.00",style:{textAlign:"right",fontWeight:"bold",width:"140px",border:"none"}})]})]})})),M=(0,y.forwardRef)((function(e,t){var n,r=e.handleConfirm,a=e.handleCancel,s=(e.hasSelectedRow,(0,y.useRef)(null)),d=(0,y.useRef)(!1),f=(0,y.useRef)({x:0,y:0}),p=(0,y.useContext)(k.V),x=p.user,m=p.myAxios,C=(0,y.useRef)(null),D=(0,y.useState)(!1),S=(0,c.Z)(D,2),A=S[0],j=S[1],N=(0,y.useState)(!1),Z=(0,c.Z)(N,2),B=Z[0],I=Z[1],M=(0,y.useState)([]),T=(0,c.Z)(M,2),E=T[0],L=T[1],W=(0,y.useState)(!1),O=(0,c.Z)(W,2),G=O[0],q=O[1],K=(0,y.useState)(""),V=(0,c.Z)(K,2),H=V[0],U=V[1],Y=(0,y.useRef)(null),P=(0,y.useRef)(null),J=(0,y.useRef)(null),X=(0,y.useRef)(null),Q=(0,y.useRef)(null),$=(0,y.useRef)(null),ee=(0,y.useRef)(""),te=(0,y.useRef)(""),ne=(0,y.useRef)(null),re=(0,g.useMutation)({mutationKey:"load-details",mutationFn:function(e){return(n=n||(0,o.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.post("/task/accounting/return-check/load-entries",t,{headers:{Authorization:"Bearer ".concat(null===x||void 0===x?void 0:x.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t=e.data.dt1,n=e.data.dt2;if(t.length>0&&(Q.current&&(Q.current.value=t[0].IDNo),J.current&&(J.current.value=t[0].Short),$.current&&($.current.value="Head Office"),te.current="HO",ee.current=t[0].Account_ID),n.length>0){var r=n.map((function(e){return{CRCode:e.CRCode,CRTitle:e.CRTitle,Credit:e.Credit,CRLoanID:e.CRLoanID,CRLoanName:e.CRLoanName,SAcctCode:e.SubAcct,SAcctName:e.ShortName}}));C.current.setDataFormated(r)}ne.current&&(ne.current.value=_(F(n,"Debit")))}}),ie=re.isLoading,oe=re.mutate,ce=function(){I(!0),setTimeout((function(){j(!1),I(!1),a()}),100)};(0,y.useImperativeHandle)(t,(function(){return{showModal:function(){j(!0)},clsoeModal:function(){j(!1)},getRefs:function(){return{}},selectItem:function(e){L(e)},setRefs:function(e){U(e.checkNo),(0,u.D)(100).then((function(){X.current&&(X.current.value=e.amount),Y.current&&(Y.current.value="DAIF")}))},mutateEntries:function(e){oe(e)},closeDelay:ce}}));var ae=[{key:"CRCode",label:"Code",width:90},{key:"CRTitle",label:"Account Name",width:200},{key:"Credit",label:"Amount",width:110},{key:"CRLoanID",label:"ID No",width:200},{key:"CRLoanName",label:"Identity",width:200},{key:"SAcctCode",label:"Sub Account",width:100},{key:"SAcctName",label:"Sub Account Name",width:200}],le=function(e){d.current&&s.current&&(s.current.style.left="".concat(e.clientX-f.current.x,"px"),s.current.style.top="".concat(e.clientY-f.current.y,"px"))},ue=function e(){d.current=!1,document.removeEventListener("mousemove",le),document.removeEventListener("mouseup",e)};return A?(0,R.jsxs)(R.Fragment,{children:[ie&&(0,R.jsx)(w.g,{}),(0,R.jsx)("div",{className:"modal-accounting-entry-shadow",style:{position:"fixed",top:0,bottom:0,left:0,right:0,background:"transparent",zIndex:"88"},onClick:function(){q(!0),setTimeout((function(){q(!1)}),250)}}),(0,R.jsxs)("div",{className:"modal-accounting-entry",ref:s,style:{height:G?"402px":"400px",width:G?"60.3%":"60%",border:"1px solid #64748b",position:"absolute",left:"50%",top:"35%",transform:"translate(-50%, -75%)",display:"flex",flexDirection:"column",zIndex:B?-100:100,opacity:B?0:1,transition:"all 150ms",boxShadow:"3px 6px 32px -7px rgba(0,0,0,0.75)"},children:[(0,R.jsxs)("div",{style:{height:"22px",background:"white",display:"flex",justifyContent:"space-between",padding:"5px",position:"relative",alignItems:"center",cursor:"grab"},onMouseDown:function(e){s.current&&(d.current=!0,f.current={x:e.clientX-s.current.offsetLeft,y:e.clientY-s.current.offsetTop},document.addEventListener("mousemove",le),document.addEventListener("mouseup",ue))},children:[(0,R.jsxs)("span",{className:"modal-title",style:{fontSize:"13px",fontWeight:"bold"},children:["Return Detail and Accounting Entry (Check No.: ",H,")"]}),(0,R.jsx)("button",{className:"btn-check-exit-modal",style:{padding:"0 5px",borderRadius:"0px",background:"white",color:"black",height:"22px",position:"absolute",top:0,right:0},onClick:function(){ce()},children:(0,R.jsx)(h.Z,{sx:{fontSize:"22px"}})})]}),(0,R.jsxs)("div",{style:{flex:1,background:"#F1F1F1",padding:"5px",display:"flex",flexDirection:"column"},children:[(0,R.jsxs)("div",{style:{display:"flex",columnGap:"5px",height:"auto"},className:"modal-content",children:[(0,R.jsxs)("div",{style:{height:"auto",display:"flex",flexDirection:"column",padding:"10px",rowGap:"20px"},children:[(0,R.jsxs)("div",{style:{height:"auto",padding:"10px",display:"flex",width:"100%",border:"1px solid #64748b",position:"relative"},children:[(0,R.jsx)("span",{style:{position:"absolute",top:"-15px",left:"20px",background:"#F1F1F1",padding:"0 5px",fontSize:"14px",fontWeight:"bold"},children:"Return Detail"}),(0,R.jsxs)("div",{className:"modal-layer-one",style:{display:"flex",columnGap:"50px"},children:[(0,R.jsx)(l.lq,{containerStyle:{width:"100%"},label:{title:"Return Reason : ",style:{fontSize:"12px",fontWeight:"bold",width:"100px"}},selectRef:Y,select:{style:{width:"calc(85% - 100px)",height:"22px"},defaultValue:""},datasource:[{key:"DAIF",value:"DAIF"},{key:"DAUD",value:"DAUD"},{key:"Account Closed",value:"Account Closed"},{key:"SPO",value:"SPO"},{key:"Account under Garnishment",value:"Account under Garnishment"},{key:"Unauthorized Signature",value:"Unauthorized Signature"}],values:"value",display:"key"}),(0,R.jsx)(l.oi,{containerClassName:"custom-input",label:{title:"Return Date : ",style:{fontSize:"12px",fontWeight:"bold",width:"100px"}},input:{defaultValue:(0,b.Z)(new Date,"yyyy-MM-dd"),className:"date",type:"date",style:{width:"200px"}},inputRef:P})]})]}),(0,R.jsxs)("div",{style:{height:"auto",padding:"10px",display:"flex",width:"100%",border:"1px solid #64748b",position:"relative"},children:[(0,R.jsx)("span",{style:{position:"absolute",top:"-15px",left:"20px",background:"#F1F1F1",padding:"0 5px",fontSize:"14px",fontWeight:"bold"},children:"Credit Entry"}),(0,R.jsxs)("div",{className:"modal-layer-two",style:{display:"flex",flexDirection:"column",rowGap:"10px",height:"auto"},children:[(0,R.jsxs)("div",{className:"content",style:{display:"flex",columnGap:"50px"},children:[(0,R.jsx)(l.oi,{containerClassName:"custom-input",label:{title:"Account Name : ",style:{fontSize:"12px",fontWeight:"bold",width:"100px"}},input:{readOnly:!0,className:"ref_no",type:"text",style:{width:"200px"}},inputRef:J}),(0,R.jsx)(l.oi,{containerClassName:"custom-input",label:{title:"Account ID : ",style:{fontSize:"12px",fontWeight:"bold",width:"100px"}},input:{readOnly:!0,className:"account-id",type:"text",style:{width:"200px"}},inputRef:Q})]}),(0,R.jsxs)("div",{className:"content",style:{display:"flex",columnGap:"50px"},children:[(0,R.jsx)(l.oi,{containerClassName:"custom-input",label:{title:"Amount : ",style:{fontSize:"12px",fontWeight:"bold",width:"100px"}},input:{readOnly:!0,className:"ref_no",type:"text",style:{width:"200px"}},inputRef:X}),(0,R.jsx)(l.oi,{containerClassName:"custom-input",label:{title:"Sub Account : ",style:{fontSize:"12px",fontWeight:"bold",width:"100px"}},input:{readOnly:!0,className:"sub-account",type:"text",style:{width:"200px"}},inputRef:$})]})]})]})]}),(0,R.jsxs)("div",{className:"modal-buttons",style:{width:"100px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",rowGap:"20px",height:"auto"},children:[(0,R.jsxs)(z,{style:{width:"80px",height:"50px",border:"1px solid #153002",fontSize:"12px",padding:0,margin:0,boxSizing:"border-box",background:"#8fbc8b",color:"black",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",fontFamily:"arial",cursor:"pointer",position:"relative"},onClick:function(e){var t,n,i,o,c,a,l,u=C.current.getData(),s={refReturnReason:null===(t=Y.current)||void 0===t?void 0:t.value,refDateReturned:null===(n=P.current)||void 0===n?void 0:n.value,refAccountName:null===(i=J.current)||void 0===i?void 0:i.value,refAmount:null===(o=X.current)||void 0===o?void 0:o.value,refAccountId:null===(c=Q.current)||void 0===c?void 0:c.value,refSubAccount:null===(a=$.current)||void 0===a?void 0:a.value,refAccountID:ee.current,refAcronym:te.current,lblTextRef:null===(l=ne.current)||void 0===l?void 0:l.value};r(e,E,s,u,ae,{refReturnReason:Y,refDateReturned:P,refAccountName:J,refAmount:X,refAccountId:Q,refSubAccount:$,refAccountID:ee,refAcronym:te,lblTextRef:ne}),ce()},children:[(0,R.jsx)("span",{style:{position:"absolute",top:"2px"},children:(0,R.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22px",height:"22px",viewBox:"0 0 24 24",fill:"none",children:[(0,R.jsx)("path",{d:"M8.5 12.5L10.5 14.5L15.5 9.5",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,R.jsx)("path",{d:"M7 3.33782C8.47087 2.48697 10.1786 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 10.1786 2.48697 8.47087 3.33782 7",stroke:"#a5e15b",strokeWidth:"1.5",strokeLinecap:"round"})]})}),(0,R.jsx)("span",{className:"button-tittle",style:{position:"absolute",top:"25px"},children:"Accept"})]}),(0,R.jsxs)(z,{style:{width:"80px",height:"50px",border:"1px solid #153002",fontSize:"12px",padding:0,margin:0,boxSizing:"border-box",background:"#8fbc8b",color:"black",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",fontFamily:"arial",cursor:"pointer",position:"relative"},onClick:function(e){a(e),ce()},children:[(0,R.jsx)("span",{style:{position:"absolute",top:"2px"},children:(0,R.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"red",width:"21px",height:"21px",viewBox:"0 0 36 36",version:"1.1",preserveAspectRatio:"xMidYMid meet",children:[(0,R.jsx)("title",{children:"ban-line"}),(0,R.jsx)("path",{className:"clr-i-outline clr-i-outline-path-1",d:"M18,2A16,16,0,1,0,34,18,16,16,0,0,0,18,2ZM4,18A13.93,13.93,0,0,1,7.43,8.85L27.15,28.57A14,14,0,0,1,4,18Zm24.57,9.15L8.85,7.43A14,14,0,0,1,28.57,27.15Z"}),(0,R.jsx)("rect",{x:"0",y:"0",width:"36",height:"36",fillOpacity:"0"})]})}),(0,R.jsx)("span",{className:"button-tittle",style:{position:"absolute",top:"25px"},children:"Cancel"})]})]})]}),(0,R.jsx)("div",{style:{flex:1},children:(0,R.jsx)(v.BW,{ref:C,columns:ae,rows:[],containerStyle:{height:"200px",flex:1},getSelectedItem:function(e){(0,u.D)(100).then((function(){}))},onKeyDown:function(e,t,n){if(("Delete"===n.code||"Backspace"===n.code)&&window.confirm("Are you sure you want to delete?"))return}})}),(0,R.jsx)("input",{style:{width:"100%",textAlign:"right",fontWeight:"bold",paddingRight:"10px"},ref:ne,defaultValue:"0.00",readOnly:!0})]}),(0,R.jsx)("style",{children:"\n              .btn-check-exit-modal:hover{\n                background:red !important;\n                color:white !important;\n              }\n            "})]})]}):null})),z=function(e){var t=e.onClick,n=e.style,r=e.children,i="btn-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),o=(0,y.useState)(!1),a=(0,c.Z)(o,2),l=a[0],u=a[1];return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)("button",{className:"".concat(i," ").concat(l?"blinking":""," blinking-button-access-class"),onClick:function(e){u(!0),setTimeout((function(){return u(!1)}),200),t(e)},style:n,children:r}),(0,R.jsx)("style",{children:"\n        .".concat(i," {\n          padding: 10px 20px;\n          font-size: 16px;\n          color: white;\n          border: ").concat(l?"2px solid #153002 !important":"none ",";\n          border-radius: 5px;\n          cursor: pointer;\n          transition: background-color 0.3s ease;\n\n        }\n\n        .").concat(i,":hover {\n          background-color:rgb(145, 177, 142) !important;\n        }\n\n        /* Blink animation */\n        @keyframes blink {\n          0% {\n            opacity: 1;\n          }\n          50% {\n            opacity: 0.5;\n          }\n          100% {\n            opacity: 1;\n          }\n        }\n\n        .blinking {\n          animation: blink 0.5s linear infinite;\n        }\n                ")})]})};function _(e){return(e||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function F(e,t){return e.length<=0?0:e.reduce((function(e,n){return e+=parseFloat(n[t].toString().replace(/,/g,""))}),0)}},76633:function(e,t,n){var r=n(64836);t.Z=void 0;var i=r(n(45649)),o=n(80184),c=(0,i.default)((0,o.jsx)("path",{d:"M12 6v3l4-4-4-4v3c-4.42 0-8 3.58-8 8 0 1.57.46 3.03 1.24 4.26L6.7 14.8c-.45-.83-.7-1.79-.7-2.8 0-3.31 2.69-6 6-6zm6.76 1.74L17.3 9.2c.44.84.7 1.79.7 2.8 0 3.31-2.69 6-6 6v-3l-4 4 4 4v-3c4.42 0 8-3.58 8-8 0-1.57-.46-3.03-1.24-4.26z"}),"Autorenew");t.Z=c}}]);
//# sourceMappingURL=3307.e61d1269.chunk.js.map