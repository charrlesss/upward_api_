"use strict";(self.webpackChunkupward=self.webpackChunkupward||[]).push([[4173,1004],{60451:function(e,t,n){n.r(t),n.d(t,{default:function(){return z}});var r=n(1413),o=n(74165),i=n(15861),a=n(29439),c=n(72791),u=n(36151),s=n(3380),l=n(91933),d=n(21830),f=n.n(d),h=n(39709),p=n(42419),x=n(27247),v=n(29823),y=n(53329),m=n(79018),b=n(4378),w=n(64230),g=n(70272),k=n(15703),C=n(5403),Z=n(50039),S=n(65413),j=n(58418),D=n(80184),B=[{key:"entry_others_id",label:"ID",width:130},{key:"ShortName",label:"ShortName",width:200},{key:"description",label:"Description",width:400},{key:"remarks",label:"Remarks",width:400},{key:"createdAt",label:"createdAt",width:200,hide:!0},{key:"sub_account",label:"sub_account",width:200,hide:!0}];function z(){var e,t,n,d,z,A,N=(0,c.useContext)(s.V),R=N.myAxios,I=N.user,K=(0,c.useState)(""),F=(0,a.Z)(K,2),E=F[0],_=F[1],O=(0,c.useRef)(null),T=(0,c.useRef)(null),L=(0,c.useRef)(null),M=(0,c.useRef)(null),W=(0,c.useRef)(null),G=(0,c.useRef)(null),q=(0,c.useRef)(null),H=(0,c.useRef)(""),U=(0,l.useQuery)({queryKey:"fixed_assets-generate-id",queryFn:function(){return(e=e||(0,i.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.post("/reference/id-entry-generate-id",{sign:"O",type:"entry others"},{headers:{Authorization:"Bearer ".concat(null===I||void 0===I?void 0:I.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},refetchOnWindowFocus:!1,onSuccess:function(e){(0,m.D)(100).then((function(){L.current&&(L.current.value=e.data.generateID)}))}}),Y=U.isLoading,V=U.refetch,P=(0,l.useMutation)({mutationKey:"add-entry-others",mutationFn:function(e){return(t=t||(0,i.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.post("/reference/id-entry-others",t,{headers:{Authorization:"Bearer ".concat(null===I||void 0===I?void 0:I.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:de}),Q=P.mutate,J=P.isLoading,X=(0,l.useMutation)({mutationKey:"id-entry-others-update",mutationFn:function(e){return(n=n||(0,i.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.post("/reference/id-entry-others-update",t,{headers:{Authorization:"Bearer ".concat(null===I||void 0===I?void 0:I.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:de}),$=X.mutate,ee=X.isLoading,te=(0,l.useMutation)({mutationKey:"delete-client",mutationFn:function(e){return(d=d||(0,i.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.post("/reference/entry-delete?entry=Others",t,{headers:{Authorization:"Bearer ".concat(null===I||void 0===I?void 0:I.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:de}),ne=te.mutate,re=te.isLoading,oe=(0,l.useMutation)({mutationKey:"search",mutationFn:function(e){return(z=z||(0,i.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.post("/reference/search-entry",t,{headers:{Authorization:"Bearer ".concat(null===I||void 0===I?void 0:I.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){O.current.setDataFormated(null===e||void 0===e?void 0:e.data.entry)}}),ie=oe.isLoading,ae=oe.mutate,ce=(0,l.useQuery)({queryKey:"sub-accounts",queryFn:function(){return(A=A||(0,i.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.get("/reference/sub-account",{headers:{Authorization:"Bearer ".concat(null===I||void 0===I?void 0:I.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){(0,m.D)(100).then((function(){var t;G.current&&G.current.setDataSource(null===(t=e.data)||void 0===t?void 0:t.subAccount),(0,m.D)(100).then((function(){var t,n=null===(t=e.data)||void 0===t?void 0:t.subAccount.filter((function(e){return"HO"===e.Acronym}));q.current&&(q.current.value=n[0].ShortName),H.current=n[0].Sub_Acct}))}))}}),ue=ce.isLoading,se=ce.refetch,le=(0,c.useRef)(ae);function de(e){if(e.data.success)return he(),_(""),O.current.setSelectedRow(null),O.current.resetCheckBox(),le.current({search:"",entry:"Others"}),f().fire({position:"center",icon:"success",title:e.data.message,showConfirmButton:!1,timer:1500});f().fire({position:"center",icon:"error",title:e.data.message,showConfirmButton:!1,timer:1500})}function fe(e){var t,n,o,i;if(""===(null===(t=M.current)||void 0===t?void 0:t.value))return f().fire({position:"center",icon:"error",title:"Full Name is required!",showConfirmButton:!1,timer:1500});var a={entry_others_id:null===(n=L.current)||void 0===n?void 0:n.value,description:null===(o=M.current)||void 0===o?void 0:o.value,remarks:null===(i=W.current)||void 0===i?void 0:i.value,sub_account:H.current};e.preventDefault(),"edit"===E?(0,w.s)({isUpdate:!0,cb:function(e){$((0,r.Z)((0,r.Z)({},a),{},{userCodeConfirmation:e}))}}):(0,w.L)({isConfirm:function(){Q(a)}})}function he(){(0,m.D)(100).then((function(){V(),se(),M.current&&(M.current.value=""),W.current&&(W.current.value=""),q.current&&(q.current.value="Head Office")}))}return(0,c.useEffect)((function(){le.current({search:"",entry:"Others"})}),[]),(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(g.Z,{title:"ID Entry - Fixed Assets"}),ie&&(0,D.jsx)(S.g,{}),(0,D.jsxs)("div",{style:{display:"flex",columnGap:"10px",marginBottom:"10px"},children:[(0,D.jsx)(k.oi,{containerClassName:"custom-input",containerStyle:{width:"500px"},label:{title:"Search: ",style:{fontSize:"12px",fontWeight:"bold",width:"70px"}},input:{className:"search-input-up-on-key-down",type:"search",onKeyDown:function(e){"Enter"!==e.key&&"NumpadEnter"!==e.key||(e.preventDefault(),ae({search:e.currentTarget.value,entry:"Others"}))},style:{width:"100%"}},icon:(0,D.jsx)(C.Z,{sx:{fontSize:"18px"}}),onIconClick:function(e){e.preventDefault(),T.current&&ae({search:T.current.value,entry:"Others"})},inputRef:T}),(0,D.jsxs)("div",{className:"button-action-desktop",style:{display:"flex",alignItems:"center",columnGap:"5px",marginLeft:"10px"},children:[""===E&&(0,D.jsx)(u.Z,{variant:"contained",startIcon:(0,D.jsx)(p.Z,{}),id:"entry-header-save-button",sx:{height:"22px",fontSize:"11px"},onClick:function(){V(),_("add")},children:"New"}),(0,D.jsx)(h.Z,{id:"save-entry-header",color:"primary",variant:"contained",type:"submit",sx:{height:"22px",fontSize:"11px"},onClick:fe,startIcon:(0,D.jsx)(y.Z,{}),disabled:""===E,loading:J||ee,children:"Save"}),(0,D.jsx)(h.Z,{disabled:""===E,id:"save-entry-header",variant:"contained",sx:{height:"22px",fontSize:"11px",backgroundColor:b.Z[500],"&:hover":{backgroundColor:b.Z[600]}},loading:re,startIcon:(0,D.jsx)(x.Z,{}),onClick:function(){(0,w.s)({isUpdate:!1,cb:function(e){var t;ne({id:null===(t=L.current)||void 0===t?void 0:t.value,userCodeConfirmation:e})}})},children:"Delete"}),""!==E&&(0,D.jsx)(u.Z,{sx:{height:"22px",fontSize:"11px"},variant:"contained",startIcon:(0,D.jsx)(v.Z,{}),color:"error",onClick:function(){f().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, cancel it!"}).then((function(e){e.isConfirmed&&(he(),_(""),O.current.setSelectedRow(null),O.current.resetCheckBox())}))},children:"Cancel"})]})]}),(0,D.jsxs)("div",{className:"container-fields-custom-client",style:{display:"flex",columnGap:"20px"},children:[(0,D.jsxs)("div",{style:{display:"flex",flexDirection:"column",rowGap:"5px",flex:1},children:[Y?(0,D.jsx)(h.Z,{loading:Y}):(0,D.jsx)(k.oi,{containerClassName:"custom-input",label:{title:"Fixed Assets ID: ",style:{fontSize:"12px",fontWeight:"bold",width:"130px"}},containerStyle:{width:"50%"},input:{disabled:""===E,readOnly:!0,type:"text",style:{width:"calc(100% - 130px)",height:"22px"},onKeyDown:function(e){var t;"NumpadEnter"!==e.code&&"Enter"!==e.code||(null===(t=M.current)||void 0===t||t.focus())}},inputRef:L}),(0,D.jsx)(k.Fz,{containerClassName:"custom-input",label:{title:"Description : ",style:{fontSize:"12px",fontWeight:"bold",width:"130px"}},containerStyle:{alignItems:"flex-start",width:"100%"},textarea:{disabled:""===E,style:{width:"calc(100% - 130px)",height:"50px"},onKeyDown:function(e){var t;(e.stopPropagation(),"NumpadEnter"===e.code&&!e.shiftKey||"Enter"===e.code&&!e.shiftKey)&&(null===(t=q.current)||void 0===t||t.focus())}},_inputRef:M})]}),(0,D.jsxs)("div",{className:"clear-margin custom-padding",style:{display:"flex",flexDirection:"column",rowGap:"5px",marginBottom:"40px",flex:1},children:[ue?(0,D.jsx)(h.Z,{loading:ue}):(0,D.jsx)(j.Autocomplete,{containerClassName:"custom-input",disableInput:""===E,ref:G,containerStyle:{width:"50%"},label:{title:"Sub Account : ",style:{fontSize:"12px",fontWeight:"bold",width:"165px"}},DisplayMember:"ShortName",DataSource:[],inputRef:q,input:{style:{width:"100%"}},onChange:function(e,t){q.current&&(q.current.value=e.ShortName),console.log(e),H.current=e.Sub_Acct},onKeydown:function(e){var t;"Enter"!==e.key&&"NumpadEnter"!==e.key||(e.preventDefault(),null===(t=W.current)||void 0===t||t.focus())}}),(0,D.jsx)(k.Fz,{containerClassName:"custom-input",label:{title:"Remarks : ",style:{fontSize:"12px",fontWeight:"bold",width:"130px"}},containerStyle:{alignItems:"flex-start"},textarea:{disabled:""===E,style:{width:"100%",height:"50px"},onKeyDown:function(e){e.stopPropagation(),"NumpadEnter"===e.code&&!e.shiftKey||"Enter"===e.code&&e.shiftKey}},_inputRef:W})]})]}),(0,D.jsx)("div",{className:"add-padding",style:{display:"flex",flexDirection:"column",width:"100%",height:"100%",flex:1},children:(0,D.jsx)(Z.BW,{height:"340px",ref:O,rows:[],columns:B,getSelectedItem:function(e,t,n){if(!e)return O.current.setSelectedRow(null),O.current.resetCheckBox(),he(),void _("");_("edit"),(0,m.D)(100).then((function(){L.current&&(L.current.value=e[0]),q.current&&(q.current.value=e[1]),M.current&&(M.current.value=e[2]),W.current&&(W.current.value=e[3])}))},onKeyDown:function(e,t,n){"Delete"!==n.code&&"Backspace"!==n.code||(0,m.D)(100).then((function(){(0,w.s)({isUpdate:!1,cb:function(t){ne({id:e[0],userCodeConfirmation:t})}})}))}})}),(0,D.jsxs)("div",{className:"button-action-mobile",style:{display:"flex",alignItems:"center",columnGap:"5px"},children:[""===E&&(0,D.jsx)(u.Z,{variant:"contained",startIcon:(0,D.jsx)(p.Z,{}),id:"entry-header-save-button",sx:{height:"22px",fontSize:"11px"},onClick:function(){V(),_("add")},children:"New"}),(0,D.jsx)(h.Z,{id:"save-entry-header",color:"primary",variant:"contained",type:"submit",sx:{height:"22px",fontSize:"11px"},onClick:fe,startIcon:(0,D.jsx)(y.Z,{}),disabled:""===E,loading:J||ee,children:"Save"}),(0,D.jsx)(h.Z,{disabled:""===E,id:"save-entry-header",variant:"contained",sx:{height:"22px",fontSize:"11px",backgroundColor:b.Z[500],"&:hover":{backgroundColor:b.Z[600]}},loading:re,startIcon:(0,D.jsx)(x.Z,{}),onClick:function(){(0,w.s)({isUpdate:!1,cb:function(e){var t;ne({id:null===(t=L.current)||void 0===t?void 0:t.value,userCodeConfirmation:e})}})},children:"Delete"}),""!==E&&(0,D.jsx)(u.Z,{sx:{height:"22px",fontSize:"11px"},variant:"contained",startIcon:(0,D.jsx)(v.Z,{}),color:"error",onClick:function(){f().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, cancel it!"}).then((function(e){e.isConfirmed&&(he(),_(""),O.current.setSelectedRow(null),O.current.resetCheckBox())}))},children:"Cancel"})]})]})}},27247:function(e,t,n){var r=n(64836);t.Z=void 0;var o=r(n(45649)),i=n(80184),a=(0,o.default)((0,i.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");t.Z=a},4378:function(e,t){t.Z={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162"}}}]);
//# sourceMappingURL=4173.767abae8.chunk.js.map