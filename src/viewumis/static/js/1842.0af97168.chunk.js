"use strict";(self.webpackChunkupward=self.webpackChunkupward||[]).push([[1842],{70272:function(e,n,t){var a=t(54270),o=t(80184);n.Z=function(e){var n=e.title,t=void 0===n?"":n;return(0,o.jsxs)(a.q,{children:[(0,o.jsx)("title",{children:"".concat("UMIS"," - ").concat(t)}),(0,o.jsx)("link",{rel:"icon",type:"image/png",href:"".concat("/","/logo.png")})]})}},37712:function(e,n,t){t.r(n),t.d(n,{default:function(){return R}});var a=t(1413),o=t(37762),r=t(74165),c=t(15861),i=t(29439),l=t(72791),s=t(36151),u=t(13400),d=t(21830),p=t.n(d),h=t(15703),f=t(15020),x=t(1724),m=t(48910),y=t(637),v=t(5519),N=t(29823),S=t(91933),b=t(3380),C=t(65413),I=t(16395),g=t(70272),k=t(59332),w=t(80184),D=[{key:"PNo",label:"PN No.",width:150},{key:"IDNo",label:"I.D. No.",width:300},{key:"Date",label:"Date Received",width:170},{key:"Name",label:"Name",width:300},{key:"CheckDate",label:"Check Date",width:120},{key:"Check_No",label:"Check No",width:120},{key:"Check_Amnt",label:"Check Amount",width:120},{key:"Bank",label:"Bank",width:300},{key:"PDC_Status",label:"PDC Status",width:120}];function R(){var e,n,t,a,d,N=(0,l.useRef)(null),S=(0,l.useRef)(null),b=(0,l.useRef)(null),C=(0,l.useRef)(null),R=(0,l.useRef)(null),P=(0,l.useRef)(null),E=(0,l.useState)({check:"0",unCheck:"0",found:"0"}),O=(0,i.Z)(E,2),T=O[0],_=O[1],Z=(0,l.useState)(""),L=(0,i.Z)(Z,2),z=L[0],j=L[1],M=(0,y.Z)().executeQueryToClient,F=(0,m.Jg)({customWidth:function(e){return e?"751px":"750px"},column:[{key:"Date",label:"Date",width:115},{key:"PolicyNo",label:"Policy No.",width:160},{key:"Account",label:"Account",width:120},{key:"Name",label:"Name",width:300}],query:function(e){return"\n      SELECT \n          DATE_FORMAT(Policy.DateIssued, '%M. %d, %Y') AS Date,\n          Policy.PolicyNo,\n          Policy.Account,\n          ID_Entry.Shortname AS Name\n      FROM\n          Policy\n              LEFT JOIN\n          FPolicy ON Policy.PolicyNo = FPolicy.PolicyNo\n              LEFT JOIN\n          VPolicy ON Policy.PolicyNo = VPolicy.PolicyNo\n              LEFT JOIN\n          MPolicy ON Policy.PolicyNo = MPolicy.PolicyNo\n              LEFT JOIN\n          BPolicy ON Policy.PolicyNo = BPolicy.PolicyNo\n              LEFT JOIN\n          MSPRPolicy ON Policy.PolicyNo = MSPRPolicy.PolicyNo\n              LEFT JOIN\n          PAPolicy ON Policy.PolicyNo = PAPolicy.PolicyNo\n              LEFT JOIN\n          CGLPolicy ON Policy.PolicyNo = CGLPolicy.PolicyNo\n              LEFT JOIN\n          (SELECT \n              id_entry.IDNo, id_entry.ShortName AS Shortname, IDType\n          FROM\n              (SELECT \n              IF(aa.option = 'individual', CONCAT(IF(aa.lastname IS NOT NULL\n                      AND TRIM(aa.lastname) <> '', CONCAT(aa.lastname, ', '), ''), aa.firstname, ' ', aa.suffix, '.'), aa.company) AS ShortName,\n                  aa.entry_client_id AS IDNo,\n                  aa.sub_account,\n                  'Client' AS IDType\n          FROM\n              entry_client aa UNION ALL SELECT \n              CONCAT(IF(aa.lastname IS NOT NULL\n                      AND TRIM(aa.lastname) <> '', CONCAT(aa.lastname, ', '), ''), aa.firstname) AS ShortName,\n                  aa.entry_agent_id AS IDNo,\n                  aa.sub_account,\n                  'Agent' AS IDType\n          FROM\n              entry_agent aa UNION ALL SELECT \n              CONCAT(IF(aa.lastname IS NOT NULL\n                      AND TRIM(aa.lastname) <> '', CONCAT(aa.lastname, ', '), ''), aa.firstname) AS ShortName,\n                  aa.entry_employee_id AS IDNo,\n                  aa.sub_account,\n                  'Employee' AS IDType\n          FROM\n              entry_employee aa UNION ALL SELECT \n              aa.fullname AS ShortName,\n                  aa.entry_fixed_assets_id AS IDNo,\n                  sub_account,\n                  'Fixed Assets' AS IDType\n          FROM\n              entry_fixed_assets aa UNION ALL SELECT \n              aa.description AS ShortName,\n                  aa.entry_others_id AS IDNo,\n                  aa.sub_account,\n                  'Others' AS IDType\n          FROM\n              entry_others aa UNION ALL SELECT \n              IF(aa.option = 'individual', CONCAT(IF(aa.lastname IS NOT NULL\n                      AND TRIM(aa.lastname) <> '', CONCAT(aa.lastname, ', '), ''), aa.firstname), aa.company) AS ShortName,\n                  aa.entry_supplier_id AS IDNo,\n                  aa.sub_account,\n                  'Supplier' AS IDType\n          FROM\n              entry_supplier aa) id_entry) AS ID_Entry ON Policy.IDNo = ID_Entry.IDNo\n      WHERE\n          Policy.PolicyNo IN (SELECT \n                  PNo\n              FROM\n                  pdc)\n              AND ((VPolicy.ChassisNo LIKE '%".concat(e,"%')\n              OR (VPolicy.MotorNo LIKE '%").concat(e,"%')\n              OR (VPolicy.PlateNo LIKE '%").concat(e,"%')\n              OR (ID_Entry.Shortname LIKE '%").concat(e,"%')\n              OR (Policy.PolicyNo LIKE '%").concat(e,"%')\n              OR (Policy.Account LIKE '%").concat(e,"%'))\n      ORDER BY Policy.DateIssued DESC\n      LIMIT 500\n        ")},getSelectedItem:function(n,t,a,o){return(e=e||(0,c.Z)((0,r.Z)().mark((function e(n,t,a,o){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:P.current&&(P.current.value=n[1]),Q(n[1]),U();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}),B=F.UpwardTableModalSearch,W=F.openModal,U=F.closeModal,V=(0,m.Jg)({customWidth:function(e){return e?"601px":"600px"},column:[{key:"IDNo",label:"I.D. No.",width:115},{key:"Name",label:"Name",width:300},{key:"IDType",label:"Type",width:120}],query:function(e){return"\n      select * from (  SELECT  \n        IDNo AS IDNo, \n        Shortname AS Name, \n        IDType \n      FROM (SELECT \n       id_entry.IDNo,\n       id_entry.ShortName as Shortname,\n       IDType\n   FROM\n       (SELECT \n           IF(aa.option = 'individual', \n           CONCAT(IF(aa.lastname IS NOT NULL AND TRIM(aa.lastname) <> '', CONCAT(aa.lastname, ', '), ''), aa.firstname ,' ',aa.suffix,'.'), aa.company) AS ShortName,\n               aa.entry_client_id AS IDNo,\n               aa.sub_account,\n               'Client' as IDType\n       FROM\n           entry_client aa \n           UNION ALL SELECT \n           CONCAT(IF(aa.lastname IS NOT NULL\n                   AND TRIM(aa.lastname) <> '', CONCAT(aa.lastname, ', '), ''), aa.firstname) AS ShortName,\n               aa.entry_agent_id AS IDNo,\n               aa.sub_account,\n               'Agent' as IDType\n       FROM\n           entry_agent aa \n           UNION ALL SELECT \n           CONCAT(IF(aa.lastname IS NOT NULL\n                   AND TRIM(aa.lastname) <> '', CONCAT(aa.lastname, ', '), ''), aa.firstname) AS ShortName,\n               aa.entry_employee_id AS IDNo,\n               aa.sub_account,\n               'Employee' as IDType\n       FROM\n           entry_employee aa \n           UNION ALL SELECT \n           aa.fullname AS ShortName,\n               aa.entry_fixed_assets_id AS IDNo,\n               sub_account,\n                'Fixed Assets' as IDType\n       FROM\n           entry_fixed_assets aa \n           UNION ALL SELECT \n           aa.description AS ShortName,\n               aa.entry_others_id AS IDNo,\n               aa.sub_account,\n               'Others' as IDType\n       FROM\n           entry_others aa \n           UNION ALL SELECT \n           IF(aa.option = 'individual', CONCAT(IF(aa.lastname IS NOT NULL\n                   AND TRIM(aa.lastname) <> '', CONCAT(aa.lastname, ', '), ''), aa.firstname), aa.company) AS ShortName,\n               aa.entry_supplier_id AS IDNo,\n               aa.sub_account,\n                'Supplier' as IDType\n       FROM\n           entry_supplier aa) id_entry) as ID_Entry\n      WHERE \n      ID_Entry.IDNo in (select PNo from pdc)) IDs\n      where \n      IDs.IDNo LIKE '%".concat(e,"%' OR  \n      IDs.Name LIKE '%").concat(e,"%'\n      ORDER BY IDs.Name\n      limit 500;")},getSelectedItem:function(e,t,a,o){return(n=n||(0,c.Z)((0,r.Z)().mark((function e(n,t,a,o){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:P.current&&(P.current.value=n[0]),Q(n[0]),H();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}),q=V.UpwardTableModalSearch,K=V.openModal,H=V.closeModal,G=(0,m.Jg)({customWidth:function(e){return e?"501px":"500px"},column:[{key:"Code",label:"Code",width:115},{key:"Bank_Name",label:"Bank Name",width:322}],query:function(e){return"\n      SELECT \n        Bank_Code AS Code,\n        Bank AS Bank_Name\n       FROM Bank \n       WHERE \n       Inactive = 0 AND \n       Bank_Code in (SELECT Bank FROM pdc group by Bank) and\n       (\n       Bank_Code LIKE '%".concat(e,"%' OR  \n       Bank LIKE '%").concat(e,"%') \n       ORDER BY Bank\n       limit 500 \n       ")},getSelectedItem:function(e,n,a,o){return(t=t||(0,c.Z)((0,r.Z)().mark((function e(n,t,a,o){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:P.current&&(P.current.value=n[0]),Q(n[0]),X();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}),Y=G.UpwardTableModalSearch,J=G.openModal,X=G.closeModal;function Q(e){if(b.current&&R.current){var n="",t=b.current.selectedIndex;if(t>=0){var o=["Received","Stored","Stored"][t];n="(PDC_Status = '".concat(o,2!==t?"')":"' OR (PDC_Status = 'Pulled Out' AND (PDC_Remarks = 'Fully Paid' OR PDC_Remarks = 'Replaced')))")}!function(e,n,t){(a=a||(0,c.Z)((0,r.Z)().mark((function e(n,t,a){var o,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o="\n      SELECT \n        PNo, \n        IDNo, \n        DATE_FORMAT(Date,'%m/%d/%Y') AS Date, \n        Name, \n        date_format(Check_Date,'%m/%d/%Y') AS CheckDate, \n        Check_No, \n        Check_Amnt, \n        Bank, \n        PDC_Status\n      FROM pdc  \n      WHERE ".concat(n," = '").concat(t,"'  AND ").concat(a," ORDER BY Check_Date"),console.log(o),e.next=4,M(o);case 4:(c=e.sent).data&&c.data.data.length>0&&(N.current.resetTable([]),N.current.setDataFormated(c.data.data),N.current.setIsTableSelectable(!0),_({check:"0",unCheck:"".concat(c.data.data.length),found:"".concat(c.data.data.length)}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(R.current.value,e.trim(),n)}}function $(e){R.current&&(1===R.current.selectedIndex?W(e):2===R.current.selectedIndex?K(e):3===R.current.selectedIndex&&J(e),P.current&&(P.current.value=""))}function ee(){setTimeout((function(){var e=N.current.getSelectedRow(),n=N.current.getData();_({check:e.length.toString(),unCheck:(n.length-e.length).toString(),found:n.length.toString()})}),100)}function ne(){b.current&&(b.current.disabled=!1,b.current.selectedIndex=0),R.current&&(R.current.disabled=!1,R.current.selectedIndex=0),C.current&&(C.current.disabled=!0,C.current.selectedIndex=0),P.current&&(P.current.disabled=!1,P.current.value=""),N.current.resetTable(),j("add")}function te(){var e;p().fire({title:"Are you sure you want to cancel?",text:"",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes Cancel it!"}).then((function(n){return(e=e||(0,c.Z)((0,r.Z)().mark((function e(n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.isConfirmed&&(b.current&&(b.current.disabled=!0,b.current.selectedIndex=0),R.current&&(R.current.disabled=!0,R.current.selectedIndex=0),C.current&&(C.current.disabled=!0,C.current.selectedIndex=0),P.current&&(P.current.disabled=!0,P.current.value=""),N.current.resetTable(),j(""));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}))}return(0,w.jsxs)("div",{className:"main",style:{padding:"10px",flex:1,position:"relative"},children:[(0,w.jsx)(g.Z,{title:"Treasury"}),(0,w.jsx)(B,{}),(0,w.jsx)(q,{}),(0,w.jsx)(Y,{}),(0,w.jsxs)("div",{style:{display:"flex",flexDirection:"column",rowGap:"10px",flex:1,width:"100%",height:"100%"},children:[(0,w.jsxs)("div",{className:"first-layer",style:{display:"flex",columnGap:"10px",alignItems:"center"},children:[(0,w.jsx)(h.lq,{containerClassName:"custom-input",label:{title:"PDC Status: ",style:{fontSize:"12px",fontWeight:"bold",width:"80px"}},selectRef:b,select:{disabled:!0,style:{width:"220px",height:"22px"},defaultValue:"Store in Warehouse",onKeyDown:function(e){var n;"NumpadEnter"!==e.code&&"Enter"!==e.code||(e.preventDefault(),null===(n=C.current)||void 0===n||n.focus())},onChange:function(e){2!==e.target.selectedIndex?C.current&&(C.current.selectedIndex=0):C.current&&(C.current.selectedIndex=1),C.current&&(C.current.disabled=2!==e.target.selectedIndex)}},datasource:[{key:"Store in Warehouse"},{key:"Endorse for Deposit"},{key:"Pull Out"}],values:"key",display:"key"}),(0,w.jsx)(h.lq,{containerClassName:"custom-input",label:{title:"Remarks: ",style:{fontSize:"12px",fontWeight:"bold",width:"80px",marginLeft:"10px"}},selectRef:C,select:{disabled:!0,style:{width:"190px",height:"22px"},defaultValue:"",onKeyDown:function(e){"NumpadEnter"!==e.code&&"Enter"!==e.code||e.preventDefault()}},datasource:[{key:""},{key:"Fully Paid"},{key:"Cash Replacement"},{key:"Check Replacement"},{key:"Account Closed"},{key:"Hold"},{key:"Not Renewed by Camfin"}],values:"key",display:"key"}),(0,w.jsxs)("div",{className:"desktop-ctions-buttons",style:{display:"flex",columnGap:"5px"},children:[(0,w.jsx)(s.Z,{disabled:"add"===z,sx:{height:"23px",fontSize:"11px",marginLeft:"10px"},variant:"contained",color:"info",onClick:ne,children:"New"}),(0,w.jsx)(s.Z,{disabled:"add"!==z,sx:{height:"23px",fontSize:"11px"},variant:"contained",color:"error",onClick:te,children:"Cancel"})]})]}),(0,w.jsxs)("div",{className:"second-layer",style:{display:"flex",justifyContent:"space-between"},children:[(0,w.jsxs)("div",{className:"first-content",style:{display:"flex",columnGap:"10px"},children:[(0,w.jsxs)("div",{className:"search-client-checks",style:{display:"flex",alignItems:"center",columnGap:"5px"},children:[(0,w.jsx)("div",{style:{display:"flex",columnGap:"3px",alignItems:"center"},children:(0,w.jsx)(h.lq,{containerClassName:"custom-input",label:{title:"Category : ",style:{fontSize:"12px",fontWeight:"bold",width:"80px"}},selectRef:R,select:{disabled:!0,style:{width:"190px",height:"22px"},defaultValue:"",onKeyDown:function(e){"NumpadEnter"!==e.code&&"Enter"!==e.code||e.preventDefault()}},datasource:[{key:"",value:""},{key:"Policy",value:"PNo"},{key:"ID No.",value:"IDNo"},{key:"Bank",value:"Bank"}],values:"value",display:"key"})}),(0,w.jsx)("div",{style:{display:"flex",columnGap:"10px"},children:(0,w.jsx)(h.oi,{containerStyle:{width:"400px",marginLeft:"20px"},containerClassName:"custom-input search-special",label:{title:"Search : ",style:{fontSize:"12px",fontWeight:"bold",width:"70px"}},input:{disabled:!0,type:"text",style:{width:"calc(100% - 70px)",height:"22px"},onKeyDown:function(e){"NumpadEnter"!==e.code&&"Enter"!==e.code||$(e.currentTarget.value)}},icon:(0,w.jsx)(k.Z,{sx:{fontSize:"18px"}}),onIconClick:function(e){e.preventDefault(),P.current&&$(P.current.value)},inputRef:P})})]}),(0,w.jsxs)("div",{className:"buttons-search-client-container",style:{display:"flex",columnGap:"8px",alignItems:"center"},children:[(0,w.jsx)(u.Z,{size:"small",onClick:function(){var e,n;if(2===(null===(e=b.current)||void 0===e?void 0:e.selectedIndex)&&0===(null===(n=C.current)||void 0===n?void 0:n.selectedIndex))return C.current.focus(),alert("Please provide remarks!");if("0"===T.found)return alert("No current record!");if("0"===T.check)return alert("Please select from list!");var t,a,i=["store in warehouse?","endorse for deposit?","pulled out?"];b.current&&p().fire({title:"Do you want the check(s) to be ".concat(i[b.current.selectedIndex]),text:"",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"".concat((a=i[b.current.selectedIndex],a.split(" ").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()})).join(" ")))}).then((function(e){return(t=t||(0,c.Z)((0,r.Z)().mark((function e(n){var t,a,i,l,s,u,d,h,f,x,m,y,v,S;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.isConfirmed){e.next=48;break}if(t=N.current.getSelectedRowsData(),!b.current){e.next=26;break}if(2!==b.current.selectedIndex){e.next=26;break}a=(0,o.Z)(t),e.prev=5,a.s();case 7:if((i=a.n()).done){e.next=18;break}return s=i.value,u="selecT \n                  *\n                  from pullout_request as POR \n                  left join pullout_request_details as PORD on POR.RCPNo = PORD.RCPNo \n                  where PNNo ='".concat(s[0],"' and  checkNo ='").concat(s[5],"' and status ='APPROVED'"),e.next=12,M(u);case 12:if(d=e.sent,!((null===(l=d.data)||void 0===l?void 0:l.data.length)<=0)){e.next=16;break}return alert("PN No. : ".concat(s[0]," Check No.: ").concat(s[5]," don't have pullout approval!")),e.abrupt("return");case 16:e.next=7;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(5),a.e(e.t0);case 23:return e.prev=23,a.f(),e.finish(23);case 26:h=["Stored","Endorsed","Pulled Out"],f=["Date_Stored","Date_Endorsed","Date_Pulled_Out"],x=(0,o.Z)(t),e.prev=29,x.s();case 31:if((m=x.n()).done){e.next=39;break}if(y=m.value,!b.current||!C.current){e.next=37;break}return v="\n                 UPDATE \n                pdc  SET \n                  PDC_Status = '".concat(h[b.current.selectedIndex],"' ,\n                  ").concat(f[b.current.selectedIndex]," = now() \n                  ").concat(2===b.current.selectedIndex?", PDC_Remarks = '".concat(C.current.value,"'"):"","\n                WHERE \n                  PNo = '").concat(y[0],"' AND \n                  IDNo = '").concat(y[1],"' AND \n                  DATE_FORMAT(Date,'%m/%d/%Y') = '").concat(y[2],"' AND\n                  Name = '").concat(y[3],"' AND \n                  DATE_FORMAT(Check_Date,'%m/%d/%Y') = '").concat(y[4],"' AND \n                  Check_No = '").concat(y[5],"' AND \n                  Check_Amnt = '").concat(y[6],"' AND \n                  Bank = '").concat(y[7],"' AND \n                  PDC_Status = '").concat(y[8],"'\n                "),e.next=37,M(v);case 37:e.next=31;break;case 39:e.next=44;break;case 41:e.prev=41,e.t1=e.catch(29),x.e(e.t1);case 44:return e.prev=44,x.f(),e.finish(44);case 47:b.current&&C.current&&(S=["Stored In Warehouse!","Endorsed for Deposit!","Pulled Out As ".concat(C.current.value)],p().fire({text:"Successfully ".concat(S[b.current.selectedIndex]),icon:"success",timer:1500}).then((0,c.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(N.current.isTableSelectable){e.next=3;break}return ne(),e.abrupt("return");case 3:P.current&&Q(P.current.value);case 4:case"end":return e.stop()}}),e)})))));case 48:case"end":return e.stop()}}),e,null,[[5,20,23,26],[29,41,44,47]])})))).apply(this,arguments)}))},children:(0,w.jsx)(f.Z,{color:"success"})}),(0,w.jsx)(u.Z,{size:"small",color:"primary",children:(0,w.jsx)(x.Z,{})}),(0,w.jsx)(s.Z,{className:"check-for-pull-out-mobile",sx:{height:"23px",fontSize:"11px",marginLeft:"10px",bgcolor:v.Z[600],"&:hover":{bgcolor:v.Z[700]}},variant:"contained",onClick:function(){var e;null===(e=S.current)||void 0===e||e.showModal(),(0,I.wait)(100).then((function(){var e;null===(e=S.current)||void 0===e||e.mutate()}))},children:"Check for pull-out"})]})]}),(0,w.jsx)("div",{className:"second-content",children:(0,w.jsx)(s.Z,{className:"check-for-pull-out-desktop",sx:{height:"23px",fontSize:"11px",marginLeft:"10px",bgcolor:v.Z[600],"&:hover":{bgcolor:v.Z[700]}},variant:"contained",onClick:function(){var e;null===(e=S.current)||void 0===e||e.showModal(),(0,I.wait)(100).then((function(){var e;null===(e=S.current)||void 0===e||e.mutate()}))},children:"Check for pull-out"})})]}),(0,w.jsxs)("div",{style:{flex:1},children:[(0,w.jsx)(m.O0,{ref:N,columns:D,containerStyle:{flex:1,height:"calc(100% - 30px)"},getSelectedItem:function(e,n){ee()},onCheckAll:function(){var e=N.current.getData();N.current.setSelectedRow(e.map((function(e,n){return n}))),ee()},onUnCheckAll:function(){ee(),N.current.setSelectedRow([])}}),(0,w.jsxs)("div",{style:{height:"30px",display:"flex",justifyContent:"space-between",padding:"0 50px",alignItems:"center"},children:[(0,w.jsxs)("div",{style:{display:"flex",columnGap:"10px",fontSize:"13px",fontWeight:"bold"},children:[(0,w.jsx)("span",{children:"Check:"}),(0,w.jsx)("span",{children:T.check})]}),(0,w.jsxs)("div",{style:{display:"flex",columnGap:"10px",fontSize:"13px",fontWeight:"bold"},children:[(0,w.jsx)("span",{children:"Uncheck:"}),(0,w.jsx)("span",{children:T.unCheck})]}),(0,w.jsxs)("div",{style:{display:"flex",columnGap:"10px",fontSize:"13px",fontWeight:"bold"},children:[(0,w.jsx)("span",{children:"Record Found:"}),(0,w.jsx)("span",{children:T.found})]})]})]})]}),(0,w.jsx)(A,{ref:S,handleOnSave:function(){S.current.getRefs()},handleOnClose:function(){},getSelectedItem:function(e){return(d=d||(0,c.Z)((0,r.Z)().mark((function e(n){var t,a,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=22;break}if(!b.current||"Pull Out"===b.current.value){e.next=3;break}return e.abrupt("return",alert("Status should be for pull-out!"));case 3:if(!C.current||null!==C.current.value&&""!==C.current.value){e.next=5;break}return e.abrupt("return",alert("No remarks selected!"));case 5:return e.next=7,M("\n              Select \n                CheckNo \n              From pullout_request a \n              Inner join pullout_request_details b  on a.RCPNo = b.RCPNo \n              Where a.Status = 'APPROVED' \n              And a.RCPNo = '".concat(n[1],"'"));case 7:if(t=e.sent,a=t.data,!((o=a.data.map((function(e){return e.CheckNo}))).length>0)){e.next=19;break}b.current&&(b.current.value="Pull Out"),R.current&&(R.current.value="PNo"),C.current&&(C.current.value=n[5]),P.current&&(P.current.value=n[2]),P.current&&Q(P.current.value),(0,I.wait)(100).then((function(){var e=N.current.getData(),n=e.map((function(e,n){return o.includes(e[5])?n:null}));N.current.setSelectedRow(n),N.current.setIsTableSelectable(!1),N.current.setSelectedRow(e.map((function(e,n){return n}))),_({check:o.length,unCheck:"".concat(e.length-o.length),found:e.length})})),e.next=20;break;case 19:return e.abrupt("return",alert("No request for pull-out!"));case 20:e.next=22;break;case 22:S.current.closeDelay();case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}),(0,w.jsxs)("div",{className:"mobile-ctions-buttons",children:[(0,w.jsx)(s.Z,{disabled:"add"===z,sx:{height:"23px",fontSize:"11px",marginLeft:"10px"},variant:"contained",color:"info",onClick:ne,children:"New"}),(0,w.jsx)(s.Z,{disabled:"add"!==z,sx:{height:"23px",fontSize:"11px"},variant:"contained",color:"error",onClick:te,children:"Cancel"})]})]})}var A=(0,l.forwardRef)((function(e,n){e.handleOnSave;var t,o,s=e.handleOnClose,u=e.getSelectedItem,d=(0,l.useRef)(null),p=(0,l.useRef)(!1),f=(0,l.useRef)({x:0,y:0}),x=(0,l.useContext)(b.V),y=x.user,v=x.myAxios,I=(0,l.useState)(!1),g=(0,i.Z)(I,2),D=g[0],R=g[1],A=(0,l.useState)(!1),P=(0,i.Z)(A,2),E=P[0],O=P[1],T=(0,l.useState)(!1),_=(0,i.Z)(T,2),Z=_[0],L=_[1],z=(0,l.useRef)(null),j=(0,l.useRef)(null),M=function(){O(!0),setTimeout((function(){R(!1),O(!1),s()}),100)};(0,l.useImperativeHandle)(n,(function(){return{showModal:function(){R(!0)},clsoeModal:function(){R(!1)},getRefs:function(){return{rcpnRef:j}},mutate:function(){var e;W({RCPNo:null===(e=j.current)||void 0===e?void 0:e.value})},closeDelay:M}}));var F=(0,S.useMutation)({mutationKey:"load-list",mutationFn:function(e){return(t=t||(0,c.Z)((0,r.Z)().mark((function e(n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.post("/task/accounting/warehouse/load-list",n,{headers:{Authorization:"Bearer ".concat(null===y||void 0===y?void 0:y.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){z.current.setDataFormated(e.data.list.map((function(e,n){return(0,a.Z)({row_count:n+1},e)})))}}),B=F.isLoading,W=F.mutate,U=(0,m._j)({link:"/task/accounting/warehouse/get-pullout-rcpno",column:[{key:"RCPNo",headerName:"RCPNo",width:200}],getSelectedItem:function(e,n,t,a){return(o=o||(0,c.Z)((0,r.Z)().mark((function e(n,t,a,o){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n&&(j.current&&(j.current.value=n[0]),W({RCPNo:n[0]}),K());case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}),V=U.UpwardTableModalSearch,q=U.openModal,K=U.closeModal,H=function(e){p.current&&d.current&&(d.current.style.left="".concat(e.clientX-f.current.x,"px"),d.current.style.top="".concat(e.clientY-f.current.y,"px"))},G=function e(){p.current=!1,document.removeEventListener("mousemove",H),document.removeEventListener("mouseup",e)};return D?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("div",{style:{position:"fixed",top:0,bottom:0,left:0,right:0,background:"transparent",zIndex:"88"},onClick:function(){L(!0),setTimeout((function(){L(!1)}),250)}}),B&&(0,w.jsx)(C.g,{}),(0,w.jsxs)("div",{className:"modal-pullout",ref:d,style:{height:Z?"402px":"400px",width:Z?"60.3%":"60%",border:"1px solid #64748b",position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -75%)",display:"flex",flexDirection:"column",zIndex:E?-100:100,opacity:E?0:1,transition:"all 150ms",boxShadow:"3px 6px 32px -7px rgba(0,0,0,0.75)"},children:[(0,w.jsxs)("div",{style:{height:"22px",background:"white",display:"flex",justifyContent:"space-between",padding:"5px",position:"relative",alignItems:"center",cursor:"grab"},onMouseDown:function(e){d.current&&(p.current=!0,f.current={x:e.clientX-d.current.offsetLeft,y:e.clientY-d.current.offsetTop},document.addEventListener("mousemove",H),document.addEventListener("mouseup",G))},children:[(0,w.jsx)("span",{style:{fontSize:"13px",fontWeight:"bold"},children:"Pull Out Viewer"}),(0,w.jsx)("button",{className:"btn-check-exit-modal",style:{padding:"0 5px",borderRadius:"0px",background:"white",color:"black",height:"22px",position:"absolute",top:0,right:0},onClick:function(){M()},children:(0,w.jsx)(N.Z,{sx:{fontSize:"22px"}})})]}),(0,w.jsx)("div",{style:{flex:1,background:"#F1F1F1",padding:"5px",display:"flex"},children:(0,w.jsxs)("div",{style:{width:"100%",display:"flex",flexDirection:"column",rowGap:"5px",padding:"10px"},children:[(0,w.jsx)(h.oi,{containerStyle:{width:"400px",marginLeft:"20px"},containerClassName:"custom-input search-special",label:{title:"Search : ",style:{fontSize:"12px",fontWeight:"bold",width:"70px"}},input:{type:"text",style:{width:"calc(100% - 70px)",height:"22px"},onKeyDown:function(e){"NumpadEnter"!==e.code&&"Enter"!==e.code||q(e.currentTarget.value)}},icon:(0,w.jsx)(k.Z,{sx:{fontSize:"18px"}}),onIconClick:function(e){e.preventDefault(),j.current&&q(j.current.value)},inputRef:j}),(0,w.jsx)(m.O0,{ref:z,columns:[{key:"row_count",label:"#",width:35},{key:"RCPNo",label:"RCP No.",width:100},{key:"PNNo",label:"PN No.",width:150},{key:"Name",label:"Name",width:250},{key:"NoOfChecks",label:"# of Checks",width:70},{key:"Reason",label:"Reason",width:150}],rows:[],containerStyle:{flex:1},getSelectedItem:function(e){u(e)},onCheckAll:function(){var e=z.current.getData().map((function(e,n){return"--"!==e.RCPNO&&""!==e.RCPNO&&"APPROVED"!==e.Status?n:null})).filter((function(e){return null!==e}));z.current.setSelectedRow(e)},onUnCheckAll:function(){z.current.setSelectedRow([])}})]})}),(0,w.jsx)("style",{children:"\n              .btn-check-exit-modal:hover{\n                background:red !important;\n                color:white !important;\n              }\n            "})]}),(0,w.jsx)(V,{})]}):null}))},59332:function(e,n,t){var a=t(64836);n.Z=void 0;var o=a(t(45649)),r=t(80184),c=(0,o.default)((0,r.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 3c1.93 0 3.5 1.57 3.5 3.5S13.93 13 12 13s-3.5-1.57-3.5-3.5S10.07 6 12 6zm7 13H5v-.23c0-.62.28-1.2.76-1.58C7.47 15.82 9.64 15 12 15s4.53.82 6.24 2.19c.48.38.76.97.76 1.58V19z"}),"AccountBox");n.Z=c},1724:function(e,n,t){var a=t(64836);n.Z=void 0;var o=a(t(45649)),r=t(80184),c=(0,o.default)((0,r.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"}),"Assessment");n.Z=c},15020:function(e,n,t){var a=t(64836);n.Z=void 0;var o=a(t(45649)),r=t(80184),c=(0,o.default)((0,r.jsx)("path",{d:"M21 12.4V7l-4-4H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h7.4l8.6-8.6zM15 15c0 1.66-1.34 3-3 3s-3-1.34-3-3 1.34-3 3-3 3 1.34 3 3zM6 6h9v4H6V6zm13.99 10.25 1.77 1.77L16.77 23H15v-1.77l4.99-4.98zm3.26.26-.85.85-1.77-1.77.85-.85c.2-.2.51-.2.71 0l1.06 1.06c.2.2.2.52 0 .71z"}),"SaveAs");n.Z=c},36151:function(e,n,t){t.d(n,{Z:function(){return w}});var a=t(4942),o=t(63366),r=t(87462),c=t(72791),i=t(63733),l=t(35735),s=t(94419),u=t(12065),d=t(66934),p=t(31402),h=t(95080),f=t(14036),x=t(75878),m=t(21217);function y(e){return(0,m.Z)("MuiButton",e)}var v=(0,x.Z)("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]);var N=c.createContext({}),S=t(80184),b=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],C=function(e){return(0,r.Z)({},"small"===e.size&&{"& > *:nth-of-type(1)":{fontSize:18}},"medium"===e.size&&{"& > *:nth-of-type(1)":{fontSize:20}},"large"===e.size&&{"& > *:nth-of-type(1)":{fontSize:22}})},I=(0,d.ZP)(h.Z,{shouldForwardProp:function(e){return(0,d.FO)(e)||"classes"===e},name:"MuiButton",slot:"Root",overridesResolver:function(e,n){var t=e.ownerState;return[n.root,n[t.variant],n["".concat(t.variant).concat((0,f.Z)(t.color))],n["size".concat((0,f.Z)(t.size))],n["".concat(t.variant,"Size").concat((0,f.Z)(t.size))],"inherit"===t.color&&n.colorInherit,t.disableElevation&&n.disableElevation,t.fullWidth&&n.fullWidth]}})((function(e){var n,t,o,c=e.theme,i=e.ownerState,l="light"===c.palette.mode?c.palette.grey[300]:c.palette.grey[800],s="light"===c.palette.mode?c.palette.grey.A100:c.palette.grey[700];return(0,r.Z)({},c.typography.button,(n={minWidth:64,padding:"6px 16px",borderRadius:(c.vars||c).shape.borderRadius,transition:c.transitions.create(["background-color","box-shadow","border-color","color"],{duration:c.transitions.duration.short}),"&:hover":(0,r.Z)({textDecoration:"none",backgroundColor:c.vars?"rgba(".concat(c.vars.palette.text.primaryChannel," / ").concat(c.vars.palette.action.hoverOpacity,")"):(0,u.Fq)(c.palette.text.primary,c.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"text"===i.variant&&"inherit"!==i.color&&{backgroundColor:c.vars?"rgba(".concat(c.vars.palette[i.color].mainChannel," / ").concat(c.vars.palette.action.hoverOpacity,")"):(0,u.Fq)(c.palette[i.color].main,c.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"outlined"===i.variant&&"inherit"!==i.color&&{border:"1px solid ".concat((c.vars||c).palette[i.color].main),backgroundColor:c.vars?"rgba(".concat(c.vars.palette[i.color].mainChannel," / ").concat(c.vars.palette.action.hoverOpacity,")"):(0,u.Fq)(c.palette[i.color].main,c.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"contained"===i.variant&&{backgroundColor:c.vars?c.vars.palette.Button.inheritContainedHoverBg:s,boxShadow:(c.vars||c).shadows[4],"@media (hover: none)":{boxShadow:(c.vars||c).shadows[2],backgroundColor:(c.vars||c).palette.grey[300]}},"contained"===i.variant&&"inherit"!==i.color&&{backgroundColor:(c.vars||c).palette[i.color].dark,"@media (hover: none)":{backgroundColor:(c.vars||c).palette[i.color].main}}),"&:active":(0,r.Z)({},"contained"===i.variant&&{boxShadow:(c.vars||c).shadows[8]})},(0,a.Z)(n,"&.".concat(v.focusVisible),(0,r.Z)({},"contained"===i.variant&&{boxShadow:(c.vars||c).shadows[6]})),(0,a.Z)(n,"&.".concat(v.disabled),(0,r.Z)({color:(c.vars||c).palette.action.disabled},"outlined"===i.variant&&{border:"1px solid ".concat((c.vars||c).palette.action.disabledBackground)},"contained"===i.variant&&{color:(c.vars||c).palette.action.disabled,boxShadow:(c.vars||c).shadows[0],backgroundColor:(c.vars||c).palette.action.disabledBackground})),n),"text"===i.variant&&{padding:"6px 8px"},"text"===i.variant&&"inherit"!==i.color&&{color:(c.vars||c).palette[i.color].main},"outlined"===i.variant&&{padding:"5px 15px",border:"1px solid currentColor"},"outlined"===i.variant&&"inherit"!==i.color&&{color:(c.vars||c).palette[i.color].main,border:c.vars?"1px solid rgba(".concat(c.vars.palette[i.color].mainChannel," / 0.5)"):"1px solid ".concat((0,u.Fq)(c.palette[i.color].main,.5))},"contained"===i.variant&&{color:c.vars?c.vars.palette.text.primary:null==(t=(o=c.palette).getContrastText)?void 0:t.call(o,c.palette.grey[300]),backgroundColor:c.vars?c.vars.palette.Button.inheritContainedBg:l,boxShadow:(c.vars||c).shadows[2]},"contained"===i.variant&&"inherit"!==i.color&&{color:(c.vars||c).palette[i.color].contrastText,backgroundColor:(c.vars||c).palette[i.color].main},"inherit"===i.color&&{color:"inherit",borderColor:"currentColor"},"small"===i.size&&"text"===i.variant&&{padding:"4px 5px",fontSize:c.typography.pxToRem(13)},"large"===i.size&&"text"===i.variant&&{padding:"8px 11px",fontSize:c.typography.pxToRem(15)},"small"===i.size&&"outlined"===i.variant&&{padding:"3px 9px",fontSize:c.typography.pxToRem(13)},"large"===i.size&&"outlined"===i.variant&&{padding:"7px 21px",fontSize:c.typography.pxToRem(15)},"small"===i.size&&"contained"===i.variant&&{padding:"4px 10px",fontSize:c.typography.pxToRem(13)},"large"===i.size&&"contained"===i.variant&&{padding:"8px 22px",fontSize:c.typography.pxToRem(15)},i.fullWidth&&{width:"100%"})}),(function(e){var n;return e.ownerState.disableElevation&&(n={boxShadow:"none","&:hover":{boxShadow:"none"}},(0,a.Z)(n,"&.".concat(v.focusVisible),{boxShadow:"none"}),(0,a.Z)(n,"&:active",{boxShadow:"none"}),(0,a.Z)(n,"&.".concat(v.disabled),{boxShadow:"none"}),n)})),g=(0,d.ZP)("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:function(e,n){var t=e.ownerState;return[n.startIcon,n["iconSize".concat((0,f.Z)(t.size))]]}})((function(e){var n=e.ownerState;return(0,r.Z)({display:"inherit",marginRight:8,marginLeft:-4},"small"===n.size&&{marginLeft:-2},C(n))})),k=(0,d.ZP)("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:function(e,n){var t=e.ownerState;return[n.endIcon,n["iconSize".concat((0,f.Z)(t.size))]]}})((function(e){var n=e.ownerState;return(0,r.Z)({display:"inherit",marginRight:-4,marginLeft:8},"small"===n.size&&{marginRight:-2},C(n))})),w=c.forwardRef((function(e,n){var t=c.useContext(N),a=(0,l.Z)(t,e),u=(0,p.Z)({props:a,name:"MuiButton"}),d=u.children,h=u.color,x=void 0===h?"primary":h,m=u.component,v=void 0===m?"button":m,C=u.className,w=u.disabled,D=void 0!==w&&w,R=u.disableElevation,A=void 0!==R&&R,P=u.disableFocusRipple,E=void 0!==P&&P,O=u.endIcon,T=u.focusVisibleClassName,_=u.fullWidth,Z=void 0!==_&&_,L=u.size,z=void 0===L?"medium":L,j=u.startIcon,M=u.type,F=u.variant,B=void 0===F?"text":F,W=(0,o.Z)(u,b),U=(0,r.Z)({},u,{color:x,component:v,disabled:D,disableElevation:A,disableFocusRipple:E,fullWidth:Z,size:z,type:M,variant:B}),V=function(e){var n=e.color,t=e.disableElevation,a=e.fullWidth,o=e.size,c=e.variant,i=e.classes,l={root:["root",c,"".concat(c).concat((0,f.Z)(n)),"size".concat((0,f.Z)(o)),"".concat(c,"Size").concat((0,f.Z)(o)),"inherit"===n&&"colorInherit",t&&"disableElevation",a&&"fullWidth"],label:["label"],startIcon:["startIcon","iconSize".concat((0,f.Z)(o))],endIcon:["endIcon","iconSize".concat((0,f.Z)(o))]},u=(0,s.Z)(l,y,i);return(0,r.Z)({},i,u)}(U),q=j&&(0,S.jsx)(g,{className:V.startIcon,ownerState:U,children:j}),K=O&&(0,S.jsx)(k,{className:V.endIcon,ownerState:U,children:O});return(0,S.jsxs)(I,(0,r.Z)({ownerState:U,className:(0,i.Z)(t.className,V.root,C),component:v,disabled:D,focusRipple:!E,focusVisibleClassName:(0,i.Z)(V.focusVisible,T),ref:n,type:M},W,{classes:V,children:[q,d,K]}))}))}}]);
//# sourceMappingURL=1842.0af97168.chunk.js.map