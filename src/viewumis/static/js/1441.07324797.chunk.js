"use strict";(self.webpackChunkupward=self.webpackChunkupward||[]).push([[1441],{70272:function(e,t,n){var r=n(54270),o=n(80184);t.Z=function(e){var t=e.title,n=void 0===t?"":t;return(0,o.jsxs)(r.q,{children:[(0,o.jsx)("title",{children:"".concat("UMIS"," - ").concat(n)}),(0,o.jsx)("link",{rel:"icon",type:"image/png",href:"".concat("/","/logo.png")})]})}},1441:function(e,t,n){n.r(t),n.d(t,{Autocomplete:function(){return B},AutocompleteNumber:function(){return L},chartColumn:function(){return M},default:function(){return P},reducer:function(){return _}});var r=n(93433),o=n(74165),i=n(15861),a=n(29439),u=n(4942),c=n(1413),l=n(72791),s=n(36151),d=n(39709),f=n(42419),p=n(53329),h=n(29823),v=n(21830),x=n.n(v),y=n(3380),g=n(86753),w=n(91933),m=n(79018),b=n(64230),k=n(70272),D=n(15703),S=n(30948),C=n(16386),Z=n(637),j=n(11690),N=n(5403),T=n(65413),I=n(85172),A=n(54164),R=n(91421),E=n(80184),_=function(e,t){return"UPDATE_FIELD"===t.type?(0,c.Z)((0,c.Z)({},e),{},(0,u.Z)({},t.field,t.value)):e},z=[{key:"purpose",label:"Purpose",width:400},{key:"amount",label:"Amount",width:140},{key:"usage",label:"Usage",width:450},{key:"accountID",label:"Account ID",width:400},{key:"sub_account",label:"Sub Account",width:120},{key:"clientID",label:"ID No",width:140},{key:"clientName",label:"Name",width:350},{key:"accountCode",label:"Accoount Code",width:130},{key:"accountShort",label:"Account Short",width:300},{key:"vatType",label:"Vat Type",width:100},{key:"invoice",label:"Invoice",width:200},{key:"TempID",label:"TempId",hide:!0}],M=[{field:"Acct_Code",headerName:"Code",flex:1},{field:"Acct_Title",headerName:"Title",flex:1},{field:"Short",headerName:"Short Name",flex:1}];function P(){var e,t,n,u,c,v,I,A=(0,l.useContext)(y.V),_=A.myAxios,M=A.user,P=(0,l.useState)(""),L=(0,a.Z)(P,2),K=L[0],F=L[1],W=(0,Z.Z)().executeQueryToClient,V=(0,l.useRef)(null),U=(0,l.useRef)(null),O=(0,l.useRef)(""),q=(0,l.useRef)(null),G=(0,l.useRef)(null),Y=(0,l.useRef)(null),H=(0,l.useRef)(null),Q=(0,l.useRef)(null),J=(0,l.useRef)(null),$=(0,l.useRef)(null),X=(0,l.useRef)(null),ee=(0,l.useRef)(null),te=((0,l.useRef)(null),(0,l.useRef)("")),ne=(0,l.useRef)(""),re=(0,l.useRef)(""),oe=(0,l.useRef)(""),ie=""===K,ae=(0,w.useQuery)({queryKey:"petty-cash-id-generator",queryFn:function(){return(e=e||(0,i.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.get("/task/accounting/get-petty-cash-id",{headers:{Authorization:"Bearer ".concat(null===M||void 0===M?void 0:M.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},refetchOnWindowFocus:!1,onSuccess:function(e){var t=e;(0,m.D)(100).then((function(){O.current=t.data.pettyCashId[0].petty_cash_id,q.current&&(q.current.value=t.data.pettyCashId[0].petty_cash_id)}))}}),ue=ae.isLoading,ce=ae.refetch,le=(0,w.useMutation)({mutationKey:"add-update-petty-cash",mutationFn:function(e){return(t=t||(0,i.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.post("/task/accounting/add-petty-cash",t,{headers:{Authorization:"Bearer ".concat(null===M||void 0===M?void 0:M.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t=e;return t.data.success?(me(),x().fire({position:"center",icon:"success",title:t.data.message,timer:1500})):x().fire({position:"center",icon:"warning",title:t.data.message,timer:1500})}}),se=le.isLoading,de=le.mutate,fe=(0,w.useMutation)({mutationKey:"load-selected-petty-cash",mutationFn:function(e){return(n=n||(0,i.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.post("/task/accounting/load-selected-petty-cash",t,{headers:{Authorization:"Bearer ".concat(null===M||void 0===M?void 0:M.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t=e.data.loadSelectedPettyCash;O.current=t[0].PC_No,q.current&&(q.current.value=t[0].PC_No),G.current&&(G.current.value=(0,C.Z)(new Date(t[0].PC_Date),"yyyy-MM-dd")),Y.current&&(Y.current.value=t[0].Payee),H.current&&(H.current.value=t[0].Explanation),V.current.setDataFormated(t)}}),pe=fe.isLoading,he=fe.mutate,ve=(0,w.useQuery)({queryKey:"load-transcation",queryFn:function(){return(u=u||(0,i.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.get("/task/accounting/load-transcation",{headers:{Authorization:"Bearer ".concat(null===M||void 0===M?void 0:M.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},refetchOnWindowFocus:!1}),xe=ve.isLoading,ye=ve.data;function ge(){return(c=c||(0,i.Z)((0,o.Z)().mark((function e(){var t,n,i;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Q.current||""!==Q.current.value){e.next=2;break}return e.abrupt("return",x().fire({position:"center",icon:"warning",title:"Please provide transaction",timer:1500}).then((function(){(0,m.D)(300).then((function(){var e;null===(e=Q.current)||void 0===e||e.focus()}))})));case 2:if(""!==re.current){e.next=4;break}return e.abrupt("return",x().fire({position:"center",icon:"warning",title:"Please provide usage",timer:1500}).then((function(){(0,m.D)(300).then((function(){J.current&&je(J.current.value)}))})));case 4:if(!$.current||!(""===$.current.value||parseFloat($.current.value.replace(/,/g,""))<1)){e.next=6;break}return e.abrupt("return",x().fire({position:"center",icon:"warning",title:"Please provide proper amount",timer:1500}).then((function(){(0,m.D)(300).then((function(){var e;null===(e=$.current)||void 0===e||e.focus()}))})));case 6:return e.next=8,W("\n         SELECT DISTINCT\n              Chart_Account.Acct_Code,\n              Chart_Account.Acct_Title,\n              Chart_Account.Short\n          FROM\n              Petty_Log\n                  LEFT JOIN\n              Chart_Account ON Petty_Log.Acct_Code = Chart_Account.Acct_Code\n          WHERE\n              Petty_Log.Acct_Code = '".concat(te.current,"'\n      "));case 8:t=e.sent,null!==(n=V.current.getSelectedRow())&&((i=V.current.getData()).splice(n,1),V.current.setData(i)),(0,m.D)(100).then((function(){var e,o,i,a,u,c,l=V.current.getData(),s=[null===(e=Q.current)||void 0===e?void 0:e.value,null===(o=$.current)||void 0===o?void 0:o.value,"".concat(null===(i=J.current)||void 0===i?void 0:i.value," > ").concat(re.current," > ").concat(oe.current),"".concat(t.data.data[0].Short," > ").concat(t.data.data[0].Acct_Code),oe.current,re.current,null===(a=J.current)||void 0===a?void 0:a.value,t.data.data[0].Acct_Code,t.data.data[0].Short,null===(u=X.current)||void 0===u?void 0:u.value,null===(c=ee.current)||void 0===c?void 0:c.value];null!==n?(l.splice(n,0,s),V.current.setData(l),V.current.setSelectedRow(null),V.current.resetCheckBox()):(V.current.setData([].concat((0,r.Z)(l),[s])),V.current.setSelectedRow(null),V.current.resetCheckBox()),we(),Q.current&&Q.current.focus()}));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function we(){setTimeout((function(){Q.current&&(Q.current.value=""),$.current&&($.current.value=""),J.current&&(J.current.value=""),X.current&&(X.current.value="NON-VAT"),ee.current&&(ee.current.value=""),oe.current="",re.current="",te.current="",ne.current=""}),100)}function me(){F(""),ce(),setTimeout((function(){ce(),G.current&&(G.current.value=(0,C.Z)(new Date,"yyyy-MM-dd")),Y.current&&(Y.current.value=""),H.current&&(H.current.value="")}),100),we(),V.current.setData([])}var be=(0,j._j)({link:"/task/accounting/search-petty-cash",column:[{key:"PC_Date",label:"Type",width:130},{key:"PC_No",label:"ID No.",width:200},{key:"Payee",label:"Name",flex:1},{key:"Explanation",label:"ID",flex:1},{key:"Explanation",label:"ID",flex:1,hide:!0}],getSelectedItem:function(e,t,n,r){return(v=v||(0,i.Z)((0,o.Z)().mark((function e(t,n,r,i){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&((0,m.D)(100).then((function(){he({PC_No:t[1]})})),F("edit"),Se());case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}),ke=be.UpwardTableModalSearch,De=be.openModal,Se=be.closeModal,Ce=(0,j._j)({size:"large",link:"/task/accounting/search-pdc-policy-id",column:[{key:"Type",label:"Type",width:100},{key:"IDNo",label:"ID No.",width:120},{key:"Name",label:"Name",width:350},{key:"chassis",label:"Chassis No.",width:200},{key:"remarks",label:"remarks",width:0,hide:!0},{key:"client_id",label:"client_id",width:0,hide:!0},{key:"Acronym",label:"Acronym",width:0,hide:!0},{key:"sub_account",label:"sub_account",width:0,hide:!0}],getSelectedItem:function(e,t,n,r){return(I=I||(0,i.Z)((0,o.Z)().mark((function e(t,n,r,i){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&((0,m.D)(100).then((function(){re.current=t[1],oe.current=t[6],J.current&&(J.current.value=t[2])})),(0,m.D)(200).then((function(){var e;$.current&&(null===(e=$.current)||void 0===e||e.focus(),$.current.value="")})),Ne());case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}),Ze=Ce.UpwardTableModalSearch,je=Ce.openModal,Ne=Ce.closeModal;return(0,E.jsxs)(E.Fragment,{children:[(pe||se)&&(0,E.jsx)(T.g,{}),(0,E.jsx)(k.Z,{title:"Petty Cash"}),(0,E.jsx)(ke,{}),(0,E.jsx)(Ze,{}),(0,E.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"100%",height:"100%",flex:1,padding:"5px",background:"#F1F1F1"},children:[(0,E.jsxs)("div",{style:{display:"flex",alignItems:"center",columnGap:"5px",marginBottom:"10px"},children:[(0,E.jsx)(D.oi,{label:{title:"Search: ",style:{fontSize:"12px",fontWeight:"bold",width:"50px"}},input:{className:"search-input-up-on-key-down",type:"search",onKeyDown:function(e){("Enter"!==e.key&&"NumpadEnter"!==e.key||(e.preventDefault(),De(e.currentTarget.value)),"ArrowDown"===e.key)&&(e.preventDefault(),document.querySelector(".grid-container").focus())},style:{width:"500px"}},icon:(0,E.jsx)(N.Z,{sx:{fontSize:"18px"}}),onIconClick:function(e){e.preventDefault(),U.current&&De(U.current.value)},inputRef:U}),""===K&&(0,E.jsx)(s.Z,{sx:{height:"30px",fontSize:"11px"},variant:"contained",startIcon:(0,E.jsx)(f.Z,{sx:{width:15,height:15}}),id:"entry-header-save-button",onClick:function(){F("add")},children:"New"}),(0,E.jsx)(d.Z,{sx:{height:"30px",fontSize:"11px"},id:"save-entry-header",color:"primary",variant:"contained",type:"submit",onClick:function(){if(Y.current&&""===Y.current.value)return x().fire({position:"center",icon:"warning",title:"Please provide payee!",timer:1500}).then((function(e){(0,m.D)(300).then((function(){var e;null===(e=Y.current)||void 0===e||e.focus()}))}));if(H.current&&""===H.current.value)return x().fire({position:"center",icon:"warning",title:"Please provide explanation!",timer:1500}).then((function(e){(0,m.D)(300).then((function(){var e;null===(e=H.current)||void 0===e||e.focus()}))}));var e=V.current.getData().map((function(e){return{purpose:e[0],amount:e[1],usage:e[2],accountID:e[3],sub_account:e[4],clientID:e[5],clientName:e[6],accountCode:e[7],accountShort:e[8],vatType:e[9],invoice:e[10]}}));if(e.length<=0)return x().fire({position:"center",icon:"warning",title:"Please provide transaction entry!",timer:1500});"edit"===K?(0,b.s)({isUpdate:!0,cb:function(t){var n,r,o,i;de({refNo:null===(n=q.current)||void 0===n?void 0:n.value,datePetty:null===(r=G.current)||void 0===r?void 0:r.value,payee:null===(o=Y.current)||void 0===o?void 0:o.value,explanation:null===(i=H.current)||void 0===i?void 0:i.value,hasSelected:"edit"===K,pettyCash:e,userCodeConfirmation:t})}}):(0,b.L)({isConfirm:function(){var t,n,r,o;de({refNo:null===(t=q.current)||void 0===t?void 0:t.value,datePetty:null===(n=G.current)||void 0===n?void 0:n.value,payee:null===(r=Y.current)||void 0===r?void 0:r.value,explanation:null===(o=H.current)||void 0===o?void 0:o.value,hasSelected:"edit"===K,pettyCash:e})}})},disabled:""===K,startIcon:(0,E.jsx)(p.Z,{sx:{width:15,height:15}}),loading:se,children:"edit"===K?"Update":"Save"}),""!==K&&(0,E.jsx)(s.Z,{sx:{height:"30px",fontSize:"11px"},variant:"contained",startIcon:(0,E.jsx)(h.Z,{sx:{width:15,height:15}}),color:"error",onClick:function(){x().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, cancel it!"}).then((function(e){e.isConfirmed&&me()}))},children:"Cancel"})]}),(0,E.jsxs)("div",{style:{display:"flex",flexDirection:"row",width:"100%",borderBottom:"1px dashed  #334155",paddingBottom:"20px",gap:"50px",marginTop:"5px"},children:[(0,E.jsxs)("div",{style:{display:"flex",flexDirection:"column",rowGap:"10px"},children:[ue?(0,E.jsx)(d.Z,{loading:ue}):(0,E.jsx)(D.oi,{label:{title:"Ref. No. : ",style:{fontSize:"12px",fontWeight:"bold",width:"80px"}},input:{disabled:ie,type:"text",style:{width:"200px"},readOnly:!0,onKeyDown:function(e){var t;"NumpadEnter"!==e.code&&"Enter"!==e.code||(null===(t=G.current)||void 0===t||t.focus())}},icon:(0,E.jsx)(g.Z,{sx:{fontSize:"18px"}}),onIconClick:function(e){e.preventDefault(),ce()},inputRef:q}),(0,E.jsx)(D.oi,{label:{title:"Deposit Date: ",style:{fontSize:"12px",fontWeight:"bold",width:"80px"}},input:{defaultValue:(0,C.Z)(new Date,"yyyy-MM-dd"),className:"search-input-up-on-key-down",type:"date",style:{width:"200px"},disabled:ie,onKeyDown:function(e){var t;"NumpadEnter"!==e.code&&"Enter"!==e.code||(null===(t=Y.current)||void 0===t||t.focus())}},inputRef:G})]}),(0,E.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column",rowGap:"10px"},children:[(0,E.jsx)(D.oi,{label:{title:"Payee : ",style:{fontSize:"12px",fontWeight:"bold",width:"100px"}},input:{disabled:ie,type:"text",style:{width:"400px"},onKeyDown:function(e){var t;"NumpadEnter"!==e.code&&"Enter"!==e.code||(null===(t=H.current)||void 0===t||t.focus())}},inputRef:Y}),(0,E.jsx)(D.oi,{label:{title:"Explanation : ",style:{fontSize:"12px",fontWeight:"bold",width:"100px"}},input:{disabled:ie,type:"text",style:{flex:1},onKeyDown:function(e){var t;"NumpadEnter"!==e.code&&"Enter"!==e.code||(null===(t=Q.current)||void 0===t||t.focus())}},inputRef:H})]})]}),(0,E.jsx)("div",{style:{display:"flex",flexDirection:"row",width:"100%",paddingTop:"20px",gap:"50px",borderRadius:"3px"},children:(0,E.jsxs)("div",{style:{display:"flex",flexDirection:"column",rowGap:"10px"},children:[xe?(0,E.jsx)(d.Z,{loading:xe}):(0,E.jsx)(B,{containerStyle:{width:"100%"},label:{title:"Transaction : ",style:{fontSize:"12px",fontWeight:"bold",width:"80px"}},DisplayMember:"Purpose",DataSource:null===ye||void 0===ye?void 0:ye.data.laodTranscation,disableInput:ie,inputRef:Q,input:{style:{width:"100%",flex:1}},onChange:function(e,t){Q.current&&(Q.current.value=e.Purpose),te.current=e.Acct_Code,ne.current=e.Short},onKeydown:function(e){var t;"Enter"!==e.key&&"NumpadEnter"!==e.key||(e.preventDefault(),null===(t=J.current)||void 0===t||t.focus())}}),(0,E.jsxs)("div",{style:{display:"flex",columnGap:"20px"},children:[(0,E.jsx)(D.oi,{label:{title:"Usage : ",style:{fontSize:"12px",fontWeight:"bold",width:"80px"}},input:{disabled:ie,type:"text",style:{width:"450px"},onKeyDown:function(e){"NumpadEnter"!==e.code&&"Enter"!==e.code||je(e.currentTarget.value)}},icon:(0,E.jsx)(R.Z,{sx:{fontSize:"18px",color:ie?"gray":"black"}}),onIconClick:function(e){e.preventDefault(),J.current&&je(J.current.value)},inputRef:J}),(0,E.jsxs)("div",{style:{display:"flex"},children:[(0,E.jsx)("label",{style:{fontSize:"12px",fontWeight:"bold",width:"70px"},children:"Amount :"}),(0,E.jsx)(S.h3,{disabled:ie,getInputRef:$,decimalScale:2,fixedDecimalScale:!0,style:{width:"200px"},onKeyDown:function(e){var t;"Enter"!==e.code&&"NumpadEnter"!==e.code||(e.currentTarget.value=function(e){if(""!==e&&null!==e){var t=parseFloat(e.replace(/,/g,""));return isNaN(t)?"0.00":e}return"0.00"}(e.currentTarget.value),null===(t=X.current)||void 0===t||t.focus())},onBlur:function(e){""===e.currentTarget.value&&(e.currentTarget.value="0.00")},allowNegative:!1,thousandSeparator:!0,valueIsNumericString:!0})]})]}),(0,E.jsxs)("div",{style:{display:"flex",columnGap:"20px"},children:[(0,E.jsx)(D.lq,{containerStyle:{fontSize:"12px",fontWeight:"bold"},label:{title:"VAT Type",style:{width:"80px"}},select:{defaultValue:"NON-VAT",disabled:ie,style:{width:"100% !important",flex:1,height:"100% !important",padding:0,margin:0,cursor:"pointer"},onKeyDown:function(e){var t;"Enter"!==e.code&&"NumpadEnter"!==e.code||(null===(t=ee.current)||void 0===t||t.focus())}},datasource:[{key:"NON-VAT"},{key:"VAT"}],values:"key",display:"key",selectRef:X}),(0,E.jsx)(D.oi,{label:{title:"Invoice : ",style:{fontSize:"12px",fontWeight:"bold",width:"80px"}},input:{disabled:ie,type:"text",style:{width:"270px"},onKeyDown:function(e){"NumpadEnter"!==e.code&&"Enter"!==e.code||(e.preventDefault(),ge())}},inputRef:ee}),(0,E.jsx)(s.Z,{disabled:ie,color:"success",variant:"contained",style:{gridArea:"button",height:"22px",fontSize:"12px",width:"270px"},startIcon:(0,E.jsx)(f.Z,{}),onClick:function(){ge()},children:"Save Transaction"})]})]})}),(0,E.jsx)("br",{}),(0,E.jsx)(j.BW,{containerStyle:{flex:1,height:"auto"},ref:V,width:"100%",height:"350px",columns:z,getSelectedItem:function(e,t,n,r){e?(Q.current&&(Q.current.value=e[0]),$.current&&($.current.value=e[1]),J.current&&(J.current.value=e[6]),X.current&&(X.current.value=e[9]),ee.current&&(ee.current.value=e[10]),oe.current=e[4],re.current=e[5],te.current=e[7],ne.current=e[8]):we()},onKeyDown:function(e,t,n){"Delete"!==n.code&&"Backspace"!==n.code||x().fire({title:"Are you sure?",text:"You won't to delete this Check No. ".concat(e[0]),icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(e){e.isConfirmed&&setTimeout((function(){var e=V.current.getData();e.splice(t,1),V.current.setData(e),V.current.setSelectedRow(null),V.current.resetCheckBox()}),100)}))}})]})]})}var B=(0,l.forwardRef)((function(e,t){var n=e.DisplayMember,r=e.DataSource,o=e.inputRef,i=e.disableInput,u=void 0!==i&&i,s=e.onKeydown,d=e.onChange,f=e.label,p=void 0===f?{title:"Transaction : ",style:{fontSize:"12px",fontWeight:"bold",width:"100px"}}:f,h=e.input,v=void 0===h?{width:"740px"}:h,x=e.containerStyle,y=(0,l.useState)(r),g=(0,a.Z)(y,2),w=g[0],b=g[1],k=(0,l.useState)([]),S=(0,a.Z)(k,2),C=S[0],Z=S[1],j=(0,l.useState)(!1),N=(0,a.Z)(j,2),T=N[0],R=N[1],_=(0,l.useState)(0),z=(0,a.Z)(_,2),M=z[0],P=z[1],B=(0,l.useRef)(null);(0,l.useEffect)((function(){var e,t=null===(e=B.current)||void 0===e?void 0:e.children[M];t&&t.scrollIntoView({behavior:"smooth",block:"nearest"})}),[M]);return(0,l.useImperativeHandle)(t,(function(){return{setDataSource:function(e){b(e)}}})),(0,E.jsxs)("div",{style:{width:"100%"},children:[(0,E.jsx)(D.oi,{containerStyle:x,label:p,input:(0,c.Z)((0,c.Z)({},v),{},{disabled:u,type:"text",onKeyDown:function(e){if("Tab"===e.key&&(0,A.flushSync)((function(){R(!1),Z([])})),"ArrowDown"===e.key)e.preventDefault(),P((function(e){return Math.min(e+1,C.length-1)}));else if("ArrowUp"===e.key)e.preventDefault(),P((function(e){return Math.max(e-1,0)}));else if(("Enter"===e.key||"NumpadEnter"===e.key)&&(e.preventDefault(),C.length>0)){var t=C[M];d(t,e),R(!1)}setTimeout((function(){s&&s(e)}),150)},onChange:function(e){var t=e.target.value;if(t.trim()){var r=w.filter((function(e){return e[n].toLowerCase().includes(t.toLowerCase())}));Z(r),R(!0)}else Z([]),R(!1)},onFocus:function(e){var t;e.preventDefault(),null===(t=e.currentTarget)||void 0===t||t.focus(),R(!0),Z(w),o.current&&o.current.focus()},onBlur:function(e){e.relatedTarget&&"LI"===e.relatedTarget.tagName?(0,m.D)(250).then((function(){R(!1),Z([])})):(R(!1),Z([]))}}),icon:(0,E.jsx)(I.Z,{sx:{fontSize:"18px"}}),onIconClick:function(e){o.current&&o.current.focus()},inputRef:o}),T&&C.length>0&&(0,E.jsx)("ul",{className:"suggestions",ref:B,children:C.map((function(e,t){return(0,E.jsx)("li",{tabIndex:0,onClick:function(t){R(!1),d(e,t)},className:t===M?"active":"",onMouseEnter:function(e){e.preventDefault(),P(Math.min(t,C.length-1))},children:e[n]},t)}))}),(0,E.jsx)("style",{children:"\n          .suggestions {\n            margin-top: 0;\n            padding: 0;\n            list-style: none;\n            max-height: 150px;\n            overflow-y: auto;\n            position:absolute;\n            z-index:100;\n            background:white;\n            width:350px;\n            border:1px solid #e5e7eb;\n            box-shadow: 0px 23px 32px -17px rgba(0,0,0,0.75);\n          }\n          .suggestions li {\n            padding:3px 10px;\n            cursor: pointer;\n            font-size:14px;\n          }\n          .suggestions li.active {\n            background-color: #e2e8f0;\n          }\n      \n        "})]})})),L=(0,l.forwardRef)((function(e,t){var n=e.DisplayMember,r=e.DataSource,o=e.inputRef,i=e.disableInput,u=void 0!==i&&i,s=e.onKeydown,d=e.onChange,f=e.label,p=void 0===f?{title:"Transaction : ",style:{fontSize:"12px",fontWeight:"bold",width:"100px"}}:f,h=e.input,v=void 0===h?{width:"740px"}:h,x=e.containerStyle,y=(0,l.useState)(r),g=(0,a.Z)(y,2),w=g[0],b=g[1],k=(0,l.useState)([]),S=(0,a.Z)(k,2),C=S[0],Z=S[1],j=(0,l.useState)(!1),N=(0,a.Z)(j,2),T=N[0],R=N[1],_=(0,l.useState)(0),z=(0,a.Z)(_,2),M=z[0],P=z[1],B=(0,l.useRef)(null);(0,l.useEffect)((function(){var e,t=null===(e=B.current)||void 0===e?void 0:e.children[M];t&&t.scrollIntoView({behavior:"smooth",block:"nearest"})}),[M]);var L=function(e){if(!e)return e;var t=e.split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")},K=function(e){return e.replace(/,/g,"")},F=function(e){if(e.trim()){var t=w.filter((function(t){return t[n].toLowerCase().includes(e.toLowerCase())}));Z(t),R(!0)}else Z([]),R(!1)};return(0,l.useImperativeHandle)(t,(function(){return{setDataSource:function(e){b(e)}}})),(0,E.jsxs)("div",{style:{flex:1},children:[(0,E.jsx)(D.oi,{containerStyle:x,label:p,input:(0,c.Z)((0,c.Z)({},v),{},{disabled:u,type:"text",onKeyDown:function(e){if("Tab"===e.key&&(0,A.flushSync)((function(){R(!1),Z([])})),"ArrowDown"===e.key)e.preventDefault(),P((function(e){return Math.min(e+1,C.length-1)}));else if("ArrowUp"===e.key)e.preventDefault(),P((function(e){return Math.max(e-1,0)}));else if(("Enter"===e.key||"NumpadEnter"===e.key)&&(e.preventDefault(),C.length>0)){var t=C[M];d(t,e),R(!1)}setTimeout((function(){s&&s(e)}),150)},onChange:function(e){var t=e.target.value;t=K(t);if(""===(t=K(t))||/^-?\d+(,\d{3})*(\.\d*)?$/.test(t))e.target.value=L(t);else{var n=t.match(/\d+/g);if(n){var r=n.join("");e.target.value=L(r)}else e.target.value="0"}F(e.target.value)},onFocus:function(e){var t;e.preventDefault(),null===(t=e.currentTarget)||void 0===t||t.focus(),R(!0),Z(w),o.current&&o.current.focus()},onBlur:function(e){!function(e,t){var n=K(e);n=function(e){return e.includes(".")?1===e.split(".")[1].length?e+"0":e:""===e?"0.00":e+".00"}(n),t.target.value=L(n)}(e.currentTarget.value,e),e.relatedTarget&&"LI"===e.relatedTarget.tagName?(0,m.D)(250).then((function(){R(!1),Z([])})):(R(!1),Z([]))}}),icon:(0,E.jsx)(I.Z,{sx:{fontSize:"18px"}}),onIconClick:function(e){o.current&&o.current.focus()},inputRef:o}),T&&C.length>0&&(0,E.jsx)("ul",{className:"suggestions",ref:B,children:C.map((function(e,t){return(0,E.jsx)("li",{tabIndex:0,onClick:function(t){R(!1),d(e,t)},className:t===M?"active":"",onMouseEnter:function(e){e.preventDefault(),P(Math.min(t,C.length-1))},children:e[n]},t)}))}),(0,E.jsx)("style",{children:"\n          .suggestions {\n            margin-top: 0;\n            padding: 0;\n            list-style: none;\n            max-height: 150px;\n            overflow-y: auto;\n            position:absolute;\n            z-index:100;\n            background:white;\n            width:350px;\n            border:1px solid #e5e7eb;\n            box-shadow: 0px 23px 32px -17px rgba(0,0,0,0.75);\n          }\n          .suggestions li {\n            padding:3px 10px;\n            cursor: pointer;\n            font-size:14px;\n          }\n          .suggestions li.active {\n            background-color: #e2e8f0;\n          }\n      \n        "})]})}))},85172:function(e,t,n){var r=n(64836);t.Z=void 0;var o=r(n(45649)),i=n(80184),a=(0,o.default)((0,i.jsx)("path",{d:"M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"}),"KeyboardArrowDown");t.Z=a},91421:function(e,t,n){var r=n(64836);t.Z=void 0;var o=r(n(45649)),i=n(80184),a=(0,o.default)([(0,i.jsx)("circle",{cx:"10",cy:"8",r:"4"},"0"),(0,i.jsx)("path",{d:"M10.35 14.01C7.62 13.91 2 15.27 2 18v2h9.54c-2.47-2.76-1.23-5.89-1.19-5.99zm9.08 4.01c.36-.59.57-1.28.57-2.02 0-2.21-1.79-4-4-4s-4 1.79-4 4 1.79 4 4 4c.74 0 1.43-.22 2.02-.57L20.59 22 22 20.59l-2.57-2.57zM16 18c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"},"1")],"PersonSearch");t.Z=a},86753:function(e,t,n){var r=n(64836);t.Z=void 0;var o=r(n(45649)),i=n(80184),a=(0,o.default)((0,i.jsx)("path",{d:"M12 5V2L8 6l4 4V7c3.31 0 6 2.69 6 6 0 2.97-2.17 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93 0-4.42-3.58-8-8-8zm-6 8c0-1.65.67-3.15 1.76-4.24L6.34 7.34C4.9 8.79 4 10.79 4 13c0 4.08 3.05 7.44 7 7.93v-2.02c-2.83-.48-5-2.94-5-5.91z"}),"RestartAlt");t.Z=a}}]);
//# sourceMappingURL=1441.07324797.chunk.js.map